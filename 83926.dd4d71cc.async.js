(self.webpackChunkantd=self.webpackChunkantd||[]).push([[83926],{62238:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var z=function(k,P){var N=k.nodes,D=k.edges,E=[],y={};if(!N)throw new Error("invalid nodes data!");return N&&N.forEach(function(M,_){y[M.id]=_;var m=[];E.push(m)}),D&&D.forEach(function(M){var _=M.source,m=M.target,I=y[_],A=y[m];!I&&I!==0||!A&&A!==0||(E[I][A]=1,P||(E[A][I]=1))}),E},B=z;R.default=B},810369:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"GADDIAsync",{enumerable:!0,get:function(){return B.GADDIAsync}}),Object.defineProperty(R,"connectedComponentAsync",{enumerable:!0,get:function(){return B.connectedComponentAsync}}),R.default=void 0,Object.defineProperty(R,"detectAllCyclesAsync",{enumerable:!0,get:function(){return B.detectAllCyclesAsync}}),Object.defineProperty(R,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return B.detectAllDirectedCycleAsync}}),Object.defineProperty(R,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return B.detectAllUndirectedCycleAsync}}),Object.defineProperty(R,"detectCycleAsync",{enumerable:!0,get:function(){return B.detectCycleAsync}}),R.detectDirectedCycleAsync=void 0,Object.defineProperty(R,"dijkstraAsync",{enumerable:!0,get:function(){return B.dijkstraAsync}}),Object.defineProperty(R,"findAllPathAsync",{enumerable:!0,get:function(){return B.findAllPathAsync}}),Object.defineProperty(R,"findShortestPathAsync",{enumerable:!0,get:function(){return B.findShortestPathAsync}}),Object.defineProperty(R,"floydWarshallAsync",{enumerable:!0,get:function(){return B.floydWarshallAsync}}),Object.defineProperty(R,"getAdjMatrixAsync",{enumerable:!0,get:function(){return B.getAdjMatrixAsync}}),Object.defineProperty(R,"getDegreeAsync",{enumerable:!0,get:function(){return B.getDegreeAsync}}),Object.defineProperty(R,"getInDegreeAsync",{enumerable:!0,get:function(){return B.getInDegreeAsync}}),Object.defineProperty(R,"getNeighborsAsync",{enumerable:!0,get:function(){return B.getNeighborsAsync}}),Object.defineProperty(R,"getOutDegreeAsync",{enumerable:!0,get:function(){return B.getOutDegreeAsync}}),Object.defineProperty(R,"labelPropagationAsync",{enumerable:!0,get:function(){return B.labelPropagationAsync}}),Object.defineProperty(R,"louvainAsync",{enumerable:!0,get:function(){return B.louvainAsync}}),Object.defineProperty(R,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return B.minimumSpanningTreeAsync}}),Object.defineProperty(R,"pageRankAsync",{enumerable:!0,get:function(){return B.pageRankAsync}});var B=z(430485),X=B.detectCycleAsync;R.detectDirectedCycleAsync=X;var k={getAdjMatrixAsync:B.getAdjMatrixAsync,connectedComponentAsync:B.connectedComponentAsync,getDegreeAsync:B.getDegreeAsync,getInDegreeAsync:B.getInDegreeAsync,getOutDegreeAsync:B.getOutDegreeAsync,detectCycleAsync:B.detectCycleAsync,detectDirectedCycleAsync:X,detectAllCyclesAsync:B.detectAllCyclesAsync,detectAllDirectedCycleAsync:B.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:B.detectAllUndirectedCycleAsync,dijkstraAsync:B.dijkstraAsync,findAllPathAsync:B.findAllPathAsync,findShortestPathAsync:B.findShortestPathAsync,floydWarshallAsync:B.floydWarshallAsync,labelPropagationAsync:B.labelPropagationAsync,louvainAsync:B.louvainAsync,minimumSpanningTreeAsync:B.minimumSpanningTreeAsync,pageRankAsync:B.pageRankAsync,getNeighborsAsync:B.getNeighborsAsync,GADDIAsync:B.GADDIAsync};R.default=k},683764:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=k(z(893026)),X=z(770643);function k(E){return E&&E.__esModule?E:{default:E}}function P(E){E===void 0&&(E={});var y=E,M=function(){},_=function(){var m={};return function(I){var A=I.next,O=A;return m[O]?!1:(m[O]=!0,!0)}}();return y.allowTraversal=E.allowTraversal||_,y.enter=E.enter||M,y.leave=E.leave||M,y}var N=function(y,M,_,m){m===void 0&&(m=!0);var I=P(_),A=new B.default,O=y.edges,U=O===void 0?[]:O;A.enqueue(M);for(var j="",x=function(){var it=A.dequeue();I.enter({current:it,previous:j}),(0,X.getNeighbors)(it,U,m?"target":void 0).forEach(function(Y){I.allowTraversal({previous:j,current:it,next:Y})&&A.enqueue(Y)}),I.leave({current:it,previous:j}),j=it};!A.isEmpty();)x()},D=N;R.default=D},759527:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=P,R.detectStrongConnectComponents=R.detectConnectedComponents=void 0;var B=z(770643),X=function(D){for(var E=D.nodes,y=E===void 0?[]:E,M=D.edges,_=M===void 0?[]:M,m=[],I={},A=[],O=function d(it){A.push(it),I[it.id]=!0;for(var Y=(0,B.getNeighbors)(it.id,_),W=function(rt){var J=Y[rt];if(!I[J]){var ot=y.filter(function(vt){return vt.id===J});ot.length>0&&d(ot[0])}},K=0;K<Y.length;++K)W(K)},U=0;U<y.length;U++){var j=y[U];if(!I[j.id]){O(j);for(var x=[];A.length>0;)x.push(A.pop());m.push(x)}}return m};R.detectConnectedComponents=X;var k=function(D){for(var E=D.nodes,y=E===void 0?[]:E,M=D.edges,_=M===void 0?[]:M,m=[],I={},A={},O={},U=[],j=0,x=function W(K){A[K.id]=j,O[K.id]=j,j+=1,m.push(K),I[K.id]=!0;for(var Q=(0,B.getNeighbors)(K.id,_,"target").filter(function(gt){return y.map(function(Pt){return Pt.id}).indexOf(gt)>-1}),rt=function(Pt){var It=Q[Pt];if(!A[It]&&A[It]!==0){var Jt=y.filter(function(zt){return zt.id===It});Jt.length>0&&W(Jt[0]),O[K.id]=Math.min(O[K.id],O[It])}else I[It]&&(O[K.id]=Math.min(O[K.id],A[It]))},J=0;J<Q.length;J++)rt(J);if(O[K.id]===A[K.id]){for(var ot=[];m.length>0;){var vt=m.pop();if(I[vt.id]=!1,ot.push(vt),vt===K)break}ot.length>0&&U.push(ot)}},d=0,it=y;d<it.length;d++){var Y=it[d];!A[Y.id]&&A[Y.id]!==0&&x(Y)}return U};R.detectStrongConnectComponents=k;function P(N,D){return D?k(N):X(N)}},592935:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.secondReg=R.dateReg=void 0;var z=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;R.secondReg=z;var B=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;R.dateReg=B},182556:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getOutDegree=R.getInDegree=R.default=void 0;var z=function(N){var D={},E=N.nodes,y=E===void 0?[]:E,M=N.edges,_=M===void 0?[]:M;return y.forEach(function(m){D[m.id]={degree:0,inDegree:0,outDegree:0}}),_.forEach(function(m){D[m.source].degree++,D[m.source].outDegree++,D[m.target].degree++,D[m.target].inDegree++}),D},B=z;R.default=B;var X=function(N,D){var E=z(N);return E[D]?z(N)[D].inDegree:0};R.getInDegree=X;var k=function(N,D){var E=z(N);return E[D]?z(N)[D].outDegree:0};R.getOutDegree=k},994282:function(dr,R,z){"use strict";function B(A){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},B(A)}Object.defineProperty(R,"__esModule",{value:!0}),R.detectAllUndirectedCycle=R.detectAllDirectedCycle=R.detectAllCycles=R.default=void 0;var X=E(z(45891)),k=D(z(759527)),P=z(770643);function N(A){if(typeof WeakMap!="function")return null;var O=new WeakMap,U=new WeakMap;return(N=function(x){return x?U:O})(A)}function D(A,O){if(!O&&A&&A.__esModule)return A;if(A===null||B(A)!=="object"&&typeof A!="function")return{default:A};var U=N(O);if(U&&U.has(A))return U.get(A);var j={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in A)if(d!=="default"&&Object.prototype.hasOwnProperty.call(A,d)){var it=x?Object.getOwnPropertyDescriptor(A,d):null;it&&(it.get||it.set)?Object.defineProperty(j,d,it):j[d]=A[d]}return j.default=A,U&&U.set(A,j),j}function E(A){return A&&A.__esModule?A:{default:A}}var y=function(O){var U=null,j=O.nodes,x=j===void 0?[]:j,d={},it={},Y={},W={};x.forEach(function(rt){it[rt.id]=rt});for(var K={enter:function(J){var ot=J.current,vt=J.previous;if(Y[ot]){U={};for(var gt=ot,Pt=vt;Pt!==ot;)U[gt]=Pt,gt=Pt,Pt=d[Pt];U[gt]=Pt}else Y[ot]=ot,delete it[ot],d[ot]=vt},leave:function(J){var ot=J.current;W[ot]=ot,delete Y[ot]},allowTraversal:function(J){var ot=J.next;return U?!1:!W[ot]}};Object.keys(it).length;){var Q=Object.keys(it)[0];(0,X.default)(O,Q,K)}return U},M=function(O,U,j){var x,d;j===void 0&&(j=!0);for(var it=[],Y=(0,k.default)(O,!1),W=0,K=Y;W<K.length;W++){var Q=K[W];if(Q.length)for(var rt=Q[0],J=rt.id,ot=[rt],vt=(x={},x[J]=rt,x),gt=(d={},d[J]=new Set,d);ot.length>0;)for(var Pt=ot.pop(),It=Pt.id,Jt=(0,P.getNeighbors)(It,O.edges),zt=function(lt){var St,Ut=Jt[lt],Ft=O.nodes.find(function(de){return de.id===Ut});if(Ut===It)it.push((St={},St[Ut]=Pt,St));else if(!(Ut in gt))vt[Ut]=Pt,ot.push(Ft),gt[Ut]=new Set([Pt]);else if(!gt[It].has(Ft)){for(var ee=!0,ve=[Ft,Pt],be=vt[It];gt[Ut].size&&!gt[Ut].has(be)&&(ve.push(be),be!==vt[be.id]);)be=vt[be.id];if(ve.push(be),U&&j?(ee=!1,ve.findIndex(function(de){return U.indexOf(de.id)>-1})>-1&&(ee=!0)):U&&!j&&ve.findIndex(function(de){return U.indexOf(de.id)>-1})>-1&&(ee=!1),ee){for(var Ht={},Yt=1;Yt<ve.length;Yt+=1)Ht[ve[Yt-1].id]=ve[Yt];ve.length&&(Ht[ve[ve.length-1].id]=ve[0]),it.push(Ht)}gt[Ut].add(Pt)}},kt=0;kt<Jt.length;kt+=1)zt(kt)}return it};R.detectAllUndirectedCycle=M;var _=function(O,U,j){j===void 0&&(j=!0);for(var x=[],d=new Set,it=[],Y=[],W={},K={},Q=function(be){for(var Ht=[be];Ht.length>0;){var Yt=Ht.pop();d.has(Yt)&&(d.delete(Yt),it[Yt.id].forEach(function(de){Ht.push(de)}),it[Yt.id].clear())}},rt=function ve(be,Ht,Yt){var de=!1;if(U&&j===!1&&U.indexOf(be.id)>-1)return de;x.push(be),d.add(be);for(var Ee=Yt[be.id],ge=0;ge<Ee.length;ge+=1){var Ot=W[Ee[ge]];if(Ot===Ht){for(var Xt={},ce=1;ce<x.length;ce+=1)Xt[x[ce-1].id]=x[ce];x.length&&(Xt[x[x.length-1].id]=x[0]),Y.push(Xt),de=!0}else d.has(Ot)||ve(Ot,Ht,Yt)&&(de=!0)}if(de)Q(be);else for(var ge=0;ge<Ee.length;ge+=1){var Ot=W[Ee[ge]];it[Ot.id].has(be)||it[Ot.id].add(be)}return x.pop(),de},J=O.nodes,ot=J===void 0?[]:J,vt=0;vt<ot.length;vt+=1){var gt=ot[vt],Pt=gt.id;K[Pt]=vt,W[vt]=gt}if(U&&j)for(var It=function(be){var Ht=U[be];K[ot[be].id]=K[Ht],K[Ht]=0,W[0]=ot.find(function(Yt){return Yt.id===Ht}),W[K[ot[be].id]]=ot[be]},vt=0;vt<U.length;vt++)It(vt);for(var Jt=function(be){for(var Ht,Yt,de=1/0,Ee=0;Ee<be.length;Ee+=1)for(var ge=be[Ee],Ot=0;Ot<ge.length;Ot++){var Xt=K[ge[Ot].id];Xt<de&&(de=Xt,Yt=Ee)}for(var ce=be[Yt],Lt=[],Ee=0;Ee<ce.length;Ee+=1){var Kt=ce[Ee];Lt[Kt.id]=[];for(var pe=0,We=(0,P.getNeighbors)(Kt.id,O.edges,"target").filter(function(Vt){return ce.map(function(on){return on.id}).indexOf(Vt)>-1});pe<We.length;pe++){var Je=We[pe];Je===Kt.id&&!(j===!1&&U.indexOf(Kt.id)>-1)?Y.push((Ht={},Ht[Kt.id]=Kt,Ht)):Lt[Kt.id].push(K[Je])}}return{component:ce,adjList:Lt,minIdx:de}},zt=0;zt<ot.length;){var kt=ot.filter(function(ve){return K[ve.id]>=zt}),$=(0,k.detectStrongConnectComponents)({nodes:kt,edges:O.edges}).filter(function(ve){return ve.length>1});if($.length===0)break;var lt=Jt($),St=lt.minIdx,Ut=lt.adjList,Ft=lt.component;if(Ft.length>1){Ft.forEach(function(ve){it[ve.id]=new Set});var ee=W[St];if(U&&j&&U.indexOf(ee.id)===-1)return Y;rt(ee,ee,Ut),zt=St+1}else break}return Y};R.detectAllDirectedCycle=_;var m=function(O,U,j,x){return x===void 0&&(x=!0),U?_(O,j,x):M(O,j,x)};R.detectAllCycles=m;var I=y;R.default=I},45891:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=P;var B=z(770643);function X(N){N===void 0&&(N={});var D=N,E=function(){},y=function(){var M={};return function(_){var m=_.next;return M[m]?!1:(M[m]=!0,!0)}}();return D.allowTraversal=N.allowTraversal||y,D.enter=N.enter||E,D.leave=N.leave||E,D}function k(N,D,E,y,M){M===void 0&&(M=!0),y.enter({current:D,previous:E});var _=N.edges,m=_===void 0?[]:_;(0,B.getNeighbors)(D,m,M?"target":void 0).forEach(function(I){y.allowTraversal({previous:E,current:D,next:I})&&k(N,I,D,y,M)}),y.leave({current:D,previous:E})}function P(N,D,E,y){y===void 0&&(y=!0),k(N,D,"",X(E),y)}},878089:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(197582),X=z(413810),k=z(770643),P=function(M,_,m){for(var I=1/0,A,O=0;O<_.length;O++){var U=_[O].id;!m[U]&&M[U]<=I&&(I=M[U],A=_[O])}return A},N=function(M,_,m,I){var A=M.nodes,O=A===void 0?[]:A,U=M.edges,j=U===void 0?[]:U,x=[],d={},it={},Y={};O.forEach(function(vt,gt){var Pt=vt.id;x.push(Pt),it[Pt]=1/0,Pt===_&&(it[Pt]=0)});for(var W=O.length,K=function(gt){var Pt=P(it,O,d),It=Pt.id;if(d[It]=!0,it[It]===1/0)return"continue";var Jt=[];m?Jt=(0,k.getOutEdgesNodeId)(It,j):Jt=(0,k.getEdgesByNodeId)(It,j),Jt.forEach(function(zt){var kt=zt.target,$=zt.source,lt=kt===It?$:kt,St=I&&zt[I]?zt[I]:1;it[lt]>it[Pt.id]+St?(it[lt]=it[Pt.id]+St,Y[lt]=[Pt.id]):it[lt]===it[Pt.id]+St&&Y[lt].push(Pt.id)})},Q=0;Q<W;Q++)K(Q);Y[_]=[_];var rt={};for(var J in it)it[J]!==1/0&&E(_,J,Y,rt);var ot={};for(var J in rt)ot[J]=rt[J][0];return{length:it,path:ot,allPath:rt}},D=N;R.default=D;function E(y,M,_,m){if(y===M)return[y];if(m[M])return m[M];for(var I=[],A=0,O=_[M];A<O.length;A++){var U=O[A],j=E(y,U,_,m);if(!j)return;for(var x=0,d=j;x<d.length;x++){var it=d[x];(0,X.isArray)(it)?I.push((0,B.__spreadArray)((0,B.__spreadArray)([],it,!0),[M],!1)):I.push([it,M])}}return m[M]=I,m[M]}},241727:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.findShortestPath=R.findAllPath=void 0;var B=k(z(878089)),X=z(770643);function k(D){return D&&D.__esModule?D:{default:D}}var P=function(E,y,M,_,m){var I=(0,B.default)(E,y,_,m),A=I.length,O=I.path,U=I.allPath;return{length:A[M],path:O[M],allPath:U[M]}};R.findShortestPath=P;var N=function(E,y,M,_){var m;if(y===M)return[[y]];var I=E.edges,A=I===void 0?[]:I,O=[y],U=(m={},m[y]=!0,m),j=[],x=[],d=_?(0,X.getNeighbors)(y,A,"target"):(0,X.getNeighbors)(y,A);for(j.push(d);O.length>0&&j.length>0;){var it=j[j.length-1];if(it.length){var Y=it.shift();Y&&(O.push(Y),U[Y]=!0,d=_?(0,X.getNeighbors)(Y,A,"target"):(0,X.getNeighbors)(Y,A),j.push(d.filter(function(Q){return!U[Q]})))}else{var W=O.pop();U[W]=!1,j.pop();continue}if(O[O.length-1]===M){var K=O.map(function(rt){return rt});x.push(K);var W=O.pop();U[W]=!1,j.pop()}}return x};R.findAllPath=N},975033:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=X(z(62238));function X(N){return N&&N.__esModule?N:{default:N}}var k=function(D,E){for(var y=(0,B.default)(D,E),M=[],_=y.length,m=0;m<_;m+=1){M[m]=[];for(var I=0;I<_;I+=1)m===I?M[m][I]=0:y[m][I]===0||!y[m][I]?M[m][I]=1/0:M[m][I]=y[m][I]}for(var A=0;A<_;A+=1)for(var m=0;m<_;m+=1)for(var I=0;I<_;I+=1)M[m][I]>M[m][A]+M[A][I]&&(M[m][I]=M[m][A]+M[A][I]);return M},P=k;R.default=P},821146:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(413810),X=z(368575),k=function(){function I(A,O,U,j,x){this.fromNode=A,this.toNode=O,this.nodeEdgeNodeLabel={nodeLabel1:U||X.VACANT_NODE_LABEL,edgeLabel:j||X.VACANT_EDGE_LABEL,nodeLabel2:x||X.VACANT_NODE_LABEL}}return I.prototype.equalTo=function(A){return this.fromNode===A.formNode&&this.toNode===A.toNode&&this.nodeEdgeNodeLabel===A.nodeEdgeNodeLabel},I.prototype.notEqualTo=function(A){return!this.equalTo(A)},I}(),P=function(){function I(){this.rmpath=[],this.dfsEdgeList=[]}return I.prototype.equalTo=function(A){var O=this.dfsEdgeList.length,U=A.length;if(O!==U)return!1;for(var j=0;j<O;j++)if(this.dfsEdgeList[j]!==A[j])return!1;return!0},I.prototype.notEqualTo=function(A){return!this.equalTo(A)},I.prototype.pushBack=function(A,O,U,j,x){return this.dfsEdgeList.push(new k(A,O,U,j,x)),this.dfsEdgeList},I.prototype.toGraph=function(A,O){A===void 0&&(A=X.VACANT_GRAPH_ID),O===void 0&&(O=!1);var U=new X.Graph(A,!0,O);return this.dfsEdgeList.forEach(function(j){var x=j.fromNode,d=j.toNode,it=j.nodeEdgeNodeLabel,Y=it.nodeLabel1,W=it.edgeLabel,K=it.nodeLabel2;Y!==X.VACANT_NODE_LABEL&&U.addNode(x,Y),K!==X.VACANT_NODE_LABEL&&U.addNode(d,K),Y!==X.VACANT_NODE_LABEL&&K!==Y&&U.addEdge(void 0,x,d,W)}),U},I.prototype.buildRmpath=function(){this.rmpath=[];for(var A=void 0,O=this.dfsEdgeList.length,U=O-1;U>=0;U--){var j=this.dfsEdgeList[U],x=j.fromNode,d=j.toNode;x<d&&(A===void 0||d===A)&&(this.rmpath.push(U),A=x)}return this.rmpath},I.prototype.getNodeNum=function(){var A={};return this.dfsEdgeList.forEach(function(O){A[O.fromNode]||(A[O.fromNode]=!0),A[O.toNode]||(A[O.toNode]=!0)}),Object.keys(A).length},I}(),N=function(){function I(A){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!A){for(;A;){var O=A.edge;this.edges.push(O),this.nodesUsed[O.from]=1,this.nodesUsed[O.to]=1,this.edgesUsed[O.id]=1,A=A.preNode}this.edges=this.edges.reverse()}}return I.prototype.hasNode=function(A){return this.nodesUsed[A.id]===1},I.prototype.hasEdge=function(A){return this.edgesUsed[A.id]===1},I}(),D=function(){function I(A){var O=A.graphs,U=A.minSupport,j=U===void 0?2:U,x=A.minNodeNum,d=x===void 0?1:x,it=A.maxNodeNum,Y=it===void 0?4:it,W=A.top,K=W===void 0?10:W,Q=A.directed,rt=Q===void 0?!1:Q,J=A.verbose,ot=J===void 0?!1:J;this.graphs=O,this.dfsCode=new P,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=j,this.top=K,this.directed=rt,this.counter=0,this.maxNodeNum=Y,this.minNodeNum=d,this.verbose=ot,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return I.prototype.findForwardRootEdges=function(A,O){var U=this,j=[],x=A.nodeMap;return O.edges.forEach(function(d){(U.directed||O.label<=x[d.to].label)&&j.push(d)}),j},I.prototype.findBackwardEdge=function(A,O,U,j){if(!this.directed&&O===U)return null;for(var x=A.nodeMap,d=x[U.to],it=d.edges,Y=it.length,W=0;W<Y;W++){var K=it[W];if(!(j.hasEdge(K)||K.to!==O.from)){if(this.directed){if(x[O.from].label<x[U.to].label||x[O.from].label===x[U.to].label&&O.label<=K.label)return K}else if(O.label<K.label||O.label===K.label&&x[O.to].label<=x[U.to].label)return K}}return null},I.prototype.findForwardPureEdges=function(A,O,U,j){for(var x=[],d=O.to,it=A.nodeMap[d].edges,Y=it.length,W=0;W<Y;W++){var K=it[W],Q=A.nodeMap[K.to];U<=Q.label&&!j.hasNode(Q)&&x.push(K)}return x},I.prototype.findForwardRmpathEdges=function(A,O,U,j){for(var x=[],d=A.nodeMap,it=d[O.to].label,Y=d[O.from],W=Y.edges,K=W.length,Q=0;Q<K;Q++){var rt=W[Q],J=d[rt.to].label;O.to===rt.to||U>J||j.hasNode(d[rt.to])||(O.label<rt.label||O.label===rt.label&&it<=J)&&x.push(rt)}return x},I.prototype.getSupport=function(A){var O={};return A.forEach(function(U){O[U.graphId]||(O[U.graphId]=!0)}),Object.keys(O).length},I.prototype.findMinLabel=function(A){var O=void 0;return Object.keys(A).forEach(function(U){var j=A[U],x=j.nodeLabel1,d=j.edgeLabel,it=j.nodeLabel2;if(!O){O={nodeLabel1:x,edgeLabel:d,nodeLabel2:it};return}(x<O.nodeLabel1||x===O.nodeLabel1&&d<O.edgeLabel||x===O.nodeLabel1&&d===O.edgeLabel&&it<O.nodeLabel2)&&(O={nodeLabel1:x,edgeLabel:d,nodeLabel2:it})}),O},I.prototype.isMin=function(){var A=this,O=this.dfsCode;if(this.verbose&&console.log("isMin checking",O),O.dfsEdgeList.length===1)return!0;var U=this.directed,j=O.toGraph(X.VACANT_GRAPH_ID,U),x=j.nodeMap,d=new P,it={};j.nodes.forEach(function(Q){var rt=A.findForwardRootEdges(j,Q);rt.forEach(function(J){var ot=x[J.to],vt="".concat(Q.label,"-").concat(J.label,"-").concat(ot.label);it[vt]||(it[vt]={projected:[],nodeLabel1:Q.label,edgeLabel:J.label,nodeLabel2:ot.label});var gt={graphId:j.id,edge:J,preNode:null};it[vt].projected.push(gt)})});var Y=this.findMinLabel(it);if(Y){d.dfsEdgeList.push(new k(0,1,Y.nodeLabel1,Y.edgeLabel,Y.nodeLabel2));var W=function Q(rt){for(var J=d.buildRmpath(),ot=d.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,vt=d.dfsEdgeList[J[0]].toNode,gt={},Pt=!1,It=0,Jt=U?-1:0,zt=function(Ee){if(Pt)return"break";rt.forEach(function(ge){var Ot=new N(ge),Xt=A.findBackwardEdge(j,Ot.edges[J[Ee]],Ot.edges[J[0]],Ot);Xt&&(gt[Xt.label]||(gt[Xt.label]={projected:[],edgeLabel:Xt.label}),gt[Xt.label].projected.push({graphId:j.id,edge:gt,preNode:ge}),It=d.dfsEdgeList[J[Ee]].fromNode,Pt=!0)})},kt=J.length-1;kt>Jt;kt--){var $=zt(kt);if($==="break")break}if(Pt){var lt=A.findMinLabel(gt);d.dfsEdgeList.push(new k(vt,It,X.VACANT_NODE_LABEL,lt.edgeLabel,X.VACANT_NODE_LABEL));var St=d.dfsEdgeList.length-1;return A.dfsCode.dfsEdgeList[St]!==d.dfsEdgeList[St]?!1:Q(gt[lt.edgeLabel].projected)}var Ut={};Pt=!1;var Ft=0;rt.forEach(function(de){var Ee=new N(de),ge=A.findForwardPureEdges(j,Ee.edges[J[0]],ot,Ee);ge.length>0&&(Pt=!0,Ft=vt,ge.forEach(function(Ot){var Xt="".concat(Ot.label,"-").concat(x[Ot.to].label);Ut[Xt]||(Ut[Xt]={projected:[],edgeLabel:Ot.label,nodeLabel2:x[Ot.to].label}),Ut[Xt].projected.push({graphId:j.id,edge:Ot,preNode:de})}))});for(var ee=J.length,ve=function(Ee){if(Pt)return"break";var ge=J[Ee];rt.forEach(function(Ot){var Xt=new N(Ot),ce=A.findForwardRmpathEdges(j,Xt.edges[ge],ot,Xt);ce.length>0&&(Pt=!0,Ft=d.dfsEdgeList[ge].fromNode,ce.forEach(function(Lt){var Kt="".concat(Lt.label,"-").concat(x[Lt.to].label);Ut[Kt]||(Ut[Kt]={projected:[],edgeLabel:Lt.label,nodeLabel2:x[Lt.to].label}),Ut[Kt].projected.push({graphId:j.id,edge:Lt,preNode:Ot})}))})},kt=0;kt<ee;kt++){var be=ve(kt);if(be==="break")break}if(!Pt)return!0;var Ht=A.findMinLabel(Ut);d.dfsEdgeList.push(new k(Ft,vt+1,X.VACANT_NODE_LABEL,Ht.edgeLabel,Ht.nodeLabel2));var Yt=d.dfsEdgeList.length-1;return O.dfsEdgeList[Yt]!==d.dfsEdgeList[Yt]?!1:Q(Ut["".concat(Ht.edgeLabel,"-").concat(Ht.nodeLabel2)].projected)},K="".concat(Y.nodeLabel1,"-").concat(Y.edgeLabel,"-").concat(Y.nodeLabel2);return W(it[K].projected)}},I.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var A=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,B.clone)(A))}},I.prototype.subGraphMining=function(A){var O=this,U=this.getSupport(A);if(!(U<this.minSupport)&&this.isMin()){this.report();var j=this.dfsCode.getNodeNum(),x=this.dfsCode.buildRmpath(),d=this.dfsCode.dfsEdgeList[x[0]].toNode,it=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,Y={},W={};A.forEach(function(K){for(var Q=O.graphs[K.graphId],rt=Q.nodeMap,J=new N(K),ot=x.length-1;ot>=0;ot--){var vt=O.findBackwardEdge(Q,J.edges[x[ot]],J.edges[x[0]],J);if(vt){var gt="".concat(O.dfsCode.dfsEdgeList[x[ot]].fromNode,"-").concat(vt.label);W[gt]||(W[gt]={projected:[],toNodeId:O.dfsCode.dfsEdgeList[x[ot]].fromNode,edgeLabel:vt.label}),W[gt].projected.push({graphId:K.graphId,edge:vt,preNode:K})}}if(!(j>=O.maxNodeNum)){var Pt=O.findForwardPureEdges(Q,J.edges[x[0]],it,J);Pt.forEach(function(Jt){var zt="".concat(d,"-").concat(Jt.label,"-").concat(rt[Jt.to].label);Y[zt]||(Y[zt]={projected:[],fromNodeId:d,edgeLabel:Jt.label,nodeLabel2:rt[Jt.to].label}),Y[zt].projected.push({graphId:K.graphId,edge:Jt,preNode:K})});for(var It=function(zt){var kt=O.findForwardRmpathEdges(Q,J.edges[x[zt]],it,J);kt.forEach(function($){var lt="".concat(O.dfsCode.dfsEdgeList[x[zt]].fromNode,"-").concat($.label,"-").concat(rt[$.to].label);Y[lt]||(Y[lt]={projected:[],fromNodeId:O.dfsCode.dfsEdgeList[x[zt]].fromNode,edgeLabel:$.label,nodeLabel2:rt[$.to].label}),Y[lt].projected.push({graphId:K.graphId,edge:$,preNode:K})})},ot=0;ot<x.length;ot++)It(ot)}}),Object.keys(W).forEach(function(K){var Q=W[K],rt=Q.toNodeId,J=Q.edgeLabel;O.dfsCode.dfsEdgeList.push(new k(d,rt,"-1",J,"-1")),O.subGraphMining(W[K].projected),O.dfsCode.dfsEdgeList.pop()}),Object.keys(Y).forEach(function(K){var Q=Y[K],rt=Q.fromNodeId,J=Q.edgeLabel,ot=Q.nodeLabel2;O.dfsCode.dfsEdgeList.push(new k(rt,d+1,X.VACANT_NODE_LABEL,J,ot)),O.subGraphMining(Y[K].projected),O.dfsCode.dfsEdgeList.pop()})}},I.prototype.generate1EdgeFrequentSubGraphs=function(){var A=this.graphs,O=this.directed,U=this.minSupport,j=this.frequentSize1Subgraphs,x={},d={},it={},Y={};return Object.keys(A).forEach(function(W){var K=A[W],Q=K.nodeMap;K.nodes.forEach(function(rt,J){var ot=rt.label,vt="".concat(W,"-").concat(ot);if(!it[vt]){var gt=x[ot]||0;gt++,x[ot]=gt}it[vt]={graphKey:W,label:ot},rt.edges.forEach(function(Pt){var It=ot,Jt=Q[Pt.to].label;if(!O&&It>Jt){var zt=Jt;Jt=It,It=zt}var kt=Pt.label,$="".concat(W,"-").concat(It,"-").concat(kt,"-").concat(Jt),lt="".concat(It,"-").concat(kt,"-").concat(Jt);if(!d[lt]){var St=d[lt]||0;St++,d[lt]=St}Y[$]={graphId:W,nodeLabel1:It,edgeLabel:kt,nodeLabel2:Jt}})})}),Object.keys(x).forEach(function(W){var K=x[W];if(!(K<U)){var Q={nodes:[],edges:[]};Q.nodes.push({id:"0",label:W}),j.push(Q)}}),j},I.prototype.run=function(){var A=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var O=this.graphs,U=this.directed,j={};Object.keys(O).forEach(function(x){var d=O[x],it=d.nodeMap;d.nodes.forEach(function(Y){var W=A.findForwardRootEdges(d,Y);W.forEach(function(K){var Q=it[K.to],rt="".concat(Y.label,"-").concat(K.label,"-").concat(Q.label);j[rt]||(j[rt]={projected:[],nodeLabel1:Y.label,edgeLabel:K.label,nodeLabel2:Q.label});var J={graphId:x,edge:K,preNode:null};j[rt].projected.push(J)})})}),Object.keys(j).forEach(function(x){var d=j[x],it=d.projected,Y=d.nodeLabel1,W=d.edgeLabel,K=d.nodeLabel2;A.dfsCode.dfsEdgeList.push(new k(0,1,Y,W,K)),A.subGraphMining(it),A.dfsCode.dfsEdgeList.pop()})}},I}(),E=function(A,O,U,j){var x={};return Object.keys(A).forEach(function(d,it){var Y=A[d],W=new X.Graph(it,!0,O),K={};Y.nodes.forEach(function(Q,rt){W.addNode(rt,Q[U]),K[Q.id]=rt}),Y.edges.forEach(function(Q,rt){var J=K[Q.source],ot=K[Q.target];W.addEdge(-1,J,ot,Q[j])}),W&&W.getNodeNum()&&(x[W.id]=W)}),x},y=function(A,O,U){var j=[];return A.forEach(function(x){var d={nodes:[],edges:[]};x.nodes.forEach(function(it){var Y;d.nodes.push((Y={id:"".concat(it.id)},Y[O]=it.label,Y))}),x.edges.forEach(function(it){var Y;d.edges.push((Y={source:"".concat(it.from),target:"".concat(it.to)},Y[U]=it.label,Y))}),j.push(d)}),j},M="cluster",_=function(A){var O=A.graphs,U=A.directed,j=U===void 0?!1:U,x=A.nodeLabelProp,d=x===void 0?M:x,it=A.edgeLabelProp,Y=it===void 0?M:it,W=E(O,j,d,Y),K=A.minSupport,Q=A.maxNodeNum,rt=A.minNodeNum,J=A.verbose,ot=A.top,vt={graphs:W,minSupport:K,maxNodeNum:Q,minNodeNum:rt,top:ot,verbose:J,directed:j},gt=new D(vt);gt.run();var Pt=y(gt.frequentSubgraphs,d,Y);return Pt},m=_;R.default=m},368575:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.VACANT_NODE_LABEL=R.VACANT_NODE_ID=R.VACANT_GRAPH_ID=R.VACANT_EDGE_LABEL=R.VACANT_EDGE_ID=R.Node=R.Graph=R.Edge=R.AUTO_EDGE_ID=void 0;var z=-1;R.VACANT_EDGE_ID=z;var B=-1;R.VACANT_NODE_ID=B;var X="-1";R.VACANT_EDGE_LABEL=X;var k="-1";R.VACANT_NODE_LABEL=k;var P=-1;R.VACANT_GRAPH_ID=P;var N="-1";R.AUTO_EDGE_ID=N;var D=function(){function M(_,m,I,A){_===void 0&&(_=z),m===void 0&&(m=B),I===void 0&&(I=B),A===void 0&&(A=X),this.id=_,this.from=m,this.to=I,this.label=A}return M}();R.Edge=D;var E=function(){function M(_,m){_===void 0&&(_=B),m===void 0&&(m=k),this.id=_,this.label=m,this.edges=[],this.edgeMap={}}return M.prototype.addEdge=function(_){this.edges.push(_),this.edgeMap[_.id]=_},M}();R.Node=E;var y=function(){function M(_,m,I){_===void 0&&(_=B),m===void 0&&(m=!0),I===void 0&&(I=!1),this.id=_,this.edgeIdAutoIncrease=m,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=I}return M.prototype.getNodeNum=function(){return this.nodes.length},M.prototype.addNode=function(_,m){if(!this.nodeMap[_]){var I=new E(_,m);this.nodes.push(I),this.nodeMap[_]=I,this.nodeLabelMap[m]||(this.nodeLabelMap[m]=[]),this.nodeLabelMap[m].push(_)}},M.prototype.addEdge=function(_,m,I,A){if((this.edgeIdAutoIncrease||_===void 0)&&(_=this.counter++),!(this.nodeMap[m]&&this.nodeMap[I]&&this.nodeMap[I].edgeMap[_])){var O=new D(_,m,I,A);if(this.edges.push(O),this.edgeMap[_]=O,this.nodeMap[m].addEdge(O),this.edgeLabelMap[A]||(this.edgeLabelMap[A]=[]),this.edgeLabelMap[A].push(O),!this.directed){var U=new D(_,I,m,A);this.nodeMap[I].addEdge(U),this.edgeLabelMap[A].push(U)}}},M}();R.Graph=y},882812:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(197582),X=D(z(975033)),k=D(z(821146)),P=D(z(878089)),N=z(770643);function D(Y){return Y&&Y.__esModule?Y:{default:Y}}var E=function(W,K,Q,rt){Q===void 0&&(Q="cluster"),rt===void 0&&(rt=2);var J=[],ot=W.nodes;return K.forEach(function(vt,gt){J.push(y(ot,vt,gt,Q,rt))}),J},y=function(W,K,Q,rt,J){var ot=[Q],vt=[],gt={};return K.forEach(function(Pt,It){if(Pt<=J&&Q!==It){ot.push(It),vt.push(W[It]);var Jt=W[It][rt];gt[Jt]?(gt[Jt].count++,gt[Jt].dists.push(Pt)):gt[Jt]={count:1,dists:[Pt]}}}),Object.keys(gt).forEach(function(Pt){gt[Pt].dists=gt[Pt].dists.sort(function(It,Jt){return It-Jt})}),{nodeIdx:Q,nodeId:W[Q].id,nodeIdxs:ot,neighbors:vt,neighborNum:ot.length-1,nodeLabelCountMap:gt}},M=function(W,K,Q,rt,J){var ot=Math.ceil(Q/K),vt={},gt=0;return rt.forEach(function(Pt,It){for(var Jt=0,zt=0,kt=Pt.nodeIdxs,$=Pt.neighborNum-1;Jt<ot;){for(var lt=kt[1+Math.floor(Math.random()*$)],St=0;(vt["".concat(It,"-").concat(lt)]||vt["".concat(lt,"-").concat(It)])&&(lt=Math.floor(Math.random()*K),St++,!(St>2*K)););if(St<2*K&&(vt["".concat(It,"-").concat(lt)]={start:It,end:lt,distance:J[It][lt]},Jt++,gt++,gt>=Q))return vt;if(zt++,zt>2*K)break}if(Jt<ot){var Ut=ot-Jt;ot=(ot+Ut)/(K-It-1)}}),vt},_=function(W,K,Q,rt){var J=Q.nodes;return rt||(rt={}),Object.keys(W).forEach(function(ot){var vt,gt;if(!(rt&&rt[ot])){rt[ot]={nodes:[],edges:[]};var Pt=W[ot],It=(vt=K[Pt.start])===null||vt===void 0?void 0:vt.nodeIdxs,Jt=(gt=K[Pt.end])===null||gt===void 0?void 0:gt.nodeIdxs;if(!(!It||!Jt)){var zt=new Set(Jt),kt=It.filter(function(Ft){return zt.has(Ft)});if(!(!kt||!kt.length)){for(var $={},lt=kt.length,St=0;St<lt;St++){var Ut=J[kt[St]];rt[ot].nodes.push(Ut),$[Ut.id]=!0}Q.edges.forEach(function(Ft){$[Ft.source]&&$[Ft.target]&&rt[ot].edges.push(Ft)})}}}}),rt},m=function(W,K,Q,rt){var J,ot,vt={};W.nodes.forEach(function(Pt){vt[Pt.id]=Pt});var gt=0;return!(!((J=K==null?void 0:K.edges)===null||J===void 0)&&J.length)||((ot=K==null?void 0:K.nodes)===null||ot===void 0?void 0:ot.length)<2?0:(W.edges.forEach(function(Pt){var It=vt[Pt.source][Q],Jt=vt[Pt.target][Q],zt=K==null?void 0:K.nodes[0][Q],kt=K==null?void 0:K.nodes[1][Q],$=K==null?void 0:K.edges[0][rt];Pt[rt]===$&&(It===zt&&Jt===kt||It===kt&&Jt===zt)&&gt++}),gt)},I=function(W,K,Q){for(var rt=1/0,J=0,ot=function(Pt){var It=W[Pt],Jt=Object.keys(It).sort(function(Ft,ee){return It[Ft]-It[ee]}),zt=10,kt=[];Jt.forEach(function(Ft,ee){kt[ee%zt]||(kt[ee%zt]={graphs:[],totalCount:0,aveCount:0}),kt[ee%zt].graphs.push(Ft),kt[ee%zt].totalCount+=It[Ft]});var $=0,lt=[];kt.forEach(function(Ft){var ee=Ft.totalCount/Ft.graphs.length;Ft.aveCount=ee,lt.push(ee);var ve=0,be=Ft.length;Ft.graphs.forEach(function(Ht,Yt){var de=It[Ht];Ft.graphs.forEach(function(Ee,ge){Yt!==ge&&(ve+=Math.abs(de-It[Ee]))})}),ve/=be*(be-1)/2,$+=ve}),$/=kt.length;var St=0;lt.forEach(function(Ft,ee){lt.forEach(function(ve,be){ee!==be&&(St+=Math.abs(Ft-ve))}),St/=lt.length*(lt.length-1)/2});var Ut=St-$;rt<Ut&&(rt=Ut,J=Pt)},vt=0;vt<K;vt++)ot(vt);return{structure:Q[J],structureCountMap:W[J]}},A=function(W,K){var Q={},rt={};return W.forEach(function(J,ot){Q[J.id]={idx:ot,node:J,degree:0,inDegree:0,outDegree:0};var vt=J[K];rt[vt]||(rt[vt]=[]),rt[vt].push(J)}),{nodeMap:Q,nodeLabelMap:rt}},O=function(W,K,Q){var rt={},J={};return W.forEach(function(ot,vt){rt["".concat(N.uniqueId)]={idx:vt,edge:ot};var gt=ot[K];J[gt]||(J[gt]=[]),J[gt].push(ot);var Pt=Q[ot.source];Pt&&(Pt.degree++,Pt.outDegree++);var It=Q[ot.target];It&&(It.degree++,It.inDegree++)}),{edgeMap:rt,edgeLabelMap:J}},U=function(W,K,Q){var rt=K.length,J={};return K.forEach(function(ot,vt){for(var gt=Q?0:vt+1,Pt=W[vt].id,It=gt;It<rt;It++)if(vt!==It){var Jt=W[It].id,zt=ot[It];J["".concat(Pt,"-").concat(Jt)]=zt,Q||(J["".concat(Jt,"-").concat(Pt)]=zt)}}),J},j=function(W,K,Q,rt,J,ot,vt,gt,Pt,It,Jt){var zt,kt="".concat(K.id,"-").concat(Q.id);if(It&&It[kt])return It[kt];var $=Jt?Jt[kt]:void 0;if(!$){var lt=(zt={},zt[kt]={start:rt[K.id].idx,end:rt[Q.id].idx,distance:J},zt);Jt=_(lt,ot,W,Jt),$=Jt[kt]}return m($,vt,gt,Pt)},x=function(W,K,Q,rt){var J,ot,vt,gt=(J=W[K])===null||J===void 0?void 0:J.degree,Pt=(ot=W[K])===null||ot===void 0?void 0:ot.inDegree,It=(vt=W[K])===null||vt===void 0?void 0:vt.outDegree;return W[K]===void 0&&(gt=1/0,Pt=1/0,It=1/0,rt[K].forEach(function(Jt){var zt=Q[Jt.id].degree;gt>zt&&(gt=zt);var kt=Q[Jt.id].inDegree;Pt>kt&&(Pt=kt);var $=Q[Jt.id].outDegree;It>$&&(It=$)}),W[K]={degree:gt,inDegree:Pt,outDegree:It}),{minPatternNodeLabelDegree:gt,minPatternNodeLabelInDegree:Pt,minPatternNodeLabelOutDegree:It}},d=function(W,K,Q,rt,J,ot,vt){var gt;if(Q===void 0&&(Q=!1),ot===void 0&&(ot="cluster"),vt===void 0&&(vt="cluster"),!(!W||!W.nodes)){var Pt=W.nodes.length;if(Pt){var It=(0,X.default)(W,Q),Jt=(0,X.default)(K,Q),zt=U(W.nodes,It,Q),kt=U(K.nodes,Jt,Q),$=A(W.nodes,ot),lt=$.nodeMap,St=$.nodeLabelMap,Ut=A(K.nodes,ot),Ft=Ut.nodeMap,ee=Ut.nodeLabelMap;O(W.edges,vt,lt);var ve=O(K.edges,vt,Ft).edgeLabelMap,be=[];Jt==null||Jt.forEach(function(wn){be=be.concat(wn)}),J||(J=Math.max.apply(Math,(0,B.__spreadArray)((0,B.__spreadArray)([],be,!1),[2],!1))),rt||(rt=J);var Ht=E(W,It,ot,rt),Yt=E(K,Jt,ot,rt),de=Math.min(100,Pt*(Pt-1)/2),Ee=M(rt,Pt,de,Ht,It),ge=_(Ee,Ht,W),Ot=10,Xt=1,ce=1,Lt=4,Kt={graphs:ge,nodeLabelProp:ot,edgeLabelProp:vt,minSupport:Xt,minNodeNum:ce,maxNodeNum:Lt,directed:Q},pe=(0,k.default)(Kt).slice(0,Ot),We=pe.length,Je=[];pe.forEach(function(wn,na){Je[na]={},Object.keys(ge).forEach(function(Qn){var In=ge[Qn],Ca=m(In,wn,ot,vt);Je[na][Qn]=Ca})});var Mr=I(Je,We,pe),Vt=Mr.structure,on=Mr.structureCountMap,sn=K.nodes[0],pn=[],En=(gt=K.nodes[0])===null||gt===void 0?void 0:gt[ot],Yn=-1/0;K.nodes.forEach(function(wn){var na=wn[ot],Qn=St[na];(Qn==null?void 0:Qn.length)>Yn&&(Yn=Qn.length,pn=Qn,En=na,sn=wn)});var ea={},Nn={},Zn={},La={},Aa={},fr={};Object.keys(ee).forEach(function(wn,na){Aa[wn]=[],Q&&(fr[wn]=[]);var Qn=-1/0,In=ee[wn],Ca={};In.forEach(function(b){var w=kt["".concat(sn.id,"-").concat(b.id)];if(w&&Aa[wn].push(w),Qn<w&&(Qn=w),Ca["".concat(sn.id,"-").concat(b.id)]={start:0,end:Ft[b.id].idx,distance:w},Q){var V=kt["".concat(b.id,"-").concat(sn.id)];V&&fr[wn].push(V)}}),Aa[wn]=Aa[wn].sort(function(b,w){return b-w}),Q&&(fr[wn]=fr[wn].sort(function(b,w){return b-w})),Nn=_(Ca,Yt,K,Nn);var q=[];if(Object.keys(Ca).forEach(function(b){if(Zn[b]){q.push(Zn[b]);return}var w=Nn[b];Zn[b]=m(w,Vt,ot,vt),q.push(Zn[b])}),q=q.sort(function(b,w){return w-b}),La["".concat(sn.id,"-").concat(wn)]=q,wn!==En)for(var ft=(pn==null?void 0:pn.length)||0,nt=function(w){var V=pn[w],xt=Ht[lt[V.id].idx],Ct=xt.nodeLabelCountMap[wn],wt=ee[wn].length;if(!Ct||Ct.count<wt)return pn.splice(w,1),"continue";for(var Rt=!1,Ce=0;Ce<wt;Ce++)if(Ct.dists[Ce]>Aa[wn][Ce]){Rt=!0;break}if(Rt)return pn.splice(w,1),"continue";var me={};xt.neighbors.forEach(function(er){var gr=zt["".concat(V.id,"-").concat(er.id)];me["".concat(V.id,"-").concat(er.id)]={start:lt[V.id].idx,end:lt[er.id].idx,distance:gr}}),ge=_(me,Ht,W,ge);var Ke=[];Object.keys(me).forEach(function(er){if(on[er]){Ke.push(on[er]);return}var gr=ge[er];on[er]=m(gr,Vt,ot,vt),Ke.push(on[er])}),Ke=Ke.sort(function(er,gr){return gr-er});for(var yr=!1,Ce=0;Ce<wt;Ce++)if(Ke[Ce]<q[Ce]){yr=!0;break}if(yr)return pn.splice(w,1),"continue"},L=ft-1;L>=0;L--)nt(L)});var Or=[];pn==null||pn.forEach(function(wn){for(var na=lt[wn.id].idx,Qn=y(W.nodes,It[na],na,ot,J),In=Qn.neighbors,Ca=In.length,q=!1,ft=Ca-1;ft>=0;ft--){if(In.length+1<K.nodes.length){q=!0;return}var nt=In[ft],L=nt[ot];if(!ee[L]||!ee[L].length){In.splice(ft,1);continue}if(!Aa[L]||!Aa[L].length){In.splice(ft,1);continue}var b="".concat(wn.id,"-").concat(nt.id),w=zt[b],V=Aa[L].length-1,xt=Aa[L][V];if(w>xt){In.splice(ft,1);continue}if(Q){var Ct="".concat(nt.id,"-").concat(wn.id),wt=zt[Ct];V=fr[L].length-1;var Rt=fr[L][V];if(wt>Rt){In.splice(ft,1);continue}}var Ce=on[b]?on[b]:j(W,wn,nt,lt,w,Ht,Vt,ot,vt,on,ge),me="".concat(sn.id,"-").concat(L),Ke=La[me][La[me].length-1];if(Ce<Ke){In.splice(ft,1);continue}var yr=x(ea,L,Ft,ee),er=yr.minPatternNodeLabelDegree,gr=yr.minPatternNodeLabelInDegree,dn=yr.minPatternNodeLabelOutDegree;if(lt[nt.id].degree<er){In.splice(ft,1);continue}}q||Or.push({nodes:[wn].concat(In)})});var vn=(0,P.default)(K,sn.id,!1).length,yn={};Q?(Object.keys(vn).forEach(function(wn){var na=Ft[wn].node[ot];yn[na]?yn[na].push(vn[wn]):yn[na]=[vn[wn]]}),Object.keys(yn).forEach(function(wn){yn[wn].sort(function(na,Qn){return na-Qn})})):yn=Aa;for(var qn=Or.length,Vn=function(na){var Qn=Or[na],In=Qn.nodes[0],Ca={},q={};Qn.nodes.forEach(function(kn,_e){q[kn.id]={idx:_e,node:kn,degree:0,inDegree:0,outDegree:0};var Nt=kn[ot];Ca[Nt]?Ca[Nt]++:Ca[Nt]=1});var ft=[],nt={};W.edges.forEach(function(kn){q[kn.source]&&q[kn.target]&&(ft.push(kn),nt[kn[vt]]?nt[kn[vt]]++:nt[kn[vt]]=1,q[kn.source].degree++,q[kn.target].degree++,q[kn.source].outDegree++,q[kn.target].inDegree++)});for(var L=Object.keys(ve).length,b=!1,w=0;w<L;w++){var V=Object.keys(ve)[w];if(!nt[V]||nt[V]<ve[V].length){b=!0;break}}if(b)return Or.splice(na,1),"continue";var xt=ft.length;if(xt<K.edges.length)return Or.splice(na,1),"break";for(var Ct=!1,wt=function(_e){var Nt=ft[_e],fe=Nt[vt],Te=ve[fe];if(!Te||!Te.length)return nt[fe]--,Te&&nt[fe]<Te.length?(Ct=!0,"break"):(ft.splice(_e,1),q[Nt.source].degree--,q[Nt.target].degree--,q[Nt.source].outDegree--,q[Nt.target].inDegree--,"continue");var Me=q[Nt.source].node[ot],Le=q[Nt.target].node[ot],nr=!1;if(Te.forEach(function(Dr){var jr=Ft[Dr.source].node,Sn=Ft[Dr.target].node;jr[ot]===Me&&Sn[ot]===Le&&(nr=!0),!Q&&jr[ot]===Le&&Sn[ot]===Me&&(nr=!0)}),!nr)return nt[fe]--,Te&&nt[fe]<Te.length?(Ct=!0,"break"):(ft.splice(_e,1),q[Nt.source].degree--,q[Nt.target].degree--,q[Nt.source].outDegree--,q[Nt.target].inDegree--,"continue")},w=xt-1;w>=0;w--){var Rt=wt(w);if(Rt==="break")break}if(Ct)return Or.splice(na,1),"continue";Qn.edges=ft;var Ce=(0,P.default)(Qn,Qn.nodes[0].id,!1).length;if(Object.keys(Ce).reverse().forEach(function(kn){if(!(kn===Qn.nodes[0].id||Ct)){if(Ce[kn]===1/0){var _e=q[kn].node[ot];if(Ca[_e]--,Ca[_e]<ee[_e].length){Ct=!0;return}var Nt=Qn.nodes.indexOf(q[kn].node);Qn.nodes.splice(Nt,1),q[kn]=void 0;return}var fe=lt[kn].node[ot];if(!yn[fe]||!yn[fe].length||Ce[kn]>yn[fe][yn[fe].length-1]){var _e=q[kn].node[ot];if(Ca[_e]--,Ca[_e]<ee[_e].length){Ct=!0;return}var Nt=Qn.nodes.indexOf(q[kn].node);Qn.nodes.splice(Nt,1),q[kn]=void 0}}}),Ct)return Or.splice(na,1),"continue";for(var me=!0,Ke=0;me&&!Ct;){me=!1;var yr=Q?q[In.id].degree<Ft[sn.id].degree||q[In.id].inDegree<Ft[sn.id].inDegree||q[In.id].outDegree<Ft[sn.id].outDegree:q[In.id].degree<Ft[sn.id].degree;if(yr){Ct=!0;break}if(Ca[In[ot]]<ee[In[ot]].length){Ct=!0;break}for(var er=Qn.nodes.length,gr=er-1;gr>=0;gr--){var dn=Qn.nodes[gr],Ue=q[dn.id].degree,or=q[dn.id].inDegree,mr=q[dn.id].outDegree,$r=dn[ot],Pr=x(ea,$r,Ft,ee),va=Pr.minPatternNodeLabelDegree,Sa=Pr.minPatternNodeLabelInDegree,Mn=Pr.minPatternNodeLabelOutDegree,Un=Q?Ue<va||or<Sa||mr<Mn:Ue<va;if(Un){if(Ca[dn[ot]]--,Ca[dn[ot]]<ee[dn[ot]].length){Ct=!0;break}Qn.nodes.splice(gr,1),q[dn.id]=void 0,me=!0}}if(Ct||!me&&Ke!==0)break;xt=ft.length;for(var Fa=xt-1;Fa>=0;Fa--){var Ea=ft[Fa];if(!q[Ea.source]||!q[Ea.target]){ft.splice(Fa,1);var Kr=Ea[vt];if(nt[Kr]--,q[Ea.source]&&(q[Ea.source].degree--,q[Ea.source].outDegree--),q[Ea.target]&&(q[Ea.target].degree--,q[Ea.target].inDegree--),ve[Kr]&&nt[Kr]<ve[Kr].length){Ct=!0;break}me=!0}}Ke++}if(Ct||Ct||Qn.nodes.length<K.nodes.length||ft.length<K.edges.length)return Or.splice(na,1),"continue"},jn=qn-1;jn>=0;jn--){var ba=Vn(jn);if(ba==="break")break}for(var ma=Or.length,Pa=function(na){var Qn=Or[na],In={};Qn.edges.forEach(function(ft){var nt="".concat(ft.source,"-").concat(ft.target,"-").concat(ft.label);In[nt]?In[nt]++:In[nt]=1});for(var Ca=function(nt){var L=Or[nt],b={};L.edges.forEach(function(V){var xt="".concat(V.source,"-").concat(V.target,"-").concat(V.label);b[xt]?b[xt]++:b[xt]=1});var w=!0;Object.keys(b).length!==Object.keys(In).length?w=!1:Object.keys(In).forEach(function(V){b[V]!==In[V]&&(w=!1)}),w&&Or.splice(nt,1)},q=ma-1;q>na;q--)Ca(q);ma=Or.length},jn=0;jn<=ma-1;jn++)Pa(jn);return Or}}},it=d;R.default=it},505170:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=k(z(62238)),X=z(770643);function k(D){return D&&D.__esModule?D:{default:D}}var P=function(E,y,M,_){y===void 0&&(y=!1),M===void 0&&(M="weight"),_===void 0&&(_=1e3);var m=E.nodes,I=m===void 0?[]:m,A=E.edges,O=A===void 0?[]:A,U={},j={};I.forEach(function(ot,vt){var gt=(0,X.uniqueId)();ot.clusterId=gt,U[gt]={id:gt,nodes:[ot]},j[ot.id]={node:ot,idx:vt}});var x=(0,B.default)(E,y),d=[],it={};x.forEach(function(ot,vt){var gt=0,Pt=I[vt].id;it[Pt]={},ot.forEach(function(It,Jt){if(It){gt+=It;var zt=I[Jt].id;it[Pt][zt]=It}}),d.push(gt)});for(var Y=0,W=function(){var vt=!1;if(I.forEach(function(gt){var Pt={};Object.keys(it[gt.id]).forEach(function(Ut){var Ft=it[gt.id][Ut],ee=j[Ut].node,ve=ee.clusterId;Pt[ve]||(Pt[ve]=0),Pt[ve]+=Ft});var It=-1/0,Jt=[];if(Object.keys(Pt).forEach(function(Ut){It<Pt[Ut]?(It=Pt[Ut],Jt=[Ut]):It===Pt[Ut]&&Jt.push(Ut)}),!(Jt.length===1&&Jt[0]===gt.clusterId)){var zt=Jt.indexOf(gt.clusterId);if(zt>=0&&Jt.splice(zt,1),Jt&&Jt.length){vt=!0;var kt=U[gt.clusterId],$=kt.nodes.indexOf(gt);kt.nodes.splice($,1);var lt=Math.floor(Math.random()*Jt.length),St=U[Jt[lt]];St.nodes.push(gt),gt.clusterId=St.id}}}),!vt)return"break";Y++};Y<_;){var K=W();if(K==="break")break}Object.keys(U).forEach(function(ot){var vt=U[ot];(!vt.nodes||!vt.nodes.length)&&delete U[ot]});var Q=[],rt={};O.forEach(function(ot){var vt=ot.source,gt=ot.target,Pt=ot[M]||1,It=j[vt].node.clusterId,Jt=j[gt].node.clusterId,zt="".concat(It,"---").concat(Jt);if(rt[zt])rt[zt].weight+=Pt,rt[zt].count++;else{var kt={source:It,target:Jt,weight:Pt,count:1};rt[zt]=kt,Q.push(kt)}});var J=[];return Object.keys(U).forEach(function(ot){J.push(U[ot])}),{clusters:J,clusterEdges:Q}},N=P;R.default=N},135179:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(413810),X=D(z(62238)),k=D(z(29741)),P=z(103665),N=z(526838);function D(m){return m&&m.__esModule?m:{default:m}}var E=function(I,A,O,U){for(var j=A.length,x=2*U,d=0,it=0;it<j;it++)for(var Y=I[it].clusterId,W=0;W<j;W++){var K=I[W].clusterId;if(Y===K){var Q=A[it][W]||0,rt=O[it]||0,J=O[W]||0;d+=Q-rt*J/x}}return d*=1/x,d},y=function(I,A){I===void 0&&(I=[]);for(var O=I.length,U=new k.default([]),j=0;j<O;j++)U=U.add(new k.default(A[j]));var x=U.avg(O);x.normalize();for(var d=0,j=0;j<O;j++){var it=new k.default(A[j]),Y=it.squareEuclideanDistance(x);d+=Y}var W=[];I.forEach(function(){W.push([])});for(var j=0;j<O;j++){var it=new k.default(A[j]);I[j].clusterInertial=0;for(var K=0;K<O;K++){if(j===K){W[j][K]=0;continue}var Q=new k.default(A[K]);W[j][K]=it.squareEuclideanDistance(Q),I[j].clusterInertial+=W[j][K]}}for(var rt=0,J=2*O*d,j=0;j<O;j++)for(var ot=I[j].clusterId,K=0;K<O;K++){var vt=I[K].clusterId;if(!(j===K||ot!==vt)){var gt=I[j].clusterInertial*I[K].clusterInertial/Math.pow(J,2)-W[j][K]/J;rt+=gt}}return Number(rt.toFixed(4))},M=function(I,A,O,U,j,x,d,it,Y){A===void 0&&(A=!1),O===void 0&&(O="weight"),U===void 0&&(U=1e-4),j===void 0&&(j=!1),x===void 0&&(x=void 0),d===void 0&&(d=[]),it===void 0&&(it=["id"]),Y===void 0&&(Y=1);var W=I.nodes,K=W===void 0?[]:W,Q=I.edges,rt=Q===void 0?[]:Q,J=[];if(j){K.forEach(function(ge,Ot){ge.properties=ge.properties||{},ge.originIndex=Ot});var ot=[];K.every(function(ge){return ge.hasOwnProperty("nodeType")})&&(ot=Array.from(new Set(K.map(function(ge){return ge.nodeType}))),K.forEach(function(ge){ge.properties.nodeType=ot.findIndex(function(Ot){return Ot===ge.nodeType})}));var vt=(0,P.getAllProperties)(K,x);J=(0,N.oneHot)(vt,d,it)}var gt=1,Pt={},It={};K.forEach(function(ge,Ot){var Xt=String(gt++);ge.clusterId=Xt,Pt[Xt]={id:Xt,nodes:[ge]},It[ge.id]={node:ge,idx:Ot}});var Jt=(0,X.default)(I,A),zt=[],kt={},$=0;Jt.forEach(function(ge,Ot){var Xt=0,ce=K[Ot].id;kt[ce]={},ge.forEach(function(Lt,Kt){if(Lt){Xt+=Lt;var pe=K[Kt].id;kt[ce][pe]=Lt,$+=Lt}}),zt.push(Xt)}),$/=2;for(var lt=1/0,St=1/0,Ut=0,Ft=[],ee={};;){j&&K.every(function(ge){return ge.hasOwnProperty("properties")})?lt=E(K,Jt,zt,$)+y(K,J)*Y:lt=E(K,Jt,zt,$),Ut===0&&(St=lt,Ft=K,ee=Pt);var ve=lt>0&&lt>St&&lt-St<U;if(lt>St&&(Ft=K.map(function(ge){return{node:ge,clusterId:ge.clusterId}}),ee=(0,B.clone)(Pt),St=lt),ve||Ut>100)break;Ut++,Object.keys(Pt).forEach(function(ge){var Ot=0;rt.forEach(function(Xt){var ce=Xt.source,Lt=Xt.target,Kt=It[ce].node.clusterId,pe=It[Lt].node.clusterId;(Kt===ge&&pe!==ge||pe===ge&&Kt!==ge)&&(Ot=Ot+(Xt[O]||1))}),Pt[ge].sumTot=Ot}),K.forEach(function(ge,Ot){var Xt=Pt[ge.clusterId],ce=0,Lt,Kt=zt[Ot]/(2*$),pe=0,We=Xt.nodes;We.forEach(function(Nn){var Zn=It[Nn.id].idx;pe+=Jt[Ot][Zn]||0});var Je=pe-Xt.sumTot*Kt,Mr=We.filter(function(Nn){return Nn.id!==ge.id}),Vt=[];Mr.forEach(function(Nn,Zn){Vt[Zn]=J[Nn.originIndex]});var on=y(Mr,J)*Y,sn=kt[ge.id];if(Object.keys(sn).forEach(function(Nn){var Zn=It[Nn].node,La=Zn.clusterId;if(La!==ge.clusterId){var Aa=Pt[La],fr=Aa.nodes;if(!(!fr||!fr.length)){var Or=0;fr.forEach(function(ba){var ma=It[ba.id].idx;Or+=Jt[Ot][ma]||0});var vn=Or-Aa.sumTot*Kt,yn=fr.concat([ge]),qn=[];yn.forEach(function(ba,ma){qn[ma]=J[ba.originIndex]});var Vn=y(yn,J)*Y,jn=vn-Je;j&&(jn=vn+Vn-(Je+on)),jn>ce&&(ce=jn,Lt=Aa)}}}),ce>0){Lt.nodes.push(ge);var pn=ge.clusterId;ge.clusterId=Lt.id;var En=Xt.nodes.indexOf(ge);Xt.nodes.splice(En,1);var Yn=0,ea=0;rt.forEach(function(Nn){var Zn=Nn.source,La=Nn.target,Aa=It[Zn].node.clusterId,fr=It[La].node.clusterId;(Aa===Lt.id&&fr!==Lt.id||fr===Lt.id&&Aa!==Lt.id)&&(Yn=Yn+(Nn[O]||1)),(Aa===pn&&fr!==pn||fr===pn&&Aa!==pn)&&(ea=ea+(Nn[O]||1))}),Lt.sumTot=Yn,Xt.sumTot=ea}})}var be={},Ht=0;Object.keys(ee).forEach(function(ge){var Ot=ee[ge];if(!Ot.nodes||!Ot.nodes.length){delete ee[ge];return}var Xt=String(Ht+1);Xt!==ge&&(Ot.id=Xt,Ot.nodes=Ot.nodes.map(function(ce){return{id:ce.id,clusterId:Xt}}),ee[Xt]=Ot,be[ge]=Xt,delete ee[ge],Ht++)}),Ft.forEach(function(ge){var Ot=ge.node,Xt=ge.clusterId;Ot&&(Ot.clusterId=Xt,Ot.clusterId&&be[Ot.clusterId]&&(Ot.clusterId=be[Ot.clusterId]))});var Yt=[],de={};rt.forEach(function(ge){var Ot=ge.source,Xt=ge.target,ce=ge[O]||1,Lt=It[Ot].node.clusterId,Kt=It[Xt].node.clusterId;if(!(!Lt||!Kt)){var pe="".concat(Lt,"---").concat(Kt);if(de[pe])de[pe].weight+=ce,de[pe].count++;else{var We={source:Lt,target:Kt,weight:ce,count:1};de[pe]=We,Yt.push(We)}}});var Ee=[];return Object.keys(ee).forEach(function(ge){Ee.push(ee[ge])}),{clusters:Ee,clusterEdges:Yt}},_=M;R.default=_},689454:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=P(z(838823)),X=P(z(257085)),k=z(770643);function P(M){return M&&M.__esModule?M:{default:M}}var N=function(_,m){var I=[],A=_.nodes,O=A===void 0?[]:A,U=_.edges,j=U===void 0?[]:U;if(O.length===0)return I;var x=O[0],d=new Set;d.add(x);var it=function(J,ot){return m?J.weight-ot.weight:0},Y=new X.default(it);for((0,k.getEdgesByNodeId)(x.id,j).forEach(function(rt){Y.insert(rt)});!Y.isEmpty();){var W=Y.delMin(),K=W.source,Q=W.target;d.has(K)&&d.has(Q)||(I.push(W),d.has(K)||(d.add(K),(0,k.getEdgesByNodeId)(K,j).forEach(function(rt){Y.insert(rt)})),d.has(Q)||(d.add(Q),(0,k.getEdgesByNodeId)(Q,j).forEach(function(rt){Y.insert(rt)})))}return I},D=function(_,m){var I=[],A=_.nodes,O=A===void 0?[]:A,U=_.edges,j=U===void 0?[]:U;if(O.length===0)return I;var x=j.map(function(K){return K});m&&x.sort(function(K,Q){return K.weight-Q.weight});for(var d=new B.default(O.map(function(K){return K.id}));x.length>0;){var it=x.shift(),Y=it.source,W=it.target;d.connected(Y,W)||(I.push(it),d.union(Y,W))}return I},E=function(_,m,I){var A={prim:N,kruskal:D};return I?A[I](_,m):D(_,m)},y=E;R.default=y},274926:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=k(z(182556)),X=z(770643);function k(D){return D&&D.__esModule?D:{default:D}}var P=function(E,y,M){typeof y!="number"&&(y=1e-6),typeof M!="number"&&(M=.85);for(var _=1,m=0,I=1e3,A=E.nodes,O=A===void 0?[]:A,U=E.edges,j=U===void 0?[]:U,x=O.length,d,it={},Y={},W=0;W<x;++W){var K=O[W],Q=K.id;it[Q]=1/x,Y[Q]=1/x}for(var rt=(0,B.default)(E);I>0&&_>y;){m=0;for(var W=0;W<x;++W){var K=O[W],Q=K.id;if(d=0,rt[K.id].inDegree===0)it[Q]=0;else{for(var J=(0,X.getNeighbors)(Q,j,"source"),ot=0;ot<J.length;++ot){var vt=J[ot],gt=rt[vt].outDegree;gt>0&&(d+=Y[vt]/gt)}it[Q]=M*d,m+=it[Q]}}m=(1-m)/x,_=0;for(var W=0;W<x;++W){var K=O[W],Q=K.id;d=it[Q]+m,_+=Math.abs(d-Y[Q]),Y[Q]=d}I-=1}return Y},N=P;R.default=N},257085:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var z=function(P,N){return P-N},B=function(){function k(P){P===void 0&&(P=z),this.compareFn=P,this.list=[]}return k.prototype.getLeft=function(P){return 2*P+1},k.prototype.getRight=function(P){return 2*P+2},k.prototype.getParent=function(P){return P===0?null:Math.floor((P-1)/2)},k.prototype.isEmpty=function(){return this.list.length<=0},k.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},k.prototype.delMin=function(){var P=this.top(),N=this.list.pop();return this.list.length>0&&(this.list[0]=N,this.moveDown(0)),P},k.prototype.insert=function(P){if(P!==null){this.list.push(P);var N=this.list.length-1;return this.moveUp(N),!0}return!1},k.prototype.moveUp=function(P){for(var N=this.getParent(P);P&&P>0&&this.compareFn(this.list[N],this.list[P])>0;){var D=this.list[N];this.list[N]=this.list[P],this.list[P]=D,P=N,N=this.getParent(P)}},k.prototype.moveDown=function(P){var N,D=P,E=this.getLeft(P),y=this.getRight(P),M=this.list.length;E!==null&&E<M&&this.compareFn(this.list[D],this.list[E])>0?D=E:y!==null&&y<M&&this.compareFn(this.list[D],this.list[y])>0&&(D=y),P!==D&&(N=[this.list[D],this.list[P]],this.list[P]=N[0],this.list[D]=N[1],this.moveDown(D))},k}(),X=B;R.default=X},488481:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=R.LinkedListNode=void 0;var z=function(N,D){return N===D},B=function(){function P(N,D){D===void 0&&(D=null),this.value=N,this.next=D}return P.prototype.toString=function(N){return N?N(this.value):"".concat(this.value)},P}();R.LinkedListNode=B;var X=function(){function P(N){N===void 0&&(N=z),this.head=null,this.tail=null,this.compare=N}return P.prototype.prepend=function(N){var D=new B(N,this.head);return this.head=D,this.tail||(this.tail=D),this},P.prototype.append=function(N){var D=new B(N);return this.head?(this.tail.next=D,this.tail=D,this):(this.head=D,this.tail=D,this)},P.prototype.delete=function(N){if(!this.head)return null;for(var D=null;this.head&&this.compare(this.head.value,N);)D=this.head,this.head=this.head.next;var E=this.head;if(E!==null)for(;E.next;)this.compare(E.next.value,N)?(D=E.next,E.next=E.next.next):E=E.next;return this.compare(this.tail.value,N)&&(this.tail=E),D},P.prototype.find=function(N){var D=N.value,E=D===void 0?void 0:D,y=N.callback,M=y===void 0?void 0:y;if(!this.head)return null;for(var _=this.head;_;){if(M&&M(_.value)||E!==void 0&&this.compare(_.value,E))return _;_=_.next}return null},P.prototype.deleteTail=function(){var N=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,N;for(var D=this.head;D.next;)D.next.next?D=D.next:D.next=null;return this.tail=D,N},P.prototype.deleteHead=function(){if(!this.head)return null;var N=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),N},P.prototype.fromArray=function(N){var D=this;return N.forEach(function(E){return D.append(E)}),this},P.prototype.toArray=function(){for(var N=[],D=this.head;D;)N.push(D),D=D.next;return N},P.prototype.reverse=function(){for(var N=this.head,D=null,E=null;N;)E=N.next,N.next=D,D=N,N=E;this.tail=this.head,this.head=D},P.prototype.toString=function(N){return N===void 0&&(N=void 0),this.toArray().map(function(D){return D.toString(N)}).toString()},P}(),k=X;R.default=k},893026:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=X(z(488481));function X(N){return N&&N.__esModule?N:{default:N}}var k=function(){function N(){this.linkedList=new B.default}return N.prototype.isEmpty=function(){return!this.linkedList.head},N.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},N.prototype.enqueue=function(D){this.linkedList.append(D)},N.prototype.dequeue=function(){var D=this.linkedList.deleteHead();return D?D.value:null},N.prototype.toString=function(D){return this.linkedList.toString(D)},N}(),P=k;R.default=P},838823:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var z=function(){function X(k){this.count=k.length,this.parent={};for(var P=0,N=k;P<N.length;P++){var D=N[P];this.parent[D]=D}}return X.prototype.find=function(k){for(;this.parent[k]!==k;)k=this.parent[k];return k},X.prototype.union=function(k,P){var N=this.find(k),D=this.find(P);N!==D&&(N<D?(this.parent[P]!==P&&this.union(this.parent[P],k),this.parent[P]=this.parent[k]):(this.parent[k]!==k&&this.union(this.parent[k],P),this.parent[k]=this.parent[P]))},X.prototype.connected=function(k,P){return this.find(k)===this.find(P)},X}(),B=z;R.default=B},317892:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.DistanceType=void 0;var z;R.DistanceType=z,function(B){B.EuclideanDistance="euclideanDistance"}(z||(R.DistanceType=z={}))},770643:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.uniqueId=R.getOutEdgesNodeId=R.getNeighbors=R.getEdgesByNodeId=void 0;var z=function(N,D,E){D===void 0&&(D=[]);var y=D.filter(function(I){return I.source===N||I.target===N});if(E==="target"){var M=function(A){return A.source===N};return y.filter(M).map(function(I){return I.target})}if(E==="source"){var _=function(A){return A.target===N};return y.filter(_).map(function(I){return I.source})}var m=function(A){return A.source===N?A.target:A.source};return y.map(m)};R.getNeighbors=z;var B=function(N,D){return D.filter(function(E){return E.source===N})};R.getOutEdgesNodeId=B;var X=function(N,D){return D.filter(function(E){return E.source===N||E.target===N})};R.getEdgesByNodeId=X;var k=function(N){N===void 0&&(N=0);var D="".concat(Math.random()).split(".")[1].substr(0,5),E="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(N,"-").concat(D).concat(E)};R.uniqueId=k},526838:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.oneHot=R.getDistance=R.getAllKeyValueMap=R.default=void 0;var B=z(413810),X=z(317892),k=P(z(29741));function P(M){return M&&M.__esModule?M:{default:M}}var N=function(_,m,I){var A=[];m!=null&&m.length?A=m:(_.forEach(function(U){A=A.concat(Object.keys(U))}),A=(0,B.uniq)(A));var O={};return A.forEach(function(U){var j=[];_.forEach(function(x){x[U]!==void 0&&x[U]!==""&&j.push(x[U])}),j.length&&!(I!=null&&I.includes(U))&&(O[U]=(0,B.uniq)(j))}),O};R.getAllKeyValueMap=N;var D=function(_,m,I){var A=N(_,m,I),O=[];if(!Object.keys(A).length)return O;var U=Object.values(A),j=U.every(function(x){return x.every(function(d){return typeof d=="number"})});return _.forEach(function(x,d){var it=[];Object.keys(A).forEach(function(Y){var W=x[Y],K=A[Y],Q=K.findIndex(function(ot){return W===ot}),rt=[];if(j)rt.push(W);else for(var J=0;J<K.length;J++)J===Q?rt.push(1):rt.push(0);it=it.concat(rt)}),O[d]=it}),O};R.oneHot=D;var E=function(_,m,I,A){I===void 0&&(I=X.DistanceType.EuclideanDistance);var O=0;switch(I){case X.DistanceType.EuclideanDistance:O=new k.default(_).euclideanDistance(new k.default(m));break;default:break}return O};R.getDistance=E;var y={getAllKeyValueMap:N,oneHot:D,getDistance:E};R.default=y},103665:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getPropertyWeight=R.getAllSortProperties=R.getAllProperties=R.default=void 0;var B=z(592935),X=function(y,M){y===void 0&&(y=[]),M===void 0&&(M=100);var _={};y.forEach(function(I){I.properties&&Object.keys(I.properties).forEach(function(A){if(A==="id"||!"".concat(I.properties[A]).match(B.secondReg)&&!"".concat(I.properties[A]).match(B.dateReg)&&isNaN(Number(I.properties[A]))){_.hasOwnProperty(A)&&delete _[A];return}_.hasOwnProperty(A)?_[A]+=1:_[A]=1})});var m=Object.keys(_).sort(function(I,A){return _[A]-_[I]});return m.length<M?m:m.slice(0,M)};R.getAllSortProperties=X;var k=function(y,M){return M.map(function(_){return y.hasOwnProperty(_)?y[_]:0})},P=function(y){for(var M=X(y),_=[],m=0;m<y.length;m++)_[m]=k(y[m].properties,M);return _};R.getPropertyWeight=P;var N=function(y,M){M===void 0&&(M=void 0);var _=[];return y.forEach(function(m){M===void 0&&_.push(m),m[M]!==void 0&&_.push(m[M])}),_};R.getAllProperties=N;var D={getAllSortProperties:X,getPropertyWeight:P,getAllProperties:N};R.default=D},29741:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(413810),X=function(){function P(N){this.arr=N}return P.prototype.getArr=function(){return this.arr||[]},P.prototype.add=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length))return new P(E);if(!(E!=null&&E.length))return new P(this.arr);if(this.arr.length===E.length){var y=[];for(var M in this.arr)y[M]=this.arr[M]+E[M];return new P(y)}},P.prototype.subtract=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length))return new P(E);if(!(E!=null&&E.length))return new P(this.arr);if(this.arr.length===E.length){var y=[];for(var M in this.arr)y[M]=this.arr[M]-E[M];return new P(y)}},P.prototype.avg=function(N){var D=[];if(N!==0)for(var E in this.arr)D[E]=this.arr[E]/N;return new P(D)},P.prototype.negate=function(){var N=[];for(var D in this.arr)N[D]=-this.arr[D];return new P(N)},P.prototype.squareEuclideanDistance=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var y=0;for(var M in this.arr)y+=Math.pow(this.arr[M]-N.arr[M],2);return y}},P.prototype.euclideanDistance=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var y=0;for(var M in this.arr)y+=Math.pow(this.arr[M]-N.arr[M],2);return Math.sqrt(y)}else console.error("The two vectors are unequal in length.")},P.prototype.normalize=function(){var N=[],D=(0,B.clone)(this.arr);D.sort(function(_,m){return _-m});var E=D[D.length-1],y=D[0];for(var M in this.arr)N[M]=(this.arr[M]-y)/(E-y);return new P(N)},P.prototype.norm2=function(){var N;if(!(!((N=this.arr)===null||N===void 0)&&N.length))return 0;var D=0;for(var E in this.arr)D+=Math.pow(this.arr[E],2);return Math.sqrt(D)},P.prototype.dot=function(N){var D,E=N.arr;if(!(!((D=this.arr)===null||D===void 0)&&D.length)||!(E!=null&&E.length))return 0;if(this.arr.length===E.length){var y=0;for(var M in this.arr)y+=this.arr[M]*N.arr[M];return y}else console.error("The two vectors are unequal in length.")},P.prototype.equal=function(N){var D,E=N.arr;if(((D=this.arr)===null||D===void 0?void 0:D.length)!==(E==null?void 0:E.length))return!1;for(var y in this.arr)if(this.arr[y]!==E[y])return!1;return!0},P}(),k=X;R.default=k},831656:function(dr,R,z){"use strict";function B(Y){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},B(Y)}Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"GADDI",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(R,"breadthFirstSearch",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(R,"connectedComponent",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(R,"depthFirstSearch",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(R,"detectCycle",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(R,"dijkstra",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(R,"findAllPath",{enumerable:!0,get:function(){return M.findAllPath}}),Object.defineProperty(R,"findShortestPath",{enumerable:!0,get:function(){return M.findShortestPath}}),Object.defineProperty(R,"floydWarshall",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(R,"getAdjMatrix",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(R,"getDegree",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(R,"getInDegree",{enumerable:!0,get:function(){return N.getInDegree}}),Object.defineProperty(R,"getNeighbors",{enumerable:!0,get:function(){return j.getNeighbors}}),Object.defineProperty(R,"getOutDegree",{enumerable:!0,get:function(){return N.getOutDegree}}),Object.defineProperty(R,"labelPropagation",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(R,"louvain",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(R,"minimumSpanningTree",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(R,"pageRank",{enumerable:!0,get:function(){return O.default}});var X=it(z(62238)),k=it(z(683764)),P=it(z(759527)),N=d(z(182556)),D=it(z(994282)),E=it(z(45891)),y=it(z(878089)),M=z(241727),_=it(z(975033)),m=it(z(505170)),I=it(z(135179)),A=it(z(689454)),O=it(z(274926)),U=it(z(882812)),j=z(770643);function x(Y){if(typeof WeakMap!="function")return null;var W=new WeakMap,K=new WeakMap;return(x=function(rt){return rt?K:W})(Y)}function d(Y,W){if(!W&&Y&&Y.__esModule)return Y;if(Y===null||B(Y)!=="object"&&typeof Y!="function")return{default:Y};var K=x(W);if(K&&K.has(Y))return K.get(Y);var Q={},rt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in Y)if(J!=="default"&&Object.prototype.hasOwnProperty.call(Y,J)){var ot=rt?Object.getOwnPropertyDescriptor(Y,J):null;ot&&(ot.get||ot.set)?Object.defineProperty(Q,J,ot):Q[J]=Y[J]}return Q.default=Y,K&&K.set(Y,Q),Q}function it(Y){return Y&&Y.__esModule?Y:{default:Y}}},66044:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.MESSAGE=R.ALGORITHM=void 0;var z={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};R.ALGORITHM=z;var B={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};R.MESSAGE=B},70585:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var B=z(66044),X=k(z(612067));function k(D){return D&&D.__esModule?D:{default:D}}var P=function(E){return function(){for(var y=[],M=0;M<arguments.length;M++)y[M]=arguments[M];return new Promise(function(_,m){var I=new X.default;I.postMessage({_algorithmType:E,data:y}),I.onmessage=function(A){var O=A.data,U=O.data,j=O._algorithmType;B.MESSAGE.SUCCESS===j?_(U):m(),I.terminate()}})}},N=P;R.default=N},430485:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.pageRankAsync=R.minimumSpanningTreeAsync=R.louvainAsync=R.labelPropagationAsync=R.getOutDegreeAsync=R.getNeighborsAsync=R.getInDegreeAsync=R.getDegreeAsync=R.getAdjMatrixAsync=R.floydWarshallAsync=R.findShortestPathAsync=R.findAllPathAsync=R.dijkstraAsync=R.detectCycleAsync=R.detectAllUndirectedCycleAsync=R.detectAllDirectedCycleAsync=R.detectAllCyclesAsync=R.connectedComponentAsync=R.GADDIAsync=void 0;var B=k(z(70585)),X=z(66044);function k(Q){return Q&&Q.__esModule?Q:{default:Q}}var P=function(rt,J){return(0,B.default)(X.ALGORITHM.getAdjMatrix).apply(void 0,[rt,J])};R.getAdjMatrixAsync=P;var N=function(rt,J){return(0,B.default)(X.ALGORITHM.connectedComponent).apply(void 0,[rt,J])};R.connectedComponentAsync=N;var D=function(rt){return(0,B.default)(X.ALGORITHM.getDegree)(rt)};R.getDegreeAsync=D;var E=function(rt,J){return(0,B.default)(X.ALGORITHM.getInDegree)(rt,J)};R.getInDegreeAsync=E;var y=function(rt,J){return(0,B.default)(X.ALGORITHM.getOutDegree)(rt,J)};R.getOutDegreeAsync=y;var M=function(rt){return(0,B.default)(X.ALGORITHM.detectCycle)(rt)};R.detectCycleAsync=M;var _=function(rt){return(0,B.default)(X.ALGORITHM.detectAllCycles)(rt)};R.detectAllCyclesAsync=_;var m=function(rt){return(0,B.default)(X.ALGORITHM.detectAllDirectedCycle)(rt)};R.detectAllDirectedCycleAsync=m;var I=function(rt){return(0,B.default)(X.ALGORITHM.detectAllUndirectedCycle)(rt)};R.detectAllUndirectedCycleAsync=I;var A=function(rt,J,ot,vt){return(0,B.default)(X.ALGORITHM.dijkstra).apply(void 0,[rt,J,ot,vt])};R.dijkstraAsync=A;var O=function(rt,J,ot,vt){return(0,B.default)(X.ALGORITHM.findAllPath).apply(void 0,[rt,J,ot,vt])};R.findAllPathAsync=O;var U=function(rt,J,ot,vt,gt){return(0,B.default)(X.ALGORITHM.findShortestPath).apply(void 0,[rt,J,ot,vt,gt])};R.findShortestPathAsync=U;var j=function(rt,J){return(0,B.default)(X.ALGORITHM.floydWarshall).apply(void 0,[rt,J])};R.floydWarshallAsync=j;var x=function(rt,J,ot,vt){return vt===void 0&&(vt=1e3),(0,B.default)(X.ALGORITHM.labelPropagation)(rt,J,ot,vt)};R.labelPropagationAsync=x;var d=function(rt,J,ot,vt){return(0,B.default)(X.ALGORITHM.louvain)(rt,J,ot,vt)};R.louvainAsync=d;var it=function(rt,J,ot){return(0,B.default)(X.ALGORITHM.minimumSpanningTree).apply(void 0,[rt,J,ot])};R.minimumSpanningTreeAsync=it;var Y=function(rt,J,ot){return(0,B.default)(X.ALGORITHM.pageRank).apply(void 0,[rt,J,ot])};R.pageRankAsync=Y;var W=function(rt,J,ot){return(0,B.default)(X.ALGORITHM.getNeighbors).apply(void 0,[rt,J,ot])};R.getNeighborsAsync=W;var K=function(rt,J,ot,vt,gt,Pt,It){return ot===void 0&&(ot=!1),Pt===void 0&&(Pt="cluster"),It===void 0&&(It="cluster"),(0,B.default)(X.ALGORITHM.GADDI).apply(void 0,[rt,J,ot,vt,gt,Pt,It])};R.GADDIAsync=K},612067:function(dr,R,z){"use strict";function B(y){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},B(y)}Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var X=N(z(831656)),k=z(66044);function P(y){if(typeof WeakMap!="function")return null;var M=new WeakMap,_=new WeakMap;return(P=function(I){return I?_:M})(y)}function N(y,M){if(!M&&y&&y.__esModule)return y;if(y===null||B(y)!=="object"&&typeof y!="function")return{default:y};var _=P(M);if(_&&_.has(y))return _.get(y);var m={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in y)if(A!=="default"&&Object.prototype.hasOwnProperty.call(y,A)){var O=I?Object.getOwnPropertyDescriptor(y,A):null;O&&(O.get||O.set)?Object.defineProperty(m,A,O):m[A]=y[A]}return m.default=y,_&&_.set(y,m),m}var D=typeof self!="undefined"?self:{};D.onmessage=function(y){var M=y.data,_=M._algorithmType,m=M.data;if(_){if(typeof X[_]=="function"){var I=X[_].apply(X,m);D.postMessage({_algorithmType:k.MESSAGE.SUCCESS,data:I});return}D.postMessage({_algorithmType:k.MESSAGE.FAILURE})}};var E=null;R.default=E},901029:function(dr,R,z){"use strict";z.r(R),z.d(R,{Kernel:function(){return Pt},World:function(){return Ca}});var B=z(115861),X=z(204942),k=z(215671),P=z(143144),N=z(936719),D=z.n(N),E=z(281763),y=z.n(E),M=z(701469),_=z.n(M),m=z(364687),I=z.n(m),A=null,O=1;function U(){return O++}var j=null,x=null,d;(function(q){q[q.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",q[q.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",q[q.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",q[q.POINTS=0]="POINTS",q[q.LINES=1]="LINES",q[q.LINE_LOOP=2]="LINE_LOOP",q[q.LINE_STRIP=3]="LINE_STRIP",q[q.TRIANGLES=4]="TRIANGLES",q[q.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",q[q.TRIANGLE_FAN=6]="TRIANGLE_FAN",q[q.ZERO=0]="ZERO",q[q.ONE=1]="ONE",q[q.SRC_COLOR=768]="SRC_COLOR",q[q.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",q[q.SRC_ALPHA=770]="SRC_ALPHA",q[q.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",q[q.DST_ALPHA=772]="DST_ALPHA",q[q.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",q[q.DST_COLOR=774]="DST_COLOR",q[q.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",q[q.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",q[q.FUNC_ADD=32774]="FUNC_ADD",q[q.BLEND_EQUATION=32777]="BLEND_EQUATION",q[q.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",q[q.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",q[q.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",q[q.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",q[q.MAX_EXT=32776]="MAX_EXT",q[q.MIN_EXT=32775]="MIN_EXT",q[q.BLEND_DST_RGB=32968]="BLEND_DST_RGB",q[q.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",q[q.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",q[q.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",q[q.CONSTANT_COLOR=32769]="CONSTANT_COLOR",q[q.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",q[q.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",q[q.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",q[q.BLEND_COLOR=32773]="BLEND_COLOR",q[q.ARRAY_BUFFER=34962]="ARRAY_BUFFER",q[q.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",q[q.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",q[q.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",q[q.STREAM_DRAW=35040]="STREAM_DRAW",q[q.STATIC_DRAW=35044]="STATIC_DRAW",q[q.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",q[q.BUFFER_SIZE=34660]="BUFFER_SIZE",q[q.BUFFER_USAGE=34661]="BUFFER_USAGE",q[q.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",q[q.FRONT=1028]="FRONT",q[q.BACK=1029]="BACK",q[q.FRONT_AND_BACK=1032]="FRONT_AND_BACK",q[q.CULL_FACE=2884]="CULL_FACE",q[q.BLEND=3042]="BLEND",q[q.DITHER=3024]="DITHER",q[q.STENCIL_TEST=2960]="STENCIL_TEST",q[q.DEPTH_TEST=2929]="DEPTH_TEST",q[q.SCISSOR_TEST=3089]="SCISSOR_TEST",q[q.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",q[q.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",q[q.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",q[q.NO_ERROR=0]="NO_ERROR",q[q.INVALID_ENUM=1280]="INVALID_ENUM",q[q.INVALID_VALUE=1281]="INVALID_VALUE",q[q.INVALID_OPERATION=1282]="INVALID_OPERATION",q[q.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",q[q.CW=2304]="CW",q[q.CCW=2305]="CCW",q[q.LINE_WIDTH=2849]="LINE_WIDTH",q[q.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",q[q.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",q[q.CULL_FACE_MODE=2885]="CULL_FACE_MODE",q[q.FRONT_FACE=2886]="FRONT_FACE",q[q.DEPTH_RANGE=2928]="DEPTH_RANGE",q[q.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",q[q.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",q[q.DEPTH_FUNC=2932]="DEPTH_FUNC",q[q.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",q[q.STENCIL_FUNC=2962]="STENCIL_FUNC",q[q.STENCIL_FAIL=2964]="STENCIL_FAIL",q[q.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",q[q.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",q[q.STENCIL_REF=2967]="STENCIL_REF",q[q.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",q[q.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",q[q.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",q[q.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",q[q.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",q[q.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",q[q.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",q[q.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",q[q.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",q[q.VIEWPORT=2978]="VIEWPORT",q[q.SCISSOR_BOX=3088]="SCISSOR_BOX",q[q.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",q[q.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",q[q.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",q[q.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",q[q.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",q[q.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",q[q.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",q[q.RED_BITS=3410]="RED_BITS",q[q.GREEN_BITS=3411]="GREEN_BITS",q[q.BLUE_BITS=3412]="BLUE_BITS",q[q.ALPHA_BITS=3413]="ALPHA_BITS",q[q.DEPTH_BITS=3414]="DEPTH_BITS",q[q.STENCIL_BITS=3415]="STENCIL_BITS",q[q.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",q[q.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",q[q.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",q[q.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",q[q.SAMPLES=32937]="SAMPLES",q[q.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",q[q.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",q[q.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",q[q.DONT_CARE=4352]="DONT_CARE",q[q.FASTEST=4353]="FASTEST",q[q.NICEST=4354]="NICEST",q[q.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",q[q.BYTE=5120]="BYTE",q[q.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",q[q.SHORT=5122]="SHORT",q[q.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",q[q.INT=5124]="INT",q[q.UNSIGNED_INT=5125]="UNSIGNED_INT",q[q.FLOAT=5126]="FLOAT",q[q.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",q[q.ALPHA=6406]="ALPHA",q[q.RGB=6407]="RGB",q[q.RGBA=6408]="RGBA",q[q.LUMINANCE=6409]="LUMINANCE",q[q.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",q[q.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",q[q.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",q[q.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",q[q.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",q[q.VERTEX_SHADER=35633]="VERTEX_SHADER",q[q.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",q[q.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",q[q.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",q[q.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",q[q.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",q[q.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",q[q.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",q[q.SHADER_TYPE=35663]="SHADER_TYPE",q[q.DELETE_STATUS=35712]="DELETE_STATUS",q[q.LINK_STATUS=35714]="LINK_STATUS",q[q.VALIDATE_STATUS=35715]="VALIDATE_STATUS",q[q.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",q[q.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",q[q.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",q[q.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",q[q.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",q[q.NEVER=512]="NEVER",q[q.LESS=513]="LESS",q[q.EQUAL=514]="EQUAL",q[q.LEQUAL=515]="LEQUAL",q[q.GREATER=516]="GREATER",q[q.NOTEQUAL=517]="NOTEQUAL",q[q.GEQUAL=518]="GEQUAL",q[q.ALWAYS=519]="ALWAYS",q[q.KEEP=7680]="KEEP",q[q.REPLACE=7681]="REPLACE",q[q.INCR=7682]="INCR",q[q.DECR=7683]="DECR",q[q.INVERT=5386]="INVERT",q[q.INCR_WRAP=34055]="INCR_WRAP",q[q.DECR_WRAP=34056]="DECR_WRAP",q[q.VENDOR=7936]="VENDOR",q[q.RENDERER=7937]="RENDERER",q[q.VERSION=7938]="VERSION",q[q.NEAREST=9728]="NEAREST",q[q.LINEAR=9729]="LINEAR",q[q.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",q[q.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",q[q.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",q[q.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",q[q.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",q[q.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",q[q.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",q[q.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",q[q.TEXTURE_2D=3553]="TEXTURE_2D",q[q.TEXTURE=5890]="TEXTURE",q[q.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",q[q.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",q[q.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",q[q.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",q[q.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",q[q.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",q[q.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",q[q.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",q[q.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",q[q.TEXTURE0=33984]="TEXTURE0",q[q.TEXTURE1=33985]="TEXTURE1",q[q.TEXTURE2=33986]="TEXTURE2",q[q.TEXTURE3=33987]="TEXTURE3",q[q.TEXTURE4=33988]="TEXTURE4",q[q.TEXTURE5=33989]="TEXTURE5",q[q.TEXTURE6=33990]="TEXTURE6",q[q.TEXTURE7=33991]="TEXTURE7",q[q.TEXTURE8=33992]="TEXTURE8",q[q.TEXTURE9=33993]="TEXTURE9",q[q.TEXTURE10=33994]="TEXTURE10",q[q.TEXTURE11=33995]="TEXTURE11",q[q.TEXTURE12=33996]="TEXTURE12",q[q.TEXTURE13=33997]="TEXTURE13",q[q.TEXTURE14=33998]="TEXTURE14",q[q.TEXTURE15=33999]="TEXTURE15",q[q.TEXTURE16=34e3]="TEXTURE16",q[q.TEXTURE17=34001]="TEXTURE17",q[q.TEXTURE18=34002]="TEXTURE18",q[q.TEXTURE19=34003]="TEXTURE19",q[q.TEXTURE20=34004]="TEXTURE20",q[q.TEXTURE21=34005]="TEXTURE21",q[q.TEXTURE22=34006]="TEXTURE22",q[q.TEXTURE23=34007]="TEXTURE23",q[q.TEXTURE24=34008]="TEXTURE24",q[q.TEXTURE25=34009]="TEXTURE25",q[q.TEXTURE26=34010]="TEXTURE26",q[q.TEXTURE27=34011]="TEXTURE27",q[q.TEXTURE28=34012]="TEXTURE28",q[q.TEXTURE29=34013]="TEXTURE29",q[q.TEXTURE30=34014]="TEXTURE30",q[q.TEXTURE31=34015]="TEXTURE31",q[q.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",q[q.REPEAT=10497]="REPEAT",q[q.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",q[q.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",q[q.FLOAT_VEC2=35664]="FLOAT_VEC2",q[q.FLOAT_VEC3=35665]="FLOAT_VEC3",q[q.FLOAT_VEC4=35666]="FLOAT_VEC4",q[q.INT_VEC2=35667]="INT_VEC2",q[q.INT_VEC3=35668]="INT_VEC3",q[q.INT_VEC4=35669]="INT_VEC4",q[q.BOOL=35670]="BOOL",q[q.BOOL_VEC2=35671]="BOOL_VEC2",q[q.BOOL_VEC3=35672]="BOOL_VEC3",q[q.BOOL_VEC4=35673]="BOOL_VEC4",q[q.FLOAT_MAT2=35674]="FLOAT_MAT2",q[q.FLOAT_MAT3=35675]="FLOAT_MAT3",q[q.FLOAT_MAT4=35676]="FLOAT_MAT4",q[q.SAMPLER_2D=35678]="SAMPLER_2D",q[q.SAMPLER_CUBE=35680]="SAMPLER_CUBE",q[q.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",q[q.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",q[q.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",q[q.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",q[q.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",q[q.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",q[q.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",q[q.COMPILE_STATUS=35713]="COMPILE_STATUS",q[q.LOW_FLOAT=36336]="LOW_FLOAT",q[q.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",q[q.HIGH_FLOAT=36338]="HIGH_FLOAT",q[q.LOW_INT=36339]="LOW_INT",q[q.MEDIUM_INT=36340]="MEDIUM_INT",q[q.HIGH_INT=36341]="HIGH_INT",q[q.FRAMEBUFFER=36160]="FRAMEBUFFER",q[q.RENDERBUFFER=36161]="RENDERBUFFER",q[q.RGBA4=32854]="RGBA4",q[q.RGB5_A1=32855]="RGB5_A1",q[q.RGB565=36194]="RGB565",q[q.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",q[q.STENCIL_INDEX=6401]="STENCIL_INDEX",q[q.STENCIL_INDEX8=36168]="STENCIL_INDEX8",q[q.DEPTH_STENCIL=34041]="DEPTH_STENCIL",q[q.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",q[q.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",q[q.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",q[q.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",q[q.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",q[q.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",q[q.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",q[q.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",q[q.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",q[q.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",q[q.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",q[q.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",q[q.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",q[q.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",q[q.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",q[q.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",q[q.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",q[q.NONE=0]="NONE",q[q.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",q[q.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",q[q.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",q[q.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",q[q.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",q[q.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",q[q.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",q[q.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",q[q.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",q[q.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",q[q.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",q[q.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",q[q.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",q[q.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",q[q.COPY_SRC=1]="COPY_SRC",q[q.COPY_DST=2]="COPY_DST",q[q.SAMPLED=4]="SAMPLED",q[q.STORAGE=8]="STORAGE",q[q.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(d||(d={}));var it=function(){function q(){(0,k.Z)(this,q),this.config=void 0}return(0,P.Z)(q,[{key:"get",value:function(){return this.config}},{key:"set",value:function(nt){this.config=nt}}]),q}(),Y=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),W;(function(q){q.Void="Void",q.Boolean="Boolean",q.Float="Float",q.Uint32="Uint32",q.Int32="Int32",q.Vector="Vector",q.Vector2Float="vec2<f32>",q.Vector3Float="vec3<f32>",q.Vector4Float="vec4<f32>",q.Vector2Boolean="vec2<bool>",q.Vector3Boolean="vec3<bool>",q.Vector4Boolean="vec4<bool>",q.Vector2Uint="vec2<u32>",q.Vector3Uint="vec3<u32>",q.Vector4Uint="vec4<u32>",q.Vector2Int="vec2<i32>",q.Vector3Int="vec3<i32>",q.Vector4Int="vec4<i32>",q.Matrix="Matrix",q.Matrix3x3Float="mat3x3<f32>",q.Matrix4x4Float="mat4x4<i32>",q.Struct="Struct",q.FloatArray="Float[]",q.Vector4FloatArray="vec4<f32>[]"})(W||(W={}));var K;(function(q){q.Program="Program",q.Identifier="Identifier",q.VariableDeclaration="VariableDeclaration",q.BlockStatement="BlockStatement",q.ReturnStatement="ReturnStatement",q.FunctionDeclaration="FunctionDeclaration",q.VariableDeclarator="VariableDeclarator",q.AssignmentExpression="AssignmentExpression",q.LogicalExpression="LogicalExpression",q.BinaryExpression="BinaryExpression",q.ArrayExpression="ArrayExpression",q.UnaryExpression="UnaryExpression",q.UpdateExpression="UpdateExpression",q.FunctionExpression="FunctionExpression",q.MemberExpression="MemberExpression",q.ConditionalExpression="ConditionalExpression",q.ExpressionStatement="ExpressionStatement",q.CallExpression="CallExpression",q.NumThreadStatement="NumThreadStatement",q.StorageStatement="StorageStatement",q.DoWhileStatement="DoWhileStatement",q.WhileStatement="WhileStatement",q.ForStatement="ForStatement",q.BreakStatement="BreakStatement",q.ContinueStatement="ContinueStatement",q.IfStatement="IfStatement",q.ImportedFunctionStatement="ImportedFunctionStatement"})(K||(K={}));var Q;(function(q){q.Input="Input",q.Output="Output",q.Uniform="Uniform",q.Workgroup="Workgroup",q.UniformConstant="UniformConstant",q.Image="Image",q.StorageBuffer="StorageBuffer",q.Private="Private",q.Function="Function"})(Q||(Q={}));var rt;(function(q){q.GLSL100="GLSL100",q.GLSL450="GLSL450",q.WGSL="WGSL"})(rt||(rt={}));var J="__DefineValuePlaceholder__";function ot(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function vt(q,ft){var nt=Object.keys(q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(q);ft&&(L=L.filter(function(b){return Object.getOwnPropertyDescriptor(q,b).enumerable})),nt.push.apply(nt,L)}return nt}function gt(q){for(var ft=1;ft<arguments.length;ft++){var nt=arguments[ft]!=null?arguments[ft]:{};ft%2?vt(Object(nt),!0).forEach(function(L){(0,X.Z)(q,L,nt[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(nt)):vt(Object(nt)).forEach(function(L){Object.defineProperty(q,L,Object.getOwnPropertyDescriptor(nt,L))})}return q}var Pt=function(){function q(ft,nt){(0,k.Z)(this,q),this.engine=ft,this.configService=nt,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,P.Z)(q,[{key:"init",value:function(){var nt=this.configService.get(),L=nt.canvas,b=nt.engineOptions;this.initPromise=this.engine.init(gt({canvas:L||ot(),antialiasing:!1},b))}},{key:"setBundle",value:function(nt){this.compiledBundle=JSON.parse(JSON.stringify(nt))}},{key:"setDispatch",value:function(nt){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=nt),this}},{key:"setMaxIteration",value:function(nt){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=nt),this}},{key:"setBinding",value:function(nt,L){var b=this;if(typeof nt=="string"){var w=y()(L)||D()(L)||_()(L);if(this.compiledBundle&&this.compiledBundle.context){var V=this.compiledBundle.context.defines.find(function(Ct){return Ct.name===nt});if(V)return V.value=L,this;var xt=this.compiledBundle.context.uniforms.find(function(Ct){return Ct.name===nt});xt&&(w?(xt.data=L,xt.isReferer=!1,xt.storageClass===Q.Uniform?this.model&&this.model.updateUniform(nt,L):this.model&&this.model.updateBuffer(nt,L)):(xt.isReferer=!0,xt.data=L))}}else Object.keys(nt).forEach(function(Ct){b.setBinding(Ct,nt[Ct])});return this}},{key:"execute",value:function(){var ft=(0,B.Z)(I().mark(function L(){var b=this,w,V,xt=arguments;return I().wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:if(w=xt.length>0&&xt[0]!==void 0?xt[0]:1,!this.dirty){wt.next=6;break}return this.compiledBundle.context&&(w>1?this.compiledBundle.context.maxIteration=w:this.compiledBundle.context.maxIteration++),wt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(Rt){var Ce=Rt.isReferer;return Ce}).forEach(function(Rt){var Ce=Rt.data,me=Rt.name;b.model.confirmInput(Ce.model,me)}),V=0;V<w;V++)this.model.run();return this.engine.endFrame(),wt.abrupt("return",this);case 12:case"end":return wt.stop()}},L,this)}));function nt(){return ft.apply(this,arguments)}return nt}()},{key:"getOutput",value:function(){var ft=(0,B.Z)(I().mark(function L(){return I().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",this.model.readData());case 1:case"end":return w.stop()}},L,this)}));function nt(){return ft.apply(this,arguments)}return nt}()},{key:"compile",value:function(){var ft=(0,B.Z)(I().mark(function L(){var b,w,V;return I().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.next=2,this.initPromise;case 2:return b=gt({},this.compiledBundle.context),w=this.engine.supportWebGPU?this.engine.useWGSL?rt.WGSL:rt.GLSL450:rt.GLSL100,V=this.compiledBundle.shaders[w],b.defines.filter(function(wt){return wt.runtime}).forEach(function(wt){var Rt="".concat(J).concat(wt.name);V=V.replace(Rt,"".concat(wt.value))}),b.shader=V,b.uniforms.forEach(function(wt){if(!wt.data&&wt.storageClass===Q.StorageBuffer){var Rt=1;wt.type===W.FloatArray?Rt=1:wt.type===W.Vector4FloatArray&&(Rt=4),wt.data=new Float32Array(b.output.length*Rt).fill(0)}}),this.compiledBundle.context=b,Ct.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=Ct.sent;case 12:case"end":return Ct.stop()}},L,this)}));function nt(){return ft.apply(this,arguments)}return nt}()}]),q}(),It=z(481550),Jt=z.n(It),zt=function(){function q(ft,nt){(0,k.Z)(this,q),this.attribute=void 0,this.buffer=void 0;var L=nt.buffer,b=nt.offset,w=nt.stride,V=nt.normalized,xt=nt.size,Ct=nt.divisor;this.buffer=L,this.attribute={buffer:L.get(),offset:b||0,stride:w||0,normalized:V||!1,divisor:Ct||0},xt&&(this.attribute.size=xt)}return(0,P.Z)(q,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(nt){this.buffer.subData(nt)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),q}(),kt,$,lt,St,Ut,Ft,ee,ve,be,Ht,Yt,de,Ee,ge,Ot=(kt={},(0,X.Z)(kt,d.POINTS,"points"),(0,X.Z)(kt,d.LINES,"lines"),(0,X.Z)(kt,d.LINE_LOOP,"line loop"),(0,X.Z)(kt,d.LINE_STRIP,"line strip"),(0,X.Z)(kt,d.TRIANGLES,"triangles"),(0,X.Z)(kt,d.TRIANGLE_FAN,"triangle fan"),(0,X.Z)(kt,d.TRIANGLE_STRIP,"triangle strip"),kt),Xt=($={},(0,X.Z)($,d.STATIC_DRAW,"static"),(0,X.Z)($,d.DYNAMIC_DRAW,"dynamic"),(0,X.Z)($,d.STREAM_DRAW,"stream"),$),ce=(lt={},(0,X.Z)(lt,d.BYTE,"int8"),(0,X.Z)(lt,d.UNSIGNED_INT,"int16"),(0,X.Z)(lt,d.INT,"int32"),(0,X.Z)(lt,d.UNSIGNED_BYTE,"uint8"),(0,X.Z)(lt,d.UNSIGNED_SHORT,"uint16"),(0,X.Z)(lt,d.UNSIGNED_INT,"uint32"),(0,X.Z)(lt,d.FLOAT,"float"),lt),Lt=(St={},(0,X.Z)(St,d.ALPHA,"alpha"),(0,X.Z)(St,d.LUMINANCE,"luminance"),(0,X.Z)(St,d.LUMINANCE_ALPHA,"luminance alpha"),(0,X.Z)(St,d.RGB,"rgb"),(0,X.Z)(St,d.RGBA,"rgba"),(0,X.Z)(St,d.RGBA4,"rgba4"),(0,X.Z)(St,d.RGB5_A1,"rgb5 a1"),(0,X.Z)(St,d.RGB565,"rgb565"),(0,X.Z)(St,d.DEPTH_COMPONENT,"depth"),(0,X.Z)(St,d.DEPTH_STENCIL,"depth stencil"),St),Kt=(Ut={},(0,X.Z)(Ut,d.DONT_CARE,"dont care"),(0,X.Z)(Ut,d.NICEST,"nice"),(0,X.Z)(Ut,d.FASTEST,"fast"),Ut),pe=(Ft={},(0,X.Z)(Ft,d.NEAREST,"nearest"),(0,X.Z)(Ft,d.LINEAR,"linear"),(0,X.Z)(Ft,d.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,X.Z)(Ft,d.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,X.Z)(Ft,d.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,X.Z)(Ft,d.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Ft),We=(ee={},(0,X.Z)(ee,d.REPEAT,"repeat"),(0,X.Z)(ee,d.CLAMP_TO_EDGE,"clamp"),(0,X.Z)(ee,d.MIRRORED_REPEAT,"mirror"),ee),Je=(ve={},(0,X.Z)(ve,d.NONE,"none"),(0,X.Z)(ve,d.BROWSER_DEFAULT_WEBGL,"browser"),ve),Mr=(be={},(0,X.Z)(be,d.NEVER,"never"),(0,X.Z)(be,d.ALWAYS,"always"),(0,X.Z)(be,d.LESS,"less"),(0,X.Z)(be,d.LEQUAL,"lequal"),(0,X.Z)(be,d.GREATER,"greater"),(0,X.Z)(be,d.GEQUAL,"gequal"),(0,X.Z)(be,d.EQUAL,"equal"),(0,X.Z)(be,d.NOTEQUAL,"notequal"),be),Vt=(Ht={},(0,X.Z)(Ht,d.FUNC_ADD,"add"),(0,X.Z)(Ht,d.MIN_EXT,"min"),(0,X.Z)(Ht,d.MAX_EXT,"max"),(0,X.Z)(Ht,d.FUNC_SUBTRACT,"subtract"),(0,X.Z)(Ht,d.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ht),on=(Yt={},(0,X.Z)(Yt,d.ZERO,"zero"),(0,X.Z)(Yt,d.ONE,"one"),(0,X.Z)(Yt,d.SRC_COLOR,"src color"),(0,X.Z)(Yt,d.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,X.Z)(Yt,d.SRC_ALPHA,"src alpha"),(0,X.Z)(Yt,d.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,X.Z)(Yt,d.DST_COLOR,"dst color"),(0,X.Z)(Yt,d.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,X.Z)(Yt,d.DST_ALPHA,"dst alpha"),(0,X.Z)(Yt,d.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,X.Z)(Yt,d.CONSTANT_COLOR,"constant color"),(0,X.Z)(Yt,d.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,X.Z)(Yt,d.CONSTANT_ALPHA,"constant alpha"),(0,X.Z)(Yt,d.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,X.Z)(Yt,d.SRC_ALPHA_SATURATE,"src alpha saturate"),Yt),sn=(de={},(0,X.Z)(de,d.NEVER,"never"),(0,X.Z)(de,d.ALWAYS,"always"),(0,X.Z)(de,d.LESS,"less"),(0,X.Z)(de,d.LEQUAL,"lequal"),(0,X.Z)(de,d.GREATER,"greater"),(0,X.Z)(de,d.GEQUAL,"gequal"),(0,X.Z)(de,d.EQUAL,"equal"),(0,X.Z)(de,d.NOTEQUAL,"notequal"),de),pn=(Ee={},(0,X.Z)(Ee,d.ZERO,"zero"),(0,X.Z)(Ee,d.KEEP,"keep"),(0,X.Z)(Ee,d.REPLACE,"replace"),(0,X.Z)(Ee,d.INVERT,"invert"),(0,X.Z)(Ee,d.INCR,"increment"),(0,X.Z)(Ee,d.DECR,"decrement"),(0,X.Z)(Ee,d.INCR_WRAP,"increment wrap"),(0,X.Z)(Ee,d.DECR_WRAP,"decrement wrap"),Ee),En=(ge={},(0,X.Z)(ge,d.FRONT,"front"),(0,X.Z)(ge,d.BACK,"back"),ge),Yn=function(){function q(ft,nt){(0,k.Z)(this,q),this.buffer=void 0;var L=nt.data,b=nt.usage,w=nt.type;this.buffer=ft.buffer({data:L,usage:Xt[b||d.STATIC_DRAW],type:ce[w||d.UNSIGNED_BYTE]})}return(0,P.Z)(q,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(nt){var L=nt.data,b=nt.offset;this.buffer.subdata(L,b)}}]),q}(),ea=z(974902);function Nn(q,ft){var nt=Object.keys(q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(q);ft&&(L=L.filter(function(b){return Object.getOwnPropertyDescriptor(q,b).enumerable})),nt.push.apply(nt,L)}return nt}function Zn(q){for(var ft=1;ft<arguments.length;ft++){var nt=arguments[ft]!=null?arguments[ft]:{};ft%2?Nn(Object(nt),!0).forEach(function(L){(0,X.Z)(q,L,nt[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(nt)):Nn(Object(nt)).forEach(function(L){Object.defineProperty(q,L,Object.getOwnPropertyDescriptor(nt,L))})}return q}var La=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Aa=0,fr=!1,Or=function(){function q(ft,nt){var L=this;(0,k.Z)(this,q),this.reGl=ft,this.context=nt,this.entity=U(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var b={};this.context.uniforms.forEach(function(wt){var Rt=wt.name,Ce=wt.type,me=wt.data,Ke=wt.isReferer,yr=wt.storageClass;if(yr===Q.StorageBuffer){if(Ke)L.textureCache[Rt]={data:void 0},b["".concat(Rt,"Size")]=function(){return me.compiledBundle.context.output.textureSize};else{L.textureCache[Rt]=L.calcDataTexture(Rt,Ce,me);var er=L.textureCache[Rt],gr=er.textureWidth,dn=er.isOutput;b["".concat(Rt,"Size")]=[gr,gr],dn&&(L.outputTextureName=Rt,L.context.needPingpong&&(L.outputTextureName="".concat(Rt,"Output"),L.textureCache[L.outputTextureName]=L.calcDataTexture(Rt,Ce,me)))}b[Rt]=function(){return fr&&console.log("[".concat(L.entity,"]: ").concat(Rt," ").concat(L.textureCache[Rt].id)),L.textureCache[Rt].texture}}else if(yr===Q.Uniform){if(me&&(Array.isArray(me)||D()(me))&&me.length>16)throw new Error("invalid data type ".concat(Ce));b[Rt]=function(){return wt.data}}});var w=this.getOuputDataTexture(),V=w.textureWidth,xt=w.texelCount;b.u_OutputTextureSize=[V,V],b.u_OutputTexelCount=xt,this.context.output.textureSize=[V,V];var Ct={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:b,vert:La,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(Ct)}return(0,P.Z)(q,[{key:"run",value:function(){var nt=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){nt.computeCommand()}),fr&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var ft=(0,B.Z)(I().mark(function L(){var b=this,w,V,xt,Ct,wt,Rt,Ce,me;return I().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){w=b.reGl.read()}),!w){yr.next=6;break}if(V=this.getOuputDataTexture(),xt=V.originalDataLength,Ct=V.elementsPerTexel,wt=V.typedArrayConstructor,Rt=wt===void 0?Float32Array:wt,Ce=[],Ct!==4)for(me=0;me<w.length;me+=4)Ct===1?Ce.push(w[me]):Ct===2?Ce.push(w[me],w[me+1]):Ce.push(w[me],w[me+1],w[me+2]);else Ce=w;return yr.abrupt("return",new Rt(Ce.slice(0,xt)));case 6:return yr.abrupt("return",new Float32Array);case 7:case"end":return yr.stop()}},L,this)}));function nt(){return ft.apply(this,arguments)}return nt}()},{key:"confirmInput",value:function(nt,L){var b;this.entity===nt.entity?(this.dynamicPingpong=!0,b=this):b=nt,this.textureCache[L].id=b.getOuputDataTexture().id,this.textureCache[L].texture=b.getOuputDataTexture().texture,fr&&console.log("[".concat(this.entity,"]: confirm input ").concat(L," from model ").concat(b.entity,", ").concat(b.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(nt,L){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,w=this.context.uniforms.find(function(wt){var Rt=wt.name;return Rt===nt});if(w){var V=this.calcDataTexture(nt,w.type,L),xt=V.texture,Ct=V.data;this.textureCache[nt].data=Ct,this.textureCache[nt].texture=xt}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var nt=this.context.output.name;this.textureCache[nt].id=this.getOuputDataTexture().id,this.textureCache[nt].texture=this.getOuputDataTexture().texture}var L=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=L,fr&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var nt=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=nt}},{key:"cloneDataTexture",value:function(nt){var L=nt.data,b=nt.textureWidth;return Zn(Zn({},nt),{},{id:Aa++,texture:this.reGl.texture({width:b,height:b,data:L,type:"float"})})}},{key:"calcDataTexture",value:function(nt,L,b){var w=1;L===W.Vector4FloatArray&&(w=4);for(var V=[],xt=0;xt<b.length;xt+=w)w===1?V.push(b[xt],0,0,0):w===2?V.push(b[xt],b[xt+1],0,0):w===3?V.push(b[xt],b[xt+1],b[xt+2],0):w===4&&V.push(b[xt],b[xt+1],b[xt+2],b[xt+3]);var Ct=b.length,wt=Math.ceil(Ct/w),Rt=Math.ceil(Math.sqrt(wt)),Ce=Rt*Rt;wt<Ce&&V.push.apply(V,(0,ea.Z)(new Array((Ce-wt)*4).fill(0)));var me=this.reGl.texture({width:Rt,height:Rt,data:V,type:"float"});return{id:Aa++,data:V,originalDataLength:Ct,typedArrayConstructor:D()(b)?b.constructor:void 0,textureWidth:Rt,texture:me,texelCount:wt,elementsPerTexel:w,isOutput:nt===this.context.output.name}}}]),q}(),vn=function(){function q(ft,nt){(0,k.Z)(this,q),this.elements=void 0;var L=nt.data,b=nt.usage,w=nt.type,V=nt.count;this.elements=ft.elements({data:L,usage:Xt[b||d.STATIC_DRAW],type:ce[w||d.UNSIGNED_BYTE],count:V})}return(0,P.Z)(q,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(nt){var L=nt.data;this.elements.subdata(L)}},{key:"destroy",value:function(){this.elements.destroy()}}]),q}(),yn=function(){function q(ft,nt){(0,k.Z)(this,q),this.framebuffer=void 0;var L=nt.width,b=nt.height,w=nt.color,V=nt.colors,xt=nt.depth,Ct=nt.stencil,wt={width:L,height:b};Array.isArray(V)&&(wt.colors=V.map(function(Rt){return Rt.get()})),w&&typeof w!="boolean"&&(wt.color=w.get()),this.framebuffer=ft.framebuffer(wt)}return(0,P.Z)(q,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(nt){var L=nt.width,b=nt.height;this.framebuffer.resize(L,b)}}]),q}(),qn=z(671002),Vn=z(968630),jn=z.n(Vn);function ba(q){var ft={};return Object.keys(q).forEach(function(nt){ma(nt,q[nt],ft,"")}),ft}function ma(q,ft,nt,L){if(ft===null||typeof ft=="number"||typeof ft=="boolean"||Array.isArray(ft)&&typeof ft[0]=="number"||D()(ft)||ft===""||ft.resize!==void 0){nt["".concat(L&&L+".").concat(q)]=ft;return}jn()(ft)&&Object.keys(ft).forEach(function(b){ma(b,ft[b],nt,"".concat(L&&L+".").concat(q))}),Array.isArray(ft)&&ft.forEach(function(b,w){Object.keys(b).forEach(function(V){ma(V,b[V],nt,"".concat(L&&L+".").concat(q,"[").concat(w,"]"))})})}function Pa(q,ft){var nt=Object.keys(q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(q);ft&&(L=L.filter(function(b){return Object.getOwnPropertyDescriptor(q,b).enumerable})),nt.push.apply(nt,L)}return nt}function wn(q){for(var ft=1;ft<arguments.length;ft++){var nt=arguments[ft]!=null?arguments[ft]:{};ft%2?Pa(Object(nt),!0).forEach(function(L){(0,X.Z)(q,L,nt[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(q,Object.getOwnPropertyDescriptors(nt)):Pa(Object(nt)).forEach(function(L){Object.defineProperty(q,L,Object.getOwnPropertyDescriptor(nt,L))})}return q}var na=function(){function q(ft,nt){(0,k.Z)(this,q),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=ft;var L=nt.vs,b=nt.fs,w=nt.defines,V=nt.attributes,xt=nt.uniforms,Ct=nt.primitive,wt=nt.count,Rt=nt.elements,Ce=nt.depth,me=nt.blend,Ke=nt.stencil,yr=nt.cull,er=nt.instances,gr=nt.scissor,dn=nt.viewport,Ue={};xt&&(this.uniforms=ba(xt),Object.keys(xt).forEach(function(Pr){Ue[Pr]=ft.prop(Pr)}));var or={};Object.keys(V).forEach(function(Pr){or[Pr]=V[Pr].get()});var mr=w&&this.generateDefines(w)||"",$r={attributes:or,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(mr,`
`).concat(b),uniforms:Ue,vert:`
`.concat(mr,`
`).concat(L),primitive:Ot[Ct===void 0?d.TRIANGLES:Ct]};er&&($r.instances=er),wt&&($r.count=wt),Rt&&($r.elements=Rt.get()),gr&&($r.scissor=gr),dn&&($r.viewport=dn),this.initDepthDrawParams({depth:Ce},$r),this.initBlendDrawParams({blend:me},$r),this.initStencilDrawParams({stencil:Ke},$r),this.initCullDrawParams({cull:yr},$r),this.drawCommand=ft($r)}return(0,P.Z)(q,[{key:"addUniforms",value:function(nt){this.uniforms=wn(wn({},this.uniforms),ba(nt))}},{key:"draw",value:function(nt){var L=wn(wn({},this.uniforms),ba(nt.uniforms||{})),b={};Object.keys(L).forEach(function(w){var V=(0,qn.Z)(L[w]);V==="boolean"||V==="number"||Array.isArray(L[w])||L[w].BYTES_PER_ELEMENT?b[w]=L[w]:V==="string"||(b[w]=L[w].get())}),this.drawCommand(b)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(nt,L){var b=nt.depth;b&&(L.depth={enable:b.enable===void 0?!0:!!b.enable,mask:b.mask===void 0?!0:!!b.mask,func:Mr[b.func||d.LESS],range:b.range||[0,1]})}},{key:"initBlendDrawParams",value:function(nt,L){var b=nt.blend;if(b){var w=b.enable,V=b.func,xt=b.equation,Ct=b.color,wt=Ct===void 0?[0,0,0,0]:Ct;L.blend={enable:!!w,func:{srcRGB:on[V&&V.srcRGB||d.SRC_ALPHA],srcAlpha:on[V&&V.srcAlpha||d.SRC_ALPHA],dstRGB:on[V&&V.dstRGB||d.ONE_MINUS_SRC_ALPHA],dstAlpha:on[V&&V.dstAlpha||d.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Vt[xt&&xt.rgb||d.FUNC_ADD],alpha:Vt[xt&&xt.alpha||d.FUNC_ADD]},color:wt}}}},{key:"initStencilDrawParams",value:function(nt,L){var b=nt.stencil;if(b){var w=b.enable,V=b.mask,xt=V===void 0?-1:V,Ct=b.func,wt=Ct===void 0?{cmp:d.ALWAYS,ref:0,mask:-1}:Ct,Rt=b.opFront,Ce=Rt===void 0?{fail:d.KEEP,zfail:d.KEEP,zpass:d.KEEP}:Rt,me=b.opBack,Ke=me===void 0?{fail:d.KEEP,zfail:d.KEEP,zpass:d.KEEP}:me;L.stencil={enable:!!w,mask:xt,func:wn(wn({},wt),{},{cmp:sn[wt.cmp]}),opFront:{fail:pn[Ce.fail],zfail:pn[Ce.zfail],zpass:pn[Ce.zpass]},opBack:{fail:pn[Ke.fail],zfail:pn[Ke.zfail],zpass:pn[Ke.zpass]}}}}},{key:"initCullDrawParams",value:function(nt,L){var b=nt.cull;if(b){var w=b.enable,V=b.face,xt=V===void 0?d.BACK:V;L.cull={enable:!!w,face:En[xt]}}}},{key:"generateDefines",value:function(nt){return Object.keys(nt).map(function(L){return"#define ".concat(L," ").concat(Number(nt[L]))}).join(`
`)}}]),q}(),Qn=function(){function q(ft,nt){(0,k.Z)(this,q),this.texture=void 0,this.width=void 0,this.height=void 0;var L=nt.data,b=nt.type,w=b===void 0?d.UNSIGNED_BYTE:b,V=nt.width,xt=nt.height,Ct=nt.flipY,wt=Ct===void 0?!1:Ct,Rt=nt.format,Ce=Rt===void 0?d.RGBA:Rt,me=nt.mipmap,Ke=me===void 0?!1:me,yr=nt.wrapS,er=yr===void 0?d.CLAMP_TO_EDGE:yr,gr=nt.wrapT,dn=gr===void 0?d.CLAMP_TO_EDGE:gr,Ue=nt.aniso,or=Ue===void 0?0:Ue,mr=nt.alignment,$r=mr===void 0?1:mr,Pr=nt.premultiplyAlpha,va=Pr===void 0?!1:Pr,Sa=nt.mag,Mn=Sa===void 0?d.NEAREST:Sa,Un=nt.min,Fa=Un===void 0?d.NEAREST:Un,Ea=nt.colorSpace,Kr=Ea===void 0?d.BROWSER_DEFAULT_WEBGL:Ea;this.width=V,this.height=xt;var kn={width:V,height:xt,type:ce[w],format:Lt[Ce],wrapS:We[er],wrapT:We[dn],mag:pe[Mn],min:pe[Fa],alignment:$r,flipY:wt,colorSpace:Je[Kr],premultiplyAlpha:va,aniso:or};L&&(kn.data=L),typeof Ke=="number"?kn.mipmap=Kt[Ke]:typeof Ke=="boolean"&&(kn.mipmap=Ke),this.texture=ft.texture(kn)}return(0,P.Z)(q,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(nt){var L=nt.width,b=nt.height;this.texture.resize(L,b),this.width=L,this.height=b}},{key:"destroy",value:function(){this.texture.destroy()}}]),q}(),In=function(){function q(){var ft=this;(0,k.Z)(this,q),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var nt=(0,B.Z)(I().mark(function L(b){return I().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!b.uniforms){V.next=3;break}return V.next=3,Promise.all(Object.keys(b.uniforms).map(function(){var xt=(0,B.Z)(I().mark(function Ct(wt){var Rt;return I().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(!(b.uniforms[wt]&&b.uniforms[wt].load!==void 0)){me.next=5;break}return me.next=3,b.uniforms[wt].load();case 3:Rt=me.sent,b.uniforms[wt]=Rt;case 5:case"end":return me.stop()}},Ct)}));return function(Ct){return xt.apply(this,arguments)}}()));case 3:return V.abrupt("return",new na(ft.gl,b));case 4:case"end":return V.stop()}},L)}));return function(L){return nt.apply(this,arguments)}}(),this.createAttribute=function(nt){return new zt(ft.gl,nt)},this.createBuffer=function(nt){return new Yn(ft.gl,nt)},this.createElements=function(nt){return new vn(ft.gl,nt)},this.createTexture2D=function(nt){return new Qn(ft.gl,nt)},this.createFramebuffer=function(nt){return new yn(ft.gl,nt)},this.useFramebuffer=function(nt,L){ft.gl({framebuffer:nt?nt.get():null})(L)},this.createComputeModel=function(){var nt=(0,B.Z)(I().mark(function L(b){return I().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.abrupt("return",new Or(ft.gl,b));case 1:case"end":return V.stop()}},L)}));return function(L){return nt.apply(this,arguments)}}(),this.clear=function(nt){var L=nt.color,b=nt.depth,w=nt.stencil,V=nt.framebuffer,xt=V===void 0?null:V,Ct={color:L,depth:b,stencil:w};Ct.framebuffer=xt===null?xt:xt.get(),ft.gl.clear(Ct)},this.setScissor=function(nt){ft.gl&&ft.gl._gl&&(nt.enable&&nt.box?(ft.gl._gl.enable(d.SCISSOR_TEST),ft.gl._gl.scissor(nt.box.x,nt.box.y,nt.box.width,nt.box.height)):ft.gl._gl.disable(d.SCISSOR_TEST),ft.gl._refresh())},this.viewport=function(nt){var L=nt.x,b=nt.y,w=nt.width,V=nt.height;ft.gl&&ft.gl._gl&&(ft.gl._gl.viewport(L,b,w,V),ft.gl._refresh())},this.readPixels=function(nt){var L=nt.framebuffer,b=nt.x,w=nt.y,V=nt.width,xt=nt.height,Ct={x:b,y:w,width:V,height:xt};return L&&(Ct.framebuffer=L.get()),ft.gl.read(Ct)},this.getCanvas=function(){return ft.$canvas},this.getGLContext=function(){return ft.gl._gl},this.destroy=function(){ft.gl&&(ft.gl.destroy(),ft.inited=!1)}}return(0,P.Z)(q,[{key:"init",value:function(){var ft=(0,B.Z)(I().mark(function L(b){return I().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!this.inited){V.next=2;break}return V.abrupt("return");case 2:return this.$canvas=b.canvas,V.next=5,new Promise(function(xt,Ct){Jt()({canvas:b.canvas,attributes:{alpha:!0,antialias:b.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Rt,Ce){(Rt||!Ce)&&Ct(Rt),xt(Ce)}})});case 5:this.gl=V.sent,this.inited=!0;case 7:case"end":return V.stop()}},L,this)}));function nt(L){return ft.apply(this,arguments)}return nt}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),q}(),Ca=function(){function q(){(0,k.Z)(this,q),this.engine=void 0,this.configService=new it}return(0,P.Z)(q,[{key:"setConfig",value:function(nt){this.configService.set(nt)}},{key:"setEngine",value:function(nt){this.engine=nt}},{key:"createEntity",value:function(){return U()}},{key:"createKernel",value:function(nt){var L=new Pt(this.engine,this.configService);return typeof nt=="string"?L.setBundle(JSON.parse(nt)):L.setBundle(nt),L.init(),L}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=new q;return L.setConfig(nt),L.setEngine(new In),L}}]),q}()},283926:function(dr,R,z){"use strict";z.d(R,{ZP:function(){return o_}});var B={};z.r(B),z.d(B,{GADDI:function(){return Do},Stack:function(){return Pn},breadthFirstSearch:function(){return ce},connectedComponent:function(){return pe},cosineSimilarity:function(){return or},default:function(){return No},depthFirstSearch:function(){return pn},detectAllCycles:function(){return Nn},detectAllDirectedCycle:function(){return ea},detectAllUndirectedCycle:function(){return Yn},detectCycle:function(){return Zn},detectDirectedCycle:function(){return Co},dijkstra:function(){return fr},findAllPath:function(){return yn},findShortestPath:function(){return vn},floydWarshall:function(){return Vn},getAdjMatrix:function(){return St},getDegree:function(){return Je},getInDegree:function(){return Mr},getNeighbors:function(){return Yt},getOutDegree:function(){return Vt},iLouvain:function(){return me},kCore:function(){return yr},kMeans:function(){return dn},labelPropagation:function(){return ba},louvain:function(){return Rt},minimumSpanningTree:function(){return kn},nodesCosineSimilarity:function(){return $r},pageRank:function(){return Nt}});var X={};z.r(X),z.d(X,{Line:function(){return Va},applyMatrix:function(){return ni},compare:function(){return Ai},distance:function(){return Ho},floydWarshall:function(){return fs},fractionToLine:function(){return $i},getAdjMatrix:function(){return Ko},getBBoxBoundLine:function(){return mi},getCircleCenterByPoints:function(){return ko},getCircleIntersectByPoint:function(){return ao},getDegree:function(){return Xi},getEllipseIntersectByPoint:function(){return io},getLineIntersect:function(){return jo},getPointsCenter:function(){return Zo},getRectIntersectByPoint:function(){return bs},intersectBBox:function(){return Yi},invertMatrix:function(){return ho},isPointInPolygon:function(){return wo},isPointsOverlap:function(){return go},isPolygonsIntersect:function(){return ca},itemIntersectByLine:function(){return ki},lerp:function(){return Is},lerpArray:function(){return ci},move:function(){return Wa},pointLineDistance:function(){return ru},pointLineSquareDist:function(){return os},pointRectSquareDist:function(){return Rs},rotate:function(){return eu},scale:function(){return Ts},scaleMatrix:function(){return Ro},squareDist:function(){return So},translate:function(){return is}});var k={};z.r(k),z.d(k,{cloneBesidesImg:function(){return Zs},getAnimateCfgWithCallback:function(){return ds},getBBox:function(){return ai},getComboBBox:function(){return iu},getLabelPosition:function(){return so},getLetterWidth:function(){return Hs},getLoopCfgs:function(){return qi},getTextSize:function(){return Gu},plainCombosToTrees:function(){return au},reconstructTree:function(){return Ks},shouldRefreshEdge:function(){return Ls},traverseTree:function(){return Ri},traverseTreeUp:function(){return yo},truncateLabelByLength:function(){return bu}});var P={};z.r(P),z.d(P,{catmullRomToBezier:function(){return dt},fillPath:function(){return Ii},fillPathByDiff:function(){return ii},formatPath:function(){return Fo},intersection:function(){return Di},parsePathArray:function(){return Xe},parsePathString:function(){return T},pathToAbsolute:function(){return Dt},pathToCurve:function(){return ye},rectPath:function(){return _r}});var N={};z.r(N),z.d(N,{easeBack:function(){return Uc},easeBackIn:function(){return Gc},easeBackInOut:function(){return Uc},easeBackOut:function(){return zc},easeBounce:function(){return Ku},easeBounceIn:function(){return Ql},easeBounceInOut:function(){return nc},easeBounceOut:function(){return Ku},easeCircle:function(){return wl},easeCircleIn:function(){return Hu},easeCircleInOut:function(){return wl},easeCircleOut:function(){return Vl},easeCubic:function(){return Au},easeCubicIn:function(){return Yu},easeCubicInOut:function(){return Au},easeCubicOut:function(){return Vu},easeElastic:function(){return ac},easeElasticIn:function(){return _l},easeElasticInOut:function(){return Wc},easeElasticOut:function(){return ac},easeExp:function(){return El},easeExpIn:function(){return xl},easeExpInOut:function(){return El},easeExpOut:function(){return bl},easeLinear:function(){return yf},easePoly:function(){return Bc},easePolyIn:function(){return Rc},easePolyInOut:function(){return Bc},easePolyOut:function(){return ec},easeQuad:function(){return Xu},easeQuadIn:function(){return Wu},easeQuadInOut:function(){return Xu},easeQuadOut:function(){return Mu},easeSin:function(){return ml},easeSinIn:function(){return Ps},easeSinInOut:function(){return ml},easeSinOut:function(){return yl}});var D={};z.r(D),z.d(D,{calculationItemsBBox:function(){return Fd},cloneEvent:function(){return q0},formatPadding:function(){return kv},isNaN:function(){return Sf},isViewportChanged:function(){return Q0},processParallelEdges:function(){return J0},uniqueId:function(){return Pv}});var E={};z.r(E),z.d(E,{getClosedSpline:function(){return Yv},getControlPoint:function(){return Jh},getSpline:function(){return tg},getStarPath:function(){return xy},paddedHull:function(){return ag},pathToPoints:function(){return Xv},pointsToPolygon:function(){return my},roundedHull:function(){return Vv}});var y={};z.r(y),z.d(y,{defaultSubjectColors:function(){return zy}});var M={};z.r(M),z.d(M,{isForce:function(){return gg}});var _={};z.r(_),z.d(_,{Base:function(){return ef},Circle:function(){return lm},Ellipse:function(){return vm},Image:function(){return gm},Line:function(){return ym},Marker:function(){return bm},Path:function(){return ad},Polygon:function(){return Im},Polyline:function(){return Lm},Rect:function(){return km},Text:function(){return Bm}});var m={};z.r(m),z.d(m,{Base:function(){return Du},Circle:function(){return Vm},Dom:function(){return Hm},Ellipse:function(){return Zm},Image:function(){return qm},Line:function(){return Jm},Marker:function(){return e1},Path:function(){return n1},Polygon:function(){return i1},Polyline:function(){return s1},Rect:function(){return h1},Text:function(){return y1}});var I={};z.r(I),z.d(I,{getColorSetsBySubjectColors:function(){return px},getColorsWithSubjectColor:function(){return ld},mixColor:function(){return ss}});var A={};z.r(A),z.d(A,{arrayToTextureData:function(){return Lx},attributesToTextureData:function(){return Ox},buildTextureData:function(){return Cx},buildTextureDataWithOneEdgeAttr:function(){return Tx},buildTextureDataWithTwoEdgeAttr:function(){return Ix},proccessToFunc:function(){return Ax},radialLayout:function(){return Dx}});var O={};z.r(O),z.d(O,{gpuDetector:function(){return vp}});var U={};z.r(U),z.d(U,{getBrowserName:function(){return dp}});var j={};z.r(j),z.d(j,{assign:function(){return el},default:function(){return $p},defaultI18n:function(){return Ed},format:function(){return Kp},parse:function(){return Zp},setGlobalDateI18n:function(){return zp},setGlobalDateMasks:function(){return Hp}});var x=z(197582),d=z(413810),it={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,d.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,d.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},Y=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,d.clone)(it);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,d.each)(u,function(c,l){f[l]=(0,d.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),W=Y,K=W,Q="*",rt=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[Q]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var l=u[c],g=l.callback,p=l.once;p&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),g.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),J=rt,ot=z(935600);function vt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return ot.fromTranslation(r,t),ot.multiply(i,r,e)}function gt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return ot.fromRotation(r,t),ot.multiply(i,r,e)}function Pt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return ot.fromScaling(r,t),ot.multiply(i,r,e)}function It(i,e,t){return ot.multiply(i,t,e)}function Jt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":vt(t,t,[a[1],a[2]]);break;case"s":Pt(t,t,[a[1],a[2]]);break;case"r":gt(t,t,a[1]);break;case"m":It(t,t,a[1]);break;default:break}}return t}function zt(i,e){return i[0]*e[1]-e[0]*i[1]}function kt(i,e,t){var r=vec2.angle(i,e),n=zt(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function $(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var lt=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},St=lt,Ut=function(e,t){return e===t},Ft=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),ee=function(){function i(e){e===void 0&&(e=Ut),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new Ft(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new Ft(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),ve=ee,be=function(){function i(){this.linkedList=new ve}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),Ht=be,Yt=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},de=function(e,t){return t.filter(function(r){return r.source===e})},Ee=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},ge=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function Ot(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Xt=function(e,t,r,n){n===void 0&&(n=!0);var a=Ot(r),o=new Ht,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var g=o.dequeue();a.enter({current:g,previous:f}),Yt(g,u,n?"target":void 0).forEach(function(p){a.allowTraversal({previous:f,current:g,next:p})&&o.enqueue(p)}),a.leave({current:g,previous:f}),f=g};!o.isEmpty();)c()},ce=Xt,Lt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function p(C){u.push(C),s[C.id]=!0;for(var F=Yt(C.id,a),H=function(ut){var ht=F[ut];if(!s[ht]){var _t=r.filter(function(Gt){return Gt.id===ht});_t.length>0&&p(_t[0])}},tt=0;tt<F.length;++tt)H(tt)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var g=[];u.length>0;)g.push(u.pop());o.push(g)}}return o},Kt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,g=function H(tt){u[tt.id]=l,f[tt.id]=l,l+=1,o.push(tt),s[tt.id]=!0;for(var at=Yt(tt.id,a,"target").filter(function(Bt){return r.map(function(re){return re.id}).indexOf(Bt)>-1}),ut=function(re){var xe=at[re];if(!u[xe]&&u[xe]!==0){var se=r.filter(function(Oe){return Oe.id===xe});se.length>0&&H(se[0]),f[tt.id]=Math.min(f[tt.id],f[xe])}else s[xe]&&(f[tt.id]=Math.min(f[tt.id],u[xe]))},ht=0;ht<at.length;ht++)ut(ht);if(f[tt.id]===u[tt.id]){for(var _t=[];o.length>0;){var Gt=o.pop();if(s[Gt.id]=!1,_t.push(Gt),Gt===tt)break}_t.length>0&&c.push(_t)}},p=0,C=r;p<C.length;p++){var F=C[p];!u[F.id]&&u[F.id]!==0&&g(F)}return c};function pe(i,e){return e?Kt(i):Lt(i)}var We=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},Je=We,Mr=function(e,t){var r=We(e);return r[t]?We(e)[t].inDegree:0},Vt=function(e,t){var r=We(e);return r[t]?We(e)[t].outDegree:0};function on(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function sn(i,e,t,r,n){n===void 0&&(n=!0),r.enter({current:e,previous:t});var a=i.edges,o=a===void 0?[]:a;Yt(e,o,n?"target":void 0).forEach(function(s){r.allowTraversal({previous:t,current:e,next:s})&&sn(i,s,e,r,n)}),r.leave({current:e,previous:t})}function pn(i,e,t,r){r===void 0&&(r=!0),sn(i,e,"",on(t),r)}var En=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(g){var p=g.current,C=g.previous;if(s[p]){t={};for(var F=p,H=C;H!==p;)t[F]=H,F=H,H=a[H];t[F]=H}else s[p]=p,delete o[p],a[p]=C},leave:function(g){var p=g.current;u[p]=p,delete s[p]},allowTraversal:function(g){var p=g.next;return t?!1:!u[p]}};Object.keys(o).length;){var c=Object.keys(o)[0];pn(e,c,f)}return t},Yn=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=pe(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var l=c[0],g=l.id,p=[l],C=(n={},n[g]=l,n),F=(a={},a[g]=new Set,a);p.length>0;)for(var H=p.pop(),tt=H.id,at=Yt(tt,e.edges),ut=function(Gt){var Bt,re=at[Gt],xe=e.nodes.find(function(Nr){return Nr.id===re});if(re===tt)o.push((Bt={},Bt[re]=H,Bt));else if(!(re in F))C[re]=H,p.push(xe),F[re]=new Set([H]);else if(!F[tt].has(xe)){for(var se=!0,Oe=[xe,H],Ve=C[tt];F[re].size&&!F[re].has(Ve)&&(Oe.push(Ve),Ve!==C[Ve.id]);)Ve=C[Ve.id];if(Oe.push(Ve),t&&r?(se=!1,Oe.findIndex(function(Nr){return t.indexOf(Nr.id)>-1})>-1&&(se=!0)):t&&!r&&Oe.findIndex(function(Nr){return t.indexOf(Nr.id)>-1})>-1&&(se=!1),se){for(var Ir={},Wr=1;Wr<Oe.length;Wr+=1)Ir[Oe[Wr-1].id]=Oe[Wr];Oe.length&&(Ir[Oe[Oe.length-1].id]=Oe[0]),o.push(Ir)}F[re].add(H)}},ht=0;ht<at.length;ht+=1)ut(ht)}return o},ea=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(Ve){for(var Ir=[Ve];Ir.length>0;){var Wr=Ir.pop();a.has(Wr)&&(a.delete(Wr),o[Wr.id].forEach(function(Nr){Ir.push(Nr)}),o[Wr.id].clear())}},l=function Oe(Ve,Ir,Wr){var Nr=!1;if(t&&r===!1&&t.indexOf(Ve.id)>-1)return Nr;n.push(Ve),a.add(Ve);for(var Er=Wr[Ve.id],fn=0;fn<Er.length;fn+=1){var rn=u[Er[fn]];if(rn===Ir){for(var wr={},kr=1;kr<n.length;kr+=1)wr[n[kr-1].id]=n[kr];n.length&&(wr[n[n.length-1].id]=n[0]),s.push(wr),Nr=!0}else a.has(rn)||Oe(rn,Ir,Wr)&&(Nr=!0)}if(Nr)c(Ve);else for(var fn=0;fn<Er.length;fn+=1){var rn=u[Er[fn]];o[rn.id].has(Ve)||o[rn.id].add(Ve)}return n.pop(),Nr},g=e.nodes,p=g===void 0?[]:g,C=0;C<p.length;C+=1){var F=p[C],H=F.id;f[H]=C,u[C]=F}if(t&&r)for(var tt=function(Ve){var Ir=t[Ve];f[p[Ve].id]=f[Ir],f[Ir]=0,u[0]=p.find(function(Wr){return Wr.id===Ir}),u[f[p[Ve].id]]=p[Ve]},C=0;C<t.length;C++)tt(C);for(var at=function(Ve){for(var Ir,Wr,Nr=1/0,Er=0;Er<Ve.length;Er+=1)for(var fn=Ve[Er],rn=0;rn<fn.length;rn++){var wr=f[fn[rn].id];wr<Nr&&(Nr=wr,Wr=Er)}for(var kr=Ve[Wr],qr=[],Er=0;Er<kr.length;Er+=1){var Qr=kr[Er];qr[Qr.id]=[];for(var gn=0,Tn=Yt(Qr.id,e.edges,"target").filter(function(pi){return kr.map(function(ri){return ri.id}).indexOf(pi)>-1});gn<Tn.length;gn++){var fa=Tn[gn];fa===Qr.id&&!(r===!1&&t.indexOf(Qr.id)>-1)?s.push((Ir={},Ir[Qr.id]=Qr,Ir)):qr[Qr.id].push(f[fa])}}return{component:kr,adjList:qr,minIdx:Nr}},ut=0;ut<p.length;){var ht=p.filter(function(Oe){return f[Oe.id]>=ut}),_t=Kt({nodes:ht,edges:e.edges}).filter(function(Oe){return Oe.length>1});if(_t.length===0)break;var Gt=at(_t),Bt=Gt.minIdx,re=Gt.adjList,xe=Gt.component;if(xe.length>1){xe.forEach(function(Oe){o[Oe.id]=new Set});var se=u[Bt];if(t&&r&&t.indexOf(se.id)===-1)return s;l(se,se,re),ut=Bt+1}else break}return s},Nn=function(e,t,r,n){return n===void 0&&(n=!0),t?ea(e,r,n):Yn(e,r,n)},Zn=En,La=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},Aa=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},g={};o.forEach(function(ut,ht){var _t=ut.id;f.push(_t),l[_t]=1/0,_t===t&&(l[_t]=0)});for(var p=o.length,C=function(ht){var _t=La(l,o,c),Gt=_t.id;if(c[Gt]=!0,l[Gt]===1/0)return"continue";var Bt=[];r?Bt=de(Gt,u):Bt=Ee(Gt,u),Bt.forEach(function(re){var xe=re.target,se=re.source,Oe=xe===Gt?se:xe,Ve=n&&re[n]?re[n]:1;l[Oe]>l[_t.id]+Ve?(l[Oe]=l[_t.id]+Ve,g[Oe]=[_t.id]):l[Oe]===l[_t.id]+Ve&&g[Oe].push(_t.id)})},F=0;F<p;F++)C(F);g[t]=[t];var H={};for(var tt in l)l[tt]!==1/0&&Or(t,tt,g,H);var at={};for(var tt in H)at[tt]=H[tt][0];return{length:l,path:at,allPath:H}},fr=Aa;function Or(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=Or(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,d.isArray)(l)?n.push((0,x.__spreadArray)((0,x.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var vn=function(e,t,r,n,a){var o=fr(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},yn=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],g=n?Yt(t,s,"target"):Yt(t,s);for(c.push(g);u.length>0&&c.length>0;){var p=c[c.length-1];if(p.length){var C=p.shift();C&&(u.push(C),f[C]=!0,g=n?Yt(C,s,"target"):Yt(C,s),c.push(g.filter(function(tt){return!f[tt]})))}else{var F=u.pop();f[F]=!1,c.pop();continue}if(u[u.length-1]===r){var H=u.map(function(at){return at});l.push(H);var F=u.pop();f[F]=!1,c.pop()}}return l},qn=function(e,t){for(var r=St(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},Vn=qn,jn=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(ht,_t){var Gt=ge();ht.clusterId=Gt,f[Gt]={id:Gt,nodes:[ht]},c[ht.id]={node:ht,idx:_t}});var l=St(e,t),g=[],p={};l.forEach(function(ht,_t){var Gt=0,Bt=o[_t].id;p[Bt]={},ht.forEach(function(re,xe){if(re){Gt+=re;var se=o[xe].id;p[Bt][se]=re}}),g.push(Gt)});for(var C=0,F=function(){var _t=!1;if(o.forEach(function(Gt){var Bt={};Object.keys(p[Gt.id]).forEach(function(Nr){var Er=p[Gt.id][Nr],fn=c[Nr].node,rn=fn.clusterId;Bt[rn]||(Bt[rn]=0),Bt[rn]+=Er});var re=-1/0,xe=[];if(Object.keys(Bt).forEach(function(Nr){re<Bt[Nr]?(re=Bt[Nr],xe=[Nr]):re===Bt[Nr]&&xe.push(Nr)}),!(xe.length===1&&xe[0]===Gt.clusterId)){var se=xe.indexOf(Gt.clusterId);if(se>=0&&xe.splice(se,1),xe&&xe.length){_t=!0;var Oe=f[Gt.clusterId],Ve=Oe.nodes.indexOf(Gt);Oe.nodes.splice(Ve,1);var Ir=Math.floor(Math.random()*xe.length),Wr=f[xe[Ir]];Wr.nodes.push(Gt),Gt.clusterId=Wr.id}}}),!_t)return"break";C++};C<n;){var H=F();if(H==="break")break}Object.keys(f).forEach(function(ht){var _t=f[ht];(!_t.nodes||!_t.nodes.length)&&delete f[ht]});var tt=[],at={};u.forEach(function(ht){var _t=ht.source,Gt=ht.target,Bt=ht[r]||1,re=c[_t].node.clusterId,xe=c[Gt].node.clusterId,se="".concat(re,"---").concat(xe);if(at[se])at[se].weight+=Bt,at[se].count++;else{var Oe={source:re,target:xe,weight:Bt,count:1};at[se]=Oe,tt.push(Oe)}});var ut=[];return Object.keys(f).forEach(function(ht){ut.push(f[ht])}),{clusters:ut,clusterEdges:tt}},ba=jn,ma=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,d.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),Pa=ma,wn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,na=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,Qn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(wn)&&!"".concat(a.properties[o]).match(na)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},In=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},Ca=function(e){for(var t=Qn(e),r=[],n=0;n<e.length;n++)r[n]=In(e[n].properties,t);return r},q=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},ft={getAllSortProperties:Qn,getPropertyWeight:Ca,getAllProperties:q},nt;(function(i){i.EuclideanDistance="euclideanDistance"})(nt||(nt={}));var L=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,d.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,d.uniq)(s))}),a},b=function(e,t,r){var n=L(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var g=u[l],p=n[l],C=p.findIndex(function(tt){return g===tt}),F=[];if(s)F.push(g);else for(var H=0;H<p.length;H++)H===C?F.push(1):F.push(0);c=c.concat(F)}),a[f]=c}),a},w=function(e,t,r,n){r===void 0&&(r=nt.EuclideanDistance);var a=0;switch(r){case nt.EuclideanDistance:a=new Pa(e).euclideanDistance(new Pa(t));break;default:break}return a},V={getAllKeyValueMap:L,oneHot:b,getDistance:w},xt=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var g=t[u][c]||0,p=r[u]||0,C=r[c]||0;s+=g-p*C/o}}return s*=1/o,s},Ct=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new Pa([]),a=0;a<r;a++)n=n.add(new Pa(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new Pa(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new Pa(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var g=new Pa(t[l]);c[a][l]=u.squareEuclideanDistance(g),e[a].clusterInertial+=c[a][l]}}for(var p=0,C=2*r*s,a=0;a<r;a++)for(var F=e[a].clusterId,l=0;l<r;l++){var H=e[l].clusterId;if(!(a===l||F!==H)){var tt=e[a].clusterInertial*e[l].clusterInertial/Math.pow(C,2)-c[a][l]/C;p+=tt}}return Number(p.toFixed(4))},wt=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,g=e.edges,p=g===void 0?[]:g,C=[];if(a){l.forEach(function(wr,kr){wr.properties=wr.properties||{},wr.originIndex=kr});var F=[];l.every(function(wr){return wr.hasOwnProperty("nodeType")})&&(F=Array.from(new Set(l.map(function(wr){return wr.nodeType}))),l.forEach(function(wr){wr.properties.nodeType=F.findIndex(function(kr){return kr===wr.nodeType})}));var H=q(l,o);C=b(H,s,u)}var tt=1,at={},ut={};l.forEach(function(wr,kr){var qr=String(tt++);wr.clusterId=qr,at[qr]={id:qr,nodes:[wr]},ut[wr.id]={node:wr,idx:kr}});var ht=St(e,t),_t=[],Gt={},Bt=0;ht.forEach(function(wr,kr){var qr=0,Qr=l[kr].id;Gt[Qr]={},wr.forEach(function(gn,Tn){if(gn){qr+=gn;var fa=l[Tn].id;Gt[Qr][fa]=gn,Bt+=gn}}),_t.push(qr)}),Bt/=2;for(var re=1/0,xe=1/0,se=0,Oe=[],Ve={};;){a&&l.every(function(wr){return wr.hasOwnProperty("properties")})?re=xt(l,ht,_t,Bt)+Ct(l,C)*f:re=xt(l,ht,_t,Bt),se===0&&(xe=re,Oe=l,Ve=at);var Ir=re>0&&re>xe&&re-xe<n;if(re>xe&&(Oe=l.map(function(wr){return{node:wr,clusterId:wr.clusterId}}),Ve=(0,d.clone)(at),xe=re),Ir||se>100)break;se++,Object.keys(at).forEach(function(wr){var kr=0;p.forEach(function(qr){var Qr=qr.source,gn=qr.target,Tn=ut[Qr].node.clusterId,fa=ut[gn].node.clusterId;(Tn===wr&&fa!==wr||fa===wr&&Tn!==wr)&&(kr=kr+(qr[r]||1))}),at[wr].sumTot=kr}),l.forEach(function(wr,kr){var qr=at[wr.clusterId],Qr=0,gn,Tn=_t[kr]/(2*Bt),fa=0,Oa=qr.nodes;Oa.forEach(function(ns){var as=ut[ns.id].idx;fa+=ht[kr][as]||0});var pi=fa-qr.sumTot*Tn,ri=Oa.filter(function(ns){return ns.id!==wr.id}),yi=[];ri.forEach(function(ns,as){yi[as]=C[ns.originIndex]});var Si=Ct(ri,C)*f,Ki=Gt[wr.id];if(Object.keys(Ki).forEach(function(ns){var as=ut[ns].node,pu=as.clusterId;if(pu!==wr.clusterId){var As=at[pu],Xs=As.nodes;if(!(!Xs||!Xs.length)){var Ya=0;Xs.forEach(function(Ha){var Za=ut[Ha.id].idx;Ya+=ht[kr][Za]||0});var di=Ya-As.sumTot*Tn,Ua=Xs.concat([wr]),gi=[];Ua.forEach(function(Ha,Za){gi[Za]=C[Ha.originIndex]});var Oi=Ct(Ua,C)*f,Xn=di-pi;a&&(Xn=di+Oi-(pi+Si)),Xn>Qr&&(Qr=Xn,gn=As)}}}),Qr>0){gn.nodes.push(wr);var Pi=wr.clusterId;wr.clusterId=gn.id;var ku=qr.nodes.indexOf(wr);qr.nodes.splice(ku,1);var rs=0,Ru=0;p.forEach(function(ns){var as=ns.source,pu=ns.target,As=ut[as].node.clusterId,Xs=ut[pu].node.clusterId;(As===gn.id&&Xs!==gn.id||Xs===gn.id&&As!==gn.id)&&(rs=rs+(ns[r]||1)),(As===Pi&&Xs!==Pi||Xs===Pi&&As!==Pi)&&(Ru=Ru+(ns[r]||1))}),gn.sumTot=rs,qr.sumTot=Ru}})}var Wr={},Nr=0;Object.keys(Ve).forEach(function(wr){var kr=Ve[wr];if(!kr.nodes||!kr.nodes.length){delete Ve[wr];return}var qr=String(Nr+1);qr!==wr&&(kr.id=qr,kr.nodes=kr.nodes.map(function(Qr){return{id:Qr.id,clusterId:qr}}),Ve[qr]=kr,Wr[wr]=qr,delete Ve[wr],Nr++)}),Oe.forEach(function(wr){var kr=wr.node,qr=wr.clusterId;kr&&(kr.clusterId=qr,kr.clusterId&&Wr[kr.clusterId]&&(kr.clusterId=Wr[kr.clusterId]))});var Er=[],fn={};p.forEach(function(wr){var kr=wr.source,qr=wr.target,Qr=wr[r]||1,gn=ut[kr].node.clusterId,Tn=ut[qr].node.clusterId;if(!(!gn||!Tn)){var fa="".concat(gn,"---").concat(Tn);if(fn[fa])fn[fa].weight+=Qr,fn[fa].count++;else{var Oa={source:gn,target:Tn,weight:Qr,count:1};fn[fa]=Oa,Er.push(Oa)}}});var rn=[];return Object.keys(Ve).forEach(function(wr){rn.push(Ve[wr])}),{clusters:rn,clusterEdges:Er}},Rt=wt,Ce=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Rt(e,t,r,n,!0,a,o,s,u)},me=Ce,Ke=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,d.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var g=Je({nodes:o,edges:u}),p=Object.keys(g);p.sort(function(H,tt){var at,ut;return((at=g[H])===null||at===void 0?void 0:at.degree)-((ut=g[tt])===null||ut===void 0?void 0:ut.degree)});var C=p[0];if(!o.length||((r=g[C])===null||r===void 0?void 0:r.degree)>=t)return"break";var F=o.findIndex(function(H){return H.id===C});o.splice(F,1),u=u.filter(function(H){return!(H.source===C||H.target===C)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},yr=Ke,er=function(e,t,r){var n=[];switch(e){case nt.EuclideanDistance:n=t[r];break;default:n=[];break}return n},gr=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=nt.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===nt.EuclideanDistance&&!u.every(function(qr){return qr.hasOwnProperty(r)}))return l;var g=[],p=[];if(o===nt.EuclideanDistance&&(g=q(u,r),p=b(g,n,a)),!p.length)return l;for(var C=(0,d.uniq)(p.map(function(qr){return qr.join("")})),F=Math.min(t,u.length,C.length),H=0;H<u.length;H++)u[H].originIndex=H;for(var tt=[],at=[],ut=[],H=0;H<F;H++)if(H===0){var ht=Math.floor(Math.random()*u.length);switch(o){case nt.EuclideanDistance:tt[H]=p[ht];break;default:tt[H]=[];break}at.push(ht),ut[H]=[u[ht]],u[ht].clusterId=String(H)}else{for(var _t=-1/0,Gt=0,Bt=function(gn){if(!at.includes(gn)){for(var Tn=0,fa=0;fa<tt.length;fa++){var Oa=0;switch(o){case nt.EuclideanDistance:Oa=w(p[u[gn].originIndex],tt[fa],o);break;default:break}Tn+=Oa}var pi=Tn/tt.length;pi>_t&&!tt.find(function(ri){return(0,d.isEqual)(ri,er(o,p,u[gn].originIndex))})&&(_t=pi,Gt=gn)}},re=0;re<u.length;re++)Bt(re);tt[H]=er(o,p,Gt),at.push(Gt),ut[H]=[u[Gt]],u[Gt].clusterId=String(H)}for(var xe=0;;){for(var H=0;H<u.length;H++){var se=0,Oe=1/0;if(!(xe===0&&at.includes(H))){for(var Ve=0;Ve<tt.length;Ve++){var Ir=0;switch(o){case nt.EuclideanDistance:Ir=w(p[H],tt[Ve],o);break;default:break}Ir<Oe&&(Oe=Ir,se=Ve)}if(u[H].clusterId!==void 0)for(var Wr=ut[Number(u[H].clusterId)].length-1;Wr>=0;Wr--)ut[Number(u[H].clusterId)][Wr].id===u[H].id&&ut[Number(u[H].clusterId)].splice(Wr,1);u[H].clusterId=String(se),ut[se].push(u[H])}}for(var Nr=!1,H=0;H<ut.length;H++){for(var Er=ut[H],fn=new Pa([]),Ve=0;Ve<Er.length;Ve++)fn=fn.add(new Pa(p[Er[Ve].originIndex]));var rn=fn.avg(Er.length);rn.equal(new Pa(tt[H]))||(Nr=!0,tt[H]=rn.getArr())}if(xe++,u.every(function(qr){return qr.clusterId!==void 0})&&Nr||xe>=1e3)break}var wr=[],kr={};return c.forEach(function(qr){var Qr,gn,Tn=qr.source,fa=qr.target,Oa=(Qr=u.find(function(Si){return Si.id===Tn}))===null||Qr===void 0?void 0:Qr.clusterId,pi=(gn=u.find(function(Si){return Si.id===fa}))===null||gn===void 0?void 0:gn.clusterId,ri="".concat(Oa,"---").concat(pi);if(kr[ri])kr[ri].count++;else{var yi={source:Oa,target:pi,count:1};kr[ri]=yi,wr.push(yi)}}),{clusters:ut,clusterEdges:wr}},dn=gr,Ue=function(e,t){var r=new Pa(t),n=r.norm2(),a=new Pa(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},or=Ue,mr=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,d.clone)(e.filter(function(g){return g.id!==t.id})),s=e.findIndex(function(g){return g.id===t.id}),u=q(e,r),f=b(u,n,a),c=f[s],l=[];return o.forEach(function(g,p){if(g.id!==t.id){var C=f[p],F=or(C,c);l.push(F),g.cosineSimilarity=F}}),o.sort(function(g,p){return p.cosineSimilarity-g.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},$r=mr,Pr=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),va=Pr,Sa=function(e,t){return e-t},Mn=function(){function i(e){e===void 0&&(e=Sa),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),Un=Mn,Fa=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(H,tt){return t?H.weight-tt.weight:0},l=new Un(c);for(Ee(u.id,s).forEach(function(F){l.insert(F)});!l.isEmpty();){var g=l.delMin(),p=g.source,C=g.target;f.has(p)&&f.has(C)||(r.push(g),f.has(p)||(f.add(p),Ee(p,s).forEach(function(F){l.insert(F)})),f.has(C)||(f.add(C),Ee(C,s).forEach(function(F){l.insert(F)})))}return r},Ea=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(p){return p});t&&u.sort(function(p,C){return p.weight-C.weight});for(var f=new va(a.map(function(p){return p.id}));u.length>0;){var c=u.shift(),l=c.source,g=c.target;f.connected(l,g)||(r.push(c),f.union(l,g))}return r},Kr=function(e,t,r){var n={prim:Fa,kruskal:Ea};return r?n[r](e,t):Ea(e,t)},kn=Kr,_e=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,g,p={},C={},F=0;F<l;++F){var H=u[F],tt=H.id;p[tt]=1/l,C[tt]=1/l}for(var at=Je(e);o>0&&n>t;){a=0;for(var F=0;F<l;++F){var H=u[F],tt=H.id;if(g=0,at[H.id].inDegree===0)p[tt]=0;else{for(var ut=Yt(tt,c,"source"),ht=0;ht<ut.length;++ht){var _t=ut[ht],Gt=at[_t].outDegree;Gt>0&&(g+=C[_t]/Gt)}p[tt]=r*g,a+=p[tt]}}a=(1-a)/l,n=0;for(var F=0;F<l;++F){var H=u[F],tt=H.id;g=p[tt]+a,n+=Math.abs(g-C[tt]),C[tt]=g}o-=1}return C},Nt=_e,fe=-1,Te=-1,Me="-1",Le="-1",nr=-1,Dr="-1",jr=function(){function i(e,t,r,n){e===void 0&&(e=fe),t===void 0&&(t=Te),r===void 0&&(r=Te),n===void 0&&(n=Me),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),Sn=function(){function i(e,t){e===void 0&&(e=Te),t===void 0&&(t=Le),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),An=function(){function i(e,t,r){e===void 0&&(e=Te),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new Sn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new jr(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new jr(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),Fn=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||Le,edgeLabel:n||Me,nodeLabel2:a||Le}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),da=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new Fn(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=nr),t===void 0&&(t=!1);var r=new An(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==Le&&r.addNode(a,u),c!==Le&&r.addNode(o,c),u!==Le&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),wa=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),hi=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,g=l===void 0?!1:l,p=e.verbose,C=p===void 0?!1:p;this.graphs=t,this.dfsCode=new da,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=g,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=C,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var g=f[l],p=o[g.to].label;t.to===g.to||r>p||n.hasNode(o[g.to])||(t.label<g.label||t.label===g.label&&s<=p)&&a.push(g)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(nr,r),a=n.nodeMap,o=new da,s={};n.nodes.forEach(function(l){var g=e.findForwardRootEdges(n,l);g.forEach(function(p){var C=a[p.to],F="".concat(l.label,"-").concat(p.label,"-").concat(C.label);s[F]||(s[F]={projected:[],nodeLabel1:l.label,edgeLabel:p.label,nodeLabel2:C.label});var H={graphId:n.id,edge:p,preNode:null};s[F].projected.push(H)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new Fn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(g){for(var p=o.buildRmpath(),C=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,F=o.dfsEdgeList[p[0]].toNode,H={},tt=!1,at=0,ut=r?-1:0,ht=function(fn){if(tt)return"break";g.forEach(function(rn){var wr=new wa(rn),kr=e.findBackwardEdge(n,wr.edges[p[fn]],wr.edges[p[0]],wr);kr&&(H[kr.label]||(H[kr.label]={projected:[],edgeLabel:kr.label}),H[kr.label].projected.push({graphId:n.id,edge:H,preNode:rn}),at=o.dfsEdgeList[p[fn]].fromNode,tt=!0)})},_t=p.length-1;_t>ut;_t--){var Gt=ht(_t);if(Gt==="break")break}if(tt){var Bt=e.findMinLabel(H);o.dfsEdgeList.push(new Fn(F,at,Le,Bt.edgeLabel,Le));var re=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[re]!==o.dfsEdgeList[re]?!1:l(H[Bt.edgeLabel].projected)}var xe={};tt=!1;var se=0;g.forEach(function(Er){var fn=new wa(Er),rn=e.findForwardPureEdges(n,fn.edges[p[0]],C,fn);rn.length>0&&(tt=!0,se=F,rn.forEach(function(wr){var kr="".concat(wr.label,"-").concat(a[wr.to].label);xe[kr]||(xe[kr]={projected:[],edgeLabel:wr.label,nodeLabel2:a[wr.to].label}),xe[kr].projected.push({graphId:n.id,edge:wr,preNode:Er})}))});for(var Oe=p.length,Ve=function(fn){if(tt)return"break";var rn=p[fn];g.forEach(function(wr){var kr=new wa(wr),qr=e.findForwardRmpathEdges(n,kr.edges[rn],C,kr);qr.length>0&&(tt=!0,se=o.dfsEdgeList[rn].fromNode,qr.forEach(function(Qr){var gn="".concat(Qr.label,"-").concat(a[Qr.to].label);xe[gn]||(xe[gn]={projected:[],edgeLabel:Qr.label,nodeLabel2:a[Qr.to].label}),xe[gn].projected.push({graphId:n.id,edge:Qr,preNode:wr})}))})},_t=0;_t<Oe;_t++){var Ir=Ve(_t);if(Ir==="break")break}if(!tt)return!0;var Wr=e.findMinLabel(xe);o.dfsEdgeList.push(new Fn(se,F+1,Le,Wr.edgeLabel,Wr.nodeLabel2));var Nr=o.dfsEdgeList.length-1;return t.dfsEdgeList[Nr]!==o.dfsEdgeList[Nr]?!1:l(xe["".concat(Wr.edgeLabel,"-").concat(Wr.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,d.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],g=l.nodeMap,p=new wa(c),C=a.length-1;C>=0;C--){var F=t.findBackwardEdge(l,p.edges[a[C]],p.edges[a[0]],p);if(F){var H="".concat(t.dfsCode.dfsEdgeList[a[C]].fromNode,"-").concat(F.label);f[H]||(f[H]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[C]].fromNode,edgeLabel:F.label}),f[H].projected.push({graphId:c.graphId,edge:F,preNode:c})}}if(!(n>=t.maxNodeNum)){var tt=t.findForwardPureEdges(l,p.edges[a[0]],s,p);tt.forEach(function(ut){var ht="".concat(o,"-").concat(ut.label,"-").concat(g[ut.to].label);u[ht]||(u[ht]={projected:[],fromNodeId:o,edgeLabel:ut.label,nodeLabel2:g[ut.to].label}),u[ht].projected.push({graphId:c.graphId,edge:ut,preNode:c})});for(var at=function(ht){var _t=t.findForwardRmpathEdges(l,p.edges[a[ht]],s,p);_t.forEach(function(Gt){var Bt="".concat(t.dfsCode.dfsEdgeList[a[ht]].fromNode,"-").concat(Gt.label,"-").concat(g[Gt.to].label);u[Bt]||(u[Bt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[ht]].fromNode,edgeLabel:Gt.label,nodeLabel2:g[Gt.to].label}),u[Bt].projected.push({graphId:c.graphId,edge:Gt,preNode:c})})},C=0;C<a.length;C++)at(C)}}),Object.keys(f).forEach(function(c){var l=f[c],g=l.toNodeId,p=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new Fn(o,g,"-1",p,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],g=l.fromNodeId,p=l.edgeLabel,C=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Fn(g,o+1,Le,p,C)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(g,p){var C=g.label,F="".concat(f,"-").concat(C);if(!s[F]){var H=a[C]||0;H++,a[C]=H}s[F]={graphKey:f,label:C},g.edges.forEach(function(tt){var at=C,ut=l[tt.to].label;if(!t&&at>ut){var ht=ut;ut=at,at=ht}var _t=tt.label,Gt="".concat(f,"-").concat(at,"-").concat(_t,"-").concat(ut),Bt="".concat(at,"-").concat(_t,"-").concat(ut);if(!o[Bt]){var re=o[Bt]||0;re++,o[Bt]=re}u[Gt]={graphId:f,nodeLabel1:at,edgeLabel:_t,nodeLabel2:ut}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],g="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[g]||(n[g]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var p={graphId:a,edge:c,preNode:null};n[g].projected.push(p)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Fn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),Wn=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new An(s,!0,t),c={};u.nodes.forEach(function(l,g){f.addNode(g,l[r]),c[l.id]=g}),u.edges.forEach(function(l,g){var p=c[l.source],C=c[l.target];f.addEdge(-1,p,C,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},fi=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},Oo="cluster",Da=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?Oo:a,s=e.edgeLabelProp,u=s===void 0?Oo:s,f=Wn(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,g=e.minNodeNum,p=e.verbose,C=e.top,F={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:g,top:C,verbose:p,directed:n},H=new hi(F);H.run();var tt=fi(H.frequentSubgraphs,o,u);return tt},xi=Da,co=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(Lo(o,s,u,r,n))}),a},Lo=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},Eo=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,g=0,p=f.nodeIdxs,C=f.neighborNum-1;l<o;){for(var F=p[1+Math.floor(Math.random()*C)],H=0;(s["".concat(c,"-").concat(F)]||s["".concat(F,"-").concat(c)])&&(F=Math.floor(Math.random()*t),H++,!(H>2*t)););if(H<2*t&&(s["".concat(c,"-").concat(F)]={start:c,end:F,distance:a[c][F]},l++,u++,u>=r))return s;if(g++,g>2*t)break}if(l<o){var tt=o-l;o=(o+tt)/(t-c-1)}}),s},lo=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var g=new Set(l),p=c.filter(function(at){return g.has(at)});if(!(!p||!p.length)){for(var C={},F=p.length,H=0;H<F;H++){var tt=a[p[H]];n[o].nodes.push(tt),C[tt.id]=!0}r.edges.forEach(function(at){C[at.source]&&C[at.target]&&n[o].edges.push(at)})}}}}),n},Zi=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],g=t==null?void 0:t.nodes[0][r],p=t==null?void 0:t.nodes[1][r],C=t==null?void 0:t.edges[0][n];f[n]===C&&(c===g&&l===p||c===p&&l===g)&&u++}),u)},ms=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function(at,ut){return c[at]-c[ut]}),g=10,p=[];l.forEach(function(at,ut){p[ut%g]||(p[ut%g]={graphs:[],totalCount:0,aveCount:0}),p[ut%g].graphs.push(at),p[ut%g].totalCount+=c[at]});var C=0,F=[];p.forEach(function(at){var ut=at.totalCount/at.graphs.length;at.aveCount=ut,F.push(ut);var ht=0,_t=at.length;at.graphs.forEach(function(Gt,Bt){var re=c[Gt];at.graphs.forEach(function(xe,se){Bt!==se&&(ht+=Math.abs(re-c[xe]))})}),ht/=_t*(_t-1)/2,C+=ht}),C/=p.length;var H=0;F.forEach(function(at,ut){F.forEach(function(ht,_t){ut!==_t&&(H+=Math.abs(at-ht))}),H/=F.length*(F.length-1)/2});var tt=H-C;n<tt&&(n=tt,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},zi=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},Ui=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(ge)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},xs=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,g=o[c];a["".concat(f,"-").concat(l)]=g,r||(a["".concat(l,"-").concat(f)]=g)}}),a},Cs=function(e,t,r,n,a,o,s,u,f,c,l){var g,p="".concat(t.id,"-").concat(r.id);if(c&&c[p])return c[p];var C=l?l[p]:void 0;if(!C){var F=(g={},g[p]={start:n[t.id].idx,end:n[r.id].idx,distance:a},g);l=lo(F,o,e,l),C=l[p]}return Zi(C,s,u,f)},Yo=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(l){var g=r[l.id].degree;u>g&&(u=g);var p=r[l.id].inDegree;f>p&&(f=p);var C=r[l.id].outDegree;c>C&&(c=C)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},Ao=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=Vn(e,r),l=Vn(t,r),g=xs(e.nodes,c,r),p=xs(t.nodes,l,r),C=zi(e.nodes,o),F=C.nodeMap,H=C.nodeLabelMap,tt=zi(t.nodes,o),at=tt.nodeMap,ut=tt.nodeLabelMap;Ui(e.edges,s,F);var ht=Ui(t.edges,s,at).edgeLabelMap,_t=[];l==null||l.forEach(function(Ya){_t=_t.concat(Ya)}),a||(a=Math.max.apply(Math,(0,x.__spreadArray)((0,x.__spreadArray)([],_t,!1),[2],!1))),n||(n=a);var Gt=co(e,c,o,n),Bt=co(t,l,o,n),re=Math.min(100,f*(f-1)/2),xe=Eo(n,f,re,Gt,c),se=lo(xe,Gt,e),Oe=10,Ve=1,Ir=1,Wr=4,Nr={graphs:se,nodeLabelProp:o,edgeLabelProp:s,minSupport:Ve,minNodeNum:Ir,maxNodeNum:Wr,directed:r},Er=xi(Nr).slice(0,Oe),fn=Er.length,rn=[];Er.forEach(function(Ya,di){rn[di]={},Object.keys(se).forEach(function(Ua){var gi=se[Ua],Oi=Zi(gi,Ya,o,s);rn[di][Ua]=Oi})});var wr=ms(rn,fn,Er),kr=wr.structure,qr=wr.structureCountMap,Qr=t.nodes[0],gn=[],Tn=(u=t.nodes[0])===null||u===void 0?void 0:u[o],fa=-1/0;t.nodes.forEach(function(Ya){var di=Ya[o],Ua=H[di];(Ua==null?void 0:Ua.length)>fa&&(fa=Ua.length,gn=Ua,Tn=di,Qr=Ya)});var Oa={},pi={},ri={},yi={},Si={},Ki={};Object.keys(ut).forEach(function(Ya,di){Si[Ya]=[],r&&(Ki[Ya]=[]);var Ua=-1/0,gi=ut[Ya],Oi={};gi.forEach(function(qa){var ui=p["".concat(Qr.id,"-").concat(qa.id)];if(ui&&Si[Ya].push(ui),Ua<ui&&(Ua=ui),Oi["".concat(Qr.id,"-").concat(qa.id)]={start:0,end:at[qa.id].idx,distance:ui},r){var fo=p["".concat(qa.id,"-").concat(Qr.id)];fo&&Ki[Ya].push(fo)}}),Si[Ya]=Si[Ya].sort(function(qa,ui){return qa-ui}),r&&(Ki[Ya]=Ki[Ya].sort(function(qa,ui){return qa-ui})),pi=lo(Oi,Bt,t,pi);var Xn=[];if(Object.keys(Oi).forEach(function(qa){if(ri[qa]){Xn.push(ri[qa]);return}var ui=pi[qa];ri[qa]=Zi(ui,kr,o,s),Xn.push(ri[qa])}),Xn=Xn.sort(function(qa,ui){return ui-qa}),yi["".concat(Qr.id,"-").concat(Ya)]=Xn,Ya!==Tn)for(var Ha=(gn==null?void 0:gn.length)||0,Za=function(ui){var fo=gn[ui],yu=Gt[F[fo.id].idx],Xo=yu.nodeLabelCountMap[Ya],zl=ut[Ya].length;if(!Xo||Xo.count<zl)return gn.splice(ui,1),"continue";for(var dh=!1,Ys=0;Ys<zl;Ys++)if(Xo.dists[Ys]>Si[Ya][Ys]){dh=!0;break}if(dh)return gn.splice(ui,1),"continue";var Bu={};yu.neighbors.forEach(function(Vs){var of=g["".concat(fo.id,"-").concat(Vs.id)];Bu["".concat(fo.id,"-").concat(Vs.id)]={start:F[fo.id].idx,end:F[Vs.id].idx,distance:of}}),se=lo(Bu,Gt,e,se);var Of=[];Object.keys(Bu).forEach(function(Vs){if(qr[Vs]){Of.push(qr[Vs]);return}var of=se[Vs];qr[Vs]=Zi(of,kr,o,s),Of.push(qr[Vs])}),Of=Of.sort(function(Vs,of){return of-Vs});for(var nl=!1,Ys=0;Ys<zl;Ys++)if(Of[Ys]<Xn[Ys]){nl=!0;break}if(nl)return gn.splice(ui,1),"continue"},Li=Ha-1;Li>=0;Li--)Za(Li)});var Pi=[];gn==null||gn.forEach(function(Ya){for(var di=F[Ya.id].idx,Ua=Lo(e.nodes,c[di],di,o,a),gi=Ua.neighbors,Oi=gi.length,Xn=!1,Ha=Oi-1;Ha>=0;Ha--){if(gi.length+1<t.nodes.length){Xn=!0;return}var Za=gi[Ha],Li=Za[o];if(!ut[Li]||!ut[Li].length){gi.splice(Ha,1);continue}if(!Si[Li]||!Si[Li].length){gi.splice(Ha,1);continue}var qa="".concat(Ya.id,"-").concat(Za.id),ui=g[qa],fo=Si[Li].length-1,yu=Si[Li][fo];if(ui>yu){gi.splice(Ha,1);continue}if(r){var Xo="".concat(Za.id,"-").concat(Ya.id),zl=g[Xo];fo=Ki[Li].length-1;var dh=Ki[Li][fo];if(zl>dh){gi.splice(Ha,1);continue}}var Ys=qr[qa]?qr[qa]:Cs(e,Ya,Za,F,ui,Gt,kr,o,s,qr,se),Bu="".concat(Qr.id,"-").concat(Li),Of=yi[Bu][yi[Bu].length-1];if(Ys<Of){gi.splice(Ha,1);continue}var nl=Yo(Oa,Li,at,ut),Vs=nl.minPatternNodeLabelDegree,of=nl.minPatternNodeLabelInDegree,bc=nl.minPatternNodeLabelOutDegree;if(F[Za.id].degree<Vs){gi.splice(Ha,1);continue}}Xn||Pi.push({nodes:[Ya].concat(gi)})});var ku=fr(t,Qr.id,!1).length,rs={};r?(Object.keys(ku).forEach(function(Ya){var di=at[Ya].node[o];rs[di]?rs[di].push(ku[Ya]):rs[di]=[ku[Ya]]}),Object.keys(rs).forEach(function(Ya){rs[Ya].sort(function(di,Ua){return di-Ua})})):rs=Si;for(var Ru=Pi.length,ns=function(di){var Ua=Pi[di],gi=Ua.nodes[0],Oi={},Xn={};Ua.nodes.forEach(function(no,mu){Xn[no.id]={idx:mu,node:no,degree:0,inDegree:0,outDegree:0};var us=no[o];Oi[us]?Oi[us]++:Oi[us]=1});var Ha=[],Za={};e.edges.forEach(function(no){Xn[no.source]&&Xn[no.target]&&(Ha.push(no),Za[no[s]]?Za[no[s]]++:Za[no[s]]=1,Xn[no.source].degree++,Xn[no.target].degree++,Xn[no.source].outDegree++,Xn[no.target].inDegree++)});for(var Li=Object.keys(ht).length,qa=!1,ui=0;ui<Li;ui++){var fo=Object.keys(ht)[ui];if(!Za[fo]||Za[fo]<ht[fo].length){qa=!0;break}}if(qa)return Pi.splice(di,1),"continue";var yu=Ha.length;if(yu<t.edges.length)return Pi.splice(di,1),"break";for(var Xo=!1,zl=function(mu){var us=Ha[mu],Lf=us[s],Ul=ht[Lf];if(!Ul||!Ul.length)return Za[Lf]--,Ul&&Za[Lf]<Ul.length?(Xo=!0,"break"):(Ha.splice(mu,1),Xn[us.source].degree--,Xn[us.target].degree--,Xn[us.source].outDegree--,Xn[us.target].inDegree--,"continue");var j0=Xn[us.source].node[o],H0=Xn[us.target].node[o],Bd=!1;if(Ul.forEach(function(K0){var Z0=at[K0.source].node,$0=at[K0.target].node;Z0[o]===j0&&$0[o]===H0&&(Bd=!0),!r&&Z0[o]===H0&&$0[o]===j0&&(Bd=!0)}),!Bd)return Za[Lf]--,Ul&&Za[Lf]<Ul.length?(Xo=!0,"break"):(Ha.splice(mu,1),Xn[us.source].degree--,Xn[us.target].degree--,Xn[us.source].outDegree--,Xn[us.target].inDegree--,"continue")},ui=yu-1;ui>=0;ui--){var dh=zl(ui);if(dh==="break")break}if(Xo)return Pi.splice(di,1),"continue";Ua.edges=Ha;var Ys=fr(Ua,Ua.nodes[0].id,!1).length;if(Object.keys(Ys).reverse().forEach(function(no){if(!(no===Ua.nodes[0].id||Xo)){if(Ys[no]===1/0){var mu=Xn[no].node[o];if(Oi[mu]--,Oi[mu]<ut[mu].length){Xo=!0;return}var us=Ua.nodes.indexOf(Xn[no].node);Ua.nodes.splice(us,1),Xn[no]=void 0;return}var Lf=F[no].node[o];if(!rs[Lf]||!rs[Lf].length||Ys[no]>rs[Lf][rs[Lf].length-1]){var mu=Xn[no].node[o];if(Oi[mu]--,Oi[mu]<ut[mu].length){Xo=!0;return}var us=Ua.nodes.indexOf(Xn[no].node);Ua.nodes.splice(us,1),Xn[no]=void 0}}}),Xo)return Pi.splice(di,1),"continue";for(var Bu=!0,Of=0;Bu&&!Xo;){Bu=!1;var nl=r?Xn[gi.id].degree<at[Qr.id].degree||Xn[gi.id].inDegree<at[Qr.id].inDegree||Xn[gi.id].outDegree<at[Qr.id].outDegree:Xn[gi.id].degree<at[Qr.id].degree;if(nl){Xo=!0;break}if(Oi[gi[o]]<ut[gi[o]].length){Xo=!0;break}for(var Vs=Ua.nodes.length,of=Vs-1;of>=0;of--){var bc=Ua.nodes[of],Y0=Xn[bc.id].degree,s_=Xn[bc.id].inDegree,u_=Xn[bc.id].outDegree,f_=bc[o],Rd=Yo(Oa,f_,at,ut),V0=Rd.minPatternNodeLabelDegree,c_=Rd.minPatternNodeLabelInDegree,l_=Rd.minPatternNodeLabelOutDegree,h_=r?Y0<V0||s_<c_||u_<l_:Y0<V0;if(h_){if(Oi[bc[o]]--,Oi[bc[o]]<ut[bc[o]].length){Xo=!0;break}Ua.nodes.splice(of,1),Xn[bc.id]=void 0,Bu=!0}}if(Xo||!Bu&&Of!==0)break;yu=Ha.length;for(var Dv=yu-1;Dv>=0;Dv--){var Ec=Ha[Dv];if(!Xn[Ec.source]||!Xn[Ec.target]){Ha.splice(Dv,1);var Nv=Ec[s];if(Za[Nv]--,Xn[Ec.source]&&(Xn[Ec.source].degree--,Xn[Ec.source].outDegree--),Xn[Ec.target]&&(Xn[Ec.target].degree--,Xn[Ec.target].inDegree--),ht[Nv]&&Za[Nv]<ht[Nv].length){Xo=!0;break}Bu=!0}}Of++}if(Xo||Xo||Ua.nodes.length<t.nodes.length||Ha.length<t.edges.length)return Pi.splice(di,1),"continue"},as=Ru-1;as>=0;as--){var pu=ns(as);if(pu==="break")break}for(var As=Pi.length,Xs=function(di){var Ua=Pi[di],gi={};Ua.edges.forEach(function(Ha){var Za="".concat(Ha.source,"-").concat(Ha.target,"-").concat(Ha.label);gi[Za]?gi[Za]++:gi[Za]=1});for(var Oi=function(Za){var Li=Pi[Za],qa={};Li.edges.forEach(function(fo){var yu="".concat(fo.source,"-").concat(fo.target,"-").concat(fo.label);qa[yu]?qa[yu]++:qa[yu]=1});var ui=!0;Object.keys(qa).length!==Object.keys(gi).length?ui=!1:Object.keys(gi).forEach(function(fo){qa[fo]!==gi[fo]&&(ui=!1)}),ui&&Pi.splice(Za,1)},Xn=As-1;Xn>di;Xn--)Oi(Xn);As=Pi.length},as=0;as<=As-1;as++)Xs(as);return Pi}}},Do=Ao,js=function(){function i(e){e===void 0&&(e=10),this.linkedList=new ve,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Pn=js,Co=Zn,No={getAdjMatrix:St,breadthFirstSearch:ce,connectedComponent:pe,getDegree:Je,getInDegree:Mr,getOutDegree:Vt,detectCycle:Zn,detectDirectedCycle:Co,detectAllCycles:Nn,detectAllDirectedCycle:ea,detectAllUndirectedCycle:Yn,depthFirstSearch:pn,dijkstra:fr,findAllPath:yn,findShortestPath:vn,floydWarshall:Vn,labelPropagation:ba,louvain:Rt,iLouvain:me,kCore:yr,kMeans:dn,cosineSimilarity:or,nodesCosineSimilarity:$r,minimumSpanningTree:kn,pageRank:Nt,getNeighbors:Yt,Stack:Pn,GADDI:Do},Wi=z(277160),On=z(631437),Po=Jt,Ai=function(e){return function(t,r){return t[e]-r[e]}},Vo=function(e,t,r){return e>=t&&e<=r},jo=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,g=s.x*s.x+s.y*s.y,p=u.x*u.x+u.y*u.y;if(c>a*g*p){var C=(o.x*u.y-o.y*u.x)*l,F=(o.x*s.y-o.y*s.x)*l;return!Vo(C,0,1)||!Vo(F,0,1)?null:{x:e.x+C*s.x,y:e.y+C*s.y}}return null},bs=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,g=1;g<f.length&&(l=jo(f[g-1],f[g],c,t),!l);g++);return l},ao=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},io=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},ni=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),Wi.transformMat3(n,n,t),{x:n[0],y:n[1]}},ho=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=ot.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return Wi.transformMat3(a,a,n),{x:a[0],y:a[1]}},ko=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},Ho=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},Ro=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},fs=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},Ko=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},is=function(e,t){e.translate(t.x,t.y)},Wa=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,g=0,p=0,C=0;e.animate(function(H){return p=f*H,C=c*H,a=Po(a,[["t",p-l,C-g]]),l=p,g=C,{matrix:a}},n)}else{var F=Po(a,[["t",s,u]]);e.setMatrix(F)}},Ts=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,d.isArray)(t)||(n=[t,t]),(0,d.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=Po(r,[["s",n[0],n[1]]]),e.setMatrix(r)},eu=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=Po(r,[["r",t]]),e.setMatrix(r)},Xi=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function cs(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var wo=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(cs(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},Yi=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},vo=function(e,t){var r=!1;return(0,d.each)(e,function(n){if(jo(n.from,n.to,t.from,t.to))return r=!0,!1}),r},ca=function(e,t){var r=function(g){var p=g.map(function(F){return F[0]}),C=g.map(function(F){return F[1]});return{minX:Math.min.apply(null,p),maxX:Math.max.apply(null,p),minY:Math.min.apply(null,C),maxY:Math.max.apply(null,C)}},n=function(g){for(var p=[],C=g.length,F=0;F<C-1;F++){var H=g[F],tt=g[F+1];p.push({from:{x:H[0],y:H[1]},to:{x:tt[0],y:tt[1]}})}if(p.length>1){var at=g[0],ut=g[C-1];p.push({from:{x:ut[0],y:ut[1]},to:{x:at[0],y:at[1]}})}return p};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!Yi(a,o))return!1;var s=!1;if((0,d.each)(t,function(l){if(wo(e,l[0],l[1]))return s=!0,!1}),s||((0,d.each)(e,function(l){if(wo(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,d.each)(f,function(l){if(vo(u,l))return c=!0,!1}),c},Va=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),mi=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},oo=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},ki=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=mi(n,r[s]),f=u[0],c=u[1],l=u[2],g=u[3];o[s]=jo({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:g}),o[s]&&(a+=1)}return[o,a]},$i=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=mi(n,r[s]),f=u[0],c=u[1],l=u[2],g=u[3],p=oo(t,new Va(f,c,l,g));p=Math.abs(p-.5),p>=0&&p<=1&&(o+=1,a=p<a?p:a)}return o===0?-1:a},Zo=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},So=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},os=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},go=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},Rs=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},ru=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(On.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];On.normalize(c,c);var l=[s-r,u-n];return Math.abs(On.dot(l,c))},Is=function(e,t,r){return e+(t-e)*r},ci=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=Is(e[o],t[o],r);return a},Bo="rgb(95, 149, 255)",Fu="rgb(255, 255, 255)",po="rgb(0, 0, 0)",Bs="rgb(247, 250, 255)",Os="rgb(239, 244, 255)",$o="rgb(253, 253, 253)",Fs="rgb(250, 250, 250)",ls="rgb(224, 224, 224)",qo="rgb(234, 234, 234)",hs="rgb(245, 245, 245)",nu="rgb(191, 213, 255)",Gs="#4572d9",vs="rgb(223, 234, 255)",Tt={mainStroke:Bo,mainFill:Os,activeStroke:Bo,activeFill:Bs,inactiveStroke:nu,inactiveFill:Bs,selectedStroke:Bo,selectedFill:Fu,highlightStroke:Gs,highlightFill:vs,disableStroke:ls,disableFill:Fs,edgeMainStroke:ls,edgeActiveStroke:Bo,edgeInactiveStroke:qo,edgeSelectedStroke:Bo,edgeHighlightStroke:Bo,edgeDisableStroke:hs,comboMainStroke:ls,comboMainFill:$o,comboActiveStroke:Bo,comboActiveFill:Bs,comboInactiveStroke:ls,comboInactiveFill:$o,comboSelectedStroke:Bo,comboSelectedFill:$o,comboHighlightStroke:Gs,comboHighlightFill:$o,comboDisableStroke:qo,comboDisableFill:Fs},qt={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Tt.mainStroke,fill:Os},size:20,color:Tt.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Tt.activeFill,stroke:Tt.activeStroke}},nodeStateStyles:{active:{fill:Tt.activeFill,stroke:Tt.activeStroke,lineWidth:2,shadowColor:Tt.mainStroke,shadowBlur:10},selected:{fill:Tt.selectedFill,stroke:Tt.selectedStroke,lineWidth:4,shadowColor:Tt.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Tt.highlightFill,stroke:Tt.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Tt.inactiveFill,stroke:Tt.inactiveStroke,lineWidth:1},disable:{fill:Tt.disableFill,stroke:Tt.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:po,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Tt.edgeMainStroke,lineAppendWidth:2},color:Tt.edgeMainStroke},edgeStateStyles:{active:{stroke:Tt.edgeActiveStroke,lineWidth:1},selected:{stroke:Tt.edgeSelectedStroke,lineWidth:2,shadowColor:Tt.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tt.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Tt.edgeInactiveStroke,lineWidth:1},disable:{stroke:Tt.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:po,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Tt.comboMainFill,lineWidth:1,stroke:Tt.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Tt.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Tt.comboActiveStroke,lineWidth:1,fill:Tt.comboActiveFill},selected:{stroke:Tt.comboSelectedStroke,lineWidth:2,fill:Tt.comboSelectedFill,shadowColor:Tt.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Tt.comboHighlightStroke,lineWidth:2,fill:Tt.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Tt.comboInactiveStroke,fill:Tt.comboInactiveFill,lineWidth:1},disable:{stroke:Tt.comboDisableStroke,fill:Tt.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Fe={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ze=Math.PI,Sr=Math.sin,Jr=Math.cos,nn=Sr(Ze/8),$n=Jr(Ze/8),ai=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=ni(n,o),a=ni(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},qi=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||qt.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],g=[e.endPoint.x,e.endPoint.y],p=o.height/2,C=o.width/2,F=p,H=p,tt=F*nn,at=F*$n,ut=H*nn,ht=H*$n,_t=a.get("type"),Gt=Math.min(p/2,C/2),Bt=Math.min(p,C),re=s!=null&&s.pointPadding?Math.min(Bt,s==null?void 0:s.pointPadding):Gt;if(l[0]===g[0]&&l[1]===g[1]){switch(f){case"top":_t==="circle"?(l=[c[0]-tt,c[1]-at],g=[c[0]+ut,c[1]-ht]):(l=[c[0]-re,c[1]-p],g=[c[0]+re,c[1]-p]);break;case"top-right":F=p,H=C,_t==="circle"?(tt=F*nn,at=F*$n,ut=H*nn,ht=H*$n,l=[c[0]+tt,c[1]-at],g=[c[0]+ht,c[1]-ut]):(l=[c[0]+C-re,c[1]-p],g=[c[0]+C,c[1]-p+re]);break;case"right":F=C,H=C,_t==="circle"?(tt=F*nn,at=F*$n,ut=H*nn,ht=H*$n,l=[c[0]+at,c[1]-tt],g=[c[0]+ht,c[1]+ut]):(l=[c[0]+C,c[1]-re],g=[c[0]+C,c[1]+re]);break;case"bottom-right":F=C,H=p,_t==="circle"?(tt=F*nn,at=F*$n,ut=H*nn,ht=H*$n,l=[c[0]+at,c[1]+tt],g=[c[0]+ut,c[1]+ht]):(l=[c[0]+C,c[1]+p-re],g=[c[0]+C-re,c[1]+p]);break;case"bottom":F=p,H=p,_t==="circle"?(tt=F*nn,at=F*$n,ut=H*nn,ht=H*$n,l=[c[0]+tt,c[1]+at],g=[c[0]-ut,c[1]+ht]):(l=[c[0]-re,c[1]+p],g=[c[0]+re,c[1]+p]);break;case"bottom-left":F=p,H=C,_t==="circle"?(tt=F*nn,at=F*$n,ut=H*nn,ht=H*$n,l=[c[0]-tt,c[1]+at],g=[c[0]-ht,c[1]+ut]):(l=[c[0]-C,c[1]+p-re],g=[c[0]-C+re,c[1]+p]);break;case"left":F=C,H=C,_t==="circle"?(tt=F*nn,at=F*$n,ut=H*nn,ht=H*$n,l=[c[0]-at,c[1]+tt],g=[c[0]-ht,c[1]-ut]):(l=[c[0]-C,c[1]-re],g=[c[0]-C,c[1]+re]);break;case"top-left":F=C,H=p,_t==="circle"?(tt=F*nn,at=F*$n,ut=H*nn,ht=H*$n,l=[c[0]-at,c[1]-tt],g=[c[0]-ut,c[1]-ht]):(l=[c[0]-C+re,c[1]-p],g=[c[0]-C,c[1]-p+re]);break;default:F=C,H=C,tt=F*nn,at=F*$n,ut=H*nn,ht=H*$n,l=[c[0]-tt,c[1]-at],g=[c[0]+ut,c[1]-ht]}if(s.clockwise===!1){var xe=[l[0],l[1]];l=[g[0],g[1]],g=[xe[0],xe[1]]}}var se=[l[0]-c[0],l[1]-c[1]],Oe=(F+u)/F,Ve=(H+u)/H;s.clockwise===!1&&(Oe=(H+u)/H,Ve=(F+u)/F);var Ir=On.scale([0,0],se,Oe),Wr=[c[0]+Ir[0],c[1]+Ir[1]],Nr=[g[0]-c[0],g[1]-c[1]],Er=On.scale([0,0],Nr,Ve),fn=[c[0]+Er[0],c[1]+Er[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:g[0],y:g[1]},e.controlPoints=[{x:Wr[0],y:Wr[1]},{x:fn[0],y:fn[1]}],e},so=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Ze*2),r&&(u.x+=Jr(c)*r,u.y+=Sr(c)*r),n){var l=c-Ze/2;c>1/2*Ze&&c<3*1/2*Ze&&(l-=Ze),u.x+=Jr(l)*n,u.y+=Sr(l)*n}var g={x:u.x,y:u.y,angle:c};return a?(c>.5*Ze&&c<1.5*Ze&&(c-=Ze),(0,x.__assign)({rotate:c},g)):g},zs=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},xu=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Ri=function(e,t){typeof t=="function"&&zs(e,null,-1,t)},yo=function(e,t){typeof t=="function"&&xu(e,null,-1,t)},Hs=function(e,t){return t*(Fe[e]||1)},Gu=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=Hs(a,t)}),[r,t]},bu=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},au=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,d.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var g=n[l.parentId];if(g)g.children?g.children.push(c):g.children=[c];else{var p={id:l.parentId,children:[l]};n[l.parentId]=p,n[c.id]=c}return}if((0,d.isString)(u.parentId)){var C=n[u.parentId];if(C)C.children?C.children.push(c):C.children=[c],n[c.id]=c;else{var F={id:u.parentId,children:[c]};n[F.id]=F,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,Ri(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var g=o[f.id];return g&&(g.depth=f.depth),!0})}),r},Ks=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(C){if(!u){if(C.id===t){o=C,C.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Ri(C,function(F){var H;return s[F.id]={children:(F==null?void 0:F.children)||[]},a=(H=s[F.parentId||F.comboId||"root"])===null||H===void 0?void 0:H.children,F&&(F.removed||t===F.id)&&a?(f=F.parentId||F.comboId||"root",o=F,F.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var g=0;(e||[]).forEach(function(C){l||Ri(C,function(F){return r===F.id?(l=!0,F.children?F.children.push(o):F.children=[o],g=F.depth,o.itemType==="node"?o.depth=g+2:o.depth=g+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var p=o.depth;Ri(o,function(C){return C.itemType==="node"?p+=2:p+=1,C.depth=p,!0})}return e},iu=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,l=o.fixCollapseSize,g=c?l:f,p=(0,d.isArray)(g)?g:[g,g],C=p[0],F=p[1],H=[C/2,F/2];return{minX:s-H[0],minY:u-H[1],maxX:s+H[0],maxY:u+H[1],x:s,y:u,width:C,height:F}}return e.forEach(function(tt){var at=t.findById(tt.id);if(!(!at||!at.isVisible())){at.set("bboxCanvasCache",void 0);var ut=at.getCanvasBBox();ut.x&&n.minX>ut.minX&&(n.minX=ut.minX),ut.y&&n.minY>ut.minY&&(n.minY=ut.minY),ut.x&&n.maxX<ut.maxX&&(n.maxX=ut.maxX),ut.y&&n.maxY<ut.maxY&&(n.maxY=ut.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(tt){(n[tt]===1/0||n[tt]===-1/0)&&(n[tt]=void 0)}),n},Ls=function(e){var t=(0,d.isNumber)(e.x)||(0,d.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,d.isNumber)(e.style.r)||(0,d.isNumber)(e.style.width)||(0,d.isNumber)(e.style.height)||(0,d.isNumber)(e.style.rx)||(0,d.isNumber)(e.style.ry)),t},Zs=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(!(r==="img"&&!(0,d.isString)(n)))if((0,d.isObject)(n)&&!(0,d.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,d.isString)(s)||(a[o]=(0,d.clone)(s))}),t[r]=a}else t[r]=(0,d.clone)(n)}),t},ds=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,d.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},To=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Ri(e,function(g){return(0,d.isString)(g.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(g){return!(0,d.isString)(g.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(g){return g.id}),f=a==null?void 0:a.map(function(g){return g.id}),c=(0,x.__spreadArray)((0,x.__spreadArray)([],u,!0),f,!0),l=(r||[]).find(function(g){return!c.includes(g.source)||!c.includes(g.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},sf=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,d.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Df=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,d.each)(e,function(t){(0,d.each)(t,function(r,n){(0,d.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,d.each)(r||[],function(o){var s=W.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,d.each)(t,function(r){e.indexOf(r)<0&&((0,d.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,d.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,d.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,d.isArray)(e)?a=e:a=[e],(0,d.isArray)(t))return(0,d.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,d.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),Nf=Df,Ds=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Pf=new RegExp("([a-z])["+Ds+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Ds+"]*,?["+Ds+"]*)+)","ig"),h=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Ds+"]*,?["+Ds+"]*","ig"),T=function(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Pf,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(h,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},dt=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},Et=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},Dt=function(i){if(i=T(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,g=o,p=i.length;g<p;g++){if(e.push(c=[]),l=i[g],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var C=2,F=u.length;C<F;C++)u[C]=+u[C]+t,u[++C]=+u[C]+r;e.pop(),e=e.concat(dt(u,f));break;case"O":e.pop(),u=Et(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(Et(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var C=1,F=l.length;C<F;C++)c[C]=+l[C]+(C%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(dt(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=Et(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(Et(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var H=0,tt=l.length;H<tt;H++)c[H]=l[H];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},Zt=function(i,e,t,r){return[i,e,t,r,t,r]},$t=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},ue=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),g=[],p,C,F,H,tt,at=function(pi,ri,yi){var Si=pi*Math.cos(yi)-ri*Math.sin(yi),Ki=pi*Math.sin(yi)+ri*Math.cos(yi);return{x:Si,y:Ki}};if(f)C=f[0],F=f[1],H=f[2],tt=f[3];else{p=at(i,e,-l),i=p.x,e=p.y,p=at(s,u,-l),s=p.x,u=p.y,i===s&&e===u&&(s+=1,u+=1);var ut=(i-s)/2,ht=(e-u)/2,_t=ut*ut/(t*t)+ht*ht/(r*r);_t>1&&(_t=Math.sqrt(_t),t=_t*t,r=_t*r);var Gt=t*t,Bt=r*r,re=(a===o?-1:1)*Math.sqrt(Math.abs((Gt*Bt-Gt*ht*ht-Bt*ut*ut)/(Gt*ht*ht+Bt*ut*ut)));H=re*t*ht/r+(i+s)/2,tt=re*-r*ut/t+(e+u)/2,C=Math.asin(((e-tt)/r).toFixed(9)),F=Math.asin(((u-tt)/r).toFixed(9)),C=i<H?Math.PI-C:C,F=s<H?Math.PI-F:F,C<0&&(C=Math.PI*2+C),F<0&&(F=Math.PI*2+F),o&&C>F&&(C=C-Math.PI*2),!o&&F>C&&(F=F-Math.PI*2)}var xe=F-C;if(Math.abs(xe)>c){var se=F,Oe=s,Ve=u;F=C+c*(o&&F>C?1:-1),s=H+t*Math.cos(F),u=tt+r*Math.sin(F),g=ue(s,u,t,r,n,0,o,Oe,Ve,[F,se,H,tt])}xe=F-C;var Ir=Math.cos(C),Wr=Math.sin(C),Nr=Math.cos(F),Er=Math.sin(F),fn=Math.tan(xe/4),rn=4/3*t*fn,wr=4/3*r*fn,kr=[i,e],qr=[i+rn*Wr,e-wr*Ir],Qr=[s+rn*Er,u-wr*Nr],gn=[s,u];if(qr[0]=2*kr[0]-qr[0],qr[1]=2*kr[1]-qr[1],f)return[qr,Qr,gn].concat(g);g=[qr,Qr,gn].concat(g).join().split(",");for(var Tn=[],fa=0,Oa=g.length;fa<Oa;fa++)Tn[fa]=fa%2?at(g[fa-1],g[fa],l).y:at(g[fa],g[fa+1],l).x;return Tn},ye=function(i,e){var t=Dt(i),r=e&&Dt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(ut,ht,_t){var Gt,Bt;if(!ut)return["C",ht.x,ht.y,ht.x,ht.y,ht.x,ht.y];switch(!(ut[0]in{T:1,Q:1})&&(ht.qx=ht.qy=null),ut[0]){case"M":ht.X=ut[1],ht.Y=ut[2];break;case"A":ut=["C"].concat(ue.apply(0,[ht.x,ht.y].concat(ut.slice(1))));break;case"S":_t==="C"||_t==="S"?(Gt=ht.x*2-ht.bx,Bt=ht.y*2-ht.by):(Gt=ht.x,Bt=ht.y),ut=["C",Gt,Bt].concat(ut.slice(1));break;case"T":_t==="Q"||_t==="T"?(ht.qx=ht.x*2-ht.qx,ht.qy=ht.y*2-ht.qy):(ht.qx=ht.x,ht.qy=ht.y),ut=["C"].concat($t(ht.x,ht.y,ht.qx,ht.qy,ut[1],ut[2]));break;case"Q":ht.qx=ut[1],ht.qy=ut[2],ut=["C"].concat($t(ht.x,ht.y,ut[1],ut[2],ut[3],ut[4]));break;case"L":ut=["C"].concat(Zt(ht.x,ht.y,ut[1],ut[2]));break;case"H":ut=["C"].concat(Zt(ht.x,ht.y,ut[1],ht.y));break;case"V":ut=["C"].concat(Zt(ht.x,ht.y,ht.x,ut[1]));break;case"Z":ut=["C"].concat(Zt(ht.x,ht.y,ht.X,ht.Y));break;default:break}return ut},g=function(ut,ht){if(ut[ht].length>7){ut[ht].shift();for(var _t=ut[ht];_t.length;)o[ht]="A",r&&(s[ht]="A"),ut.splice(ht++,0,["C"].concat(_t.splice(0,6)));ut.splice(ht,1),c=Math.max(t.length,r&&r.length||0)}},p=function(ut,ht,_t,Gt,Bt){ut&&ht&&ut[Bt][0]==="M"&&ht[Bt][0]!=="M"&&(ht.splice(Bt,0,["M",Gt.x,Gt.y]),_t.bx=0,_t.by=0,_t.x=ut[Bt][1],_t.y=ut[Bt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var C=0;C<c;C++){t[C]&&(u=t[C][0]),u!=="C"&&(o[C]=u,C&&(f=o[C-1])),t[C]=l(t[C],n,f),o[C]!=="A"&&u==="C"&&(o[C]="C"),g(t,C),r&&(r[C]&&(u=r[C][0]),u!=="C"&&(s[C]=u,C&&(f=s[C-1])),r[C]=l(r[C],a,f),s[C]!=="A"&&u==="C"&&(s[C]="C"),g(r,C)),p(t,r,n,a,C),p(r,t,a,n,C);var F=t[C],H=r&&r[C],tt=F.length,at=r&&H.length;n.x=F[tt-2],n.y=F[tt-1],n.bx=parseFloat(F[tt-4])||n.x,n.by=parseFloat(F[tt-3])||n.y,a.bx=r&&(parseFloat(H[at-4])||a.x),a.by=r&&(parseFloat(H[at-3])||a.y),a.x=r&&H[at-2],a.y=r&&H[at-1]}return r?[t,r]:t},Ie=/,?([a-z]),?/gi,Xe=function(i){return i.join(",").replace(Ie,"$1")},hr=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},pr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,C=0;C<c;C++){var F=f*l[C]+f,H=hr(F,i,t,n,o),tt=hr(F,e,r,a,s),at=H*H+tt*tt;p+=g[C]*Math.sqrt(at)}return f*p},lr=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,g,p,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,g=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,g=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;p=-g/l,p>0&&p<1&&u.push(p);continue}var F=l*l-4*g*c,H=Math.sqrt(F);if(!(F<0)){var tt=(-l+H)/(2*c);tt>0&&tt<1&&u.push(tt);var at=(-l-H)/(2*c);at>0&&at<1&&u.push(at)}}for(var ut=u.length,ht=ut,_t;ut--;)p=u[ut],_t=1-p,f[0][ut]=_t*_t*_t*i+3*_t*_t*p*t+3*_t*p*p*n+p*p*p*o,f[1][ut]=_t*_t*_t*e+3*_t*_t*p*r+3*_t*p*p*a+p*p*p*s;return f[0][ht]=i,f[1][ht]=e,f[0][ht+1]=o,f[1][ht+1]=s,f[0].length=f[1].length=ht+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Xr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,g=f/c,p=+l.toFixed(2),C=+g.toFixed(2);if(!(p<+Math.min(i,t).toFixed(2)||p>+Math.max(i,t).toFixed(2)||p<+Math.min(n,o).toFixed(2)||p>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:g}}}},Vr=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},_r=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=Xe,a},ln=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:_r(i,e,t,r),vb:[i,e,t,r].join(" ")}},ga=function(i,e){return i=ln(i),e=ln(e),Vr(e,i.x,i.y)||Vr(e,i.x2,i.y)||Vr(e,i.x,i.y2)||Vr(e,i.x2,i.y2)||Vr(i,e.x,e.y)||Vr(i,e.x2,e.y)||Vr(i,e.x,e.y2)||Vr(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},pa=function(i,e,t,r,n,a,o,s){(0,d.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=lr.apply(null,i);return ln(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},aa=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),g=u*u,p=g*u,C=c*i+l*3*u*t+f*3*u*u*n+p*o,F=c*e+l*3*u*r+f*3*u*u*a+p*s,H=i+2*u*(t-i)+g*(n-2*t+i),tt=e+2*u*(r-e)+g*(a-2*r+e),at=t+2*u*(n-t)+g*(o-2*n+t),ut=r+2*u*(a-r)+g*(s-2*a+r),ht=f*i+u*t,_t=f*e+u*r,Gt=f*n+u*o,Bt=f*a+u*s,re=90-Math.atan2(H-at,tt-ut)*180/Math.PI;return{x:C,y:F,m:{x:H,y:tt},n:{x:at,y:ut},start:{x:ht,y:_t},end:{x:Gt,y:Bt},alpha:re}},Gn=function(i,e,t){var r=pa(i),n=pa(e);if(!ga(r,n))return t?0:[];for(var a=pr.apply(0,i),o=pr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},g=t?0:[],p=0;p<s+1;p++){var C=aa.apply(0,i.concat(p/s));f.push({x:C.x,y:C.y,t:p/s})}for(var p=0;p<u+1;p++){var C=aa.apply(0,e.concat(p/u));c.push({x:C.x,y:C.y,t:p/u})}for(var p=0;p<s;p++)for(var F=0;F<u;F++){var H=f[p],tt=f[p+1],at=c[F],ut=c[F+1],ht=Math.abs(tt.x-H.x)<.001?"y":"x",_t=Math.abs(ut.x-at.x)<.001?"y":"x",Gt=Xr(H.x,H.y,tt.x,tt.y,at.x,at.y,ut.x,ut.y);if(Gt){if(l[Gt.x.toFixed(4)]===Gt.y.toFixed(4))continue;l[Gt.x.toFixed(4)]=Gt.y.toFixed(4);var Bt=H.t+Math.abs((Gt[ht]-H[ht])/(tt[ht]-H[ht]))*(tt.t-H.t),re=at.t+Math.abs((Gt[_t]-at[_t])/(ut[_t]-at[_t]))*(ut.t-at.t);Bt>=0&&Bt<=1&&re>=0&&re<=1&&(t?g+=1:g.push({x:Gt.x,y:Gt.y,t1:Bt,t2:re}))}}return g},Jn=function(i,e,t){i=ye(i),e=ye(e);for(var r,n,a,o,s,u,f,c,l,g,p=t?0:[],C=0,F=i.length;C<F;C++){var H=i[C];if(H[0]==="M")r=s=H[1],n=u=H[2];else{H[0]==="C"?(l=[r,n].concat(H.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var tt=0,at=e.length;tt<at;tt++){var ut=e[tt];if(ut[0]==="M")a=f=ut[1],o=c=ut[2];else{ut[0]==="C"?(g=[a,o].concat(ut.slice(1)),a=g[6],o=g[7]):(g=[a,o,a,o,f,c,f,c],a=f,o=c);var ht=Gn(l,g,t);if(t)p+=ht;else{for(var _t=0,Gt=ht.length;_t<Gt;_t++)ht[_t].segment1=C,ht[_t].segment2=tt,ht[_t].bez1=l,ht[_t].bez2=g;p=p.concat(ht)}}}}}return p},Di=function(i,e){return Jn(i,e)};function Ci(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function _i(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=Ci(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var g=[];return l.length===4&&(g.push("C"),g=g.concat(l[2])),l.length>=3&&(l.length===3&&g.push("Q"),g=g.concat(l[1])),l.length===2&&g.push("L"),g=g.concat(l[l.length-1]),g});return c}var Ti=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(_i(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},Ii=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(Ti(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Bi=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,d.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function Qi(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Ga=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],Bi(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,g=s[u-1][f-1].min+o;s[u][f]=Qi(c,l,g)}}return s},ii=function(i,e){var t=Ga(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function gs(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=Es(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function Es(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var Fo=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=Es(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=gs(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=gs(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=gs(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},Eu=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),kf=Eu;function wc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var Sc=typeof window!="undefined"&&typeof window.document!="undefined";function _c(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function Rf(i){return i.cfg.visible&&i.cfg.capture}var Bf=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,d.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(J),Mc=Bf,uf=z(734155),ff=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},Ac=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),cf=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=uf.platform}return i}(),ou=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),Cc=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),cn=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),wu=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,za=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,lf=3,Ff=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",wu]],Us=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Gf(i){return i?Uf(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new cn:typeof navigator!="undefined"?Uf(navigator.userAgent):ws()}function su(i){return i!==""&&Ff.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function zf(i){var e=su(i);return e?e[0]:null}function Uf(i){var e=su(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Cc;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<lf&&(n=ff(ff([],n,!0),Xf(lf-n.length),!0)):n=[];var a=n.join("."),o=Wf(i),s=za.exec(i);return s&&s[1]?new ou(t,a,o,s[1]):new Ac(t,a,o)}function Wf(i){for(var e=0,t=Us.length;e<t;e++){var r=Us[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function ws(){var i=typeof uf!="undefined"&&uf.version;return i?new cf(uf.version.slice(1)):null}function Xf(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function Yf(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],g=e[0],p=e[1],C=e[2],F=e[3],H=e[4],tt=e[5],at=e[6],ut=e[7],ht=e[8];return t[0]=g*r+p*o+C*f,t[1]=g*n+p*s+C*c,t[2]=g*a+p*u+C*l,t[3]=F*r+H*o+tt*f,t[4]=F*n+H*s+tt*c,t[5]=F*a+H*u+tt*l,t[6]=at*r+ut*o+ht*f,t[7]=at*n+ut*s+ht*c,t[8]=at*a+ut*u+ht*l,t}function bi(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function zu(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,g=-c*a+s*u,p=f*a-o*u,C=t*l+r*g+n*p;return C?(C=1/C,e[0]=l*C,e[1]=(-c*r+n*f)*C,e[2]=(s*r-n*o)*C,e[3]=g*C,e[4]=(c*t-n*u)*C,e[5]=(-s*t+n*a)*C,e[6]=p*C,e[7]=(-f*t+r*u)*C,e[8]=(o*t-r*a)*C,e):null}var Ss=Jt,et="matrix",pt=["zIndex","capture","visible","type"],Mt=["repeat"],jt=":",ie="*";function Re(i){for(var e=[],t=0;t<i.length;t++)(0,d.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Ge(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function ar(i,e){var t={},r=e.attr();return(0,d.each)(i,function(n,a){Mt.indexOf(a)===-1&&!(0,d.isEqual)(r[a],n)&&(t[a]=n)}),t}function Lr(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,d.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,d.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var Gr=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,d.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,d.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(wc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(et,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(et)},e.prototype.setMatrix=function(t){this.attr(et,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=Yf(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=Yf(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?bi(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=zu(r);if(n)return bi(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,d.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,d.each)(r,function(s,u){(0,d.isArray)(r[u])?n[u]=Re(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,d.each)(pt,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?d.noop:c,g=t[4],p=g===void 0?0:g,C,F,H,tt,at;(0,d.isFunction)(o)?(C=o,o={}):(0,d.isObject)(o)&&o.onFrame&&(C=o.onFrame,F=o.repeat),(0,d.isObject)(s)?(at=s,s=at.duration,f=at.easing||"easeLinear",p=at.delay||0,F=at.repeat||F||!1,l=at.callback||d.noop,H=at.pauseCallback||d.noop,tt=at.resumeCallback||d.noop):((0,d.isNumber)(l)&&(p=l,l=null),(0,d.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var ut=ar(o,this),ht={fromAttrs:Ge(ut,this),toAttrs:ut,duration:s,easing:f,repeat:F,callback:l,pauseCallback:H,resumeCallback:tt,delay:p,startTime:n.getTime(),id:(0,d.uniqueId)(),onFrame:C,pathFormatted:!1};a.length>0?a=Lr(a,ht):n.addAnimator(this),a.push(ht),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,d.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,d.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,d.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(g){var p=a[g],C=p.get("name");if(C){if((p.isGroup()||p.isCanvas&&p.isCanvas())&&s&&_c(p,s))return"break";(0,d.isArray)(C)?(0,d.each)(C,function(F){n.emitDelegateEvent(p,F,r)}):f.emitDelegateEvent(p,C,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+jt+n.type;(a[o]||a[ie])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=Ss(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=Ss(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=Ss(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=Ss(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=Ss(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(Mc),an=Gr,mn={},tn="_INDEX";function ra(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){ra(r,e)})}}function oa(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){oa(r,e)})}}function la(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function Hn(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),wc(i.getChildren(),e)}function Na(i){return function(e,t){var r=i(e,t);return r===0?e[tn]-t[tn]:r}}var Cn=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,d.each)(o,function(u){var f=u.getBBox(),c=f.minX,l=f.maxX,g=f.minY,p=f.maxY;c<t&&(t=c),l>r&&(r=l),g<n&&(n=g),p>a&&(a=p)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,d.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,l=f.maxX,g=f.minY,p=f.maxY;c<t&&(t=c),l>r&&(r=l),g<n&&(n=g),p>a&&(a=p)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,d.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,d.isObject)(n)?a=n:a.type=n;var o=mn[a.type];o||(o=(0,d.upperFirst)(a.type),mn[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,d.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!Rf(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(Rf(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&Hn(o,t,!1),t.set("parent",this),r&&ra(t,r),a&&oa(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,d.each)(t,function(r,n){return r[tn]=n,r}),t.sort(Na(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,d.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,d.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(an),_a=Cn,sa=z(235374),Dn=z(918698);function Ma(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function $a(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function Qa(){}var ka=.7,Ra=1/ka,li="\\s*([+-]?\\d+)\\s*",Mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ns=/^#([0-9a-f]{3,8})$/,Vf=new RegExp("^rgb\\(".concat(li,",").concat(li,",").concat(li,"\\)$")),$s=new RegExp("^rgb\\(".concat(oi,",").concat(oi,",").concat(oi,"\\)$")),uu=new RegExp("^rgba\\(".concat(li,",").concat(li,",").concat(li,",").concat(Mi,"\\)$")),Su=new RegExp("^rgba\\(".concat(oi,",").concat(oi,",").concat(oi,",").concat(Mi,"\\)$")),hf=new RegExp("^hsl\\(".concat(Mi,",").concat(oi,",").concat(oi,"\\)$")),_u=new RegExp("^hsla\\(".concat(Mi,",").concat(oi,",").concat(oi,",").concat(Mi,"\\)$")),Tc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ma(Qa,Qo,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:jf,formatHex:jf,formatHex8:Hf,formatHsl:Ic,formatRgb:Kf,toString:Kf});function jf(){return this.rgb().formatHex()}function Hf(){return this.rgb().formatHex8()}function Ic(){return Dc(this).formatHsl()}function Kf(){return this.rgb().formatRgb()}function Qo(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=Ns.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?Uu(e):t===3?new uo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?qs(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?qs(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Vf.exec(i))?new uo(e[1],e[2],e[3],1):(e=$s.exec(i))?new uo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uu.exec(i))?qs(e[1],e[2],e[3],e[4]):(e=Su.exec(i))?qs(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hf.exec(i))?Lc(e[1],e[2]/100,e[3]/100,1):(e=_u.exec(i))?Lc(e[1],e[2]/100,e[3]/100,e[4]):Tc.hasOwnProperty(i)?Uu(Tc[i]):i==="transparent"?new uo(NaN,NaN,NaN,0):null}function Uu(i){return new uo(i>>16&255,i>>8&255,i&255,1)}function qs(i,e,t,r){return r<=0&&(i=e=t=NaN),new uo(i,e,t,r)}function Oc(i){return i instanceof Qa||(i=Qo(i)),i?(i=i.rgb(),new uo(i.r,i.g,i.b,i.opacity)):new uo}function Io(i,e,t,r){return arguments.length===1?Oc(i):new uo(i,e,t,r==null?1:r)}function uo(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}Ma(uo,Io,$a(Qa,{brighter:function(e){return e=e==null?Ra:Math.pow(Ra,e),new uo(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?ka:Math.pow(ka,e),new uo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new uo(cu(this.r),cu(this.g),cu(this.b),fu(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:al,formatHex:al,formatHex8:vf,formatRgb:il,toString:il}));function al(){return"#".concat(lu(this.r)).concat(lu(this.g)).concat(lu(this.b))}function vf(){return"#".concat(lu(this.r)).concat(lu(this.g)).concat(lu(this.b)).concat(lu((isNaN(this.opacity)?1:this.opacity)*255))}function il(){var i=fu(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(cu(this.r),", ").concat(cu(this.g),", ").concat(cu(this.b)).concat(i===1?")":", ".concat(i,")"))}function fu(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function cu(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function lu(i){return i=cu(i),(i<16?"0":"")+i.toString(16)}function Lc(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new ps(i,e,t,r)}function Dc(i){if(i instanceof ps)return new ps(i.h,i.s,i.l,i.opacity);if(i instanceof Qa||(i=Qo(i)),!i)return new ps;if(i instanceof ps)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new ps(o,s,u,i.opacity)}function ol(i,e,t,r){return arguments.length===1?Dc(i):new ps(i,e,t,r==null?1:r)}function ps(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}Ma(ps,ol,$a(Qa,{brighter:function(e){return e=e==null?Ra:Math.pow(Ra,e),new ps(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ka:Math.pow(ka,e),new ps(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new uo(Nc(e>=240?e-240:e+120,a,n),Nc(e,a,n),Nc(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new ps(sl(this.h),Zf(this.s),Zf(this.l),fu(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=fu(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(sl(this.h),", ").concat(Zf(this.s)*100,"%, ").concat(Zf(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function sl(i){return i=(i||0)%360,i<0?i+360:i}function Zf(i){return Math.max(0,Math.min(1,i||0))}function Nc(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function ul(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function Wl(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return ul((t-r/e)*e,o,n,a,s)}}function fl(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return ul((t-r/e)*e,n,a,o,s)}}var $f=function(i){return function(){return i}};function cl(i,e){return function(t){return i+t*e}}function Xl(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function gh(i,e){var t=e-i;return t?cl(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function qf(i){return(i=+i)==1?Pc:function(e,t){return t-e?Xl(e,t,i):$f(isNaN(e)?t:e)}}function Pc(i,e){var t=e-i;return t?cl(i,t):$f(isNaN(i)?e:i)}var Ne=function i(e){var t=qf(e);function r(n,a){var o=t((n=Io(n)).r,(a=Io(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=Pc(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function ll(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=Io(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var Qf=ll(Wl),hl=ll(fl);function vl(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function kc(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Yl(i,e){return(kc(e)?vl:dl)(i,e)}function dl(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=_s(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function Jf(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function df(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function gl(i,e){var t={},r={},n;(i===null||Dn(i)!=="object")&&(i={}),(e===null||Dn(e)!=="object")&&(e={});for(n in e)n in i?t[n]=_s(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var gf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ji=new RegExp(gf.source,"g");function pf(i){return function(){return i}}function pl(i){return function(e){return i(e)+""}}function tc(i,e){var t=gf.lastIndex=Ji.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=gf.exec(i))&&(n=Ji.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:df(r,n)})),t=Ji.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?pl(u[0].x):pf(e):(e=u.length,function(f){for(var c=0,l;c<e;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}function _s(i,e){var t=Dn(e),r;return e==null||t==="boolean"?$f(e):(t==="number"?df:t==="string"?(r=Qo(e))?(e=r,Ne):tc:e instanceof Qo?Ne:e instanceof Date?Jf:kc(e)?vl:Array.isArray(e)?dl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gl:df)(i,e)}function yf(i){return+i}function Wu(i){return i*i}function Mu(i){return i*(2-i)}function Xu(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function Yu(i){return i*i*i}function Vu(i){return--i*i*i+1}function Au(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var mf=3,Rc=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(mf),ec=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(mf),Bc=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(mf),Fc=Math.PI,ju=Fc/2;function Ps(i){return+i==1?1:1-Math.cos(i*ju)}function yl(i){return Math.sin(i*ju)}function ml(i){return(1-Math.cos(Fc*i))/2}function Ws(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function xl(i){return Ws(1-+i)}function bl(i){return 1-Ws(i)}function El(i){return((i*=2)<=1?Ws(1-i):2-Ws(i-1))/2}function Hu(i){return 1-Math.sqrt(1-i*i)}function Vl(i){return Math.sqrt(1- --i*i)}function wl(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var Sl=4/11,jl=6/11,Hl=8/11,ph=3/4,Kl=9/11,Zl=10/11,yh=15/16,$l=21/22,ql=63/64,rc=1/Sl/Sl;function Ql(i){return 1-Ku(1-i)}function Ku(i){return(i=+i)<Sl?rc*i*i:i<Hl?rc*(i-=jl)*i+ph:i<Zl?rc*(i-=Kl)*i+yh:rc*(i-=$l)*i+ql}function nc(i){return((i*=2)<=1?1-Ku(1-i):Ku(i-1)+1)/2}var xf=1.70158,Gc=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(xf),zc=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(xf),Uc=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(xf),hu=2*Math.PI,bf=1,Zu=.3,_l=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=hu);function n(a){return e*Ws(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*hu)},n.period=function(a){return i(e,a)},n}(bf,Zu),ac=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=hu);function n(a){return 1-e*Ws(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*hu)},n.period=function(a){return i(e,a)},n}(bf,Zu),Wc=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=hu);function n(a){return((a=a*2-1)<0?e*Ws(-a)*Math.sin((r-a)/t):2-e*Ws(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*hu)},n.period=function(a){return i(e,a)},n}(bf,Zu),ic={};function oc(i){return ic[i.toLowerCase()]||N[i]}function Xc(i,e){ic[i.toLowerCase()]=e}var Ef=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},sc=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},$u=[1,0,0,0,1,0,0,0,1];function Jl(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,d.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=T(a[s]),f=T(n[s]),f=ii(f,u),f=Fo(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=T(a[s]),f=T(n[s]),f=Fo(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],g=f[c],p=[],C=0;C<l.length;C++)(0,d.isNumber)(l[C])&&g&&(0,d.isNumber)(g[C])?(o=_s(g[C],l[C]),p.push(o(t))):p.push(l[C]);r[s].push(p)}}else if(s==="matrix"){var F=Yl(n[s]||$u,a[s]||$u),H=F(t);r[s]=H}else Ef(s)&&sc(a[s])?r[s]=a[s]:(0,d.isFunction)(a[s])||(o=_s(n[s],a[s]),r[s]=o(t));i.attr(r)}}function uc(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=oc(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else Jl(i,e,a);return!1}var qu=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=sa.HT(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=uc(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),th=qu,Yc=40,eh=0,mh=":",rh=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Qu(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(mh+e)>=0)return!0;return!1}function Ml(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function nh(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&_c(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var ah=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(rh,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,d.each)(rh,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new kf(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===eh&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===eh){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,g=s.clientY-e.clientY,p=l*l+g*g;c>120||p>Yc?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,Ml(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||nh(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;Ml(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),xh=ah,Al="px",ih=Gf(),Go=ih&&ih.name==="firefox",oh=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,d.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new xh({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new th(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");Sc&&(n.style.width=t+Al,n.style.height=r+Al)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");Sc&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(Go&&!(0,d.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,d.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(_a),Ju=oh,Cu=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(_a),Cl=Cu,Tl=function(i){(0,x.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=bi(r,[t.minX,t.minY]),f=bi(r,[t.maxX,t.minY]),c=bi(r,[t.minX,t.maxY]),l=bi(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var g=this.attrs;if(g.shadowColor){var p=g.shadowBlur,C=p===void 0?0:p,F=g.shadowOffsetX,H=F===void 0?0:F,tt=g.shadowOffsetY,at=tt===void 0?0:tt,ut=n-C+H,ht=o+C+H,_t=a-C+at,Gt=s+C+at;n=Math.min(n,ut),o=Math.max(o,ht),a=Math.min(a,_t),s=Math.max(s,Gt)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(an),fc=Tl,Il=new Map;function Fi(i,e){Il.set(i,e)}function vu(i){return Il.get(i)}function Vi(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function zo(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function _o(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Vc(i,e){return Math.abs(i-e)<.001}function tf(i,e){var t=(0,d.min)(i),r=(0,d.min)(e),n=(0,d.max)(i),a=(0,d.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function Vh(i,e,t,r){return{minX:(0,d.min)([i,t]),maxX:(0,d.max)([i,t]),minY:(0,d.min)([e,r]),maxY:(0,d.max)([e,r])}}function jc(i){return(i+Math.PI*2)%(Math.PI*2)}var Mo={box:function(i,e,t,r){return tf([i,t],[e,r])},length:function(i,e,t,r){return _o(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return _o(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?_o(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(On.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];On.normalize(s,s);var u=[n-i,a-e];return Math.abs(On.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},bh=1e-4;function sh(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,g=0;g<=f;g++){var p=g*c,C=[n.apply(null,i.concat([p])),n.apply(null,e.concat([p]))],F=_o(u[0],u[1],C[0],C[1]);F<s&&(o=p,s=F)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var H=i.length;return{x:i[H-1],y:e[H-1]}}s=1/0;for(var g=0;g<32&&!(l<bh);g++){var tt=o-l,at=o+l,C=[n.apply(null,i.concat([tt])),n.apply(null,e.concat([tt]))],F=_o(u[0],u[1],C[0],C[1]);if(tt>=0&&F<s)o=tt,s=F;else{var ut=[n.apply(null,i.concat([at])),n.apply(null,e.concat([at]))],ht=_o(u[0],u[1],ut[0],ut[1]);at<=1&&ht<s?(o=at,s=ht):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function Eh(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=_o(a,o,s,u)}return t/2}function Tu(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function Ol(i,e,t){var r=i+t-2*e;if(Vc(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function Hc(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function cc(i,e,t,r,n,a,o){var s=Tu(i,t,n,o),u=Tu(e,r,a,o),f=Mo.pointAt(i,e,t,r,o),c=Mo.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function Kc(i,e,t,r,n,a,o){if(o===0)return(_o(i,e,t,r)+_o(t,r,n,a)+_o(i,e,n,a))/2;var s=cc(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),Kc.apply(null,u)+Kc.apply(null,f)}var uh={box:function(i,e,t,r,n,a){var o=Ol(i,t,n)[0],s=Ol(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(Tu(i,t,n,o)),s!==void 0&&f.push(Tu(e,r,a,s)),tf(u,f)},length:function(i,e,t,r,n,a){return Kc(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return sh([i,t,n],[e,r,a],o,s,Tu)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return _o(u.x,u.y,o,s)},interpolationAt:Tu,pointAt:function(i,e,t,r,n,a,o){return{x:Tu(i,t,n,o),y:Tu(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return cc(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=Hc(i,t,n,o),u=Hc(e,r,a,o),f=Math.atan2(u,s);return jc(f)}};function du(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function Ll(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function wf(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(Vc(n,0))Vc(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;Vc(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function mt(i,e,t,r,n,a,o,s,u){var f=du(i,t,n,o,u),c=du(e,r,a,s,u),l=Mo.pointAt(i,e,t,r,u),g=Mo.pointAt(t,r,n,a,u),p=Mo.pointAt(n,a,o,s,u),C=Mo.pointAt(l.x,l.y,g.x,g.y,u),F=Mo.pointAt(g.x,g.y,p.x,p.y,u);return[[i,e,l.x,l.y,C.x,C.y,f,c],[f,c,F.x,F.y,p.x,p.y,o,s]]}function ae(i,e,t,r,n,a,o,s,u){if(u===0)return Eh([i,t,n,o],[e,r,a,s]);var f=mt(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),ae.apply(null,c)+ae.apply(null,l)}var Ae={extrema:wf,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=wf(i,t,n,o),l=wf(e,r,a,s),g=0;g<c.length;g++)u.push(du(i,t,n,o,c[g]));for(var g=0;g<l.length;g++)f.push(du(e,r,a,s,l[g]));return tf(u,f)},length:function(i,e,t,r,n,a,o,s){return ae(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return sh([i,t,n,o],[e,r,a,s],u,f,du,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return _o(l.x,l.y,u,f)},interpolationAt:du,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:du(i,t,n,o,u),y:du(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return mt(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=Ll(i,t,n,o,u),c=Ll(e,r,a,s,u);return jc(Math.atan2(c,f))}};function ur(i,e){var t=Math.abs(i);return e>0?t:t*-1}var Cr={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),g=o*o,p=s*s,C=Math.PI/4,F,H,tt=0;tt<4;tt++){F=o*Math.cos(C),H=s*Math.sin(C);var at=(g-p)*Math.pow(Math.cos(C),3)/o,ut=(p-g)*Math.pow(Math.sin(C),3)/s,ht=F-at,_t=H-ut,Gt=c-at,Bt=l-ut,re=Math.hypot(_t,ht),xe=Math.hypot(Bt,Gt),se=re*Math.asin((ht*Bt-_t*Gt)/(re*xe)),Oe=se/Math.sqrt(g+p-F*F-H*H);C+=Oe,C=Math.min(Math.PI/2,Math.max(0,C))}return{x:i+ur(F,u),y:e+ur(H,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return _o(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return jc(o)}};function sr(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function vr(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function Rr(i,e,t){return Math.atan(-e/i*Math.tan(t))}function zr(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function Ur(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function Br(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function Zr(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function v(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function S(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var G={box:function(i,e,t,r,n,a,o){for(var s=Rr(t,r,n),u=1/0,f=-1/0,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var g=s+l;a<o?a<g&&g<o&&c.push(g):o<g&&g<a&&c.push(g)}for(var l=0;l<c.length;l++){var p=Ur(i,e,t,r,n,c[l]);p<u&&(u=p),p>f&&(f=p)}for(var C=zr(t,r,n),F=1/0,H=-1/0,tt=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var at=C+l;a<o?a<at&&at<o&&tt.push(at):o<at&&at<a&&tt.push(at)}for(var l=0;l<tt.length;l++){var ut=Br(i,e,t,r,n,tt[l]);ut<F&&(F=ut),ut>H&&(H=ut)}return{x:u,y:F,width:f-u,height:H-F}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=S(s-i,u-e,-n),c=f[0],l=f[1],g=Cr.nearestPoint(0,0,t,r,c,l),p=Zr(t,r,g.x,g.y);p<a?g=v(t,r,a):p>o&&(g=v(t,r,o));var C=S(g.x,g.y,n);return{x:C[0]+i,y:C[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return _o(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:Ur(i,e,t,r,n,u),y:Br(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=sr(i,e,t,r,n,a,o,u),c=vr(i,e,t,r,n,a,o,u);return jc(Math.atan2(c,f))}};function Z(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=_o(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function st(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=_o(r[0],r[1],n[0],n[1])}return e}function ct(i,e){if(e>1||e<0||i.length<2)return null;var t=Z(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var g=(e-a)/l;o=Mo.pointAt(f[0],f[1],c[0],c[1],g);break}a+=l}return o}function yt(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=Z(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function bt(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=Mo.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var At={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return tf(e,t)},length:function(i){return st(i)},pointAt:function(i,e){return ct(i,e)},pointDistance:function(i,e,t){return bt(i,e,t)},tangentAngle:function(i,e){return yt(i,e)}};function Wt(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var ne={box:function(i){return At.box(i)},length:function(i){return st(Wt(i))},pointAt:function(i,e){return ct(Wt(i),e)},pointDistance:function(i,e,t){return bt(Wt(i),e,t)},tangentAngle:function(i,e){return yt(Wt(i),e)}};function Qt(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function we(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=Qt(e,n)),r&&(a=r.getCanvasBBox(),e=Qt(e,a)),e}function ze(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=tf(r,n),u=s.x,f=s.y,c=s.width,l=s.height,g={minX:u,minY:f,maxX:u+c,maxY:f+l};return g=we(i,g),{x:g.minX,y:g.minY,width:g.maxX-g.minX,height:g.maxY-g.minY}}function xr(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return tf(r,n)}var je=null;function Qe(){if(!je){var i=document.createElement("canvas");i.width=1,i.height=1,je=i.getContext("2d")}return je}function qe(i,e,t){var r=1;if((0,d.isString)(i)&&(r=i.split(`
`).length),r>1){var n=Fr(e,t);return e*r+n*(r-1)}return e}function Fr(i,e){return e?e-i:i*.14}function en(i,e){var t=Qe(),r=0;if((0,d.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,d.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,d.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Hr(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function _n(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Hr(e));var u=en(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,g=qe(n,a,o),p={x:t,y:r-g};c&&(c==="end"||c==="right"?p.x-=u:c==="center"&&(p.x-=u/2)),l&&(l==="top"?p.y+=g:l==="middle"&&(p.y+=g/2)),f={x:p.x,y:p.y,width:u,height:g}}return f}var xn=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Bn=/[^\s\,]+/ig;function ia(i){var e=i||[];if((0,d.isArray)(e))return e;if((0,d.isString)(e))return e=e.match(xn),(0,d.each)(e,function(t,r){if(t=t.match(Bn),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,d.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var Kn=ia;function Ei(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,g;if(a){u=r[0],f=r[1];for(var p=0,C=i.length;p<C;p+=1){var F=i[p];u=On.min([0,0],u,F),f=On.max([0,0],f,F)}}for(var p=0,H=i.length;p<H;p+=1){var F=i[p];if(p===0&&!t)g=F;else if(p===H-1&&!t)l=F,n.push(g),n.push(l);else{var tt=[p?p-1:H-1,p-1][t?0:1];o=i[tt],s=i[t?(p+1)%H:p+1];var at=[0,0];at=On.sub(at,s,o),at=On.scale(at,at,e);var ut=On.distance(F,o),ht=On.distance(F,s),_t=ut+ht;_t!==0&&(ut/=_t,ht/=_t);var Gt=On.scale([0,0],at,-ut),Bt=On.scale([0,0],at,ht);l=On.add([0,0],F,Gt),c=On.add([0,0],F,Bt),c=On.min([0,0],c,On.max([0,0],s,F)),c=On.max([0,0],c,On.min([0,0],s,F)),Gt=On.sub([0,0],c,F),Gt=On.scale([0,0],Gt,-ut/ht),l=On.add([0,0],F,Gt),l=On.min([0,0],l,On.max([0,0],o,F)),l=On.max([0,0],l,On.min([0,0],o,F)),Bt=On.sub([0,0],F,l),Bt=On.scale([0,0],Bt,ht/ut),c=On.add([0,0],F,Bt),a&&(l=On.max([0,0],l,u),l=On.min([0,0],l,f),c=On.max([0,0],c,u),c=On.min([0,0],c,f)),n.push(g),n.push(l),g=c}}return t&&n.push(n.shift()),n}function ua(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=Ei(n,.4,r,t),u=n.length,f=[],c,l,g,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],g=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],g[0],g[1]]);return r&&(c=s[u],l=s[u+1],g=n[0],f.push(["C",c[0],c[1],l[0],l[1],g[0],g[1]])),f}var Ni=ua;function vi(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Ba=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,g=s[u-1][f-1].min+o;s[u][f]=vi(c,l,g)}}return s};function Gi(i,e){var t=Ba(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var wi=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,mo=new RegExp("([a-z])["+wi+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+wi+"]*,?["+wi+"]*)+)","ig"),Jo=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+wi+"]*,?["+wi+"]*","ig");function ji(i){if(!i)return null;if((0,d.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(mo,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(Jo,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var xa=/[a-z]/;function Uo(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Ja(i){var e=ji(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(xa.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,g,p=e[0];(p[0]==="M"||p[0]==="m")&&(o=+p[1],s=+p[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,C=e.length;r<C;r++){var F=e[r],H=a[r-1],tt=[],n=F[0],at=n.toUpperCase();if(n!==at)switch(tt[0]=at,at){case"A":tt[1]=F[1],tt[2]=F[2],tt[3]=F[3],tt[4]=F[4],tt[5]=F[5],tt[6]=+F[6]+o,tt[7]=+F[7]+s;break;case"V":tt[1]=+F[1]+s;break;case"H":tt[1]=+F[1]+o;break;case"M":u=+F[1]+o,f=+F[2]+s,tt[1]=u,tt[2]=f;break;default:for(var ut=1,ht=F.length;ut<ht;ut++)tt[ut]=+F[ut]+(ut%2?o:s)}else tt=e[r];switch(at){case"Z":o=+u,s=+f;break;case"H":o=tt[1],tt=["L",o,s];break;case"V":s=tt[1],tt=["L",o,s];break;case"T":o=tt[1],s=tt[2];var _t=Uo([H[1],H[2]],[H[3],H[4]]);tt=["Q",_t[0],_t[1],o,s];break;case"S":o=tt[tt.length-2],s=tt[tt.length-1];var Gt=H.length,Bt=Uo([H[Gt-4],H[Gt-3]],[H[Gt-2],H[Gt-1]]);tt=["C",Bt[0],Bt[1],tt[1],tt[2],o,s];break;case"M":u=tt[tt.length-2],f=tt[tt.length-1];break;default:o=tt[tt.length-2],s=tt[tt.length-1]}a.push(tt)}return a}var Rn=Math.PI*2,Ta=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},ja=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},to=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},Iu=function(i,e,t,r,n,a,o,s,u,f,c,l){var g=Math.pow(n,2),p=Math.pow(a,2),C=Math.pow(c,2),F=Math.pow(l,2),H=g*p-g*F-p*C;H<0&&(H=0),H/=g*F+p*C,H=Math.sqrt(H)*(o===s?-1:1);var tt=H*n/a*l,at=H*-a/n*c,ut=f*tt-u*at+(i+t)/2,ht=u*tt+f*at+(e+r)/2,_t=(c-tt)/n,Gt=(l-at)/a,Bt=(-c-tt)/n,re=(-l-at)/a,xe=to(1,0,_t,Gt),se=to(_t,Gt,Bt,re);return s===0&&se>0&&(se-=Rn),s===1&&se<0&&(se+=Rn),[ut,ht,xe,se]},lc=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,g=l===void 0?0:l,p=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var C=Math.sin(u*Rn/360),F=Math.cos(u*Rn/360),H=F*(e-r)/2+C*(t-n)/2,tt=-C*(e-r)/2+F*(t-n)/2;if(H===0&&tt===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var at=Math.pow(H,2)/Math.pow(a,2)+Math.pow(tt,2)/Math.pow(o,2);at>1&&(a*=Math.sqrt(at),o*=Math.sqrt(at));var ut=Iu(e,t,r,n,a,o,c,g,C,F,H,tt),ht=ut[0],_t=ut[1],Gt=ut[2],Bt=ut[3],re=Math.abs(Bt)/(Rn/4);Math.abs(1-re)<1e-7&&(re=1);var xe=Math.max(Math.ceil(re),1);Bt/=xe;for(var se=0;se<xe;se++)p.push(ja(Gt,Bt)),Gt+=Bt;return p.map(function(Oe){var Ve=Ta(Oe[0],a,o,F,C,ht,_t),Ir=Ve.x,Wr=Ve.y,Nr=Ta(Oe[1],a,o,F,C,ht,_t),Er=Nr.x,fn=Nr.y,rn=Ta(Oe[2],a,o,F,C,ht,_t),wr=rn.x,kr=rn.y;return{x1:Ir,y1:Wr,x2:Er,y2:fn,x:wr,y:kr}})};function Se(i,e,t,r,n,a,o,s,u){var f=lc({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var g=l.x1,p=l.y1,C=l.x2,F=l.y2,H=l.x,tt=l.y;return c.push(g,p,C,F,H,tt),c},[])}function cr(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function ir(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),hn(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function hn(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var Ia=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},le=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,C=0;C<c;C++){var F=f*l[C]+f,H=Ia(F,i,t,n,o),tt=Ia(F,e,r,a,s),at=H*H+tt*tt;p+=g[C]*Math.sqrt(at)}return f*p},te=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,g,p,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,g=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,g=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;p=-g/l,p>0&&p<1&&u.push(p);continue}var F=l*l-4*g*c,H=Math.sqrt(F);if(!(F<0)){var tt=(-l+H)/(2*c);tt>0&&tt<1&&u.push(tt);var at=(-l-H)/(2*c);at>0&&at<1&&u.push(at)}}for(var ut=u.length,ht=ut,_t;ut--;)p=u[ut],_t=1-p,f[0][ut]=_t*_t*_t*i+3*_t*_t*p*t+3*_t*p*p*n+p*p*p*o,f[1][ut]=_t*_t*_t*e+3*_t*_t*p*r+3*_t*p*p*a+p*p*p*s;return f[0][ht]=i,f[1][ht]=e,f[0][ht+1]=o,f[1][ht+1]=s,f[0].length=f[1].length=ht+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Pe=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,g=f/c,p=+l.toFixed(2),C=+g.toFixed(2);if(!(p<+Math.min(i,t).toFixed(2)||p>+Math.max(i,t).toFixed(2)||p<+Math.min(n,o).toFixed(2)||p>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:g}}}},$e=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},tr=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},Be=function(i,e){return i=tr(i),e=tr(e),$e(e,i.x,i.y)||$e(e,i.x2,i.y)||$e(e,i.x,i.y2)||$e(e,i.x2,i.y2)||$e(i,e.x,e.y)||$e(i,e.x2,e.y)||$e(i,e.x,e.y2)||$e(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},ke=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=te.apply(null,i);return tr(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Ye=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),g=u*u,p=g*u,C=c*i+l*3*u*t+f*3*u*u*n+p*o,F=c*e+l*3*u*r+f*3*u*u*a+p*s,H=i+2*u*(t-i)+g*(n-2*t+i),tt=e+2*u*(r-e)+g*(a-2*r+e),at=t+2*u*(n-t)+g*(o-2*n+t),ut=r+2*u*(a-r)+g*(s-2*a+r),ht=f*i+u*t,_t=f*e+u*r,Gt=f*n+u*o,Bt=f*a+u*s,re=90-Math.atan2(H-at,tt-ut)*180/Math.PI;return{x:C,y:F,m:{x:H,y:tt},n:{x:at,y:ut},start:{x:ht,y:_t},end:{x:Gt,y:Bt},alpha:re}},he=function(i,e,t){var r=ke(i),n=ke(e);if(!Be(r,n))return t?0:[];for(var a=le.apply(0,i),o=le.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},g=t?0:[],p=0;p<s+1;p++){var C=Ye.apply(0,i.concat(p/s));f.push({x:C.x,y:C.y,t:p/s})}for(var p=0;p<u+1;p++){var C=Ye.apply(0,e.concat(p/u));c.push({x:C.x,y:C.y,t:p/u})}for(var p=0;p<s;p++)for(var F=0;F<u;F++){var H=f[p],tt=f[p+1],at=c[F],ut=c[F+1],ht=Math.abs(tt.x-H.x)<.001?"y":"x",_t=Math.abs(ut.x-at.x)<.001?"y":"x",Gt=Pe(H.x,H.y,tt.x,tt.y,at.x,at.y,ut.x,ut.y);if(Gt){if(l[Gt.x.toFixed(4)]===Gt.y.toFixed(4))continue;l[Gt.x.toFixed(4)]=Gt.y.toFixed(4);var Bt=H.t+Math.abs((Gt[ht]-H[ht])/(tt[ht]-H[ht]))*(tt.t-H.t),re=at.t+Math.abs((Gt[_t]-at[_t])/(ut[_t]-at[_t]))*(ut.t-at.t);Bt>=0&&Bt<=1&&re>=0&&re<=1&&(t?g++:g.push({x:Gt.x,y:Gt.y,t1:Bt,t2:re}))}}return g},De=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,g,p=t?0:[],C=0,F=i.length;C<F;C++){var H=i[C];if(H[0]==="M")r=s=H[1],n=u=H[2];else{H[0]==="C"?(l=[r,n].concat(H.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var tt=0,at=e.length;tt<at;tt++){var ut=e[tt];if(ut[0]==="M")a=f=ut[1],o=c=ut[2];else{ut[0]==="C"?(g=[a,o].concat(ut.slice(1)),a=g[6],o=g[7]):(g=[a,o,a,o,f,c,f,c],a=f,o=c);var ht=he(l,g,t);if(t)p+=ht;else{for(var _t=0,Gt=ht.length;_t<Gt;_t++)ht[_t].segment1=C,ht[_t].segment2=tt,ht[_t].bez1=l,ht[_t].bez2=g;p=p.concat(ht)}}}}}return p};function oe(i,e){return De(i,e)}function He(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function rr(i,e){return He(i)*He(e)?(i[0]*e[0]+i[1]*e[1])/(He(i)*He(e)):1}function Ar(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(rr(i,e))}function Tr(i,e){return i[0]===e[0]&&i[1]===e[1]}function br(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,g=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,p=l*l/(t*t)+g*g/(r*r);p>1&&(t*=Math.sqrt(p),r*=Math.sqrt(p));var C=t*t*(g*g)+r*r*(l*l),F=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(F*=-1),isNaN(F)&&(F=0);var H=r?F*t*g/r:0,tt=t?F*-r*l/t:0,at=(s+f)/2+Math.cos(n)*H-Math.sin(n)*tt,ut=(u+c)/2+Math.sin(n)*H+Math.cos(n)*tt,ht=[(l-H)/t,(g-tt)/r],_t=[(-1*l-H)/t,(-1*g-tt)/r],Gt=Ar([1,0],ht),Bt=Ar(ht,_t);return rr(ht,_t)<=-1&&(Bt=Math.PI),rr(ht,_t)>=1&&(Bt=0),o===0&&Bt>0&&(Bt=Bt-2*Math.PI),o===1&&Bt<0&&(Bt=Bt+2*Math.PI),{cx:at,cy:ut,rx:Tr(i,[f,c])?0:t,ry:Tr(i,[f,c])?0:r,startAngle:Gt,endAngle:Gt+Bt,xRotation:n,arcFlag:a,sweepFlag:o}}function Yr(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Ln(i){i=Kn(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=br(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var g=u.length;t=[u[g-2],u[g-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Tr(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var p=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=p;var C=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]];else if(f==="Q"){var F=[u[1],u[2]];c.startTangent=[C[0]-F[0],C[1]-F[1]],c.endTangent=[t[0]-F[0],t[1]-F[1]]}else if(f==="T"){var H=e[s-1],F=Yr(H.currentPoint,C);H.command==="Q"?(c.command="Q",c.startTangent=[C[0]-F[0],C[1]-F[1]],c.endTangent=[t[0]-F[0],t[1]-F[1]]):(c.command="TL",c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]])}else if(f==="C"){var tt=[u[1],u[2]],at=[u[3],u[4]];c.startTangent=[C[0]-tt[0],C[1]-tt[1]],c.endTangent=[t[0]-at[0],t[1]-at[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[tt[0]-at[0],tt[1]-at[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[at[0]-tt[0],at[1]-tt[1]])}else if(f==="S"){var H=e[s-1],tt=Yr(H.currentPoint,C),at=[u[1],u[2]];H.command==="C"?(c.command="C",c.startTangent=[C[0]-tt[0],C[1]-tt[1]],c.endTangent=[t[0]-at[0],t[1]-at[1]]):(c.command="SQ",c.startTangent=[C[0]-at[0],C[1]-at[1]],c.endTangent=[t[0]-at[0],t[1]-at[1]])}else if(f==="A"){var ut=.001,ht=c.arcParams||{},_t=ht.cx,Gt=_t===void 0?0:_t,Bt=ht.cy,re=Bt===void 0?0:Bt,xe=ht.rx,se=xe===void 0?0:xe,Oe=ht.ry,Ve=Oe===void 0?0:Oe,Ir=ht.sweepFlag,Wr=Ir===void 0?0:Ir,Nr=ht.startAngle,Er=Nr===void 0?0:Nr,fn=ht.endAngle,rn=fn===void 0?0:fn;Wr===0&&(ut*=-1);var wr=se*Math.cos(Er-ut)+Gt,kr=Ve*Math.sin(Er-ut)+re;c.startTangent=[wr-n[0],kr-n[1]];var qr=se*Math.cos(Er+rn+ut)+Gt,Qr=Ve*Math.sin(Er+rn-ut)+re;c.endTangent=[C[0]-qr,C[1]-Qr]}e.push(c)}return e}function ya(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function bn(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function zn(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function ha(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function ti(i,e){if(i.length<2||e.length<2)return!1;var t=zn(i),r=zn(e);if(!ha(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=ya(i),o=ya(e),s=!1;return each(o,function(u){if(bn(a,u))return s=!0,!1}),s}function eo(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=uh.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=Ae.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=G.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(tt){return!Number.isNaN(tt)&&tt!==1/0&&tt!==-1/0}),r=r.filter(function(tt){return!Number.isNaN(tt)&&tt!==1/0&&tt!==-1/0});var g=(0,d.min)(t),p=(0,d.min)(r),C=(0,d.max)(t),F=(0,d.max)(r);if(n.length===0)return{x:g,y:p,width:C-g,height:F-p};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,H=void 0;s[0]===g?(H=ts(o,e),g=g-H.xExtra):s[0]===C&&(H=ts(o,e),C=C+H.xExtra),s[1]===p?(H=ts(o,e),p=p-H.yExtra):s[1]===F&&(H=ts(o,e),F=F+H.yExtra)}return{x:g,y:p,width:C-g,height:F-p}}function ts(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,d.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function wh(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||Ln(t),o=eo(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=we(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function Qs(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=we(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function jh(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}Fi("rect",Vi),Fi("image",Vi),Fi("circle",zo),Fi("marker",zo),Fi("polyline",ze),Fi("polygon",xr),Fi("text",_n),Fi("path",wh),Fi("line",Qs),Fi("ellipse",jh);var Ou="0.5.11",Hh=function(i){(0,x.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(kf),Pv=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},kv=function(e){if((0,d.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,d.isNumber)(e))return[e,e,e,e];if((0,d.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},q0=function(e){var t=new Hh(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},Q0=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Sf=function(e){return Number.isNaN(Number(e))},Fd=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,g=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),g>a&&(a=g)}var p=Math.floor(t),C=Math.floor(n),F=Math.ceil(r)-Math.floor(t),H=Math.ceil(a)-Math.floor(n);return{x:p,y:C,width:F,height:H,minX:t,minY:n,maxX:r,maxY:a}},J0=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},g=0;g<o;g++){var p=e[g],C=p.source,F=p.target,H="".concat(C,"-").concat(F);if(!c[g]){f[H]||(f[H]=[]),c[g]=!0,f[H].push(p);for(var tt=0;tt<o;tt++)if(g!==tt){var at=e[tt],ut=at.source,ht=at.target;c[tt]||(C===ht&&F===ut?(f[H].push(at),c[tt]=!0,l["".concat(ut,"|").concat(ht,"|").concat(f[H].length-1)]=!0):C===ut&&F===ht&&(f[H].push(at),c[tt]=!0))}}}for(var _t in f)for(var Gt=f[_t],Bt=Gt.length,re=0;re<Bt;re++){var xe=Gt[re];if(xe.source===xe.target){a&&(xe.type=a),xe.loopCfg={position:u[re%8],dist:Math.floor(re/8)*20+50};continue}if(Bt===1&&n&&xe.source!==xe.target){xe.type=n;continue}xe.type=r;var se=(re%2===0?1:-1)*(l["".concat(xe.source,"|").concat(xe.target,"|").concat(re)]?-1:1);Bt%2===1?xe.curveOffset=se*Math.ceil(re/2)*s:xe.curveOffset=se*(Math.floor(re/2)*s+t)}return e},Gd=z(731278),ty=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(ht){var _t=ht.getModel(),Gt=_t.x,Bt=_t.y;s>Gt&&(s=Gt),u>Bt&&(u=Bt),f<Gt&&(f=Gt),c<Bt&&(c=Bt)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],g=ni({x:s,y:u},l),p=g.x,C=g.y,F=ni({x:f,y:c},l),H=F.x,tt=F.y;a={minX:p,maxX:H,minY:C,maxY:tt,width:H-p,height:tt-C,x:p,y:C}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var at=this.getViewCenter(),ut={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(at.x-ut.x,at.y-ut.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,g=n.y+a.y-o.y-n.minY;if(!(Sf(l)||Sf(g))){var p=(0,Gd.vs)(c,[["t",l,g]]);if(!u){var C=ds({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:p})}});e.animate(function(ht){return{matrix:ci(t,p,ht)}},C);return}var F=f.get("minZoom"),H=f.get("maxZoom"),tt=s;F&&s<F?(tt=F,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):H&&s>H&&(tt=H,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var at=(0,Gd.vs)(p,[["t",-a.x,-a.y],["s",tt,tt],["t",a.x,a.y]]),ut=ds({animateCfg:r,callback:function(){e.setMatrix(at),f.emit("viewportchange",{action:"translate",matrix:p}),f.emit("viewportchange",{action:"zoom",matrix:at})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(ht){return{matrix:ci(t,at,ht)}},ut)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,g=1/0,p=-1/0,C=-1/0;c.forEach(function(Gt){var Bt=Gt.getModel(),re=Bt.x,xe=Bt.y;l>re&&(l=re),g>xe&&(g=xe),p<re&&(p=re),C<xe&&(C=xe)}),f={minX:l,maxX:p,minY:g,maxY:C,width:p-l,height:C-g,x:l,y:g}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var F=this.getViewCenter(),H={x:f.x+f.width/2,y:f.y+f.height/2},tt=(a-n[1]-n[3])/f.width,at=(o-n[0]-n[2])/f.height,ut=tt;if(tt>at&&(ut=at),e)this.animatedFitView(s,u,t,f,F,H,ut,!0);else{var ht=F.x-H.x,_t=F.y-H.y;if(Sf(ht)||Sf(_t))return;r.translate(ht,_t),r.zoom(ut,F)||console.warn("zoom failed, ratio out of range, ratio: %f",ut)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),g=c.get("width"),p=c.get("height"),C=c.get("group"),F=C.getMatrix()||[1,0,0,0,1,0,0,0,1];C.resetMatrix();var H,tt=c.getNodes();if(tt.length>c.get("optimizeThreshold")){var at=1/0,ut=1/0,ht=-1/0,_t=-1/0;tt.forEach(function(Wr){var Nr=Wr.getModel(),Er=Nr.x,fn=Nr.y;at>Er&&(at=Er),ut>fn&&(ut=fn),ht<Er&&(ht=Er),_t<fn&&(_t=fn)}),H={minX:at,maxX:ht,minY:ut,maxY:_t,width:ht-at,height:_t-ut,x:at,y:ut}}else H=C.getCanvasBBox();if(!(H.width===0||H.height===0)){var Gt=this.getViewCenter(),Bt={x:H.x+H.width/2,y:H.y+H.height/2},re=(g-l[1]-l[3])/H.width,xe=(p-l[0]-l[2])/H.height,se;if(s==="x"?se=re:s==="y"?se=xe:se=f==="max"?Math.max(re,xe):Math.min(re,xe),a&&(se=se<1?se:1),t)this.animatedFitView(C,F,r,H,Gt,Bt,se,!0);else{var Oe=c.getZoom(),Ve=Oe*se,Ir=c.get("minZoom");Ve<Ir&&(Ve=Ir,console.warn("fitview failed, ratio out of range, ratio: %f",se,"graph minzoom has been used instead")),c.translate(Gt.x-Bt.x,Gt.y-Bt.y),c.zoomTo(Ve,Gt)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return kv(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,g=0,p=0;this.graph.get("canvas").animate(function(C){g=u*C,p=f*C,n.graph.translate(g-c,p-l),c=g,l=p},(0,x.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=ho({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),ni({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,d.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},g=0,p=e;g<p.length;g++){var C=p[g],F=C.getBBox();F.minX<l.minX&&(l.minX=F.minX),F.minY<l.minY&&(l.minY=F.minY),F.maxX>l.maxX&&(l.maxX=F.maxX),F.maxY>l.maxY&&(l.maxY=F.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var H=this.getViewCenter(),tt={x:l.x+l.width/2,y:l.y+l.height/2},at=(s-o[1]-o[3])/l.width,ut=(u-o[0]-o[2])/l.height,ht=at;at>ut&&(ht=ut),r?this.animatedFitView(f,c,n,l,H,tt,ht,t):(a.translate(H.x-tt.x,H.y-tt.y),t&&!a.zoom(ht,H)&&console.warn("zoom failed, ratio out of range, ratio: %f",ht))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,d.isNumber)(e)||!(0,d.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),ey=ty;function Rv(i){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(i)}function zd(i){if(typeof i!="string")return i;var e=function(Bt){if(typeof Bt!="string")return Bt;try{return JSON.parse(Bt.trim())}catch(re){return Bt.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(Bt){return Bt[Bt.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var Bt=[],re=0;re<arguments.length;re++)Bt[re]=arguments[re];return Bt.some(function(xe){return r(o)===xe})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var g=n[c],p=s('"',"'");if(!p&&!g.trim()){c+=1;continue}var C=n[c-1]==="\\",F=s("}"),H=s("]"),tt=s(","),at=u();if(p)if(r(o)===g&&!C){o.pop();var ut=e(l);at.push(ut),f=ut,l=""}else l+=g;else if(H&&g===",")l&&(at.push(e(l)),l="");else if(F&&g===":")o.push(","),l&&(at.push(l),l="");else if(tt&&g===",")l&&(at.push(e(l)),l=""),o.pop();else if(g==="}"&&(F||tt)){l&&(at.push(e(l)),l=""),tt&&o.pop();for(var ht={},_t=1;_t<at.length;_t+=2)ht[at[_t-1]]=at[_t];a.pop(),a.length&&r(a).push(ht),o.pop(),f=ht}else g==="]"&&H?(l&&(at.push(e(l)),l=""),a.pop(),a.length&&r(a).push(at),o.pop(),f=at):g==="{"?(a.push([]),o.push("}")):g==="["?(a.push([]),o.push("]")):g==='"'?o.push('"'):g==="'"?o.push("'"):l+=g;c+=1}return f||l}var ry=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},ny=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,d.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Ud(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Ud(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=ry(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=zd(f);t=(0,x.__assign)((0,x.__assign)({},t),c)}else a[u]=zd(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&Rv(e.style[a.name])==="object"&&(a.attrs=(0,x.__assign)((0,x.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,x.__assign)((0,x.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function ay(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=Gu(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,x.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function Wd(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,x.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,x.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=Wd(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=ay(i,e,r),i.attrs=(0,x.__assign)((0,x.__assign)({},i.attrs),i.bbox),i}function Xd(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],g=0;g<f;g+=1)u.push(Xd(l[g],c[g]));var p=Object.keys(e.attrs),C=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:p.filter(function(F){return F!=="children"}).some(function(F){return i.attrs[F]!==e.attrs[F]||!C.includes(F)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Yd(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=ny(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=Wd(Ud(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,g=l===void 0?{}:l,p=c.bbox,C=c.type,F=c.children,H=(0,x.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var tt=a.addShape(c.type,(0,x.__assign)({attrs:g,origin:{bbox:p,type:C,children:F}},H));c.keyshape&&(s=tt)}c.children&&c.children.forEach(function(at){return f(at)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Xd(u,f),l=function C(F){var H;F.type!=="group"&&o.addShape(F.type,{attrs:F.attrs}),!((H=F.children)===null||H===void 0)&&H.length&&F.children.map(function(tt){return C(tt)})},g=function C(F){var H,tt=s.find(function(at){return at.attrs.key===F.attrs.key});tt&&o.removeChild(tt),!((H=F.children)===null||H===void 0)&&H.length&&F.children.map(function(at){return C(at)})},p=function C(F){var H=F.key;if(F.type!=="group"){var tt=s.find(function(ut){return ut.attrs.key===H});switch(F.action){case"change":if(tt){var at=F.val.keyshape?a.getOriginStyle():{};tt.attr((0,x.__assign)((0,x.__assign)({},at),F.val.attrs))}break;case"add":l(F.val);break;case"delete":g(F.val);break;case"restructure":g(F.formerTarget),l(F.nowTarget);break;default:break}}F.children&&F.children.forEach(function(ut){return C(ut)})};p(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Bv={};function Vd(i){return Bv[i]||(Bv[i]=(0,d.upperFirst)(i)),Bv[i]}var iy={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Fv={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Kh=function(){function i(){}return i.registerFactory=function(e,t){var r=Vd(e),n=iy,a=(0,x.__assign)((0,x.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=Vd(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Yd(t);a=(0,x.__assign)((0,x.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Yd(s);a=(0,x.__assign)((0,x.__assign)((0,x.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Fv;a=(0,x.__assign)((0,x.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Fv,o=(0,x.__assign)((0,x.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Fv,o=(0,x.__assign)((0,x.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),ys=Kh;Kh.registerFactory("node",{defaultShapeType:"circle"}),Kh.registerFactory("edge",{defaultShapeType:"line"}),Kh.registerFactory("combo",{defaultShapeType:"circle"});var Gv="bboxCache",zv="bboxCanvasCache",v_=null,oy=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Pv(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,d.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=ai(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=ai(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var p=this.get("originStyle");a&&!p[a]&&(p[a]={});for(var C=this.getCurrentStatesStyle(),F=function(tt){var at=t[tt],ut=at.get("name"),ht=at.attr();if(ut&&ut!==a){var _t=C[ut];p[ut]||(p[ut]={}),_t?Object.keys(ht).forEach(function(re){var xe=ht[re];xe!==_t[re]&&(p[ut][re]=xe)}):p[ut]=at.get("type")!=="image"?(0,d.clone)(ht):n.getShapeStyleByName(ut)}else{var Gt=at.attr(),Bt={};Object.keys(C).forEach(function(re){var xe=C[re];(re===a||!(0,d.isPlainObject)(xe))&&(Bt[re]=xe)}),Object.keys(Gt).forEach(function(re){var xe=Gt[re];Bt[re]!==xe&&(a?p[a][re]=xe:p[re]=xe)})}},s=0;s<t.length;s++)F(s);delete p.path,delete p.matrix,delete p.x,delete p.y,p[a]&&(delete p[a].x,delete p[a].y,delete p[a].matrix,delete p[a].path),n.set("originStyle",p)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var g=Pv("shape");u.set("name",g),e.shapeMap[g]=u,o[g]=f!=="image"?(0,d.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,d.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=ys.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,d.isPlainObject)(e)?this._cfg=(0,x.__assign)((0,x.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Gv,null),this.set(zv,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]||t.find(function(a){return a.get("name")===e}):r=this.getKeyShape(),r){var n={};return(0,d.each)(r.attr(),function(a,o){(o!=="img"||(0,d.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,x.__assign)((0,x.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,d.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,d.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,d.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,d.isString)(t)){var f=r.filter(function(g){return g.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(g){return!g.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,d.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,d.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),is(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Gv);return e||(e=this.calculateBBox(),this.set(Gv,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(zv);return e||(e=this.calculateCanvasBBox(),this.set(zv,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),jd=oy,Zh={source:"start",target:"end"},_f="Node",fh="Point",sy="Anchor",uy=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=Zh[t]+fh,a=t+_f,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,d.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=Zh[t]+fh,o=t+_f,s=this.get(a);if(!s){var u=this.get(o),f=t+sy,c=this.getPrePoint(t,n),l=r[f];(0,d.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,d.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+_f,n=Zh[t]+fh,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+_f,n=Zh[t]+fh,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(_f)),n=this.get("target".concat(_f));return r?delete t["source".concat(_f)]:t.source=this.get("start".concat(fh)),n?delete t["target".concat(_f)]:t.target=this.get("end".concat(fh)),!(0,d.isString)(t.source)&&!(0,d.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,d.isString)(t.target)&&!(0,d.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,d.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(_f)),r=this.get("target".concat(_f));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(jd),Hd=uy,Uv="anchorPointsCache",fy="bboxCache",cy=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=Ho(t[0],r),s=0;s<t.length;s++){var u=t[s],f=Ho(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=ao({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=io({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=bs(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(Uv);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,d.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(Uv,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(fy,null),this.set(Uv,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,d.isNil)(t.x),f=!(0,d.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,d.isNumber)(t.x)||(0,d.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(jd),Wv=cy,Kd="bboxCache",Zd="bboxCanvasCache",$h="sizeCache",$d="anchorPointsCache",ly=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,d.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,d.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||qt.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,x.__assign)((0,x.__assign)((0,x.__assign)({},r),t.style),f);var c=t.padding||qt.defaultCombo.padding;return(0,d.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set($h,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=this.get(Kd)||{},a=n.x,o=n.x,s=this.get($h),u=ai(t,r);if(u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2,s){s.width=Math.max(s.width,u.width),s.height=Math.max(s.height,u.height),this.set($h,s);var f=t.get("type");f==="circle"?(u.width=s.r*2,u.height=s.r*2):(u.width=s.width,u.height=s.height),u.minX=u.centerX-u.width/2,u.minY=u.centerY-u.height/2,u.maxX=u.centerX+u.width/2,u.maxY=u.centerY+u.height/2}else u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2;return u.x=u.minX,u.y=u.minY,(u.x!==a||u.y!==o)&&this.set($d,null),u}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Zd,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(Kd,null),this.set(Zd,null),this.set($d,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set($h,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(Wv),qd=ly,qh="node",Qh="edge",Qd="vedge",Sh="combo",hy="default",Jd="Mapper",hc="stateStyles",vy=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,d.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===Qd?Qh:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,d.upperFirst)(n),s=null,u=r.get(n+(0,d.upperFirst)(hc))||{},f=r.get(hy+o);t[hc]&&(u=t[hc]),f&&(0,d.each)(f,function(Gt,Bt){(0,d.isObject)(Gt)&&!(0,d.isArray)(Gt)?t[Bt]=(0,d.deepMix)({},Gt,t[Bt]):(0,d.isArray)(Gt)?t[Bt]=t[Bt]||(0,d.clone)(f[Bt]):t[Bt]=t[Bt]||f[Bt]});var c=r.get(n+Jd);if(c){var l=c(t);l[hc]&&(u=l[hc],delete l[hc]),(0,d.each)(l,function(Gt,Bt){(0,d.isObject)(Gt)&&!(0,d.isArray)(Gt)?t[Bt]=(0,d.deepMix)({},t[Bt],Gt):t[Bt]=l[Bt]||t[Bt]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Qh||e===Qd){var g=void 0,p=void 0;if(g=t.source,p=t.target,g&&(0,d.isString)(g)&&(g=r.findById(g)),p&&(0,d.isString)(p)&&(p=r.findById(p)),!g||!p){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}g.getType&&g.getType()==="combo"&&(t.isComboEdge=!0),p.getType&&p.getType()==="combo"&&(t.isComboEdge=!0),s=new Hd({model:t,source:g,target:p,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===qh)s=new Wv({model:t,styles:u,group:a.addGroup()});else if(e===Sh){var C=t.children,F=iu(C,r),H=void 0,tt=void 0;if(isNaN(F.x)?isNaN(t.x)&&(H=Math.random()*100):H=F.x,isNaN(F.y)?isNaN(t.y)&&(tt=Math.random()*100):tt=F.y,isNaN(t.x)||isNaN(t.y))t.x=H,t.y=tt;else{var at=t.x-H,ut=t.y-tt;this.updateComboSucceeds(t.id,at,ut,C)}var ht=a.addGroup();ht.setZIndex(t.depth),s=new qd({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?iu([],r):F,group:ht}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(F.width=Math.hypot(F.height,F.width),F.height=F.width,s.set("bbox",F),s.refresh());var _t=s.getModel();(C||[]).forEach(function(Gt){var Bt=r.findById(Gt.id);s.addChild(Bt),Gt.depth=_t.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,d.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+Jd),f=e.getModel(),c=f.x,l=f.y,g=e.getUpdateType(t);if(u){var p=(0,d.deepMix)({},f,t),C=u(p),F=(0,d.deepMix)({},f,C,t);C[hc]&&(e.set("styles",F[hc]),delete F[hc]),(0,d.each)(F,function(se,Oe){t[Oe]=se})}else(0,d.each)(t,function(se,Oe){f[Oe]&&(0,d.isObject)(se)&&!(0,d.isArray)(se)&&(t[Oe]=(0,x.__assign)((0,x.__assign)({},f[Oe]),t[Oe]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Qh){if(t.source){var H=t.source;(0,d.isString)(H)&&(H=o.findById(H)),e.setSource(H)}if(t.target){var tt=t.target;(0,d.isString)(tt)&&(tt=o.findById(tt)),e.setTarget(tt)}e.update(t)}else if(s===qh){e.update(t,g);var at=e.getEdges();g==="move"?(0,d.each)(at,function(se){r.edgeToBeUpdateMap[se.getID()]={edge:se,updateType:g},r.throttleRefresh()}):g!=null&&g.includes("bbox")&&(0,d.each)(at,function(se){se.refresh(g)})}else if(s===Sh){if(e.update(t,g),!isNaN(t.x)||!isNaN(t.y)){var ut=t.x-c||0,ht=t.y-l||0;this.updateComboSucceeds(f.id,ut,ht)}var _t=e.getEdges(),Gt=(g==null?void 0:g.includes("bbox"))||g==="move";if(Gt&&s===Sh){var Bt=e.get("shapeFactory"),re=f.type||"circle",xe=f.animate===void 0||t.animate===void 0?(a=(n=Bt[re])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;xe?setTimeout(function(){if(!(!e||e.destroyed)){var se=e.getKeyShape();!se||se.destroyed||(0,d.each)(_t,function(Oe){Oe&&!Oe.destroyed&&Oe.refresh()})}},201):(0,d.each)(_t,function(se){se.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,d.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=iu(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var g=c,p=l;r?(g=isNaN(u.x)?c:u.x,p=isNaN(u.y)?l:u.y):(g=isNaN(c)?u.x:c,p=isNaN(l)?u.y:l),e.update({x:g,y:p});var C=e.get("shapeFactory"),F=u.type||"circle",H=u.animate===void 0?(o=(a=C[F])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;H?setTimeout(function(){if(!(!e||e.destroyed)){var tt=e.getKeyShape();!tt||tt.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){Ri(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,d.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,d.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Qh){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var g=r.get("comboTrees"),p=e.get("id");if(a===qh){var C=e.getModel().comboId;if(g&&C){var F=g,H=!1;g.forEach(function(Gt){H||Ri(Gt,function(Bt){if(Bt.id===p&&F){var re=F.indexOf(Bt);return F.splice(re,1),H=!0,!1}return F=Bt.children,!0})})}for(var tt=e.getEdges(),at=tt.length-1;at>=0;at--)r.removeItem(tt[at],!1);C&&r.updateCombo(C)}else if(a===Sh){var ut=e.getModel().parentId,ht,_t=!1;(g||[]).forEach(function(Bt){_t||Ri(Bt,function(re){return re.id===p?(ht=re,_t=!0,!1):!0})}),ht.removed=!0,ht&&ht.children&&ht.children.forEach(function(Bt){t.removeItem(Bt.id)});for(var tt=e.getEdges(),at=tt.length;at>=0;at--)r.removeItem(tt[at],!1);ut&&r.updateCombo(ut)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,d.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,d.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,d.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,d.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){yo(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,d.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===qh){var a=e.getEdges();(0,d.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===Sh){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||Ri(l,function(g){return g.id===s?(u=g.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var g=n.findById(l.id);r.changeItemVisibility(g,t)});var a=e.getEdges();(0,d.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),dy=vy,gy=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,d.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,d.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,d.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),py=gy,yy=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},tg=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=Ni(t);return u.unshift(["M",e[0].x,e[0].y]),u},Jh=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];On.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},my=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=yy(a,s)}return t&&(n+="Z"),n},Xv=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Yv=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,g=e[s+1].x,p=e[s+1].y,C=s!==e.length-2?e[s+2].x:g,F=s!==e.length-2?e[s+2].y:p,H=c+(g-u)/6,tt=l+(p-f)/6,at=g-(C-c)/6,ut=p-(F-l)/6;o.push(["C",H,tt,at,ut,g,p])}return o.unshift(["M",n.x,n.y]),o},eg=function(e,t){return On.scale([0,0],On.normalize([0,0],e),t)},rg=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},ng=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Vv(i,e){var t=function(l){var g=[l[0][0],l[0][1]-e],p=[l[0][0],l[0][1]+e];return"M ".concat(g," A ").concat(e,",").concat(e,",0,0,0,").concat(p," A ").concat(e,",").concat(e,",0,0,0,").concat(g)},r=function(l){var g=On.scale([0,0],rg(l[0],l[1]),e),p=On.scale([0,0],g,-1),C=On.add([0,0],l[0],g),F=On.add([0,0],l[1],g),H=On.add([0,0],l[1],p),tt=On.add([0,0],l[0],p);return"M ".concat(C," L ").concat(F," A ").concat([e,e,"0,0,0",H].join(",")," L ").concat(tt," A ").concat([e,e,"0,0,0",C].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=On.scale([0,0],rg(o,s),e);n[a]=[On.add([0,0],o,u),On.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var g="";return l===0&&(g="M ".concat(n[n.length-1][1]," ")),g+="".concat(f+c[0]," L ").concat(c[1]),g}),n.join(" ")}function ag(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],g=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",g].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=ng(c[0],c[1]),g=eg(l,e),p=On.add([0,0],c[0],On.scale([0,0],g,-1)),C=On.add([0,0],c[1],g),F=1.2*e,H=eg(On.normalize([0,0],l),F),tt=On.scale([0,0],H,-1),at=On.add([0,0],p,tt),ut=On.add([0,0],C,tt),ht=On.add([0,0],p,H);return"M ".concat(p," C ").concat([at,ut,C].join(",")," S ").concat([ht,p].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:On.normalize([0,0],ng(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=On.normalize([0,0],On.add([0,0],a[s].v,On.scale([0,0],a[o].v,-1)));a[o].p=On.add([0,0],a[o].p,On.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var xy=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},ig=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},og=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,g){return l.x===g.x?l.y-g.y:l.x-g.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&ig(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&ig(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},by={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Ey(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,g,p,C=0;C<e.width*e.height;C++){if(g=c,p=l,i.findIndex(function(H){return H.x===c&&H.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var F=a(c,l);switch(F){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:g===0&&(p===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:g===1&&(p===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(F)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var wy=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},Sy=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=So(s,u),c=new Va(s.x,s.y,u.x,u.y),l=r.reduce(function(g,p){return $i(p,c)>0?g+1:g},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},sg=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=$i(a,t);o>=0&&o<r&&(n=a,r=o)}),n},_y=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(p,C){var F=!1;return C.forEach(function(H){F||(go(p,{x:H.x1,y:H.y1})||go(p,{x:H.x2,y:H.y2}))&&(F=!0)}),F},c=function(p,C){for(var F=0,H=C;F<H.length;F++){var tt=H[F],at=tt.getBBox(),ut=[[at.x,at.y],[at.x+at.width,at.y],[at.x,at.y+at.height],[at.x+at.width,at.y+at.height]];if(wo(ut,p.x,p.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var p=o.pop(),C=sg(t,p);if(C){var F=ki(C,p),H=F[0],tt=F[1];if(tt===2){var at=function(ht){for(var _t=n,Gt=ug(C,_t,H,ht),Bt=f(Gt,o)||f(Gt,a),re=c(Gt,t);!Bt&&re&&_t>=1;)_t/=1.5,Gt=ug(C,_t,H,ht),Bt=f(Gt,o)||f(Gt,a),re=c(Gt,t);Gt&&!Bt&&(!ht||!re)&&(o.push(new Va(p.x1,p.y1,Gt.x,Gt.y)),o.push(new Va(Gt.x,Gt.y,p.x2,p.y2)),s=!0)};at(!0),s||at(!1)}}s||a.push(p),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function My(i,e,t,r,n){var a=Sy(i,t,e);if(a===null)return[];var o=function(l){for(var g=[];l.length>0;){var p=l.pop();if(l.length===0){g.push(p);break}var C=l.pop(),F=new Va(p.x1,p.y1,C.x2,C.y2),H=sg(e,F);H?(g.push(p),l.push(C)):l.push(F)}return g},s=new Va(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=_y(s,e,r,n),f=o(u);return f}var Ay=function(e,t,r){var n=Object.assign(by,r),a=Zo(e.map(function(at){return{x:at.getModel().x,y:at.getModel().y}}));e=e.sort(function(at,ut){return So({x:at.getModel().x,y:at.getModel().y},a)-So({x:ut.getModel().x,y:ut.getModel().y},a)});var o=[],s=[];e.forEach(function(at){var ut=My(at,t,o,n.maxRoutingIterations,n.morphBuffer);ut.forEach(function(ht){s.push(ht)}),o.push(at)});for(var u=Cy(e,s,n.nodeR0),f=wy(u.width,u.height,n.pixelGroupSize),c=[],l=[],g=0;g<n.maxMarchingIterations;g++)if(Ty(e,t,s,u,f,n),c=[],l=[],!!new Ey(c,f,n.threshold).march()){var p=c.map(function(at){return{x:Math.round(at.x*n.pixelGroupSize+u.minX),y:Math.round(at.y*n.pixelGroupSize+u.minY)}});if(p){var C=p.length;if(n.skip>1)for(C=Math.floor(p.length/n.skip);C<3&&n.skip>1;)n.skip-=1,C=Math.floor(p.length/n.skip);for(var F=0,H=0;H<C;H+=1,F+=n.skip)l.push({x:p[F].x,y:p[F].y})}var tt=function(){for(var ut=0,ht=e;ut<ht.length;ut++){var _t=ht[ut],Gt=l.map(function(Bt){return[Bt.x,Bt.y]});if(!wo(Gt,_t.getBBox().centerX,_t.getBBox().centerY))return!1}return!0};if(l&&tt())return l;if(n.threshold*=.9,g<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function Cy(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Ty(i,e,t,r,n,a){function o(p,C){var F=Math.floor((p-C)/a.pixelGroupSize);return F<0?0:F}function s(p,C){return p*a.pixelGroupSize+C}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(C,F){var H=Math.min(o(C.minX,F+r.minX),n.width),tt=Math.min(o(C.minY,F+r.minY),n.height),at=Math.min(o(C.maxX,-F+r.minX),n.width),ut=Math.min(o(C.maxY,-F+r.minY),n.height);return[H,tt,at,ut]},l=function(C,F){for(var H=C.getBBox(),tt=c(H,a.nodeR1),at=tt[0],ut=tt[1],ht=tt[2],_t=tt[3],Gt=ut;Gt<_t;Gt+=1)for(var Bt=at;Bt<ht;Bt+=1)if(!(F<0&&n[Bt+Gt*n.width]<=0)){var re=s(Bt,r.minX),xe=s(Gt,r.minY),se=Rs({x:re,y:xe},{x:H.minX,y:H.minY,width:H.width,height:H.height});if(se<Math.pow(a.nodeR1,2)){var Oe=Math.sqrt(se)-a.nodeR1;n.cells[Bt+Gt*n.width]+=F*Oe*Oe}}},g=function(C,F){for(var H=C.getBBox(),tt=c(H,a.edgeR1),at=tt[0],ut=tt[1],ht=tt[2],_t=tt[3],Gt=ut;Gt<_t;Gt+=1)for(var Bt=at;Bt<ht;Bt+=1)if(!(F<0&&n.cells[Bt+Gt*n.width]<=0)){var re=s(Bt,r.minX),xe=s(Gt,r.minY),se=os({x:re,y:xe},C);if(se<Math.pow(a.edgeR1,2)){var Oe=Math.sqrt(se)-a.edgeR1;n.cells[Bt+Gt*n.width]+=F*Oe*Oe}}};a.nodeInfluenceFactor&&i.forEach(function(p){l(p,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(p){g(p,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(p){l(p,a.negativeNodeInfluenceFactor/u)})}function ug(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(C,F){return n.width*((C.y-n.minY+(F.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var g=l(o,u);return g<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var p=l(a,s);return p<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var Iy=function(){function i(e,t){this.cfg=(0,d.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=og(e),a=Vv(r.map(function(o){return[o.x,o.y]}),this.padding),n=ji(a);break;case"smooth-convex":r=og(e),r.length===2?(a=Vv(r.map(function(o){return[o.x,o.y]}),this.padding),n=ji(a)):r.length>2&&(a=ag(r.map(function(o){return[o.x,o.y]}),this.padding),n=Yv(a));break;case"bubble":r=Ay(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Yv(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,x.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,d.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,d.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,x.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,d.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,d.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,d.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Xv(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),ca(n,Xv(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),fg=Iy,_h=Jt,Oy="node",Ly=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,d.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){Ri(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,g=o[c.target]||0,p=Math.max(l,g);a[p]?a[p].push(c.id):a[p]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,d.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Pn(r.cfg.maxStep),r.redoStack=new Pn(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new ey(this),r=new Nf(this),n=new dy(this),a=new py(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:qt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:qt.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:qt.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:qt.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:qt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,d.isPlainObject)(t)?this.cfg=(0,x.__assign)((0,x.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Pn(this.cfg.maxStep),this.redoStack=new Pn(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,d.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,d.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,d.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=ds({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Wa(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=_h(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");Wa(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,d.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,g=l*t,p=t,C=!1;if(f&&g<f?(p=f/l,C=!0):c&&g>c&&(p=c/l,C=!0),r?u=_h(u,[["t",-r.x,-r.y],["s",p,p],["t",r.x,r.y]]):u=_h(u,[["s",p,p]]),n){var F=(0,d.clone)(s.getMatrix());F||(F=[1,0,0,0,1,0,0,0,1]);var H=F[0],tt=H*p,at=ds({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(ut){if(ut===1)F=u;else{var ht=Is(H,tt,ut)/F[0];r?F=_h(F,[["t",-r.x,-r.y],["s",ht,ht],["t",r.x,r.y]]):F=_h(F,[["s",ht,ht]])}return{matrix:F}},at)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!C},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,d.isString)(t)&&(n=this.findById(t)),!n&&(0,d.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,x.__assign)((0,x.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,x.__assign)((0,x.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var g=Ks(this.get("comboTrees"));this.set("comboTrees",g)}}},e.prototype.innerAddItem=function(t,r,n){if(!sf(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(C){u||yo(C,function(F){if(r.parentId===F.id){u=!0;var H=(0,x.__assign)({id:r.id,depth:F.depth+2},r);F.children?F.children.push(H):F.children=[H],r.depth=H.depth,a=n.addItem(t,r)}var tt=s[F.id];return u&&tt&&tt.getType&&tt.getType()==="combo"&&n.updateCombo(tt,F.children),!0})}),!u){var f=(0,x.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,d.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),g=!1,p=!1;o.forEach(function(C){p||g||yo(C,function(F){if(F.id===r.id)return p=!0,!1;if(r.comboId===F.id&&!p){g=!0;var H=(0,d.clone)(r);H.itemType="node",F.children?F.children.push(H):F.children=[H],H.depth=F.depth+1}return g&&l[F.id].getType&&l[F.id].getType()==="combo"&&n.updateCombo(l[F.id],F.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,x.__assign)((0,x.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var g=t[u].type,p=s[u];if(p&&p!==!0){var C=(0,x.__assign)((0,x.__assign)({},p.getModel()),{itemType:g});switch(g){case"node":l.nodes.push(C);break;case"edge":l.edges.push(C);break;case"combo":l.combos.push(C);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,d.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,d.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,x.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,d.each)(l,function(F){return a.setItemState(s,F,!1)}),o.updateItem(s,r),c==="combo"&&(0,d.each)(l,function(F){return a.setItemState(s,F,!0)}),u){var g={nodes:[],edges:[],combos:[]},p={nodes:[],edges:[],combos:[]},C=(0,x.__assign)({id:f.id},r);switch(c){case"node":g.nodes.push(f),p.nodes.push(C);break;case"edge":g.edges.push(f),p.edges.push(C);break;case"combo":g.combos.push(f),p.combos.push(C);break;default:break}this.pushStack("update",{before:g,after:p})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,d.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){To(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(H){return{type:"node",model:H}}),!1,!1),(f==null?void 0:f.length)!==0){var c=au(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(H){return{type:"edge",model:H}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var g=t.get("layoutController");if(g){if(g.layout(p),this.destroyed)return}else p();function p(){(t.get("comboTrees")||[]).forEach(function(H){yo(H,function(tt){var at=t.findById(tt.id);return at.getType()==="combo"&&tt.collapsed&&(t.collapseCombo(tt.id,!1),t.updateCombo(at)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var H;(H=t.getCombos())===null||H===void 0||H.forEach(function(tt){tt.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var C=this.getNodes();C.forEach(function(H){H.toFront()})}else{var F=this.getEdges();F.forEach(function(H){H.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,d.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===Oy){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!To(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ht){return o.clearItemStates(ht)}),this.getEdges().map(function(ht){return o.clearItemStates(ht)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},g=s.combos;if(g){var p=au(g,s.nodes);this.set("comboTrees",p)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,d.each)(c,function(ht,_t){c[_t].getModel().depth=0,!(ht.getType&&ht.getType()==="edge")&&(ht.getType&&ht.getType()==="combo"?(delete c[_t],ht.destroy()):l.nodes.indexOf(ht)<0&&(delete c[_t],o.remove(ht,!1)))});for(var C=this.getCombos(),F=C.length,H=F-1;H>=0;H--)C[H].destroyed&&C.splice(H,1);g&&(o.addCombos(g),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,d.each)(c,function(ht,_t){ht.getType&&(ht.getType()==="node"||ht.getType()==="combo")||l.edges.indexOf(ht)<0&&(delete c[_t],o.remove(ht,!1))}),(this.get("comboTrees")||[]).forEach(function(ht){yo(ht,function(_t){var Gt=n.findById(_t.id);return Gt.getType()==="combo"&&_t.collapsed&&n.collapseCombo(_t.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var tt=(this.get("layout")||{}).relayoutAtChangeData,at=tt===void 0?!0:tt,ut=this.get("layoutController");return at&&ut&&(ut.changeData(function(){setTimeout(function(){var ht;(ht=o.getCombos())===null||ht===void 0||ht.forEach(function(_t){_t.set("animate",!0)})},0)}),o.get("animate")&&!ut.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(ht){return ht.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,d.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function(tt){var at=a.findById(tt),ut=at.getType();if(!(ut!=="node"&&ut!=="combo")){var ht=at.getModel();c["".concat(ut,"s")].push({id:tt,parentId:ut==="node"?ht.comboId:ht.parentId})}});var l=this.get("comboTrees"),g=new Set(r),p=new Map;l&&(l.forEach(function(tt){yo(tt,function(at,ut,ht){if(g.has(at.id)){if(ut){var _t=a.findById(ut.id),Gt=a.findById(at.id);ut.children.splice(ht,1),_t.removeChild(Gt),o.updateCombo(_t,ut.children)}at.itemType==="combo"&&p.set(at.id,at)}return!0})}),l=l.filter(function(tt){return!g.has(tt.id)}),this.set("comboTrees",l));var C={nodes:[],combos:[]},F=r.map(function(tt){var at=a.findById(tt),ut=at.getModel(),ht="";at.getType&&(ht=at.getType());var _t=p.get(tt)||{id:at.getID(),itemType:ht};return ht==="combo"?(_t.parentId=s,ut.parentId=s):ht==="node"&&(_t.comboId=s,ut.comboId=s),f&&C["".concat(ht,"s")].push({id:ut.id,parentId:s}),_t});u.children=F,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function(tt){Ri(tt,function(at){return at.id===s?(at.itemType="combo",at.children=F,!1):!0})}),this.sortCombos()),f&&(C.combos.push(u),this.pushStack("createCombo",{before:c,after:C}));var H=this.findById(s);!H.getModel().parentId&&H.getChildren().combos.length&&this.updateComboTree(H,void 0,!1),setTimeout(function(){H.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,d.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var g=this.get("itemMap"),p=u.get("id"),C,F=[],H=this.get("combos"),tt=this.findById(c),at=r&&this.get("enabledStack"),ut={};if(at&&(ut=(0,d.clone)(f),ut.children=[]),l.forEach(function(Bt){C||yo(Bt,function(re){var xe;if(re.id===p){C=re;var se=u.getEdges().map(function(Ir){return Ir.getID()});se.forEach(function(Ir){n.removeItem(Ir,!1)});var Oe=H.indexOf(u);H.splice(Oe,1),delete g[p];var Ve=(0,d.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:Ve,type:"combo"})}if(c&&C&&re.id===c){tt.removeCombo(u),F=re.children;var Oe=F.indexOf(C);return Oe!==-1&&F.splice(Oe,1),(xe=C.children)===null||xe===void 0||xe.forEach(function(Wr){var Nr=n.findById(Wr.id),Er=Nr.getModel();Nr.getType&&Nr.getType()==="combo"?(Wr.parentId=c,delete Wr.comboId,Er.parentId=c,delete Er.comboId):Nr.getType&&Nr.getType()==="node"&&(Wr.comboId=c,Er.comboId=c),tt.addChild(Nr),F.push(Wr)}),n.updateCombo(tt),!1}return!0})}),!c&&C){var ht=l.indexOf(C);l.splice(ht,1),(a=C.children)===null||a===void 0||a.forEach(function(Bt){Bt.parentId=void 0;var re=n.findById(Bt.id).getModel();delete re.parentId,delete re.comboId,Bt.itemType!=="node"&&l.push(Bt)})}if(at){var _t={nodes:[],combos:[]},Gt={nodes:[],combos:[]};(o=C.children)===null||o===void 0||o.forEach(function(Bt){var re=n.findById(Bt.id),xe=re.getType();xe!=="node"&&xe!=="combo"||(_t["".concat(xe,"s")].push({id:Bt.id,parentId:p}),Gt["".concat(xe,"s")].push({id:Bt.id,parentId:c}))}),_t.combos.push(ut),this.pushStack("uncombo",{before:_t,after:Gt})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){yo(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var g=(0,x.__spreadArray)([],l.getStates(),!0);(0,d.each)(g,function(p){return r.setItemState(l,p,!1)}),o.updateCombo(l,f.children,t),(0,d.each)(g,function(p){return r.setItemState(l,p,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,d.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){yo(c,function(l){if(!l)return!0;var g=f[l.id];if(o===l.id&&g&&g.getType&&g.getType()==="combo"){var p=(0,x.__spreadArray)([],g.getStates(),!0);(0,d.each)(p,function(C){g.getStateStyle(C)&&r.setItemState(g,C,!1)}),u.updateCombo(g,l.children),(0,d.each)(p,function(C){g.getStateStyle(C)&&r.setItemState(g,C,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,d.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,g;if((c||[]).forEach(function(at){g||Ri(at,function(ut){if(!g)return ut.id===o.getID()&&(g=ut),!0})}),Ri(g,function(at){return at.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var p={},C={};f==="combo"?(p.combos=[{id:s.id,parentId:s.parentId}],C.combos=[{id:s.id,parentId:r}]):f==="node"&&(p.nodes=[{id:s.id,parentId:s.comboId}],C.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:p,after:C})}if(s.parentId||s.comboId){var F=this.findById(s.parentId||s.comboId);F&&F.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var H=this.findById(r);H&&H.addChild(o)}if(u){var H=this.findById(u);H&&H.removeChild(o)}var tt=Ks(this.get("comboTrees"),s.id,r);this.set("comboTrees",tt),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,d.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,d.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,d.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,d.each)(r,function(o){o.refresh()}),(0,d.each)(n,function(o){o.refresh()}),(0,d.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,d.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var g=l.get("originAttrs"),p=l.get("model"),C=l.getContainer().getMatrix();if(g==null&&(C&&(g={x:C[6],y:C[7]}),l.set("originAttrs",g||0)),a){var F=a(l,f,c,g||{x:0,y:0});l.set("model",Object.assign(p,F))}else g?(p.x=g.x+(c.x-g.x)*f,p.y=g.y+(c.y-g.y)*f):(p.x=c.x,p.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,d.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(g){(0,d.each)(g,function(p){u=p.getModel();var C=p.get("originAttrs");if(!(C&&u.x===C.x&&u.y===C.y)){var F=p.updatePosition({x:u.x,y:u.y});f[u.id]=F,u.comboId&&(f[u.comboId]=f[u.comboId]||F),u.parentId&&(f[u.parentId]=f[u.parentId]||F)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,d.each)(a,function(l){var g=l.getSource().getModel(),p=l.getTarget();if(!(0,d.isPlainObject)(p)){var C=p.getModel();(f[g.id]||f[C.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,d.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,d.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(g){var p=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*p[0]+p[6],u.y=u.y*p[0]+p[7];var C=o.getGroup().getCanvasBBox(),F=C.minX,H=C.maxX,tt=C.minY,at=C.maxY,ut={x:(F+H)/2,y:(tt+at)/2};r==="begin"&&(ut.x=F,ut.y=tt),o.translate(u.x-ut.x,u.y-ut.y)})}var c=(0,x.__assign)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,d.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(g){c||Ri(g,function(p){if(c&&p.depth<=a.depth)return!1;if(a.id===p.id&&(c=!0),c){var C=n.findById(p.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(g){var p=g.getModel(),C=p.isVEdge,F=p.size,H=F===void 0?1:F;if(!(g.isVisible()&&!C)){var tt=g.getSource(),at=g.getTarget(),ut=null,ht;if(tt.getModel().id===a.id||u.includes(tt)&&!u.includes(at)?(ut=at,ht=!1):(at.getModel().id===a.id||!u.includes(tt)&&u.includes(at))&&(ut=tt,ht=!0),ut){if(C){n.removeItem(g,!1);return}for(var _t=ut.getModel();!ut.isVisible();){var Gt=_t.parentId,Bt=_t.comboId,re=Gt||Bt;if(ut=n.findById(re),!ut||!re)return;_t=ut.getModel()}var xe=_t.id,se=ht?{source:xe,target:a.id,size:H,isVEdge:!0}:{source:a.id,target:xe,size:H,isVEdge:!0},Oe="".concat(se.source,"-").concat(se.target);if(l[Oe]){l[Oe].size+=H;return}l[Oe]=se}}}),this.addItems(Object.values(l).map(function(g){return{type:"vedge",model:g}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(g){c||Ri(g,function(p){if(c&&p.depth<=a.depth)return!1;if(a.id===p.id&&(c=!0),c){var C=n.findById(p.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(g){if(!(g.isVisible()&&!g.getModel().isVEdge)){var p=g.getSource(),C=g.getTarget(),F=p.get("id"),H=C.get("id"),tt=null,at;if(F===a.id||u.includes(p)&&!u.includes(C)?(tt=C,at=!1):H===a.id||!u.includes(p)&&u.includes(C)?(tt=p,at=!0):u.includes(p)&&u.includes(C)&&p.isVisible()&&C.isVisible()&&g.show(),tt){var ut=g.getModel(),ht=ut.isVEdge,_t=ut.size,Gt=_t===void 0?1:_t;if(ht){n.removeItem(g,!1);return}for(var Bt=tt.getModel();!tt.isVisible();){var re=Bt.parentId,xe=Bt.comboId,se=re||xe;if(tt=n.findById(se),!tt||!se)return;Bt=tt.getModel()}for(var Oe=Bt.id,Ve=at?C:p,Ir=Ve.getModel();!Ve.isVisible();){var Wr=Ir.parentId,Nr=Ir.comboId,Er=Wr||Nr;if(Ve=n.findById(Er),!Ve||!Er)return;if(Ir.comboId===a.id||Ir.parentId===a.id)break;Ir=Ve.getModel()}var fn=Ir.id;if(Oe){var rn=at?{source:Oe,target:fn,isVEdge:!0,size:Gt}:{source:fn,target:Oe,isVEdge:!0,size:Gt},wr="".concat(rn.source,"-").concat(rn.target);if(l[wr]){l[wr].size+=Gt;return}l[wr]=rn}}}}),this.addItems(Object.values(l).map(function(g){return{type:"vedge",model:g}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,d.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,d.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,d.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=Je(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,d.clone)(r):{before:{},after:(0,d.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=St(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=St(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=Vn(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new fg(this,(0,x.__assign)((0,x.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,d.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(J),cg=Ly;function jv(i){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(i)}var ch=Jt,lg="-shape",Hv="-label",tv=["startArrow","endArrow"],hg={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Dy={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},ev={edge:Dy,node:hg,combo:hg},Kv="-label-bg",Zv={options:{labelCfg:{style:{fontFamily:qt.windowFontFamily}},descriptionCfg:{style:{fontFamily:qt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+lg),t.shapeMap[this.itemType+lg]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+Hv),t.shapeMap[this.itemType+Hv]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=ch(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=ch(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=ch(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=ch(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=ch(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+Kv;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,d.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=qt[a]?qt[a].style:null;return(0,x.__assign)((0,x.__assign)((0,x.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,d.mix)({},o.attr(),e.style),u=function(l){var g,p=s[l];if((0,d.isPlainObject)(p)){var C=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(F){return F.get("name")===l});C==null||C.attr(p)}else o.attr((g={},g[l]=p,g))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+Hv,c=o.shapeMap[f]||o.find(function(ht){return ht.get("className")===f}),l=this.itemType+Kv,g=o.shapeMap[l]||o.find(function(ht){return ht.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],g&&(o.removeChild(g),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,d.deepMix)(u,e.labelCfg));var C=this.getLabelStyleByPosition(e,u,o),F=(n=e.labelCfg)===null||n===void 0?void 0:n.style,H=(0,x.__assign)((0,x.__assign)({},C),F),tt=H.rotate;if(delete H.rotate,!isNaN(tt)&&tt!==""){var at=[1,0,0,0,1,0,0,0,1];at=ch(at,[["t",-H.x,-H.y],["r",tt],["t",H.x,H.y]]),H.matrix=at,c.attr(H)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(H);if(!g)H.background&&(g=this.drawLabelBg(e,o,c),g.set("classname",l),o.shapeMap[l]=g,c.toFront());else if(H.background){var ut=this.getLabelBgStyleByPosition(c,u);g.attr(ut)}else o.removeChild(g)}else{var p=this.drawLabel(e,o);p.set("className",f),o.shapeMap[f]=p}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,d.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var g=(0,d.mix)({},l||c),p=r.getContainer(),C={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(C.r=1,C.width=1,C.height=1),t){var F=function(Er){var fn,rn=g[Er];if((0,d.isPlainObject)(rn)&&!tv.includes(Er)){var wr=((o=p.shapeMap)===null||o===void 0?void 0:o[Er])||p.find(function(kr){return kr.get("name")===Er});wr==null||wr.attr(rn)}else s.attr((fn={},fn[Er]=rn,fn))};for(var H in g)F(H)}else{var tt=Zs(r.getCurrentStatesStyle()),at=r.getModel(),ut=(0,d.mix)({},at.style,Zs(r.getOriginStyle())),ht=s.get("name"),_t=s.attr(),Gt={};Object.keys(_t).forEach(function(Nr){if(Nr!=="img"){var Er=_t[Nr];Er&&jv(Er)==="object"?Gt[Nr]=(0,d.clone)(Er):Gt[Nr]=Er}});var Bt={},re=function(Er){var fn=g[Er];if((0,d.isPlainObject)(fn)&&!tv.includes(Er)){var rn=p.shapeMap[Er]||p.find(function(qr){return qr.get("name")===Er});if(rn){var wr=Zs(rn.attr());(0,d.each)(fn,function(qr,Qr){if(Er===ht&&Gt[Qr]&&!C[Qr]){delete Gt[Qr];var gn=ut[Er][Qr]||ev[u][Qr];s.attr(Qr,gn)}else if(wr[Qr]||wr[Qr]===0){delete wr[Qr];var Tn=ut[Er][Qr]||ev[u][Qr];rn.attr(Qr,Tn)}}),Bt[Er]=wr}}else if(Gt[Er]&&!C[Er]){delete Gt[Er];var kr=ut[Er]||(ut[ht]?ut[ht][Er]:void 0)||ev[u][Er];s.attr(Er,kr)}};for(var xe in g)re(xe);ht?Bt[ht]=Gt:(0,d.mix)(Bt,Gt);for(var H in tt)if(!C[H]){var se=tt[H];(!(0,d.isPlainObject)(se)||tv.includes(H))&&(ht?((0,d.mix)(ut[ht],(a={},a[H]=se,a)),delete ut[H]):(0,d.mix)(ut,(n={},n[H]=se,n)),delete tt[H])}var Oe={};(0,d.deepMix)(Oe,ut,Bt,tt);var Ve=!1,Ir=function(Er){var fn,rn,wr=Oe[Er];if((0,d.isPlainObject)(wr)&&!tv.includes(Er)){var kr=p.shapeMap[Er]||p.find(function(Qr){return Qr.get("name")===Er});kr&&((kr.get("type")==="text"||kr.get("labelRelated"))&&(delete wr.x,delete wr.y,delete wr.matrix),Er===ht&&(u==="combo"&&(delete wr.r,delete wr.width,delete wr.height),Ve=!0),kr.attr(wr))}else if(!Ve){var qr=wr||ev[u][Er];u==="combo"?ht||s.attr((fn={},fn[Er]=qr,fn)):s.attr((rn={},rn[Er]=qr,rn))}};for(var Wr in Oe)Ir(Wr)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,d.clone)(f):(0,d.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},Ny={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:qt.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||qt.defaultNode.size;return(0,d.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,d.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=bu(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,d.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=kv(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,x.__assign)((0,x.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Oe){return Oe.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Oe){return Oe.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Oe){return Oe.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Oe){return Oe.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,d.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,g=f.lineWidth,p=f.size/2;p||(p=f.r);var C=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},F=C.left,H=C.right,tt=C.top,at=C.bottom,ut=this.getSize(e),ht=ut[0],_t=ut[1],Gt={r:p,fill:c,stroke:l,lineWidth:g};if(n)!F&&F!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,x.__assign)((0,x.__assign)({},Gt),{x:-ht/2,y:0}));else if(F){var Bt="link-point-left";t.shapeMap[Bt]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Gt),{x:-ht/2,y:0}),className:Bt,name:Bt,isAnchorPoint:!0})}if(a)!H&&H!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,x.__assign)((0,x.__assign)({},Gt),{x:ht/2,y:0}));else if(H){var re="link-point-right";t.shapeMap[re]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Gt),{x:ht/2,y:0}),className:re,name:re,isAnchorPoint:!0})}if(o)!tt&&tt!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,x.__assign)((0,x.__assign)({},Gt),{x:0,y:-_t/2}));else if(tt){var xe="link-point-top";t.shapeMap[xe]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Gt),{x:0,y:-_t/2}),className:xe,name:xe,isAnchorPoint:!0})}if(s)!at&&at!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,x.__assign)((0,x.__assign)({},Gt),{x:0,y:_t/2}));else if(at){var se="link-point-bottom";t.shapeMap[se]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},Gt),{x:0,y:_t/2}),className:se,name:se,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,x.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(tt){return tt.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,d.mix)({},f.attr(),a),l=c.width,g=l===void 0?20:l,p=c.height,C=p===void 0?20:p;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(g=0,C=0),f.attr((0,x.__assign)((0,x.__assign)({},c),{x:-g/2,y:-C/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var F="".concat(this.type,"-icon");if(u)n.shapeMap[F]=n.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:F,name:F});else{var g=a.width,C=a.height;n.shapeMap[F]=n.addShape("image",{attrs:(0,x.__assign)((0,x.__assign)({},a),{x:-g/2,y:-C/2}),className:F,name:F})}var H=n.shapeMap["node-label"]||n.find(function(tt){return tt.get("name")==="node-label"});H&&H.toFront()}}},Py=(0,x.__assign)((0,x.__assign)({},Zv),Ny);ys.registerNode("single-node",Py);var rv="edge-shape";function ky(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Ry={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:qt.defaultEdge.size,style:{x:0,y:0,stroke:qt.defaultEdge.style.stroke,lineAppendWidth:qt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:qt.edgeLabel.style.fill,fontSize:qt.edgeLabel.style.fontSize,fontFamily:qt.windowFontFamily}},stateStyles:(0,x.__assign)({},qt.edgeStateStyles)},getPath:function(e){var t=[];return(0,d.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style),a=e.size||qt.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,d.mix)({},qt.defaultEdge.style,{stroke:qt.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var g=o.attr(),p=e.style||{};p.stroke===void 0&&(p.stroke=e.color);var C=e.sourceNode,F=e.targetNode,H={radius:p.radius};c||(H={source:C,target:F,offset:p.offset,radius:p.radius});var tt=this.getPath(l,H),at={};r==="move"?at={path:tt}:(g.endArrow&&p.endArrow===!1&&(e.style.endArrow={path:""}),g.startArrow&&p.startArrow===!1&&(e.style.startArrow={path:""}),at=(0,x.__assign)({},e.style),at.lineWidth===void 0&&(at.lineWdith=((0,d.isNumber)(s)?s:s==null?void 0:s[0])||g.lineWidth),at.path===void 0&&(at.path=tt),at.stroke===void 0&&(at.stroke=g.stroke||e.color)),o&&o.attr(at)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[rv],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,d.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=so(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,x.__assign)((0,x.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,d.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=ky(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:rv,name:rv,attrs:r});return t.shapeMap[rv]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,d.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+Kv;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,d.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},By=(0,x.__assign)((0,x.__assign)({},Zv),Ry);ys.registerEdge("single-edge",By),ys.registerEdge("line",{getControlPoints:function(){}},"single-edge"),ys.registerEdge("spline",{getPath:function(e){var t=tg(e);return t}},"single-edge"),ys.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=ko(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,d.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=ko(t,o,r)}var f=Ho(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),ys.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,d.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Jh(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),ys.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=Jh(r,n,e.curvePosition[0],e.curveOffset[0]),o=Jh(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),ys.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),ys.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,d.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,d.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,d.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),ys.registerEdge("loop",{getPathPoints:function(e){return qi(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var Fy={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:qt.comboLabel.refX,refY:qt.comboLabel.refY,options:{style:{stroke:qt.defaultCombo.style.stroke,fill:qt.defaultCombo.style.fill,lineWidth:qt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:qt.comboLabel.style.fill,fontSize:qt.comboLabel.style.fontSize,fontFamily:qt.windowFontFamily}},stateStyles:(0,x.__assign)({},qt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,d.clone)(e.size||this.options.size||qt.defaultCombo.size);return(0,d.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,d.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,g=t.getContainer(),p=g.find(function(tt){return tt.get("name")==="combo-collapsed-substitute-icon"}),C=p&&!p.destroyed,F=t.get("keyShape");if(n&&u){if(C)p.show();else{var H={width:c||r.r*2||r.width,height:l||r.r*2||r.height};p=g.addShape("image",{attrs:(0,x.__assign)({img:f,x:-H.width/2,y:-H.height/2},H),name:"combo-collapsed-substitute-icon",draggable:!0})}F.hide()}else C&&(p.hide(),F.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,x.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},Gy=(0,x.__assign)((0,x.__assign)({},Zv),Fy);ys.registerCombo("single-combo",Gy),ys.registerCombo("circle",{options:{size:[qt.defaultCombo.size[0],qt.defaultCombo.size[0]],padding:Math.max.apply(Math,qt.defaultCombo.padding),animate:!0,style:{stroke:qt.defaultCombo.style.stroke,fill:qt.defaultCombo.style.fill,lineWidth:qt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:qt.comboLabel.style.fill,fontSize:qt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,x.__assign)({},qt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,d.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,d.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||qt.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,x.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,d.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,d.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,d.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),ys.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:qt.defaultCombo.style.stroke,fill:qt.defaultCombo.style.fill,lineWidth:qt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:qt.comboLabel.style.fill,fontSize:qt.comboLabel.style.fontSize,fontFamily:qt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,x.__assign)({},qt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,d.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,d.isNil)(o)&&(o=this.refX),(0,d.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],g;switch(r){case"top":g={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":g={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":g={x:u+s,y:0,textAlign:"left"};break;case"center":g={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":g={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:g={x:f+o,y:0,textAlign:"right"};break}return g.text=e.label,g},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,d.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,d.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,d.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,d.isNumber)(a.width)||isNaN(a.width)?s=o[0]||qt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,d.isNumber)(a.height)||isNaN(a.height)?u=o[1]||qt.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var g=(0,x.__assign)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},g},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,d.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,d.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,d.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),g=(0,d.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,g,!1)}},"single-combo"),ys.registerNode("simple-circle",{options:{size:qt.defaultNode.size,style:{x:0,y:0,stroke:qt.defaultNode.style.stroke,fill:qt.defaultNode.style.fill,lineWidth:qt.defaultNode.style.lineWidth},labelCfg:{style:{fill:qt.nodeLabel.style.fill,fontSize:qt.nodeLabel.style.fontSize,fontFamily:qt.windowFontFamily}},stateStyles:(0,x.__assign)({},qt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,x.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,d.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),ys.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:qt.defaultNode.style.stroke,fill:qt.defaultNode.style.fill,lineWidth:qt.defaultNode.style.lineWidth},labelCfg:{style:{fill:qt.nodeLabel.style.fill,fontSize:qt.nodeLabel.style.fontSize,fontFamily:qt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,x.__assign)({},qt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,x.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),ys.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:qt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,x.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,g=o-c/2;t.setClip({type:"rect",attrs:(0,x.__assign)({x:l,y:g,width:f,height:c},s)})}else if(n==="ellipse"){var p=r.rx,C=r.ry;t.setClip({type:"ellipse",attrs:(0,x.__assign)({x:a,y:o,rx:p,ry:C},s)})}else if(n==="polygon"){var F=r.points;t.setClip({type:"polygon",attrs:(0,x.__assign)({points:F},s)})}else if(n==="path"){var H=r.path;t.setClip({type:"path",attrs:(0,x.__assign)({path:H},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,x.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var vg={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},dg={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},Zc=ys,zy=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],gg=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},Uy=Jt,Wy=(0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)({},D),k),E),X),y),M),{transform:Uy,mat3:ot}),Ms=Wy,Xy=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=gg(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,x.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),g=f.length,p=0;p<g;p++){var C=f[p];if(!(!C||C.destroyed)){var F=C.getModel();if(!C.isVisible()){r.push(F);continue}t.push(F)}}for(var H=c.length,p=0;p<H;p++){var tt=c[p];if(!(!tt||tt.destroyed)){var F=tt.getModel();if(!tt.isVisible()){a.push(F);continue}F.isComboEdge?o.push(F):n.push(F)}}for(var at=l.length,p=0;p<at;p++){var ut=l[p];if(!ut.destroyed){var F=ut.getModel();if(!ut.isVisible()){u.push(F);continue}s.push(F)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(ht){return ht.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var l=o[c]||o;s=s.then(function(){var g,p=t.execLayoutMethod(l,c);return c===a.length-1&&((g=o.onAllLayoutEnd)===null||g===void 0||g.call(o)),p})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,x.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,d.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,d.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,x.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,d.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Fd(o);return s.size=[s.width,s.height],s}),a=Object.values((0,d.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Sf(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,x.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,x.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Sf(u.x)||Sf(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),g=u/(c-1),p=f/(l-1);(!isFinite(g)||!g)&&(g=0),(!isFinite(p)||!g)&&(p=0);for(var C=e[0]-u/2,F=e[1]-f/2,H=!0,tt=0;tt<o;tt++){var at=a[tt];Sf(+at.x)&&(H=!1,at.x=tt%c*g+C),Sf(+at.y)&&(H=!1,at.y=Math.floor(tt/c)*p+F)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),pg=Xy,Yy=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),yg=Yy,vc=Zc.registerNode,mg=Zc.registerEdge,Vy=Zc.registerCombo,xg=K.registerBehavior,un=qt,d_={version:qt.version,AbstractGraph:cg,BaseGlobal:un,Util:Ms,Shape:Zc,Node:Wv,Edge:Hd,Combo:qd,Hull:fg,registerNode:Zc.registerNode,registerEdge:Zc.registerEdge,registerCombo:Zc.registerCombo,registerBehavior:K.registerBehavior,Arrow:vg,Marker:dg,AbstractLayout:pg,AbstractEvent:yg},jy=z(810369);function Hy(){return window?window.devicePixelRatio:1}function bg(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Dl(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function Mh(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Ky(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Eg(i,e){return i[0]===e[0]&&i[1]===e[1]}var Zy=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,$y=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,qy=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,wg=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Sg(i,e){var t=i.match(wg);(0,d.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function Qy(i,e,t){var r=Zy.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,g=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,p=i.createLinearGradient(s.x,s.y,l,g);return Sg(a,p),p}function Jy(i,e,t){var r=$y.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(wg);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,g=Math.sqrt(c*c+l*l)/2,p=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*g);return Sg(s,p),p}function tm(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=qy.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function em(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,d.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return Qy(i,e,t);if(t[0]==="r")return Jy(i,e,t);if(t[0]==="p")return tm(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function rm(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function nv(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function $v(i,e){return nv(i)*nv(e)?(i[0]*e[0]+i[1]*e[1])/(nv(i)*nv(e)):1}function _g(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos($v(i,e))}function Mg(i,e){var t=e[1],r=e[2],n=(0,d.mod)((0,d.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,g=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,p=l*l/(t*t)+g*g/(r*r);p>1&&(t*=Math.sqrt(p),r*=Math.sqrt(p));var C=t*t*(g*g)+r*r*(l*l),F=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(F*=-1),isNaN(F)&&(F=0);var H=r?F*t*g/r:0,tt=t?F*-r*l/t:0,at=(s+f)/2+Math.cos(n)*H-Math.sin(n)*tt,ut=(u+c)/2+Math.sin(n)*H+Math.cos(n)*tt,ht=[(l-H)/t,(g-tt)/r],_t=[(-1*l-H)/t,(-1*g-tt)/r],Gt=_g([1,0],ht),Bt=_g(ht,_t);return $v(ht,_t)<=-1&&(Bt=Math.PI),$v(ht,_t)>=1&&(Bt=0),o===0&&Bt>0&&(Bt=Bt-2*Math.PI),o===1&&Bt<0&&(Bt=Bt+2*Math.PI),{cx:at,cy:ut,rx:Eg(i,[f,c])?0:t,ry:Eg(i,[f,c])?0:r,startAngle:Gt,endAngle:Gt+Bt,xRotation:n,arcFlag:a,sweepFlag:o}}var av=Math.sin,iv=Math.cos,qv=Math.atan2,ov=Math.PI;function Ag(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=qv(c,f),g=new ad({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*iv(ov/6)+","+10*av(ov/6)+" L0,0 L"+10*iv(ov/6)+",-"+10*av(ov/6),stroke:s,lineWidth:u}});g.translate(n,a),g.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",g)}function Cg(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,g=l.d,p=l.fill,C=l.stroke,F=l.lineWidth,H=(0,x.__rest)(l,["d","fill","stroke","lineWidth"]),tt=t-n,at=r-a,ut=qv(at,tt);g&&(n=n-iv(ut)*g,a=a-av(ut)*g);var ht=new ad({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,x.__assign)((0,x.__assign)({},H),{stroke:C||f,lineWidth:F||c,fill:p})});ht.translate(n,a),ht.rotateAtPoint(n,a,ut),i.set(o?"startArrowShape":"endArrowShape",ht)}function Nl(i,e,t,r,n){var a=qv(r-e,t-i);return{dx:iv(a)*n,dy:av(a)*n}}function Qv(i,e,t,r,n,a){typeof e.startArrow=="object"?Cg(i,e,t,r,n,a,!0):e.startArrow?Ag(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function Jv(i,e,t,r,n,a){typeof e.endArrow=="object"?Cg(i,e,t,r,n,a,!1):e.endArrow?Ag(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var Tg={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function lh(i,e){var t=e.attr();for(var r in t){var n=t[r],a=Tg[r]?Tg[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,d.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=em(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function td(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function nm(i,e,t){var r=i.get("refreshElements");(0,d.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?rd(e,t):ed(e,t)}function ed(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&rd(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&ed(r.cfg.children,e);else{var n=am(r,e);r.cfg.refresh=n,n&&r.isGroup()&&ed(r.cfg.children,e)}}}function Ig(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Ig(t.cfg.children)}}function rd(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&rd(r.get("children"),e))}}function am(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&Mh(t,e);return r}function Og(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],g=l[0];if(c===0&&a&&a.d){var p=i.getStartTangent();f=Nl(p[0][0],p[0][1],p[1][0],p[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var C=n[c+1];if(C[0]==="Z"){var p=i.getEndTangent();f=Nl(p[0][0],p[0][1],p[1][0],p[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var p=i.getEndTangent();f=Nl(p[0][0],p[0][1],p[1][0],p[1][1],o.d)}var F=f.dx,H=f.dy;switch(g){case"M":e.moveTo(l[1]-F,l[2]-H),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-F,l[2]-H);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-F,l[4]-H);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-F,l[6]-H);break;case"A":{var tt=void 0;r?(tt=r[c],tt||(tt=Mg(s,l),r[c]=tt)):tt=Mg(s,l);var at=tt.cx,ut=tt.cy,ht=tt.rx,_t=tt.ry,Gt=tt.startAngle,Bt=tt.endAngle,re=tt.xRotation,xe=tt.sweepFlag;if(e.ellipse)e.ellipse(at,ut,ht,_t,re,Gt,Bt,1-xe);else{var se=ht>_t?ht:_t,Oe=ht>_t?1:ht/_t,Ve=ht>_t?_t/ht:1;e.translate(at,ut),e.rotate(re),e.scale(Oe,Ve),e.arc(0,0,se,Gt,Bt,1-xe),e.scale(1/Oe,1/Ve),e.rotate(-re),e.translate(-at,-ut)}break}case"Z":e.closePath();break;default:break}if(g==="Z")s=u;else{var Ir=l.length;s=[l[Ir-2],l[Ir-1]]}}}}function Lg(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function im(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=Ky(t,n):r?e=t:a&&(e=n)}return e}function om(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,d.each)(i,function(a){var o=im(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,d.min)(e),minY:(0,d.min)(t),maxX:(0,d.max)(r),maxY:(0,d.max)(n)}}function sm(i,e){return!i||!e||!Mh(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var um=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){Lg(this,t)},e.prototype.getShapeBase=function(){return _},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),lh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,d.each)(t,function(g){var p=g.cfg.cacheCanvasBBox;p&&g.cfg.isInView&&(r.push(p.minX,p.maxX),n.push(p.minY,p.maxY))});var a=null;if(r.length){var o=(0,d.min)(r),s=(0,d.max)(r),u=(0,d.min)(n),f=(0,d.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",Mh(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),lh(t,this),this._applyClip(t,this.getClip()),td(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Cl),Dg=um,fm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return _},e.prototype.getGroupBase=function(){return Dg},e.prototype.onCanvasChange=function(t){Lg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=vu(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),lh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Mh(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),lh(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Mh(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(fc),ef=fm,cm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,g=bg(u,f,t,r);return a&&n?g<=c+l:a?g<=c:n?g>=c-l&&g<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(ef),lm=cm;function sv(i,e,t,r){return i/(t*t)+e/(r*r)}var hm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,g=s.ry,p=(t-f)*(t-f),C=(r-c)*(r-c);return a&&n?sv(p,C,l+u,g+u)<=1:a?sv(p,C,l,g)<=1:n?sv(p,C,l-u,g-u)>=1&&sv(p,C,l+u,g+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(ef),vm=hm;function Ng(i){return i instanceof HTMLElement&&(0,d.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var dm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,d.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Ng(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,g=r.img;(g instanceof Image||Ng(g))&&(!(0,d.isNil)(u)&&!(0,d.isNil)(f)&&!(0,d.isNil)(c)&&!(0,d.isNil)(l)?t.drawImage(g,u,f,c,l,n,a,o,s):t.drawImage(g,n,a,o,s))},e}(ef),gm=dm;function $c(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?Mo.pointToLine(i,e,t,r,a,o)<=n/2:!1}var pm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&Qv(this,t,a,o,r,n),u&&Jv(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return $c(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=Nl(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=Nl(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Mo.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Mo.pointAt(n,a,o,s,t)},e}(ef),ym=pm,mm={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},xm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,d.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,d.isFunction)(a))s=a,u=s(r,n,o),u=Ja(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");Og(this,t,{path:r},n)},e.Symbols=mm,e}(ef),bm=xm;function Pg(i,e,t){var r=Qe();return i.createPath(r),r.isPointInPath(e,t)}var Em=1e-6;function nd(i){return Math.abs(i)<Em?0:i<0?-1:1}function wm(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function kg(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(wm(o,s,[e,t]))return!0;nd(o[1]-t)>0!=nd(s[1]-t)>0&&nd(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Ah(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return bg(f.x,f.y,o,s)<=a/2}var Sm=Jt;function _m(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function Mm(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,g=u.box;if(!(g&&!Dl(g.x-o,g.y-o,g.width+e,g.height+e,t,r))){switch(u.command){case"L":case"Z":a=$c(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var p=uh.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=p<=e/2;break;case"C":var C=Ae.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=C<=e/2;break;case"A":var F=u.arcParams,H=F.cx,tt=F.cy,at=F.rx,ut=F.ry,ht=F.startAngle,_t=F.endAngle,Gt=F.xRotation,Bt=[t,r,1],re=at>ut?at:ut,xe=at>ut?1:at/ut,se=at>ut?ut/at:1,Oe=Sm(null,[["t",-H,-tt],["r",-Gt],["s",1/xe,1/se]]);Wi.transformMat3(Bt,Bt,Oe),a=Ah(0,0,re,ht,_t,e,Bt[0],Bt[1]);break;default:break}if(a)break}}return a}function Am(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var uv=(0,x.__assign)({hasArc:_m,extractPolygons:Am,isPointInStroke:Mm},P);function Rg(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=kg(a,e,t),r)break}return r}var Cm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=Ja(t);var r=uv.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Ln(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();Qv(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();Jv(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=uv.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=Pg(this,t,r);else{var l=this.attr("path"),g=uv.extractPolygons(l);f=Rg(g.polygons,t,r)||Rg(g.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");Og(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,d.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,d.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,d.isNil)(s)||(0,d.isNil)(a))return null;var u=s.length,f=o[a+1];return Ae.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",uv.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=Ae.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,d.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=Ae.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(ef),ad=Cm;function Bg(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if($c(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],g=i[a-1];if($c(l[0],l[1],g[0],g[1],e,t,r))return!0}return!1}var Tm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=Bg(s,o,t,r,!0)),!u&&a&&(u=kg(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(ef),Im=Tm,Om=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&Qv(this,t,n[1][0],n[1][1],u,f),o&&Jv(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return Bg(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var g=Nl(u,f,n[1][0],n[1][1],a.d);u+=g.dx,f+=g.dy}if(o&&o.d){var g=Nl(n[s-2][0],n[s-2][1],c,l,o.d);c-=g.dx,l-=g.dy}t.beginPath(),t.moveTo(u,f);for(var p=0;p<s-1;p++){var C=n[p];t.lineTo(C[0],C[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",At.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Mo.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Mo.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(ef),Lm=Om;function Dm(i,e,t,r,n,a,o){var s=n/2;return Dl(i-s,e-s,t,n,a,o)||Dl(i+t-s,e-s,n,r,a,o)||Dl(i+s,e+r-s,t,n,a,o)||Dl(i-s,e+s,n,r,a,o)}function Nm(i,e,t,r,n,a,o,s){var u=a/2;return $c(i+n,e,i+t-n,e,a,o,s)||$c(i+t,e+n,i+t,e+r-n,a,o,s)||$c(i+t-n,e+r,i+n,e+r,a,o,s)||$c(i,e+r-n,i,e+n,a,o,s)||Ah(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Ah(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Ah(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Ah(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var Pm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,g=s.radius;if(g){var C=!1;return n&&(C=Nm(u,f,c,l,g,o,t,r)),!C&&a&&(C=Pg(this,t,r)),C}else{var p=o/2;if(a&&n)return Dl(u-p,f-p,c+p,l+p,t,r);if(a)return Dl(u,f,c,l,t,r);if(n)return Dm(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=rm(u),c=f[0],l=f[1],g=f[2],p=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-g),g!==0&&t.arc(n+o-g,a+s-g,g,0,Math.PI/2),t.lineTo(n+p,a+s),p!==0&&t.arc(n+p,a+s-p,p,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(ef),km=Pm,Rm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Hr(t)},e.prototype._setText=function(t){var r=null;(0,d.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=qe(a.text,a.fontSize,a.lineHeight),g;(0,d.each)(r,function(p,C){g=u+C*(c+f)-l+f,o==="middle"&&(g+=l-f-(l-f)/2),o==="top"&&(g+=l-f),(0,d.isNil)(p)||(n?t.fillText(p,s,g):t.strokeText(p,s,g))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,d.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,d.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,d.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(ef),Bm=Rm;function Fm(i,e){if(e){var t=zu(e);return bi(t,i)}return i}function Fg(i,e,t){var r=i.getTotalMatrix();if(r){var n=Fm([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function Gg(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!Rf(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=Fg(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function zg(i,e,t){if(!Gg(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=zg(s,e,t);else if(Gg(s,e,t)){var u=s,f=Fg(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var Gm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return _},e.prototype.getGroupBase=function(){return Dg},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Hy();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=zg(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=om(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=sm(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,d.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),lh(t,this),td(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),lh(t,this),nm(this,n,a),td(t,n,a),t.restore()):r.length&&Ig(r),(0,d.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,d.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Ju),dc=Gm,g_="0.5.12",id={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},si={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},p_=null;function Lu(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ug(i){var e=id[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=Lu(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function Wg(i,e){var t=i.get("el"),r=(0,d.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function zm(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function Um(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Ch(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Th(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){Ug(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Xg(i,e){e.forEach(function(t){t.draw(i)})}function Yg(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")zm(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&Wg(i,function(l,g){return c.indexOf(l)-c.indexOf(g)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Ch(i):e==="clip"?Th(i,r):e==="attr"||e==="add"&&i.draw(r)}}var Wm=function(i){(0,x.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Lu("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){Yg(this,t)},e.prototype.getShapeBase=function(){return m},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Th(this,t),this.createPath(t),r.length&&Xg(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){si[s]&&a.setAttribute(si[s],o)}),Ch(this)},e}(Cl),Vg=Wm,Xm=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return m},e.prototype.getGroupBase=function(){return Vg},e.prototype.onCanvasChange=function(t){Yg(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=vu(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,g=o-c,p=a+s+c,C=o+u+c;return{x:l,y:g,minX:l,minY:g,maxX:p,maxY:C,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Ug(this),Th(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,g=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&g.setAttribute(si.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&g.setAttribute(si.strokeOpacity,c),l&&g.setAttribute(si.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(si[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(si[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(si[r],"url(#"+o+")")}else a.setAttribute(si[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&Um(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Ch(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(fc),Du=Xm,Ym=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):si[s]&&a.setAttribute(si[s],o)})},e}(Du),Vm=Ym,jm=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,d.each)(r||n,function(f,c){si[c]&&a.setAttribute(si[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Du),Hm=jm,Km=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):si[s]&&a.setAttribute(si[s],o)})},e}(Du),Zm=Km,$m=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):si[u]&&o.setAttribute(si[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,d.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,d.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Du),qm=$m,Qm=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,d.isObject)(o)?t.addArrow(n,si[s]):t.getDefaultArrow(n,si[s]);a.setAttribute(si[s],"url(#"+u+")")}else a.removeAttribute(si[s]);else si[s]&&a.setAttribute(si[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Mo.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Mo.pointAt(n,a,o,s,t)},e}(Du),Jm=Qm,fv={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},jg={get:function(i){return fv[i]},register:function(i,e){fv[i]=e},remove:function(i){delete fv[i]},getAll:function(){return fv}},t1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,d.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,d.isFunction)(o)?s=o:s=jg.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=jg,e}(Du),e1=t1,r1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,d.each)(r||a,function(s,u){if(u==="path"&&(0,d.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,d.isObject)(s)?t.addArrow(a,si[u]):t.getDefaultArrow(a,si[u]);o.setAttribute(si[u],"url(#"+f+")")}else o.removeAttribute(si[u]);else si[u]&&o.setAttribute(si[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Du),n1=r1,a1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):si[s]&&a.setAttribute(si[s],o)})},e}(Du),i1=a1,o1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,d.each)(r||n,function(o,s){s==="points"&&(0,d.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):si[s]&&a.setAttribute(si[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,d.isNil)(r)?(this.set("totalLength",At.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,d.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Mo.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,d.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Mo.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Du),s1=o1,u1=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,f1=/[^\s,]+/gi;function c1(i){var e=0,t=0,r=0,n=0;return(0,d.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function y_(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(u1),each(i,function(e,t){if(e=e.match(f1),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var l1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,d.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&si[c]&&o.setAttribute(si[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=c1(s);(0,d.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(Du),h1=l1,Hg=.3,v1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},d1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},g1={left:"left",start:"left",center:"middle",right:"end",end:"end"},p1=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,x.__assign)((0,x.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,d.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Ch(n):si[u]&&o.setAttribute(si[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=Gf();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",d1[n]||"alphabetic"):t.setAttribute("alignment-baseline",v1[n]||"baseline"),t.setAttribute("text-anchor",g1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,d.each)(u,function(l,g){g===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+Hg)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-Hg)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Du),y1=p1,m1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,x1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,b1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Kg(i){var e=i.match(b1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,d.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function E1(i,e){var t=m1.exec(i),r=(0,d.mod)((0,d.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=Kg(n)}function w1(i,e){var t=x1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=Kg(o)}var S1=function(){function i(e){this.cfg={};var t=null,r=(0,d.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Lu("linearGradient"),E1(e,t)):(t=Lu("radialGradient"),w1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),_1=S1,M1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},A1={x:"-40%",y:"-40%",width:"200%",height:"200%"},C1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=Lu("filter");return(0,d.each)(A1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,d.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,d.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[M1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),T1=C1,I1=function(){function i(e,t){this.cfg={};var r=Lu("marker"),n=(0,d.uniqueId)("marker_");r.setAttribute("id",n);var a=Lu("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,d.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),Zg=I1,O1=function(){function i(e){this.type="clip",this.cfg={};var t=Lu("clipPath");this.el=t,this.id=(0,d.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),L1=O1,D1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,N1=function(){function i(e){this.cfg={};var t=Lu("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Lu("image");t.appendChild(r);var n=(0,d.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=D1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),P1=N1,k1=function(){function i(e){var t=Lu("defs"),r=(0,d.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new Zg(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new _1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new Zg(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new T1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new P1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new L1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),R1=k1,B1=function(i){(0,x.__extends)(e,i);function e(t){return i.call(this,(0,x.__assign)((0,x.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return m},e.prototype.getGroupBase=function(){return Vg},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!id[a.tagName]){for(var o=a.parentNode;o&&!id[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Lu("svg"),r=new R1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&Wg(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Ch(this):t==="clip"?Th(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();Th(this,t),r.length&&Xg(t,r)},e}(Ju),Ih=B1,m_="0.5.6",Oh,od,$g,sd;function F1(){Oh=document.createElement("table"),od=document.createElement("tr"),$g=/^\s*<(\w+|!)[^>]*>/,sd={tr:document.createElement("tbody"),tbody:Oh,thead:Oh,tfoot:Oh,td:od,th:od,"*":document.createElement("div")}}function ro(i){Oh||F1();var e=$g.test(i)&&RegExp.$1;(!e||!(e in sd))&&(e="*");var t=sd[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var G1=z(6767),Lh=z.n(G1);function cv(i){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(i)}var z1=/^\s+/,U1=/\s+$/;function ta(i,e){if(i=i||"",e=e||{},i instanceof ta)return i;if(!(this instanceof ta))return new ta(i,e);var t=W1(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}ta.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,n,a,o,s;return t=e.r/255,r=e.g/255,n=e.b/255,t<=.03928?a=t/12.92:a=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=rp(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Qg(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Qg(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=qg(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=qg(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return Jg(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return j1(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(xo(this._r,255)*100)+"%",g:Math.round(xo(this._g,255)*100)+"%",b:Math.round(xo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(xo(this._r,255)*100)+"%, "+Math.round(xo(this._g,255)*100)+"%, "+Math.round(xo(this._b,255)*100)+"%)":"rgba("+Math.round(xo(this._r,255)*100)+"%, "+Math.round(xo(this._g,255)*100)+"%, "+Math.round(xo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ax[Jg(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+tp(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var a=ta(e);r="#"+tp(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0,a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return ta(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification($1,arguments)},brighten:function(){return this._applyModification(q1,arguments)},darken:function(){return this._applyModification(Q1,arguments)},desaturate:function(){return this._applyModification(H1,arguments)},saturate:function(){return this._applyModification(K1,arguments)},greyscale:function(){return this._applyModification(Z1,arguments)},spin:function(){return this._applyModification(J1,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(rx,arguments)},complement:function(){return this._applyCombination(tx,arguments)},monochromatic:function(){return this._applyCombination(nx,arguments)},splitcomplement:function(){return this._applyCombination(ex,arguments)},triad:function(){return this._applyCombination(ep,[3])},tetrad:function(){return this._applyCombination(ep,[4])}},ta.fromRatio=function(i,e){if(cv(i)=="object"){var t={};for(var r in i)i.hasOwnProperty(r)&&(r==="a"?t[r]=i[r]:t[r]=Dh(i[r]));i=t}return ta(i,e)};function W1(i){var e={r:0,g:0,b:0},t=1,r=null,n=null,a=null,o=!1,s=!1;return typeof i=="string"&&(i=ux(i)),cv(i)=="object"&&(gc(i.r)&&gc(i.g)&&gc(i.b)?(e=X1(i.r,i.g,i.b),o=!0,s=String(i.r).substr(-1)==="%"?"prgb":"rgb"):gc(i.h)&&gc(i.s)&&gc(i.v)?(r=Dh(i.s),n=Dh(i.v),e=V1(i.h,r,n),o=!0,s="hsv"):gc(i.h)&&gc(i.s)&&gc(i.l)&&(r=Dh(i.s),a=Dh(i.l),e=Y1(i.h,r,a),o=!0,s="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=rp(t),{ok:o,format:i.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function X1(i,e,t){return{r:xo(i,255)*255,g:xo(e,255)*255,b:xo(t,255)*255}}function qg(i,e,t){i=xo(i,255),e=xo(e,255),t=xo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=(r+n)/2;if(r==n)a=o=0;else{var u=r-n;switch(o=s>.5?u/(2-r-n):u/(r+n),r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,l:s}}function Y1(i,e,t){var r,n,a;i=xo(i,360),e=xo(e,100),t=xo(t,100);function o(f,c,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?f+(c-f)*6*l:l<1/2?c:l<2/3?f+(c-f)*(2/3-l)*6:f}if(e===0)r=n=a=t;else{var s=t<.5?t*(1+e):t+e-t*e,u=2*t-s;r=o(u,s,i+1/3),n=o(u,s,i),a=o(u,s,i-1/3)}return{r:r*255,g:n*255,b:a*255}}function Qg(i,e,t){i=xo(i,255),e=xo(e,255),t=xo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=r,u=r-n;if(o=r===0?0:u/r,r==n)a=0;else{switch(r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,v:s}}function V1(i,e,t){i=xo(i,360)*6,e=xo(e,100),t=xo(t,100);var r=Math.floor(i),n=i-r,a=t*(1-e),o=t*(1-n*e),s=t*(1-(1-n)*e),u=r%6,f=[t,o,a,a,s,t][u],c=[s,t,t,o,a,a][u],l=[a,a,s,t,t,o][u];return{r:f*255,g:c*255,b:l*255}}function Jg(i,e,t,r){var n=[rf(Math.round(i).toString(16)),rf(Math.round(e).toString(16)),rf(Math.round(t).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function j1(i,e,t,r,n){var a=[rf(Math.round(i).toString(16)),rf(Math.round(e).toString(16)),rf(Math.round(t).toString(16)),rf(np(r))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function tp(i,e,t,r){var n=[rf(np(r)),rf(Math.round(i).toString(16)),rf(Math.round(e).toString(16)),rf(Math.round(t).toString(16))];return n.join("")}ta.equals=function(i,e){return!i||!e?!1:ta(i).toRgbString()==ta(e).toRgbString()},ta.random=function(){return ta.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function H1(i,e){e=e===0?0:e||10;var t=ta(i).toHsl();return t.s-=e/100,t.s=lv(t.s),ta(t)}function K1(i,e){e=e===0?0:e||10;var t=ta(i).toHsl();return t.s+=e/100,t.s=lv(t.s),ta(t)}function Z1(i){return ta(i).desaturate(100)}function $1(i,e){e=e===0?0:e||10;var t=ta(i).toHsl();return t.l+=e/100,t.l=lv(t.l),ta(t)}function q1(i,e){e=e===0?0:e||10;var t=ta(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),ta(t)}function Q1(i,e){e=e===0?0:e||10;var t=ta(i).toHsl();return t.l-=e/100,t.l=lv(t.l),ta(t)}function J1(i,e){var t=ta(i).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,ta(t)}function tx(i){var e=ta(i).toHsl();return e.h=(e.h+180)%360,ta(e)}function ep(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=ta(i).toHsl(),r=[ta(i)],n=360/e,a=1;a<e;a++)r.push(ta({h:(t.h+a*n)%360,s:t.s,l:t.l}));return r}function ex(i){var e=ta(i).toHsl(),t=e.h;return[ta(i),ta({h:(t+72)%360,s:e.s,l:e.l}),ta({h:(t+216)%360,s:e.s,l:e.l})]}function rx(i,e,t){e=e||6,t=t||30;var r=ta(i).toHsl(),n=360/t,a=[ta(i)];for(r.h=(r.h-(n*e>>1)+720)%360;--e;)r.h=(r.h+n)%360,a.push(ta(r));return a}function nx(i,e){e=e||6;for(var t=ta(i).toHsv(),r=t.h,n=t.s,a=t.v,o=[],s=1/e;e--;)o.push(ta({h:r,s:n,v:a})),a=(a+s)%1;return o}ta.mix=function(i,e,t){t=t===0?0:t||50;var r=ta(i).toRgb(),n=ta(e).toRgb(),a=t/100,o={r:(n.r-r.r)*a+r.r,g:(n.g-r.g)*a+r.g,b:(n.b-r.b)*a+r.b,a:(n.a-r.a)*a+r.a};return ta(o)},ta.readability=function(i,e){var t=ta(i),r=ta(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)},ta.isReadable=function(i,e,t){var r=ta.readability(i,e),n,a;switch(a=!1,n=fx(t),n.level+n.size){case"AAsmall":case"AAAlarge":a=r>=4.5;break;case"AAlarge":a=r>=3;break;case"AAAsmall":a=r>=7;break}return a},ta.mostReadable=function(i,e,t){var r=null,n=0,a,o,s,u;t=t||{},o=t.includeFallbackColors,s=t.level,u=t.size;for(var f=0;f<e.length;f++)a=ta.readability(i,e[f]),a>n&&(n=a,r=ta(e[f]));return ta.isReadable(i,r,{level:s,size:u})||!o?r:(t.includeFallbackColors=!1,ta.mostReadable(i,["#fff","#000"],t))};var ud=ta.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ax=ta.hexNames=ix(ud);function ix(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function rp(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function xo(i,e){ox(i)&&(i="100%");var t=sx(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function lv(i){return Math.min(1,Math.max(0,i))}function gu(i){return parseInt(i,16)}function ox(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function sx(i){return typeof i=="string"&&i.indexOf("%")!=-1}function rf(i){return i.length==1?"0"+i:""+i}function Dh(i){return i<=1&&(i=i*100+"%"),i}function np(i){return Math.round(parseFloat(i)*255).toString(16)}function ap(i){return gu(i)/255}var nf=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function gc(i){return!!nf.CSS_UNIT.exec(i)}function ux(i){i=i.replace(z1,"").replace(U1,"").toLowerCase();var e=!1;if(ud[i])i=ud[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=nf.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=nf.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=nf.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=nf.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=nf.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=nf.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=nf.hex8.exec(i))?{r:gu(t[1]),g:gu(t[2]),b:gu(t[3]),a:ap(t[4]),format:e?"name":"hex8"}:(t=nf.hex6.exec(i))?{r:gu(t[1]),g:gu(t[2]),b:gu(t[3]),format:e?"name":"hex"}:(t=nf.hex4.exec(i))?{r:gu(t[1]+""+t[1]),g:gu(t[2]+""+t[2]),b:gu(t[3]+""+t[3]),a:ap(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=nf.hex3.exec(i))?{r:gu(t[1]+""+t[1]),g:gu(t[2]+""+t[2]),b:gu(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function fx(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var hv=2,ip=.16,cx=.05,lx=.05,hx=.15,op=5,sp=4,vx=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function up(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-hv*e:Math.round(i.h)+hv*e:r=t?Math.round(i.h)+hv*e:Math.round(i.h)-hv*e,r<0?r+=360:r>=360&&(r-=360),r}function fp(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-ip*e:e===sp?r=i.s+ip:r=i.s+cx*e,r>1&&(r=1),t&&e===op&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function cp(i,e,t){var r;return t?r=i.v+lx*e:r=i.v-hx*e,r>1&&(r=1),Number(r.toFixed(2))}function vv(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=ta(i),n=op;n>0;n-=1){var a=r.toHsv(),o=ta({h:up(a,n,!0),s:fp(a,n,!0),v:cp(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=sp;s+=1){var u=r.toHsv(),f=ta({h:up(u,s),s:fp(u,s),v:cp(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?vx.map(function(c){var l=c.index,g=c.opacity,p=ta.mix(e.backgroundColor||"#141414",t[l],g*100).toHexString();return p}):t}var fd={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ks={},cd={};Object.keys(fd).forEach(function(i){ks[i]=vv(fd[i]),ks[i].primary=ks[i][5],cd[i]=vv(fd[i],{theme:"dark",backgroundColor:"#141414"}),cd[i].primary=cd[i][5]});var x_=ks.red,b_=ks.volcano,E_=ks.gold,w_=ks.orange,S_=ks.yellow,__=ks.lime,M_=ks.green,A_=ks.cyan,C_=ks.blue,T_=ks.geekblue,I_=ks.purple,O_=ks.magenta,L_=ks.grey,ss=function(e,t,r){var n=Lh()(e),a=Lh()(t);return Lh()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},dx=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=ss(t,e,.05).rgb().toString(),a=ss(t,e,.1).rgb().toString(),o=ss(t,e,.2).rgb().toString(),s=ss(t,e,.4).rgb().toString(),u=ss(t,r,.02).rgb().toString(),f=ss(t,r,.05).rgb().toString(),c=ss(t,r,.1).rgb().toString(),l=ss(t,r,.2).rgb().toString(),g=ss(t,r,.3).rgb().toString(),p=vv(e,{theme:"default",backgroundColor:t}),C=Lh()(e).hex().toLowerCase(),F=p.indexOf(C),H=e;return F!==-1&&(H=p[F+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:H,highlightFill:o,disableStroke:g,disableFill:f,edgeMainStroke:g,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:g,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:g,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:H,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},gx=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=ss(t,e,.2).rgb().toString(),a=ss(t,e,.3).rgb().toString(),o=ss(t,e,.6).rgb().toString(),s=ss(t,e,.8).rgb().toString(),u=ss(t,r,.2).rgb().toString(),f=ss(t,r,.25).rgb().toString(),c=ss(t,r,.3).rgb().toString(),l=ss(t,r,.4).rgb().toString(),g=ss(t,r,.5).rgb().toString(),p=vv(e,{theme:"dark",backgroundColor:t}),C=Lh()(e).hex().toLowerCase(),F=p.indexOf(C),H=e;return F!==-1&&(H=p[F+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:g,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:H,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},ld=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?dx(e,t,"rgb(150, 150, 150)"):gx(e,t,"#777")},px=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(ld(o,t,r,n))}),a},yx="rgb(95, 149, 255)",mx="rgb(255, 255, 255)",lp="rgb(0, 0, 0)",ei=ld(yx,mx),Pl={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:ei.mainStroke,fill:ei.mainFill},size:20,color:ei.mainStroke,linkPoints:{size:8,lineWidth:1,fill:ei.activeFill,stroke:ei.activeStroke}},nodeStateStyles:{active:{fill:ei.activeFill,stroke:ei.activeStroke,lineWidth:2,shadowColor:ei.mainStroke,shadowBlur:10},selected:{fill:ei.selectedFill,stroke:ei.selectedStroke,lineWidth:4,shadowColor:ei.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:ei.highlightFill,stroke:ei.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:ei.inactiveFill,stroke:ei.inactiveStroke,lineWidth:1},disable:{fill:ei.disableFill,stroke:ei.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:lp,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ei.edgeMainStroke,lineAppendWidth:2},color:ei.edgeMainStroke},edgeStateStyles:{active:{stroke:ei.edgeActiveStroke,lineWidth:1},selected:{stroke:ei.edgeSelectedStroke,lineWidth:2,shadowColor:ei.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ei.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:ei.edgeInactiveStroke,lineWidth:1},disable:{stroke:ei.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:lp,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:ei.comboMainFill,lineWidth:1,stroke:ei.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:ei.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:ei.comboActiveStroke,lineWidth:1,fill:ei.comboActiveFill},selected:{stroke:ei.comboSelectedStroke,lineWidth:2,fill:ei.comboSelectedFill,shadowColor:ei.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ei.comboHighlightStroke,lineWidth:2,fill:ei.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:ei.comboInactiveStroke,fill:ei.comboInactiveFill,lineWidth:1},disable:{stroke:ei.comboDisableStroke,fill:ei.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},xx=function(e){var t=e.clone();return bx(e,t),t},bx=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}};function dv(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var Ex=Ms.cloneEvent,wx=Ms.isViewportChanged,Sx=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,d.wrapBehavior)(this,"onCanvasEvents"),f=(0,d.wrapBehavior)(this,"onExtendEvents"),c=(0,d.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(dv(s,"wheel",c)),typeof window!="undefined"&&(a.push(dv(window,"keydown",f)),a.push(dv(window,"keyup",f)),a.push(dv(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,d.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),wx(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var g=l.get("item");if(!g.destroyed){var p=g.getType();if(t.target=o,t.item=g,t.canvasX===t.x&&t.canvasY===t.y){var C=n.getCanvasByPoint(t.x,t.y);t.canvasX=C.x,t.canvasY=C.y}t.name&&!t.name.includes(":")?(n.emit("".concat(p,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,p)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,d.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=Ex(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,d.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(yg),_x=Sx,Ka=z(483360),Mx=z(981746),gv=z.n(Mx),hp=Ms.traverseTree,Ax=function(e,t){var r;return e?(0,d.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},Cx=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],g=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var p=0;p<g;++p){var C=l[p];r.push(+C)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},Tx=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,g=a[s],p=g.length;n[s*4+2]=l,n[s*4+3]=p/2,c=Math.max(c,p/2);for(var C=0;C<p;++C){var F=g[C];n.push(+F)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},Ix=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var g=a.length,p=o[u],C=p.length;a[u*4+2]=g+1048576*C/4,a[u*4+3]=0,l=Math.max(l,C/4);for(var F=0;F<C;++F){var H=p[F];a.push(+H)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},Ox=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},Lx=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},Dx=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;hp(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||hp(e,function(l){var g=(l[s]-n[s])/c*(Math.PI*2-f)+f,p=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=p*Math.cos(g),l.y=p*Math.sin(g),!0}),e},vp=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},dp=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"},Nx=(0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)((0,x.__assign)({},Ms),I),A),O),U),pc=Nx,Px=pc.radialLayout,kx=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=gv()[t.type](r,t.config);return Px(n),n};return}this.layoutMethod=function(r){return gv()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),Rx=kx;(0,Ka.registerLayout)("grid",Ka.GridLayout),(0,Ka.registerLayout)("random",Ka.RandomLayout),(0,Ka.registerLayout)("force",Ka.ForceLayout),(0,Ka.registerLayout)("circular",Ka.CircularLayout),(0,Ka.registerLayout)("dagre",Ka.DagreLayout),(0,Ka.registerLayout)("dagreCompound",Ka.DagreCompoundLayout),(0,Ka.registerLayout)("radial",Ka.RadialLayout),(0,Ka.registerLayout)("concentric",Ka.ConcentricLayout),(0,Ka.registerLayout)("mds",Ka.MDSLayout),(0,Ka.registerLayout)("fruchterman",Ka.FruchtermanLayout),(0,Ka.registerLayout)("fruchterman-gpu",Ka.FruchtermanGPULayout),(0,Ka.registerLayout)("gForce",Ka.GForceLayout),(0,Ka.registerLayout)("force2",Ka.Force2Layout),(0,Ka.registerLayout)("gForce-gpu",Ka.GForceGPULayout),(0,Ka.registerLayout)("comboForce",Ka.ComboForceLayout),(0,Ka.registerLayout)("comboCombined",Ka.ComboCombinedLayout),(0,Ka.registerLayout)("forceAtlas2",Ka.ForceAtlas2Layout);var Bx=function(e,t){t.isCustomLayout=!0,Ka.Layouts[e]=(0,Ka.registerLayout)(e,t)},Fx=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),Gx=Fx,zx=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,g=c.edges,p=c.layoutCfg,C=p===void 0?{}:p,F=C.type,H=layout.getLayoutByName(F);if(!H){this.postMessage({type:n.ERROR,message:"layout ".concat(F," not found")});break}var tt;C.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),tt==null||tt.destroy()},tt=new H(C),tt.init({nodes:l,edges:g}),tt.execute();break}case n.GPURUN:{var at=s.data,ut=at.nodes,g=at.edges,ht=at.layoutCfg,C=ht===void 0?{}:ht,_t=at.canvas,F=C.type,H=layout.getLayoutByName(F);if(!H){this.postMessage({type:n.ERROR,message:"layout ".concat(F," not found")});break}if(F.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(F," does not support GPU")});break}var Gt=new H(C);Gt.init({nodes:ut,edges:g}),Gt.executeWithWorker(_t,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new Gx(t,e);return r},hh={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function hd(i){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(i)}var gp=function(e){return setTimeout(e,16)},pp=function(e){return clearTimeout(e)},pv={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||gp;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||pp;return t(e)}},Ux=["fruchterman","gForce"],Wx=["force","grid","circular"],Xx=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=zx(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(pv.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(pv.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,x.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,F,g,p,C,F,H;return(0,x.__generator)(this,function(tt){switch(tt.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(yp(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),Ms.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),F=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=F):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),g=!1;try{p=new Ka.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=p}catch(at){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return g=p.enableTick,g&&(C=t.onTick,F=function(){C&&C(),s.refreshPositions()},p.tick=F),H=this.filterLayoutData(this.data,t),Hx(H,r),p.init(H),s.emit("beforesublayout",{type:u}),[4,p.execute()];case 1:return tt.sent(),p.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,x.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,g,p;return(0,x.__generator)(this,function(C){switch(C.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},Ms.isForce(u)&&(f=r.onTick,c=r.animate,l=c===void 0&&(u==="force"||u==="force2"),g=function(){f==null||f(),(c||l)&&s.refreshPositions()},r.tick=g),p=this.filterLayoutData(this.data,r),t.init(p),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return C.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),l={};Object.assign(l,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=l;var g=l.type,p=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(_t){var Gt;return p=!!(!((Gt=_t.nodes)===null||Gt===void 0)&&Gt.length)||p});var C=this.destoryLayoutMethods();a.emit("beforelayout");var F=Promise.resolve();p&&g&&(C==null?void 0:C.length)===1&&C[0]===g?this.tweakInit():F=this.initPositions(l.center,s);var H=this.initPositions(l.center,u);H.then(),this.isGPU=mp(l,g);var tt=l.onLayoutEnd,at=l.layoutEndFormatted,ut=l.adjust;if(at||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(_t){switch(_t.label){case 0:return tt&&tt(s),this.refreshLayout(),ut&&l.pipes?[4,this.adjustPipesBox(this.data,ut)]:[3,2];case 1:_t.sent(),this.refreshLayout(),_t.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var ht=!1;return l.type?(ht=!0,F=F.then(function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(_t){switch(_t.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,_t.sent()]}})})})):l.pipes&&(ht=!0,l.pipes.forEach(function(_t,Gt){F=F.then(function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(Bt){switch(Bt.label){case 0:return[4,this.execLayoutMethod(_t,Gt)];case 1:return[2,Bt.sent()]}})})})})),ht?F.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(_t){console.warn("graph layout failed,",_t)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var l=c.x,g=c.y;!isNaN(l)&&!isNaN(g)&&(s[c.id]={x:l,y:g},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,g=c.target,p=s[l],C=s[g];!p&&C?s[l]={x:C.x+(Math.random()-.5)*80,y:C.y+(Math.random()-.5)*80}:!C&&p&&(s[g]={x:p.x+(Math.random()-.5)*80,y:p.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,x.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,g,p;return(0,x.__generator)(this,function(C){switch(C.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!Ka.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(l=mp(c,c.type),g=l?"".concat(c.type,"-gpu"):c.type,p=new Ka.Layouts[g](c),delete u.preset,p.init(f),[4,p.execute()]);case 1:return C.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var g=function(tt){c=c.then(function(){return n.runWebworker(u,t,tt)})},p=0,C=o.pipes;p<C.length;p++){var F=C[p];g(F)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(H){console.error("layout failed",H)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,g=Vx(n,function(C){return typeof C!="function"});if(!l)t.postMessage({type:hh.RUN,nodes:u,edges:f,layoutCfg:g});else{var p=c.transferControlToOffscreen();g.type="".concat(g.type,"-gpu"),t.postMessage({type:hh.GPURUN,nodes:u,edges:f,layoutCfg:g,canvas:p},[p])}return new Promise(function(C,F){t.onmessage=function(H){a.handleWorkerMessage(C,F,H,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,g=function(){o.onTick&&o.onTick()};switch(l){case hh.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=pv.requestAnimationFrame(function(){vd(a,c),u.refreshPositions(),g(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=pv.requestAnimationFrame(function(){vd(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,g(),t()})),f.requestId=null}));break;case hh.END:f.currentTick==null&&(vd(a,c),t());break;case hh.GPUEND:f.currentTick==null&&(jx(a,c),t());break;case hh.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,x.__rest)(t,["disableTriggerLayout"]),f=(0,d.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(g){switch(g.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,g.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(g,p){var C=f.pipes[p];c=c.then(function(){return(0,x.__awaiter)(r,void 0,void 0,function(){return(0,x.__generator)(this,function(F){switch(F.label){case 0:return[4,this.updateLayoutMethod(g,C)];case 1:return[2,F.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(g){console.warn("layout failed",g)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),Wx.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(C){return Math.max(C.height,C.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,d.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(p,C){var F,H,tt,at=p.x-((F=l[C])===null||F===void 0?void 0:F.x),ut=p.y-((H=l[C])===null||H===void 0?void 0:H.y);(tt=f[C])===null||tt===void 0||tt.forEach(function(ht){ht.x+=at,ht.y+=ut})}),a()};var g=new Ka.Layouts[r](s);g.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(pg),Yx=Xx;function vd(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function Vx(i,e){var t={};return i&&hd(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function jx(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function Hx(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function yp(i){return Ux.includes(i)}function mp(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,vp().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!yp(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var xp=Jt,Kx="svg",Zx=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new Yx(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new _x(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===Kx)u=new Ih({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new dc(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,d.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,x.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,x.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),g=s||c.get("el"),p="";t||(t="image/png"),setTimeout(function(){return(0,x.__awaiter)(u,void 0,void 0,function(){var C,F,H,tt,at,ut,ht,_t,Gt,Bt;return(0,x.__generator)(this,function(re){switch(re.label){case 0:return l!=="svg"?[3,1]:(C=g.cloneNode(!0),F=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),H=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",F),H.replaceChild(C,H.documentElement),tt=new XMLSerializer().serializeToString(H),p="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(tt)),[3,4]);case 1:return at=void 0,ut=g.getContext("2d"),ht=a||this.get("width"),_t=o||this.get("height"),Gt=void 0,f?[4,this.downloadImageWatermark(f,ut,ht,_t)]:[3,3];case 2:re.sent(),re.label=3;case 3:if(r){Bt=typeof window!="undefined"?window.devicePixelRatio:1;try{at=ut.getImageData(0,0,ht*Bt,_t*Bt),Gt=ut.globalCompositeOperation,ut.globalCompositeOperation="destination-over",ut.fillStyle=r,ut.fillRect(0,0,ht,_t)}catch(xe){console.error("Download image failed. Out of memory at ImageData creation")}}p=g.toDataURL(t),r&&(ut.clearRect(0,0,ht,_t),ut.putImageData(at,0,0),ut.globalCompositeOperation=Gt),re.label=4;case 4:return n&&n(p),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var g=void 0,p=o.getContext("2d"),C=Math.max(this.get("width"),500),F=Math.max(this.get("height"),500),H=void 0;if(r){var tt=typeof window!="undefined"&&window.devicePixelRatio||1;try{g=p.getImageData(0,0,C*tt,F*tt),H=p.globalCompositeOperation,p.globalCompositeOperation="destination-over",p.fillStyle=r,p.fillRect(0,0,C,F)}catch(at){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(p.clearRect(0,0,C,F),p.putImageData(g,0,0),p.globalCompositeOperation=H)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=ro('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,d.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var g=o+l[0]+l[2],p=s+l[1]+l[3],C={container:f,height:g,width:p,quickHit:!0},F=u==="svg"?new Ih(C):new dc(C),H=this.get("group"),tt=H.clone(),at=(0,d.clone)(tt.getMatrix());at||(at=[1,0,0,0,1,0,0,0,1]);var ut=(a.maxX+a.minX)/2,ht=(a.maxY+a.minY)/2;at=xp(at,[["t",-ut,-ht],["t",s/2+l[3],o/2+l[0]]]),tt.resetMatrix(),tt.setMatrix(at),F.add(tt);var _t=F.get("el"),Gt="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var Bt=_t.cloneNode(!0),re=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),xe=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",re);xe.replaceChild(Bt,xe.documentElement);var se=new XMLSerializer().serializeToString(xe);Gt="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(se))}else{var Oe=void 0,Ve=_t.getContext("2d"),Ir=void 0;if(c){var Wr=typeof window!="undefined"?window.devicePixelRatio:1;try{Oe=Ve.getImageData(0,0,p*Wr,g*Wr),Ir=Ve.globalCompositeOperation,Ve.globalCompositeOperation="destination-over",Ve.fillStyle=c,Ve.fillRect(0,0,p,g)}catch(Nr){console.error("Download image failed. Out of memory at ImageData creation")}}Gt=_t.toDataURL(r),c&&(Ve.clearRect(0,0,p,g),Ve.putImageData(Oe,0,0),Ve.globalCompositeOperation=Ir)}t&&t(Gt)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=ro('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),g=n?n.backgroundColor:void 0,p=n?n.padding:void 0;p?(0,d.isNumber)(p)&&(p=[p,p,p,p]):p=[0,0,0,0];var C=s+p[0]+p[2],F=u+p[1]+p[3];if(l){var H=this.get("graphWaterMarker").cfg||{},tt=H.width,at=H.height;C=Math.ceil(C/at)*at,F=Math.ceil(F/tt)*tt}var ut={container:c,height:C,width:F},ht=f==="svg"?new Ih(ut):new dc(ut),_t=this.get("group"),Gt=xx(_t),Bt=(0,d.clone)(Gt.getMatrix());Bt||(Bt=[1,0,0,0,1,0,0,0,1]);var re=(o.maxX+o.minX)/2,xe=(o.maxY+o.minY)/2;Bt=xp(Bt,[["t",-re,-xe],["t",u/2+p[3],s/2+p[0]]]),Gt.resetMatrix(),Gt.setMatrix(Bt),ht.add(Gt);var se=ht.get("el");r||(r="image/png"),this.asyncToDataUrl(r,g,function(Oe){var Ve=document.createElement("a"),Ir=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Oe,f,Ve,Ir);var Wr=document.createEvent("MouseEvents");Wr.initEvent("click",!1,!1),Ve.dispatchEvent(Wr)},F,C,se)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":".".concat(r.split("/")[1])),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var g=document.createEvent("MouseEvents");g.initEvent("click",!1,!1),c.dispatchEvent(g)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var g=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(g,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(g)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=Pl.waterMarkerImage);var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},Pl.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var g={container:n,width:s,height:u,capture:!1},p=this.get("pixelRatio");p&&(g.pixelRatio=p,window.devicePixelRatio=p),a=new dc(g),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),F=c.rotate,H=c.x,tt=c.y;C.rotate(-F*Math.PI/180);var at=new Image;at.crossOrigin="anonymous",at.src=t,at.onload=function(){if(C.drawImage(at,H,tt,c.width,c.height),C.rotate(F*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var ut=document.querySelector(".g6-graph-watermarker");ut||(ut=document.createElement("div"),ut.className="g6-graph-watermarker"),ut.className="g6-graph-watermarker",a.destroyed||(ut.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(ut))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,d.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,d.deepMix)({},Pl.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var g={container:n,width:s,height:u,capture:!1},p=this.get("pixelRatio");p&&(g.pixelRatio=p,window.devicePixelRatio=p),a=new dc(g),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),F=c.rotate,H=c.fill,tt=c.fontFamily,at=c.fontSize,ut=c.baseline,ht=c.x,_t=c.y,Gt=c.lineHeight;C.rotate(-F*Math.PI/180),C.font="".concat(at,"px ").concat(tt),C.fillStyle=H,C.textBaseline=ut;for(var Bt=(0,d.isString)(t)?[t]:t,re=Bt.length-1;re>=0;re--)C.fillText(Bt[re],ht,_t+re*Gt);if(C.rotate(F*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var xe=document.querySelector(".g6-graph-watermarker");xe||(xe=document.createElement("div"),xe.className="g6-graph-watermarker"),xe.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(xe)}},e.prototype.destroy=function(){var t,r,n,a;(0,d.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(cg),bp=Zx;function dd(i){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dd(i)}function Ep(i,e){if(e===void 0&&(e=new WeakMap),i===null)return i;if(i instanceof Date)return new Date(i);if(i instanceof RegExp)return new RegExp(i);if(dd(i)!=="object")return i;if(e.get(i))return e.get(i);var t=Array.isArray(i)?[]:{};e.set(i,t);for(var r in i)i.hasOwnProperty(r)&&i[r]!==void 0&&(t[r]=Ep(i[r],e));return t}function $x(i){try{return structuredClone(i)}catch(e){return Ep(i)}}var qx=pc.radialLayout,gd=pc.traverseTree,Qx=function(i){(0,x.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=gv()[t.type](r,t);return qx(n),n}:function(r){return gv()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,d.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,d.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,d.each)(t.children||[],function(C){a.innerUpdateChild(C,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,g;o.get("originAttrs")&&(l=o.get("originAttrs").x,g=o.get("originAttrs").y);var p=o.getModel();n&&o.set("originAttrs",{x:p.x,y:p.y}),o.set("model",Object.assign(p,t.data)),(l!==t.x||g!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,d.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,l=f.maxX,g=f.minY,p=f.maxY,C={x:(c+l)/2,y:(g+p)/2};r==="begin"&&(C.x=c,C.y=g),this.translate(s.x-C.x,s.y-C.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,d.clone)(n.get("data"));var f={};gd(a,function(g){var p=g.children;if(!(p!=null&&p.length))return!0;for(var C=p.length-1;C>=0;C--){var F=r.findById(p[C].id),H=F?!F.isVisible():p[C].visible===!1;H&&(f[g.id]=f[g.id]||[],f[g.id].push({idx:C,child:p.splice(C,1)[0]}))}}),u=o?o(a,n.get("layout")):a,gd(u,function(g){var p=f[g.id];if(p!=null&&p.length)for(var C=p.length-1;C>=0;C--){var F=p[C],H=F.idx,tt=F.child;g.children.splice(H,0,tt)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var l=n.get("viewController");l.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,d.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var g=l.getModel().children||[];return!!g.find(function(p){return p.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,d.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){gd(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,d.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,d.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,d.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,d.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",$x(t))},e}(bp),Jx=Qx;function Xa(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var tb=function(){function i(e){this._cfgs=(0,d.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,d.each)(r,function(a,o){var s=(0,d.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,d.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),Js=tb,eb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wp="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",rb=function(i){eb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:wp,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||wp;a.includes("url(")||(a='url("'.concat(a,'")'));var o=ro(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=ro(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");Xa(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;Xa(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");Xa(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(Js),nb=rb,ab=z(738186),yv=z.n(ab),ib=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&yv()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var ob=function(i){ib(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=ro("<div class=".concat(t||"g6-component-contextmenu","></div>"));Xa(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,d.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,d.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(re){c(re.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var g=u.get("width"),p=u.get("height"),C=o.getBoundingClientRect(),F=this.get("offsetX")||0,H=this.get("offsetY")||0,tt=u.getContainer().offsetTop,at=u.getContainer().offsetLeft,ut=t.canvasX+at+F,ht=t.canvasY+tt+H;ut+C.width>g&&(ut=t.canvasX-C.width-F+at),ht+C.height>p&&(ht=t.canvasY-C.height-H+tt),ht<0&&(ht=0),Xa(o,{top:"".concat(ht,"px"),left:"".concat(ut,"px"),visibility:"visible"});var _t=this.get("trigger")==="click",Gt=function(re){if(_t){_t=!1;return}r.onMenuHide()};document.body.addEventListener("click",Gt),this.set("handler",Gt)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Xa(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(Js),sb=ob,ub=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pd=function(){return pd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},pd.apply(this,arguments)},Sp=Math.max,fb=Jt,cb="default",lb="keyShape",hb="delegate",_p="svg",vb=function(i){ub(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,d.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=ro(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,g=0,p=!1,C=0,F=0,H=0,tt=0,at=0,ut=0,ht=f||u?"mousedown":"dragstart";c.addEventListener(ht,function(re){var xe,se;if(re.dataTransfer){var Oe=new Image;Oe.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(se=(xe=re.dataTransfer).setDragImage)===null||se===void 0||se.call(xe,Oe,0,0);try{re.dataTransfer.setData("text/html","view-port-minimap")}catch(Ir){re.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,re.target===c){var Ve=c.style;C=parseInt(Ve.left,10),F=parseInt(Ve.top,10),H=parseInt(Ve.width,10),tt=parseInt(Ve.height,10),!(H>n[0]||tt>n[1])&&(ut=a.getZoom(),at=t.get("ratio"),p=!0,l=re.clientX,g=re.clientY)}},!1);var _t=function(xe){if(!(!p||(0,d.isNil)(xe.clientX)||(0,d.isNil)(xe.clientY))){var se=l-xe.clientX,Oe=g-xe.clientY;(C-se<0||C-se+H>=n[0])&&(se=0),(F-Oe<0||F-Oe+tt>=n[1])&&(Oe=0),C-=se,F-=Oe,Xa(c,{left:"".concat(C,"px"),top:"".concat(F,"px")}),a.translate(se*ut/at,Oe*ut/at),l=xe.clientX,g=xe.clientY}};!f&&!u&&c.addEventListener("drag",_t,!1);var Gt=function(){p=!1,r.refresh=!0},Bt=f||u?"mouseup":"dragend";c.addEventListener(Bt,Gt,!1),s.addEventListener("mouseleave",Gt),s.addEventListener("mouseup",Gt),(f||u)&&s.addEventListener("mousemove",_t,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,f),g=this.get("viewport");g||this.initViewport();var p=(l.x-c.x)*t,C=(l.y-c.y)*t,F=c.x*t+r,H=c.y*t+n,tt=F+p,at=H+C;F<0&&(p+=F,F=0),tt>o[0]&&(p=p-(tt-o[0])),H<0&&(C+=H,H=0),at>o[1]&&(C=C-(at-o[1])),this.set("ratio",t);var ut="".concat(F,"px"),ht="".concat(H,"px");Xa(g,{left:ut,top:ht,width:"".concat(p,"px"),height:"".concat(C,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===_p&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,d.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,d.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,d.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:pd({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=ro("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,d.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=ro('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===_p?f=new Ih({container:u,width:n[0],height:n[1]}):f=new dc({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case cb:this.updateGraphShapes();break;case lb:this.updateKeyShapes();break;case hb:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,g=c.width/l,p=c.height/l;Number.isFinite(f.width)&&(g=Sp(f.width,g),p=Sp(f.height,p)),g+=2*s,p+=2*s;var C=Math.min(n[0]/g,n[1]/p),F=[1,0,0,0,1,0,0,0,1],H=0,tt=0;Number.isFinite(f.minX)&&(H=-f.minX),Number.isFinite(f.minY)&&(tt=-f.minY);var at=(n[0]-(g-2*s)*C)/2,ut=(n[1]-(p-2*s)*C)/2;F=fb(F,[["t",H,tt],["s",C,C],["t",at,ut]]),u.setMatrix(F),this.set("ratio",C),this.set("totaldx",at+H*C),this.set("totaldy",ut+tt*C),this.set("dx",at),this.set("dy",ut),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(Js),db=vb,gb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Mf(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function pb(i,e){return i.x*e.x+i.y*e.y}function Mp(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var yb=function(i){gb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(ht){(ht.x===null||!ht.y===null||ht.x===void 0||!ht.y===void 0)&&(s=!0),o[ht.id]=ht}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var g=r.get("cycles"),p=r.get("iterations"),C=r.get("iterRate"),F=r.get("lambda"),H=0;H<g;H++){for(var tt=function(_t){var Gt=[];n.forEach(function(Bt,re){if(Bt.source!==Bt.target){var xe=o[Bt.source],se=o[Bt.target];Gt[re]=r.getEdgeForces({source:xe,target:se},re,u,F);for(var Oe=0;Oe<u+1;Oe++)c[re][Oe].x+=Gt[re][Oe].x,c[re][Oe].y+=Gt[re][Oe].y}})},at=0;at<p;at++)tt(at);F=F/2,u*=f,p*=C,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(ht,_t){ht.source!==ht.target&&(ht.type="polyline",ht.controlPoints=c[_t].slice(1,c[_t].length-1))});var ut=r.get("graph");ut.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var g=0;!((f=o[u])===null||f===void 0)&&f.length?g=r.getEdgeLength(o[u]):g=Mf({x:c.x,y:c.y},{x:l.x,y:l.y});var p=g/(t+1),C=p,F=[{x:c.x,y:c.y}];o[u].forEach(function(H,tt){if(tt!==0){for(var at=Mf(H,o[u][tt-1]);at>C;){var ut=C/at,ht={x:o[u][tt-1].x,y:o[u][tt-1].y};ht.x+=ut*(H.x-o[u][tt-1].x),ht.y+=ut*(H.y-o[u][tt-1].y),F.push(ht),at-=C,C=p}C-=at}}),F.push({x:l.x,y:l.y}),o[u]=F}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=Mf(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(g,p){if(!(p<=f)){var C=o[g.source],F=o[g.target],H=t.getBundleScore({source:c,target:l},{source:C,target:F});H>=a&&(s[f].push(p),s[p].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Mf({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Mf({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=pb({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Mf(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=Mp(r.source,t),a=Mp(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Mf(o,s)/Mf(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(Mf(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var g={x:0,y:0},p=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),C=o.getElectrostaticForce(l,r);g.x=a*(p.x+C.x),g.y=a*(p.y+C.y),c.push(g)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var g=Mf(s[c][t],s[r][t]),p=1/g;f.x+=l.x*p,f.y+=l.y*p}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(Js),mb=yb,xb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yd=function(){return yd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},yd.apply(this,arguments)},mv=.05,Ap={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},bb=function(i){xb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,d.clone)(Ap),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-mv:a=1/(1-mv);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var g=r.get("d");r.set("molecularParam",(g+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-mv:o=1/(1-mv);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),g=n.get("molecularParam"),p=a.getNodes(),C=p.length,F=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(F=n.get("cacheCenter"));var H=n.get("delegateCenterDiff");H&&(F.x+=H.x,F.y+=H.y),n.updateDelegate(F,f);for(var tt=0;tt<C;tt++){var at=p[tt].getModel(),ut=at.x,ht=at.y;if(!(isNaN(ut)||isNaN(ht))){var _t=(ut-F.x)*(ut-F.x)+(ht-F.y)*(ht-F.y);if(!isNaN(_t)&&_t<c&&_t!==0){var Gt=Math.sqrt(_t),Bt=g*Gt/(l*Gt+f),re=(ut-F.x)/Gt,xe=(ht-F.y)/Gt;if(at.x=re*Bt+F.x,at.y=xe*Bt+F.y,s[at.id]||(s[at.id]={x:ut,y:ht,texts:[]}),o.push(at),u&&2*Gt<f)for(var se=p[tt],Oe=se.getContainer(),Ve=Oe.getChildren(),Ir=Ve.length,Wr=0;Wr<Ir;Wr++){var Nr=Ve[Wr];Nr.get("type")==="text"&&(s[at.id].texts.push({visible:Nr.get("visible"),shape:Nr}),Nr.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var g=f.texts[l];g.shape.set("visible",g.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,g=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var p=r.get("d"),C=r.get("r");if(r.set("molecularParam",(p+1)*C),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var F=r.get("dPercentText");F&&(F.remove(),F.destroy())}if(g==="drag"||g==="wheel"||g==="unset"){r.set("scaleRBy",g),r.get("delegate").remove(),r.get("delegate").destroy();var F=r.get("dPercentText");F&&(F.remove(),F.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||Ap;s=u.addShape("circle",{attrs:yd({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(C){a.scaleRByWheel(C)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){a.scaleRByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(C){n.scaleDByWheel(C)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){n.scaleDByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),g=t.y+r/1.5+16;if(!l||l.destroyed){var p=o.get("group");l=p.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:g,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:g})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(Js),Eb=bb,wb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cp=.05;typeof document!="undefined"&&yv()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var Sb=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},_b=function(i){wb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,d.isString)(a)&&(o=ro(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,d.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var g=Sb(l).filter(function(C){return C.nodeName==="LI"});if(g.length!==0){var p=g[0].getAttribute("code");p&&(f?f(p,r):t.handleDefaultOperator(p))}});var c=this.get("position");c&&Xa(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,d.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){var C=t.findById(p.id);p.visible?t.showItem(C,!1):t.hideItem(C,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){var C=t.findById(p.id);delete p.id,t.updateItem(C,p,!1),C.getType()==="combo"&&t.updateCombo(C)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){var C=p.itemType;delete p.itemType,t.addItem(C,p,!1)})});break}case"add":Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){t.removeItem(p.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){t.updateComboTree(p.id,p.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var g=o[l];g&&g.forEach(function(p){t.updateComboTree(p.id,p.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,d.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(g){var p=t.findById(g.id);g.visible?t.showItem(p,!1):t.hideItem(p,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(g){var p=t.findById(g.id);delete g.id,t.updateItem(p,g,!1),p.getType()==="combo"&&t.updateCombo(p)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(g){var p=g.itemType;delete g.itemType,t.addItem(p,g,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(g){t.updateComboTree(g.id,g.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-Cp*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-Cp*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(Js),Mb=_b,Ab=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&yv()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Cb=function(i){Ab(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=ro("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),Xa(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){Xa(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,d.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Xa(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){Xa(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),g=t.item;if(g.getType&&g.getType()==="node"&&l&&(0,d.isArray)(l)&&l.length>=2){var p=g.getBBox();c={x:p.minX+p.width*l[0],y:p.minY+p.height*l[1]}}var C=a.getCanvasByPoint(c.x,c.y),F=C.x,H=C.y,tt=a.getContainer(),at={x:F+tt.offsetLeft+u,y:H+tt.offsetTop+f};Xa(n,{visibility:"visible",display:"unset"});var ut=n.getBoundingClientRect();F+ut.width+u>o&&(at.x-=ut.width+u),H+ut.height+f>s&&(at.y-=ut.height+f,at.y<0&&(at.y=0)),Xa(n,{left:"".concat(at.x,"px"),top:"".concat(at.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,d.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(Js),Tb=Cb,Tp="timebarstartplay",Ip="timebarendplay",Af="valuechange",kl="timebarConfigChanged",qc="playPauseBtn",Nh="nextStepBtn",Ph="preStepBtn",D_={opacity:.5,fill:"#000"},N_={opacity:.5,fill:"#000",r:5},P_={fill:"#fff",fontSize:12},Ib=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,g=e.backgroundColor,p=g===void 0?"#000":g,C=e.textColor,F=C===void 0?"#fff":C,H=e.opacity,tt=H===void 0?.8:H,at=e.fontSize,ut=at===void 0?12:at;this.container=o,this.className=l,this.backgroundColor=p,this.textColor=F,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=tt,this.fontSize=ut,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,g=ro("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,d.isString)(l)&&(l=document.getElementById(l)),l.appendChild(g),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,Xa(g,{visibility:"hidden",top:0,left:0});var p=ro(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));p.innerHTML=s,g.appendChild(p),e.backgroundDOM=p;var C=ro("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));g.appendChild(C),e.arrowDOM=C,e.container=g},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;Xa(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),Xa(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),Xa(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var g=n-u/2,p=n+u/2;g<0?Xa(t.backgroundDOM,{marginLeft:"".concat(-u/2-g,"px")}):p>t.parentWidth&&Xa(t.backgroundDOM,{marginLeft:"".concat(-u/2-p+t.parentWidth+12,"px")})},i.prototype.hide=function(){Xa(this.container,{top:0,left:0,visibility:"hidden"})},i}(),Ob=Ib,md=function(){return md=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},md.apply(this,arguments)},Lb=function(){function i(e){this.config=(0,d.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,d.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,g=t.addGroup({name:qc});this.startMarkerGroup=g.addGroup({name:qc}),this.circle=t.addShape("circle",{attrs:md({x:c,y:l,r:this.config.r*a},r),name:qc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=g.addGroup({name:qc});var p=.25*this.config.r*a,C=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-C/2,width:p,height:C,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-C/2,width:p,height:C,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),Db=Lb,Wo=function(){return Wo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Wo.apply(this,arguments)},kh=Jt,Nb="#aaa",Pb="green",kb={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Rb={fill:"#fff"},Bb={fill:"green"},Op={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},Lp={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Fb={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Op,timeTypeControllerStyle:Lp},xd=110,Qc=50,Cf={SINGLE:"single",RANGE:"range"},Gb=function(){function i(e){this.controllerCfg=(0,d.deepMix)({},Fb,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Cf.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?Nb:s,f=e.stroke,c=f===void 0?Pb:f,l=e.containerStyle,g=l===void 0?{}:l,p=Wo(Wo({},kb),e.playBtnStyle||{}),C=Wo(Wo({},Rb),e.preBtnStyle||{}),F=Wo(Wo({},Bb),e.nextBtnStyle||{}),H=r/2-5,tt=a+10,at=this.controllerGroup.addShape("rect",{attrs:Wo({x:n,y:tt,width:t,height:r,stroke:c,fill:u},g),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:tt,r:H}):this.playButton=new Db({group:this.controllerGroup,x:t/2,y:tt+H+5,r:H,isPlay:this.isPlay,style:p});var ut=C.offsetX||0,ht=C.offsetY||0,_t=(C.scale||1)*H;this.controllerGroup.addShape("path",{attrs:Wo({path:this.getPreMarkerPath(t/2-5*H+ut,tt+H+5+ht,_t*.5)},C),name:Ph});var Gt=F.offsetX||0,Bt=F.offsetY||0,re=(F.scale||1)*H;this.controllerGroup.addShape("path",{attrs:Wo({path:this.getNextMarkerPath(t/2+5*H+Gt,tt+H+5+Bt,re*.5)},F),name:Nh}),at.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var xe=this.controllerCfg.scale,se=xe===void 0?1:xe,Oe=this.controllerGroup.getCanvasBBox(),Ve=(Oe.maxX+Oe.minX)/2,Ir=(Oe.maxY+Oe.minY)/2,Wr=kh([1,0,0,0,1,0,0,0,1],[["t",-Ve,-Ir],["s",se,se],["t",Ve,Ir]]);this.controllerGroup.setMatrix(Wr)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=Wo(Wo({},Op),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,g=a.scale,p=g===void 0?1:g,C=a.offsetX,F=C===void 0?0:C,H=a.offsetY,tt=H===void 0?0:H,at=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=at;var ut=[],ht=5;this.speedAxisY=[19,22,26,32,39];for(var _t=0;_t<5;_t++){var Gt=t+this.speedAxisY[_t],Bt=r-(n?Qc:xd);at.addShape("line",{attrs:Wo({x1:Bt,x2:Bt+15,y1:Gt,y2:Gt},s),speed:ht,name:"speed-rect"}),this.speedAxisY[_t]=Gt,ut.push(ht),ht=ht-1}this.speedText=at.addShape("text",{attrs:Wo({x:r-(n?Qc:xd)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=at.addShape("path",{attrs:Wo({path:this.getPointerPath(r-(n?Qc:xd),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var re=this.speedGroup.getCanvasBBox(),xe=(re.maxX+re.minX)/2,se=(re.maxY+re.minY)/2,Oe=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Oe=kh(Oe,[["t",-xe,-se],["s",p,p],["t",xe+F*p,se+tt*p]]),this.speedGroup.setMatrix(Oe)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=Wo(Wo({},Lp),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,g=l===void 0?0:l,p=o.box,C=p===void 0?{}:p,F=o.check,H=F===void 0?{}:F,tt=o.text,at=tt===void 0?{}:tt;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var ut=a===Cf.SINGLE;this.toggleGroup.addShape("rect",{attrs:Wo({x:n-Qc,y:this.speedAxisY[0]+3.5},C),isChecked:ut,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Wo({path:[["M",n-Qc+3,this.speedAxisY[1]+6],["L",n-Qc+7,this.speedAxisY[1]+10],["L",n-Qc+12,this.speedAxisY[1]+4]]},H),capture:!1,name:"check-icon"}),ut||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Wo({text:ut?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Qc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},at),name:"checked-text"});var ht=this.toggleGroup.getCanvasBBox(),_t=(ht.maxX+ht.minX)/2,Gt=(ht.maxY+ht.minY)/2,Bt=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Bt=kh(Bt,[["t",-_t,-Gt],["s",u,u],["t",_t+c*u,Gt+g*u]]),this.toggleGroup.setMatrix(Bt)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=kh(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(kl,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=kh(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(kl,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Cf.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Cf.SINGLE),t.target.set("isChecked",!a),e.group.emit(kl,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),Dp=Gb,Rh=function(){return Rh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Rh.apply(this,arguments)},zb=Jt,Ub={fill:"#5B8FF9"},Wb={fill:"#e6e8e9"},Xb=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,g=l===void 0?0:l,p=e.y,C=p===void 0?0:p,F=e.tickLabelFormatter,H=e.selectedTickStyle,tt=H===void 0?Ub:H,at=e.unselectedTickStyle,ut=at===void 0?Wb:at,ht=e.tooltipBackgroundColor,_t=e.tooltipFomatter,Gt=e.tickLabelStyle,Bt=e.controllerCfg,re=Bt===void 0?{speed:1}:Bt;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=F,this.tickLabelStyle=Gt||{},this.selectedTickStyle=tt,this.unselectedTickStyle=ut,this.controllerCfg=re,this.currentSpeed=re.speed||1,this.x=g,this.y=C,this.tooltipBackgroundColor=ht,this.tooltipFomatter=_t,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,g=t.tickLabelStyle,p=r-2*a,C=10,F=4,H=3*a+F+C,tt=n-H-2*a,at=2,ut=o.length,ht=(p-at*(ut-1))/ut;this.tickWidth=ht;var _t=this.sliceGroup,Gt=[],Bt=[],re=Math.round(ut*s),xe=Math.round(ut*u);this.startTickRectId=re,this.endTickRectId=xe;var se=g.rotate;delete g.rotate,o.forEach(function(Ve,Ir){var Wr=Ir>=re&&Ir<=xe,Nr=Wr?c:l,Er=_t.addShape("rect",{attrs:Rh({x:a+Ir*(ht+at),y:a,width:ht,height:tt},Nr),draggable:!0,name:"tick-rect-".concat(Ir)}),fn=_t.addShape("rect",{attrs:{x:a+Ir*ht+at*(2*Ir-1)/2,y:a,width:Ir===0||Ir===ut-1?ht+at/2:ht+at,height:tt,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Ir)});fn.toFront();var rn=Er.getBBox(),wr=(rn.minX+rn.maxX)/2;Gt.push({rect:Er,pickRect:fn,value:Ve.date,x:wr,y:rn.minY});var kr;if(f?(kr=f(Ve),!(0,d.isString)(kr)&&kr&&(kr=Ve.date)):Ir%Math.round(ut/10)===0&&(kr=Ve.date),kr){Bt.push(kr);var qr=rn.maxY+a*2;_t.addShape("line",{attrs:{stroke:"#BFBFBF",x1:wr,y1:qr,x2:wr,y2:qr+F},name:"tick-line"});var Qr=qr+F+a,gn=_t.addShape("text",{attrs:Rh({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:wr,y:Qr,textAlign:"center",text:kr,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},g),capture:!1,name:"tick-label"}),Tn=gn.getBBox();if(Tn.maxX>r?gn.attr("textAlign","right"):Tn.minX<0&&gn.attr("textAlign","left"),(0,d.isNumber)(se)&&Bt.length!==10){var fa=zb([1,0,0,0,1,0,0,0,1],[["t",-wr,-Qr],["r",se],["t",wr-5,Qr+2]]);gn.attr({textAlign:"left",matrix:fa})}Bt.length===1?gn.attr({textAlign:"left"}):Bt.length===10&&gn.attr({textAlign:"right"})}}),this.tickRects=Gt;var Oe=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Dp(Rh({group:Oe,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var g=parseInt(l.get("name").split("-")[2],10);if(!isNaN(g)){var p=e.tickRects,C=e.unselectedTickStyle;p.forEach(function(at){at.rect.attr(C)});var F=e.selectedTickStyle;p[g].rect.attr(F),e.startTickRectId=g,e.endTickRectId=g;var H=p.length,tt=g/H;e.graph.emit(Af,{value:[tt,tt]})}}}),t.on("dragstart",function(c){var l=e.tickRects,g=e.unselectedTickStyle;l.forEach(function(at){at.rect.attr(g)});var p=c.target,C=parseInt(p.get("name").split("-")[2],10),F=e.selectedTickStyle;l[C].rect.attr(F),e.startTickRectId=C;var H=l.length,tt=C/H;e.graph.emit(Af,{value:[tt,tt]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),g=e.startTickRectId,p=e.tickRects,C=e.selectedTickStyle,F=e.unselectedTickStyle,H=0;H<p.length;H++){var tt=H>=g&&H<=l?C:F;p[H].rect.attr(tt)}var at=p.length;e.endTickRectId=l;var ut=g/at,ht=l/at;e.graph.emit(Af,{value:[ut,ht]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,g=parseInt(c.target.get("name").split("-")[2],10);if(!(g<l)){var p=e.selectedTickStyle,C=e.tickRects;C[g].rect.attr(p),e.endTickRectId=g;var F=C.length,H=l/F,tt=g/F;e.graph.emit(Af,{value:[H,tt]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new Ob({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(g){var p=g.target;if(p.get("type")==="rect"){var C=parseInt(p.get("name").split("-")[2],10),F=o.getClientByPoint(u[C].x,u[C].y);s.show({x:u[C].x,y:u[C].y,clientX:F.x,clientY:F.y,text:a?a(u[C].value):u[C].value})}}),l.on("mouseleave",function(g){s.hide()})});var f=this.group;f.on("".concat(qc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Nh,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(Ph,":click"),function(){e.updateStartEnd(-1)}),f.on(kl,function(c){var l=c.type,g=c.speed;e.currentSpeed=g})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Tp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Ip,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Af,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(qc,":click")),e.off("".concat(Nh,":click")),e.off("".concat(Ph,":click")),e.off(kl),this.sliceGroup.destroy()},i}(),Yb=Xb,Np={};function Vb(i){return Np[i]}function Tf(i,e){Np[i]=e}var jb=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,d.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,d.map)(this.ticks,function(t,r){return(0,d.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,d.isNil)(n)||!(0,d.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,d.assign)(this,this.__cfg__),this.setDomain(),(0,d.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,d.isString)(e)){var r=Vb(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,d.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,d.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),bd=jb,Hb=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,d.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,d.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,x.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,d.isNil)(this.getConfig("min"))&&(this.min=0),(0,d.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(bd),Bh=Hb,Pp=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Jc="\\d\\d?",tl="\\d\\d",Kb="\\d{3}",Zb="\\d{4}",Fh="[^\\s]+",kp=/\[([^]*?)\]/gm;function Rp(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var Bp=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function el(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var Fp=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Gp=["January","February","March","April","May","June","July","August","September","October","November","December"],$b=Rp(Gp,3),qb=Rp(Fp,3),Ed={dayNamesShort:qb,dayNames:Fp,monthNamesShort:$b,monthNames:Gp,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},xv=el({},Ed),zp=function(i){return xv=el(xv,i)},Up=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},tu=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},Qb={D:function(i){return String(i.getDate())},DD:function(i){return tu(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return tu(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return tu(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return tu(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return tu(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return tu(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return tu(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return tu(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return tu(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return tu(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return tu(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+tu(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+tu(Math.floor(Math.abs(e)/60),2)+":"+tu(Math.abs(e)%60,2)}},Wp=function(i){return+i-1},Xp=[null,Jc],Yp=[null,Fh],Vp=["isPm",Fh,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],jp=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],Jb={D:["day",Jc],DD:["day",tl],Do:["day",Jc+Fh,function(i){return parseInt(i,10)}],M:["month",Jc,Wp],MM:["month",tl,Wp],YY:["year",tl,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",Jc,void 0,"isPm"],hh:["hour",tl,void 0,"isPm"],H:["hour",Jc],HH:["hour",tl],m:["minute",Jc],mm:["minute",tl],s:["second",Jc],ss:["second",tl],YYYY:["year",Zb],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",tl,function(i){return+i*10}],SSS:["millisecond",Kb],d:Xp,dd:Xp,ddd:Yp,dddd:Yp,MMM:["month",Fh,Bp("monthNamesShort")],MMMM:["month",Fh,Bp("monthNames")],a:Vp,A:Vp,ZZ:jp,Z:jp},bv={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Hp=function(i){return el(bv,i)},Kp=function(i,e,t){if(e===void 0&&(e=bv.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=bv[e]||e;var r=[];e=e.replace(kp,function(a,o){return r.push(o),"@@@"});var n=el(el({},xv),t);return e=e.replace(Pp,function(a){return Qb[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function Zp(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=bv[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(kp,function(ht,_t){return o.push(Up(_t)),"@@@"}),u={},f={};s=Up(s).replace(Pp,function(ht){var _t=Jb[ht],Gt=_t[0],Bt=_t[1],re=_t[3];if(u[Gt])throw new Error("Invalid format. "+Gt+" specified twice in format");return u[Gt]=!0,re&&(f[re]=!0),a.push(_t),"("+Bt+")"}),Object.keys(f).forEach(function(ht){if(!u[ht])throw new Error("Invalid format. "+ht+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=el(el({},xv),t),g=1;g<c.length;g++){var p=a[g-1],C=p[0],F=p[2],H=F?F(c[g],l):+c[g];if(H==null)return null;n[C]=H}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var tt;if(n.timezoneOffset==null){tt=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var at=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],g=0,ut=at.length;g<ut;g++)if(u[at[g][0]]&&n[at[g][0]]!==tt[at[g][1]]())return null}else if(tt=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return tt}var tE={format:Kp,parse:Zp,defaultI18n:Ed,setGlobalDateI18n:zp,setGlobalDateMasks:Hp},$p=tE;function eE(i){return function(e,t,r,n){for(var a=(0,d.isNil)(r)?0:r,o=(0,d.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var qp="format";function Qp(i,e){var t=j[qp]||$p[qp];return t(i,e)}function Ev(i){return(0,d.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,d.isDate)(i)&&(i=i.getTime()),i}var af=1e3,Rl=60*af,Bl=60*Rl,yc=24*Bl,Gh=yc*31,Jp=yc*365,zh=[["HH:mm:ss",af],["HH:mm:ss",af*10],["HH:mm:ss",af*30],["HH:mm",Rl],["HH:mm",Rl*10],["HH:mm",Rl*30],["HH",Bl],["HH",Bl*6],["HH",Bl*12],["YYYY-MM-DD",yc],["YYYY-MM-DD",yc*4],["YYYY-WW",yc*7],["YYYY-MM",Gh],["YYYY-MM",Gh*4],["YYYY-MM",Gh*6],["YYYY",yc*380]];function rE(i,e,t){var r=(e-i)/t,n=eE(function(o){return o[1]})(zh,r)-1,a=zh[n];return n<0?a=zh[0]:n>=zh.length&&(a=(0,d.last)(zh)),a}var nE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=Ev(t);var r=this.values.indexOf(t);return r===-1&&((0,d.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):Qp(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,d.each)(t,function(r,n){t[n]=Ev(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Bh),aE=nE,iE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,d.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,d.head)(t),n=(0,d.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,d.isNil)(this.minLimit)||(this.min=r),(0,d.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,d.getRange)(this.values),r=t.min,n=t.max;(0,d.isNil)(this.min)&&(this.min=r),(0,d.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,d.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(bd),wv=iE,oE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(wv),Uh=oE;function rl(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function Nu(i,e){return i===1?1:Math.log(e)/Math.log(i)}function t0(i,e,t){(0,d.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,d.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function e0(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function k_(i,e){var t=e0(i),r=e0(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var sE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=Nu(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=Nu(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=Nu(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=t0(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(Nu(a,r)-Nu(a,n)):s=(Nu(a,t)-Nu(a,n))/(Nu(a,r)-Nu(a,n)),s},e}(wv),uE=sE,fE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=rl(n,this.max),o=rl(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(rl(a,t)-rl(a,n))/(rl(a,r)-rl(a,n));return o},e}(wv),cE=fE,lE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):Qp(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,d.isString)(r)||(0,d.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return Ev(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,d.isNil)(r)||!(0,d.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,d.isNil)(n)||!(0,d.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,d.each)(t,function(f){var c=Ev(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,d.isNil)(r)&&(this.min=o),(0,d.isNil)(n)&&(this.max=u)}},e}(Uh),hE=lE,vE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,d.last)(r);if(o<0)return(0,d.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,d.last)(t)!==this.max&&t.push(this.max),(0,d.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,d.head)(r))return 0;if(t>(0,d.last)(r))return 1;var n=0;return(0,d.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(wv),r0=vE,dE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(r0),gE=dE,n0={};function pE(i){return n0[i]}function If(i,e){if(pE(i))throw new Error("type '"+i+"' existed.");n0[i]=e}var yE=function(i){(0,x.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,d.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(bd),mE=yE;function a0(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,d.isNumber)(t)){var a=(0,d.filter)(e,function(C,F){return F%t===0}),o=(0,d.last)(e);return n&&(0,d.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,d.isNil)(u)&&(u=0),(0,d.isNil)(f)&&(f=e.length-1),!(0,d.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],g=u,p=0;p<r&&!(g>=f);p++)g=Math.min(u+p*c,f),p===r-1&&n?l.push(e[f]):l.push(e[g]);return l}function xE(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new bE;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var wd=5,i0=Math.sqrt(50),o0=Math.sqrt(10),s0=Math.sqrt(2),bE=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=wd);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=Sv(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=Sv(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=Sv(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=wd),EE(this._domain[0],this._domain[this._domain.length-1],e||wd)},i}();function EE(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=Sv(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function Sv(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=i0?10:a>=o0?5:a>=s0?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=i0?10:a>=o0?5:a>=s0?2:1)}function u0(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function Sd(i,e,t){var r=u0(i,t,"floor"),n=u0(e,t,"ceil");r=(0,d.fixedBase)(r,t),n=(0,d.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,d.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function _d(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,d.isNil)(n)?(0,d.isNil)(e)?o:e:n,l=(0,d.isNil)(a)?(0,d.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var g=(l-c)/(f-1),p=[],C=0;C<f;C++)p.push(c+g*C);return p}function wE(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=xE(i);return!(0,d.isNil)(n)||!(0,d.isNil)(a)?_d(i,(0,d.head)(o),(0,d.last)(o)):r?Sd(e,t,r).ticks:o}function Fl(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var SE=[1,5,2,2.5,4,3],R_=null,f0=Number.EPSILON*100;function _E(i,e){return(i%e+e)%e}function ME(i){return Math.round(i*1e12)/1e12}function AE(i,e,t,r,n,a){var o=(0,d.size)(e),s=(0,d.indexOf)(e,i),u=0,f=_E(r,a);return(f<f0||a-f<f0)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function CE(i,e,t){var r=(0,d.size)(e),n=(0,d.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function TE(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function IE(i,e){return i>=e?2-(i-1)/(e-1):1}function OE(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function LE(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function DE(){return 1}function NE(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=SE),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(qr,Qr){return Fl(i+u*Qr)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<n.length;l+=1){var g=n[l],p=CE(g,n,c);if(a[0]*p+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var C=2;C<1/0;){var F=IE(C,o);if(a[0]*p+a[1]+a[2]*F+a[3]<f.score)break;for(var H=(e-i)/(C+1)/c/g,tt=Math.ceil(Math.log10(H));tt<1/0;){var at=c*g*Math.pow(10,tt),ut=LE(i,e,at*(C-1));if(a[0]*p+a[1]*ut+a[2]*F+a[3]<f.score)break;var ht=Math.floor(e/at)*c-(C-1)*c,_t=Math.ceil(i/at)*c;if(ht<=_t)for(var s=_t-ht,Gt=0;Gt<=s;Gt+=1){var Bt=ht+Gt,re=Bt*(at/c),xe=re+at*(C-1),se=at,Oe=AE(g,n,c,re,xe,se),Ve=OE(i,e,re,xe),Ir=TE(C,o,i,e,re,xe),Wr=DE(),Nr=a[0]*Oe+a[1]*Ve+a[2]*Ir+a[3]*Wr;Nr>f.score&&(!r||re<=i&&xe>=e)&&(f.lmin=re,f.lmax=xe,f.lstep=se,f.score=Nr)}tt+=1}C+=1}}c+=1}var Er=Fl(f.lmax),fn=Fl(f.lmin),rn=Fl(f.lstep),wr=Math.floor(ME((Er-fn)/rn))+1,kr=new Array(wr);kr[0]=Fl(fn);for(var l=1;l<wr;l++)kr[l]=Fl(kr[l-1]+rn);return{min:Math.min(i,(0,d.head)(kr)),max:Math.max(e,(0,d.last)(kr)),ticks:kr}}function PE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=NE(e,t,r,n).ticks;return!(0,d.isNil)(o)||!(0,d.isNil)(s)?_d(i,(0,d.head)(u),(0,d.last)(u)):a?Sd(e,t,a).ticks:u}function kE(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=Nu(e,n);if(r>0)o=Math.floor(Nu(e,r));else{var u=t0(a,e,n);o=Math.floor(Nu(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],g=o;g<s+c;g=g+c)l.push(Math.pow(e,g));return r<=0&&l.unshift(0),l}function c0(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),g=Math.max(c*f,e),p=Math.min(l*f,i),C=Math.floor((g-p)/f)+1,F=new Array(C),H=0;H<C;H++)F[H]=Fl(p+H*f);return{min:p,max:g,ticks:F}}function RE(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(rl(e,i.max)),n=Math.floor(rl(e,i.min)),a=c0(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function BE(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function FE(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(BE(r,o))}return n}function GE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=c0(e,t,r).ticks;return!(0,d.isNil)(a)||!(0,d.isNil)(o)?_d(i,(0,d.head)(s),(0,d.last)(s)):n?Sd(e,t,n).ticks:s}function zE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=rE(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function UE(i){var e=a0((0,x.__assign)({showLast:!0},i));return e}function _v(i){return new Date(i).getFullYear()}function WE(i){return new Date(i,0,1).getTime()}function Md(i){return new Date(i).getMonth()}function XE(i,e){var t=_v(i),r=_v(e),n=Md(i),a=Md(e);return(r-t)*12+(a-n)%12}function YE(i,e){return new Date(i,e,1).getTime()}function VE(i,e){return Math.ceil((e-i)/yc)}function jE(i,e){return Math.ceil((e-i)/Bl)}function HE(i,e){return Math.ceil((e-i)/(60*1e3))}function KE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=_v(e);if(a>Jp)for(var u=_v(t),f=Math.ceil(a/Jp),c=s;c<=u+f;c=c+f)o.push(WE(c));else if(a>Gh)for(var l=Math.ceil(a/Gh),g=Md(e),p=XE(e,t),c=0;c<=p+l;c=c+l)o.push(YE(s,c+g));else if(a>yc)for(var C=new Date(e),F=C.getFullYear(),H=C.getMonth(),tt=C.getDate(),at=Math.ceil(a/yc),ut=VE(e,t),c=0;c<ut+at;c=c+at)o.push(new Date(F,H,tt+c).getTime());else if(a>Bl)for(var C=new Date(e),F=C.getFullYear(),H=C.getMonth(),at=C.getDate(),ht=C.getHours(),_t=Math.ceil(a/Bl),Gt=jE(e,t),c=0;c<=Gt+_t;c=c+_t)o.push(new Date(F,H,at,ht+c).getTime());else if(a>Rl)for(var Bt=HE(e,t),re=Math.ceil(a/Rl),c=0;c<=Bt+re;c=c+re)o.push(e+c*Rl);else{var xe=a;xe<af&&(xe=af);for(var se=Math.floor(e/af)*af,Oe=Math.ceil((t-e)/af),Ve=Math.ceil(xe/af),c=0;c<Oe+Ve;c=c+Ve)o.push(se+c*af)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Tf("cat",a0),Tf("time-cat",UE),Tf("wilkinson-extended",PE),Tf("r-pretty",GE),Tf("time",zE),Tf("time-pretty",KE),Tf("log",kE),Tf("pow",RE),Tf("quantile",FE),Tf("d3-linear",wE),If("cat",Bh),If("category",Bh),If("identity",mE),If("linear",Uh),If("log",uE),If("pow",cE),If("time",hE),If("timeCat",aE),If("quantize",r0),If("quantile",gE);var ZE=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function $E(i){return(0,d.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function l0(i){return $E(i)}function qE(i){if(i.length<=2)return l0(i);var e=[];(0,d.each)(i,function(o){(0,d.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=Ni(e,!1),r=(0,d.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function QE(i,e,t,r){r===void 0&&(r=!0);var n=new Uh({values:i}),a=new Bh({values:(0,d.map)(i,function(s,u){return u})}),o=(0,d.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?qE(o):l0(o)}function JE(i,e,t,r){r===void 0&&(r=5);for(var n=new Uh({values:i}),a=new Bh({values:(0,d.map)(i,function(g,p){return p})}),o=(0,d.map)(i,function(g,p){return[a.scale(p)*e,t-n.scale(g)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=rw(c);s.push.apply(s,l)}return nw(s)}function tw(i,e){var t=new Uh({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function ew(i,e,t,r){var n=ZE([],i,!0),a=tw(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function rw(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,d.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,d.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function nw(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Wh=function(){return Wh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Wh.apply(this,arguments)},aw={stroke:"#C5C5C5",strokeOpacity:.85},iw={fill:"#CACED4",opacity:.85},ow=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,g=e.isArea,p=g===void 0?!1:g,C=e.data,F=C===void 0?[]:C,H=e.lineStyle,tt=e.areaStyle,at=e.group,ut=e.interval,ht=ut===void 0?null:ut;this.group=at,this.x=r,this.y=a,this.width=s,this.height=f,this.data=F,this.smooth=l,this.isArea=p,this.lineStyle=Object.assign({},aw,H),this.areaStyle=Object.assign({},iw,tt),this.intervalConfig=ht,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,g=this.group.addGroup({name:"trend-group"});if(s){var p=QE(s,n,a,u);if(g.addShape("path",{attrs:Wh({path:p},c),name:"trend-line"}),f){var C=ew(p,n,a,s);g.addShape("path",{attrs:Wh({path:C},l),name:"trend-area"})}}this.intervalConfig&&g.addShape("path",{attrs:Wh({path:JE(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),g.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),sw=ow,vh=function(){return vh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},vh.apply(this,arguments)},uw={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},fw={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},cw=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,g=l===void 0?24:l,p=e.style,C=p===void 0?{}:p;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=g,n==="trend"?this.style=vh(vh({},uw),C):n==="simple"&&(this.style=vh(vh({},fw),C)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,d.isNumber)(e)&&(this.x=e),(0,d.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),h0=cw,Hi=function(){return Hi=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Hi.apply(this,arguments)},lw=Jt,hw={fill:"#416180",opacity:.05},vw={fill:"#416180",opacity:.15,radius:5},dw={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Ad=2,gw={width:Ad,height:24},pw={textBaseline:"middle",fill:"#000",opacity:.45},yw={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},mw={lineWidth:1,stroke:"#ccc"},xw=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(qr){return function(Qr){t.currentHandler=qr;var gn=Qr.originalEvent;gn.stopPropagation(),gn.preventDefault(),t.prevX=(0,d.get)(gn,"touches.0.pageX",gn.pageX);var Tn=t.canvas.get("container");Tn.addEventListener("mousemove",t.onMouseMove),Tn.addEventListener("mouseup",t.onMouseUp),Tn.addEventListener("mouseleave",t.onMouseUp),Tn.addEventListener("touchmove",t.onMouseMove),Tn.addEventListener("touchend",t.onMouseUp),Tn.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(qr){qr.stopPropagation(),qr.preventDefault();var Qr=(0,d.get)(qr,"touches.0.pageX",qr.pageX),gn=Qr-t.prevX,Tn=t.adjustOffsetRange(gn/t.width);t.updateStartEnd(Tn),t.updateUI(),t.prevX=Qr},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var qr=t.canvas.get("container");qr&&(qr.removeEventListener("mousemove",t.onMouseMove),qr.removeEventListener("mouseup",t.onMouseUp),qr.removeEventListener("mouseleave",t.onMouseUp),qr.removeEventListener("touchmove",t.onMouseMove),qr.removeEventListener("touchend",t.onMouseUp),qr.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,g=e.trendCfg,p=e.controllerCfg,C=p===void 0?{speed:1}:p,F=e.backgroundStyle,H=F===void 0?{}:F,tt=e.foregroundStyle,at=tt===void 0?{}:tt,ut=e.handlerStyle,ht=ut===void 0?{}:ut,_t=e.textStyle,Gt=_t===void 0?{}:_t,Bt=e.start,re=Bt===void 0?0:Bt,xe=e.end,se=xe===void 0?1:xe,Oe=e.minText,Ve=Oe===void 0?"":Oe,Ir=e.maxText,Wr=Ir===void 0?"":Ir,Nr=e.group,Er=e.graph,fn=e.canvas,rn=e.tick,wr=rn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Qr){return Qr},ticks:[]}:rn,kr=e.type;this.graph=Er,this.canvas=fn,this.group=Nr,this.timeBarType=kr,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=wr.ticks,this.trendCfg=g,this.controllerCfg=C,this.currentSpeed=C.speed||1,this.tickLabelFormatter=wr.tickLabelFormatter,kr==="trend"?this.backgroundStyle=Hi(Hi({},hw),H):kr==="simple"&&(this.backgroundStyle=Hi(Hi({},vw),H)),this.foregroundStyle=Hi(Hi({},dw),at),this.handlerStyle=Hi(Hi({},gw),ht),this.textStyle=Hi(Hi({},pw),Gt),this.tickLabelStyle=Hi(Hi({},yw),wr.tickLabelStyle),this.tickLineStyle=Hi(Hi({},mw),wr.tickLineStyle),this.currentMode=C.defaultTimeType||Cf.RANGE,this.start=re,this.end=se,this.minText=Ve,this.maxText=Wr,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,d.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,d.size)((0,d.get)(this.trendCfg,"data"))){var o=new sw(Hi(Hi({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Hi({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:Hi({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Hi({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Hi({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Hi({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Hi({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(tt){tt.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(tt){tt.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,d.get)(this.handlerStyle,"width",2),c=(0,d.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new h0({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var g=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new h0({name:"maxHandlerShape",group:g,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var p=this.ticks,C=r/(p.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(tt){tt.destroy()});var F=-1/0,H=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=p.map(function(tt,at){e.tickPosList.push(e.x+at*C);var ut;e.tickLabelFormatter?(ut=e.tickLabelFormatter(tt),!(0,d.isString)(ut)&&ut&&(ut=tt.date)):ut=tt.date;var ht=e.x+at*C,_t=e.y+n+5,Gt=e.group.addShape("text",{attrs:Hi({x:ht,y:_t,text:ut,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,d.isNumber)(H)&&at!==p.length-1){var Bt=lw([1,0,0,0,1,0,0,0,1],[["t",-ht,-_t],["r",H],["t",ht-5,_t+2]]);Gt.attr({textAlign:"left",matrix:Bt})}at===0?Gt.attr({textAlign:"left"}):at!==p.length-1&&Gt.attr({textAlign:"right"});var re=e.group.addShape("line",{attrs:Hi({x1:e.x+at*C,y1:e.y+n+2,x2:e.x+at*C,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});re.toBack();var xe=Gt.getBBox();return xe.minX>F?(Gt.show(),re.show(),F=xe.minX+xe.width+10):(Gt.hide(),re.hide()),Gt}),this.controllerBtnGroup=new Dp(Hi({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Cf.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(qc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Nh,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Ph,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(kl,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Cf.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Cf.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,d.get)(this.handlerStyle,"width",Ad);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,d.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,d.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Cf.RANGE?this.graph.emit(Af,{value:[this.start,this.end].sort()}):this.currentMode===Cf.SINGLE&&this.graph.emit(Af,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,d.get)(this.handlerStyle,"width",Ad),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),g=s.getBBox(),p=null,C=null;return this.timeBarType==="trend"?(p=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},C=f+g.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(p=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},C=s.attr("x")>this.width-g.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[C,p]:[p,C]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Tp,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Ip,null))},i.prototype.destory=function(){this.graph.off(Af,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(qc,":click")),e.off("".concat(Nh,":click")),e.off("".concat(Ph,":click")),e.off(kl),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),bw=xw,Ew=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mc=function(){return mc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},mc.apply(this,arguments)},ww=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},Sw=4,_w=26,Mw=function(i){Ew(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,d.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,d.isString)(u)&&(u=document.getElementById(u)),f=u):(f=ro("<div class='".concat(s,"'></div>")),Xa(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var l,g=t.get("renderer");g==="SVG"?l=new Ih({container:f,width:n,height:a}):l=new dc({container:f,width:n,height:a}),this.get("containerCSS")&&Xa(f,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,g=r.textStyle,p=r.tick,C=r.backgroundStyle,F=r.foregroundStyle,H=f.data,tt=ww(f,["data"]),at=n-2*s,ut=u==="trend"?_w:Sw,ht=this.get("graph"),_t=this.get("timeBarGroup"),Gt=this.get("canvas"),Bt=null;if(u==="trend"||u==="simple"){var re=this.get("getValue");Bt=new bw(mc(mc({graph:ht,canvas:Gt,group:_t,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:at,height:ut,padding:s,backgroundStyle:C,foregroundStyle:F,trendCfg:mc(mc({},tt),{data:H.map(function(se){return(re==null?void 0:re(se))||se.value})})},c),{tick:{ticks:H,tickLabelFormatter:p.tickLabelFormatter,tickLabelStyle:p.tickLabelStyle,tickLineStyle:p.tickLineStyle},handlerStyle:mc(mc({},c.handlerStyle),{height:c.height||ut}),controllerCfg:l,textStyle:g}))}else u==="tick"&&(Bt=new Yb(mc({graph:ht,canvas:Gt,group:_t,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},p)));var xe=function se(){var Oe=t.get("timebar");Oe.draggingHandler=!1,Oe.isPlay&&(Oe.isPlay=!1,Oe.currentHandler=Oe.maxHandlerShape,Oe.changePlayStatus()),document.removeEventListener("mouseup",se)};Gt.on("mousedown",function(se){(se.target.get("name")==="maxHandlerShape-handler"||se.target.get("name")==="minHandlerShape-handler"||se.target===Bt.foregroundShape)&&document.addEventListener("mouseup",xe)}),this.set("timebar",Bt)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var g=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,p=g?g(o[c]):o[c].date,C=g?g(o[l]):o[l].date;if(s!=="tick"){var F=this.get("timebar");F.setText(p,C)}if(u)u(f,p,C);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var H=this.get("filterItemTypes"),tt=this.get("changeData"),at=this.get("getDate"),ut=this.get("shouldIgnore"),ht=o[c].date,_t=o[l].date;if(tt||tt===void 0){var Gt=this.cacheGraphData.nodes,Bt=this.cacheGraphData.edges,re={},xe={};f.getNodes().forEach(function(se){return re[se.getID()]=!0}),f.getEdges().forEach(function(se){return xe[se.getID()]=!0}),H.includes("node")&&(Gt==null||Gt.forEach(function(se){var Oe=+((at==null?void 0:at(se))||se.date),Ve=Oe>=ht&&Oe<=_t||(ut==null?void 0:ut("node",se,{min:ht,max:_t})),Ir=re[se.id];Ir&&!Ve?(f.removeItem(se.id),re[se.id]=!1):!Ir&&Ve&&(f.addItem("node",se),re[se.id]=!0)}),Bt==null||Bt.forEach(function(se){var Oe=re[se.source]&&re[se.target]||(ut==null?void 0:ut("edge",se,{min:ht,max:_t})),Ve=!!f.findById(se.id);Ve&&!Oe?(f.removeItem(se.id),xe[se.id]=!1):!Ve&&Oe?(f.addItem("edge",se),xe[se.id]=!0):Ve||(xe[se.id]=!1)})),(this.get("filterEdge")||H.includes("edge"))&&(Bt==null||Bt.filter(function(se){var Oe=+((at==null?void 0:at(se))||se.date),Ve=Oe>=ht&&Oe<=_t||(ut==null?void 0:ut("edge",se,{min:ht,max:_t})),Ir=re[se.source]&&re[se.target],Wr=Ve&&Ir,Nr=xe[se.id];Nr&&!Wr?(xe[se.id]=!1,f.removeItem(se.id)):!Nr&&Wr&&(xe[se.id]=!0,f.addItem("edge",se))}))}else H.includes("node")&&f.getNodes().forEach(function(se){var Oe=se.getModel();if(!(ut!=null&&ut("node",Oe,{min:ht,max:_t}))){var Ve=+((at==null?void 0:at(Oe))||Oe.date);Ve<ht||Ve>_t?f.hideItem(se):f.showItem(se)}}),(this.get("filterEdge")||H.includes("edge"))&&f.getEdges().forEach(function(se){var Oe=se.getModel();if(!(ut!=null&&ut("edge",Oe,{min:o[c].date,max:o[l].date}))){var Ve=+((at==null?void 0:at(Oe))||Oe.date);if(Ve<o[c].date||Ve>o[l].date)f.hideItem(se);else{var Ir=se.getSource().isVisible(),Wr=se.getTarget().isVisible();Ir&&Wr&&f.showItem(se)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Af,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Af,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,d.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(Js),Aw=Mw,Cw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tw=Ms.applyMatrix;function Iw(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var Ow=function(i){Cw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,d.isString)(a)&&(a=document.getElementById(a));var o=ro("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,g=0,p=0,C=0,F=0;a.addEventListener("mousedown",function(H){if(r.refresh=!1,H.target===o){var tt=o.style;g=parseInt(tt.width,10),p=parseInt(tt.height,10);var at=t.get("width"),ut=t.get("height");g>at||p>ut||(F=n.getZoom(),C=t.get("ratio"),f=!0,s=H.clientX,u=H.clientY)}},!1),a.addEventListener("mousemove",function(H){if(!(!f||(0,d.isNil)(H.clientX)||(0,d.isNil)(H.clientY))){var tt=t.get("width"),at=t.get("height"),ut=o.style;c=parseInt(ut.left,10),l=parseInt(ut.top,10),g=parseInt(ut.width,10),p=parseInt(ut.height,10);var ht=s-H.clientX,_t=u-H.clientY;c-ht<0?ht=c:c-ht+g>=tt&&(ht=0),l-_t<0?_t=l:l-_t+p>=at&&(_t=0),c-=ht,l-=_t,Xa(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(ht*F/C,_t*F/C),s=H.clientX,u=H.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],g=[c.maxX-c.minX,c.maxY-c.minY],p={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(p.width=g[0],p.height=p.width/u):(p.height=g[1],p.width=p.height*u),p.minX=l[0]-p.width/2,p.minY=l[1]-p.height/2;var C=f.getMatrix();C||(C=[1,0,0,0,1,0,0,0,1]);var F=ot.invert([1,0,0,0,1,0,0,0,1],C),H=Tw({x:p.minX,y:p.minY},F),tt=a.getCanvasByPoint(H.x,H.y),at=this.get("viewport");at||this.initViewport();var ut=o/p.width,ht=ut*r,_t=ut*n,Gt=r*-tt.x/p.width,Bt=n*-tt.y/p.height,re=Gt+ht,xe=Bt+_t;Gt<0&&(ht+=Gt,Gt=0),re>r&&(ht=ht-(re-r)),Bt<0&&(_t+=Bt,Bt=0),xe>n&&(_t=_t-(xe-n)),this.set("ratio",t);var se="".concat(Gt,"px"),Oe="".concat(Bt,"px");Xa(at,{left:se,top:Oe,width:"".concat(ht,"px"),height:"".concat(_t,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=ro("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,d.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var g=ro('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(g);var p=ro('<span style="display: table-cell; vertical-align: middle; "></span>');g.appendChild(p),t.set("containerDOM",g),t.set("containerSpan",p);var C=ro('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",C),t.updateImgSize(),p.appendChild(C),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=Iw(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=ro('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(Js),Lw=Ow,Dw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cd=function(){return Cd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Cd.apply(this,arguments)},Nw=Ms.distance,v0=.05,d0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},Pw=function(i){Dw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,d.clone)(d0),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-v0:a=1/(1-v0);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(tt){tt.remove(),tt.destroy()}),l=[],a.forEach(function(tt){var at=tt.getModel(),ut=at.x,ht=at.y;Nw({x:ut,y:ht},f)<s&&(o[at.id]=tt)});var g=n.getEdges(),p=[];g.forEach(function(tt){var at=tt.getModel(),ut=at.source,ht=at.target;c(at)&&(u==="only-source"||u==="one"?o[ut]&&!o[ht]&&p.push(tt):u==="only-target"||u==="one"?o[ht]&&!o[ut]&&p.push(tt):u==="both"&&o[ut]&&o[ht]&&p.push(tt))});var C=r.get("showNodeLabel"),F=r.get("showEdgelabel"),H=n.get("group");p.forEach(function(tt){var at=tt.get("group").get("children");at.forEach(function(ut){var ht=ut.get("type"),_t=H.addShape(ht,{attrs:ut.attr()});l.push(_t),C&&ht==="text"&&_t.set("visible",!0)})}),Object.keys(o).forEach(function(tt){var at=o[tt],ut=at.get("group").clone();if(H.add(ut),l.push(ut),F)for(var ht=ut.get("children"),_t=0;_t<ht.length;_t++){var Gt=ht[_t];Gt.get("type")==="text"&&Gt.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||d0;o=s.addShape("circle",{attrs:Cd({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(Js),kw=Pw,Rw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bw=Ms.pointLineDistance,Fw={stroke:"#FA8C16",lineWidth:1},Gw=function(i){Rw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:Fw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,d.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},g={x:n.x+r.width/2,y:n.y+r.height},p={x:n.x,y:n.y+r.height/2},C={x:n.x+r.width,y:n.y+r.height/2},F=[],H=[],tt=null;if(this.clearAlignLine(),(0,d.each)(s,function(ut){ut[4].isVisible&&(F.push(a.getLineDisObject(ut,c)),F.push(a.getLineDisObject(ut,l)),F.push(a.getLineDisObject(ut,g)))}),(0,d.each)(u,function(ut){ut[4].isVisible&&(H.push(a.getLineDisObject(ut,p)),H.push(a.getLineDisObject(ut,l)),H.push(a.getLineDisObject(ut,C)))}),F.sort(function(ut,ht){return ut.dis-ht.dis}),H.sort(function(ut,ht){return ut.dis-ht.dis}),F.length!==0&&F[0].dis<f){t.y=F[0].line[1]-F[0].point.y+n.y,tt={type:"item",horizontals:[F[0]]};for(var at=1;at<3;at++)F[0].dis===F[at].dis&&tt.horizontals.push(F[at])}if(H.length!==0&&H[0].dis<f){t.x=H[0].line[0]-H[0].point.x+n.x,tt?tt.verticals=[H[0]]:tt={type:"item",verticals:[H[0]]};for(var at=1;at<3;at++)H[0].dis===H[at].dis&&tt.verticals.push(H[at])}tt&&(tt.bbox=r,this.addAlignLine(tt))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,d.each)(a,function(g){var p=g.line,C=g.point,F=(p[0]+p[2])/2,H,tt;C.x<F?(H=C.x-r.width/2,tt=Math.max(p[0],p[2])):(H=C.x+r.width/2,tt=Math.min(p[0],p[2]));var at=(0,d.mix)({x1:H,y1:p[1],x2:tt,y2:p[1]},u),ut=l.addShape("line",{attrs:at,capture:!1});f.push(ut)}),o&&(0,d.each)(o,function(g){var p=g.line,C=g.point,F=(p[1]+p[3])/2,H,tt;C.y<F?(H=C.y-r.height/2,tt=Math.max(p[1],p[3])):(H=C.y+r.height/2,tt=Math.min(p[1],p[3]));var at=(0,d.mix)({x1:p[0],y1:H,x2:p[0],y2:tt},u),ut=l.addShape("line",{attrs:at,capture:!1});f.push(ut)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:Bw(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,d.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(Js),zw=Gw,Uw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bo=function(){return bo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},bo.apply(this,arguments)},Ww=["click","mouseenter"],Xw=function(i){Uw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=ro(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();Xa(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,g={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(p){var C=s[f[p]],F=p;switch(p){case"top":C+=l;break;case"left":C+=c;break;case"bottom":C=n.getHeight()-t[1]-C+l,F="top";break;default:C=n.getWidth()-t[0]-C+c,F="left";break}g[F]=C}),g.top+=o+n.getContainer().offsetTop,g.left+=a+n.getContainer().offsetLeft,Object.keys(g).forEach(function(p){g[p]="".concat(g[p],"px")}),g},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";Ww.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();Xa(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var g=l.get("children"),p=g[0],C=g[1];p.attr(bo(bo({},p.get("oriAttrs")),s)),C.attr(bo(bo({},C.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var g=l.get("children"),p=g[0],C=g[1];p.attr(bo(bo({},p.get("oriAttrs")),f)),C.attr(bo(bo({},C.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(tt){return tt.get("name")==="root"}),l=c.find(function(tt){return tt.get("name")==="node-group"}),g=c.find(function(tt){return tt.get("name")==="edge-group"}),p=l.get("children").filter(function(tt){return tt.get("active")}),C=g.get("children").filter(function(tt){return tt.get("active")}),F=0,H=["getNodes","getEdges"];H.forEach(function(tt){o[tt]().forEach(function(at){var ut=!1,ht=tt==="getNodes"?p:C;ht.forEach(function(_t){var Gt=n[_t.get("id")];ut=ut||Gt(at.getModel())}),ut?(o.setItemState(at,u,!1),o.setItemState(at,s,!0),F++):(o.setItemState(at,s,!1),o.setItemState(at,u,!0))})}),F||H.forEach(function(tt){o[tt]().forEach(function(at){o.clearItemStates(at,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new dc({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(Er,fn){s[Er].forEach(function(rn){var wr,kr=f[fn].addGroup({id:rn.id,name:"node-container"}),qr,Qr=rn.type,gn=t.getShapeSize(rn),Tn=gn.width,fa=gn.height,Oa=gn.r,pi=t.getStyle(Er.substr(0,4),rn);switch(rn.type){case"circle":qr={r:Oa,x:0,y:0};break;case"rect":qr={width:Tn,height:fa,x:-Tn/2,y:-fa/2};break;case"ellipse":qr={rx:Tn,ry:fa,x:0,y:0},Qr="ellipse";break;case"line":qr={x1:-Tn/2,y1:0,x2:Tn/2,y2:0},Qr="line";break;case"quadratic":qr={path:[["M",-Tn/2,0],["Q",0,Tn/2,Tn/2,0]]},Qr="path";break;case"cubic":qr={path:[["M",-Tn/2,0],["C",-Tn/6,Tn/2,Tn/6,-Tn/2,Tn/2,0]]},Qr="path";break;case"diamond":qr={path:[["M",0,-fa],["L",Tn,0],["L",0,fa],["L",-Tn,0],["Z"]]},Qr="path";break;case"triangle":qr={path:[["M",-Tn,fa],["L",0,-fa],["L",Tn,fa],["Z"]]},Qr="path";break;case"star":qr={path:Ms.getStarPath(Oa*3,Oa*1.2)},Qr="path";break;default:qr={r:Oa,x:0,y:0};break}var ri=kr.addShape(Qr,{attrs:bo(bo({},qr),pi),name:"".concat(rn.type,"-node-keyShape"),oriAttrs:bo({opacity:1},pi)});if(rn.label){var yi=ri.getBBox(),Si=((wr=rn.labelCfg)===null||wr===void 0?void 0:wr.style)||{},Ki=bo({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},Si);kr.addShape("text",{attrs:bo({x:yi.maxX+4,y:0,text:rn.label},Ki),className:"legend-label",name:"".concat(rn.type,"-node-text"),oriAttrs:Ki})}})});var c=this.get("padding"),l,g=n.find(function(Er){return Er.get("name")==="title-container"}),p={height:0,maxY:0,width:0};if(this.get("title")){g||(g=n.addGroup({name:"title-container"}));var C={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},F=this.get("titleConfig")||{},H=Object.assign(C,F.style||{});l=g.addShape("text",{attrs:bo({text:this.get("title")},H)}),p=g.getCanvasBBox(),g.setMatrix([1,0,0,0,1,0,F.offsetX,F.offsetY,1])}this.layoutItems();var tt=n.getCanvasBBox(),at=a.getCanvasBBox(),ut=at.minX<0?Math.abs(at.minX)+c[3]:c[3],ht=p.maxY<at.minY?Math.abs(p.maxY-at.minY)+c[0]:p.maxY+c[0],_t=[1,0,0,0,1,0,ut,ht,1];a.setMatrix(_t),tt=n.getCanvasBBox();var Gt=[tt.minX+tt.width+c[1],tt.minY+tt.height+c[2]];if(l){var F=bo({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));p=g.getCanvasBBox();var Bt=g.getMatrix()||[1,0,0,0,1,0,0,0,1];F.position==="center"?Bt[6]=Gt[0]/2+F.offsetX:F.position==="right"?(Bt[6]=Gt[0]-c[3]+F.offsetX,l.attr({textAlign:"right"})):(Bt[6]=c[3]+F.offsetX,l.attr({textAlign:"left"})),g.setMatrix(Bt),p=g.getCanvasBBox(),ut=at.minX<0?Math.abs(at.minX)+c[3]:c[3],ht=at.minY<p.maxY?Math.abs(p.maxY-at.minY)+c[0]:p.maxY+c[0],_t=[1,0,0,0,1,0,ut,ht,1],a.setMatrix(_t);var re=[1,0,0,0,1,0,ut,ht,1];this.get("layout")==="vertical"?re[6]+=at.maxX+this.get("horiSep"):re[7]+=at.maxY+this.get("vertiSep"),o.setMatrix(re)}else{at=a.getCanvasBBox();var xe=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?xe[6]+=_t[6]+at.maxX+this.get("horiSep"):xe[7]+=_t[7]+at.maxY+this.get("vertiSep"),o.setMatrix(xe)}tt=n.getCanvasBBox(),at=a.getCanvasBBox(),_t=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var se=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Oe=o.getCanvasBBox();Gt=[Math.max(at.width+_t[6],Oe.width+se[6])+c[1],Math.max(at.height+_t[7],Oe.height+se[7])+c[2]],r.changeSize(Gt[0],Gt[1]);var Ve=this.get("containerStyle"),Ir=n.getMatrix()||[1,0,0,0,1,0,0,0,1],Wr=Ms.invertMatrix({x:0,y:0},Ir),Nr=n.addShape("rect",{attrs:bo({x:Wr.x+(Ve.lineWidth||1),y:Wr.y+(Ve.lineWidth||1),width:Gt[0]-2*(Ve.lineWidth||1),height:Gt[1]-2*(Ve.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},Ve),name:"legend-back-rect",capture:!1});return Nr.toBack(),Gt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(ht){return ht.get("name")==="root"}),f=u.find(function(ht){return ht.get("name")==="node-group"}),c=u.find(function(ht){return ht.get("name")==="edge-group"}),l={min:0,max:-1/0},g=-1/0;f.get("children").forEach(function(ht,_t){_t===0&&(l.min=s[0]);var Gt=ht.get("children")[0],Bt=ht.getCanvasBBox(),re=Gt.getBBox(),xe=re.width,se=re.height,Oe=0,Ve=0,Ir=0;a==="vertical"?(Ve=s[1],Ir=s[0]+xe/2,s[0]=Ir+Bt.height+n,Oe=Bt.maxX+Ve+xe/2):(Ve=s[0]+xe/2,Ir=s[1],s[0]=Ve+Bt.width+r,Oe=Bt.maxY+Ir+se/2),s[0]>l.max&&(l.max=s[0]),Oe>g&&(g=Oe),ht.setMatrix([1,0,0,0,1,0,Ve,Ir,1])});var p=l.max-l.min,C={min:0,max:-1/0},F=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?F.maxX+r:F.maxY+n,c.get("children").forEach(function(ht,_t){_t===0&&(C.min=s[0]);var Gt=ht.get("children")[0],Bt=ht.getCanvasBBox(),re=Gt.getBBox(),xe=re.width,se=re.height,Oe=0,Ve=0;a==="vertical"?(Oe=s[1],Ve=s[0],s[0]=Ve+Bt.height+n,ht.setMatrix([1,0,0,0,1,0,0,Ve+se/2,1])):(Oe=s[0],Ve=s[1],s[0]=Oe+Bt.width+r,ht.setMatrix([1,0,0,0,1,0,Oe+xe/2,0,1])),s[0]>C.max&&(C.max=s[0])});var H=C.max-C.min;if(o&&o!==""&&o!=="left"){var tt=p-H,at=o==="center"?Math.abs(tt)/2:Math.abs(tt),ut=tt<0?f:c;ut.get("children").forEach(function(ht){var _t=ht.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?_t[7]+=at:_t[6]+=at,ht.setMatrix(_t)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,d.uniqueId)(),type:n.type||"circle",style:bo({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:bo({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,d.uniqueId)(),type:s,size:f,style:bo({lineWidth:(0,d.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:bo({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,d.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,d.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,d.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,d.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return bo(bo({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(Js),Yw=Xw,Vw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pu=function(){return Pu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Pu.apply(this,arguments)},g0=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&yv()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var p0="canvas-annotation",jw=function(i){Vw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Pu(Pu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",g=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),p="<p class='g6-annotation-close'>x</p>",C=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(C,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(p,`
        </div>
        `).concat(g,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new dc({container:n,width:s.right-s.left,height:s.bottom-s.top});Xa(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,d.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var g,p=((g=l==null?void 0:l.getModel)===null||g===void 0?void 0:g.call(l))||{},C=p.label,F=p.id;return C||F||"-"}),t.get("getContent")||t.set("getContent",function(l){var g,p;if(!l)return"-";var C=((g=l.getModel)===null||g===void 0?void 0:g.call(l))||{},F=C.label,H=C.id,tt=(p=l.getType)===null||p===void 0?void 0:p.call(l),at=tt?"".concat(tt,": "):"";return"".concat(at).concat(F||H||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,g=u-s,p=r.position,C=p===void 0?"top":p,F=r.offsetX,H=F===void 0?0:F,tt=r.offsetY,at=tt===void 0?0:tt,ut=g0(r,["position","offsetX","offsetY"]),ht=r.height,_t=ht===void 0?"fit-content":ht,Gt=r.width,Bt=Gt===void 0?n.getWidth():Gt;_t==="100%"&&(_t=l),Bt==="100%"&&(Bt=g);var re="unset",xe="unset",se={};switch(C){case"right":re="".concat(l,"px"),se={top:0,right:0},se.right+=s+H,se.top+=f+at;break;case"bottom":xe="".concat(g,"px"),se={bottom:0,left:0},se.left+=s+H,se.bottom+=f+at;break;case"top":xe="".concat(g,"px");case"left":re="".concat(l,"px");default:se={top:0,left:0},se.left+=s+H,se.top+=f+at;break}Object.keys(se).forEach(function(Ve){se[Ve]="".concat(se[Ve],"px")});var Oe=ro("<div class='".concat(r.className," g6-annotation-container'></div>"));return Xa(Oe,Pu(Pu({position:"absolute",display:C==="top"||C==="bottom"?"inline-flex":"unset",width:(0,d.isNumber)(Bt)?"".concat(Bt,"px"):Bt,height:(0,d.isNumber)(_t)?"".concat(_t,"px"):_t,maxHeight:re,maxWidth:xe,overflow:"scroll"},se),ut)),a.appendChild(Oe),Oe.addEventListener("scroll",function(Ve){t.updateLinks()}),Oe}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),g=l.x,p=l.y;Object.values(n).forEach(function(C){var F=C.card;if(F){var H=F.style,tt=Gl(H.left),at=Gl(H.top),ut=F.getBoundingClientRect(),ht=ut.width,_t=ut.height,Gt=tt,Bt=at;tt+ht>g-f&&(Gt=g-f-ht),tt<0&&(Gt=0),at+_t>p-c&&(Bt=p-c-_t),at<0&&(Bt=0),Xa(F,{left:"".concat(Gt,"px"),top:"".concat(Bt,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),g=l.minHeight,p=l.minWidth,C=l.width,F=l.height,H=l.collapsed,tt=H===void 0?!1:H,at=l.x,ut=l.y,ht=l.title,_t=l.content,Gt=l.maxTitleLength,Bt=l.defaultBegin,re=g0(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),xe=o.get("linkGroup"),se=this.get("rows")||[[]],Oe=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),Ve=Oe?p0:t.getID(),Ir=s[Ve]||{},Wr=Ir.card,Nr=Ir.link,Er=Ir.x,fn=Ir.y,rn=Ir.title,wr=Ir.content,kr=this.get("getTitle"),qr=this.get("getContent"),Qr=this.get("getContentPlaceholder")||function(){return""},gn=this.get("getTitlePlaceHolder")||function(){return""},Tn=Qr(t),fa=gn(t),Oa=ro(this.getDOMContent(Pu({itemId:Ve,collapsed:tt,title:((a=rn||ht||(kr==null?void 0:kr(t)))===null||a===void 0?void 0:a.substr(0,Gt))||fa,content:wr||_t||(qr==null?void 0:qr(t))||Tn},re))),pi=(0,d.isNumber)(g)?"".concat(g,"px"):g;Xa(Oa,{minHeight:tt?"unset":pi,minWidth:(0,d.isNumber)(p)?"".concat(p,"px"):p,height:F,width:C});var ri=!!Wr;ri?(Nr==null||Nr.remove(!0),f.replaceChild(Oa,Wr)):f.appendChild(Oa);var yi;if(!c){if(yi=f.getBoundingClientRect()||{},at!==void 0&&ut!==void 0)Er=at,fn=ut;else if(!ri&&!Oe){var Si=yi.top,Ki=Bt||{},Pi=Ki.left,ku=Ki.right,rs=ku===void 0?16:ku,Ru=Ki.top,ns=Ru===void 0?8:Ru,as=Ki.bottom,pu=rs,As=ns;isNaN(Pi)||(pu=f.scrollWidth-Pi),isNaN(as)||(As=f.scrollHeight-as);var Xs=(0,d.isNumber)(p)?p:100;Er=f.scrollWidth-Oa.scrollWidth-(se.length-1)*Xs-pu;var Ya=se[se.length-1],di=(Ya[Ya.length-1]||{}).bbox;fn=(di==null?void 0:di.bottom)-Si||As}Xa(Oa,{position:"absolute",left:"".concat(Er,"px"),top:"".concat(fn,"px"),cusor:c?"unset":"move"})}this.bindListener(Oa,Ve);var Ua=Oa.getBoundingClientRect();if(!Oe){var gi=Td(t,Ua,u,this.get("canvas")),Oi=this.get("linkStyle");Nr=xe.addShape("path",{attrs:Pu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:gi},Oi)})}if(s[Ve]=Pu(Pu({},s[Ve]||{}),{id:Ve,collapsed:tt,card:Oa,link:Nr,x:Er,y:fn,cardBBox:Ua,content:wr||_t,title:rn||ht,contentPlaceholder:Tn,titlePlaceholder:fa,isCanvas:Oe}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Xn=!isNaN(at)&&!isNaN(ut);if(!ri&&!Oe&&!Xn){var Ha=yi.bottom,Za=Ha===void 0?0:Ha,Si=yi.top;se[se.length-1].push({id:Ve,bbox:Ua}),Ua.top>Za-Si-Ua.height-16&&se.push([]),this.set("rows",se)}}this.updateCardSize(Ve);var Li=this.get("onAnnotationChange");Li==null||Li(s[Ve],ri?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Gl(o.paddingLeft)+Gl(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":Xa(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":Xa(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Pu(Pu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;Xa(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var g=n.get("itemHighlightState");c.setItemState(l,g,!0)}var p=f[r].link;if(p){var C=n.get("linkHighlightStyle")||{};p.attr(C)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var g=n.get("itemHighlightState");c.setItemState(l,g,!1)}var p=f[r].link;if(p){var C=n.get("linkHighlightStyle")||{};Object.keys(C).forEach(function(H){p.attr(H,void 0),p.attr(H,void 0)});var F=n.get("linkStyle");p.attr(F)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(f){var g=u.target,p=g.className;if(!(p!=="g6-annotation-title"&&p!=="g6-annotation-content")){var C=p==="g6-annotation-title"?g.getBoundingClientRect():g.parentNode.getBoundingClientRect(),F=C.width,H=C.height,tt=getComputedStyle(g),at=p==="g6-annotation-title"?"input":"textarea",ut=ro("<".concat(at,' class="').concat(p,'-input" type="textarea" style="width:').concat(F,"px; height: ").concat(H,'px; min-width: 16px;"/>')),ht=ro('<div class="'.concat(p,'-input-wrapper" style="width: ').concat(F,"px; height: ").concat(H,"px; min-width: 16px; margin-right: ").concat(tt.marginRight,'" />'));ht.appendChild(ut),g.parentNode.replaceChild(ht,g);var _t=f[r],Gt=_t.contentPlaceholder,Bt=_t.titlePlaceholder,re=_t.content,xe=_t.title,se=re;p==="g6-annotation-title"?(ut.name="title",ut.maxLength=l,se=xe):ut.name="content",se?(ut.innerHTML=g.innerHTML,ut.value=g.innerHTML):ut.placeholder=p==="g6-annotation-title"?Bt:Gt,ut.focus(),ut.addEventListener("blur",function(Oe){ut.value&&(g.innerHTML=ut.value,_t[ut.name||"title"]=ut.value),ht.parentNode.replaceChild(g,ht),n.updateCardSize(r);var Ve=n.get("onAnnotationChange");Ve==null||Ve(_t,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Gl(c.left),top:Gl(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,l=u.clientY,g=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!g)){var p=g.x,C=g.y,F=g.left,H=g.top,tt=g.card,at=c-p,ut=l-C;F+=at,H+=ut;var ht=n.get("graph"),_t=ht.getPointByCanvas(0,0),Gt=ht.getPointByCanvas(ht.getWidth(),ht.getHeight()),Bt=ht.getClientByPoint(_t.x,_t.y),re=Bt.x,xe=Bt.y,se=ht.getClientByPoint(Gt.x,Gt.y),Oe=se.x,Ve=se.y,Ir=tt.getBoundingClientRect(),Wr=Ir.right-Ir.left,Nr=Ir.bottom-Ir.top;(F>Oe-re-Wr&&at>0||F<0&&at<0)&&(F-=at),(H>Ve-xe-Nr&&ut>0||H<0&&ut<0)&&(H-=ut),Xa(tt,{left:"".concat(F,"px"),top:"".concat(H,"px"),visibility:"hidden"}),p=c,C=l;var Er=(f[r]||{}).link;if(Er){var fn=ht.findById(r);Er.attr("path",Td(fn,Ir,ht,n.get("canvas")))}n.set("dragging",{x:p,y:C,left:F,top:H,card:tt})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var l=n.get("dragging");if(l){var g=l.left,p=l.top,C=l.card;c[r].x=g,c[r].y=p,Xa(C,{visibility:"visible"}),n.set("dragging",!1);var F=n.get("rows");F==null||F.forEach(function(tt){for(var at=tt.length-1;at>=0;at--)tt[at].id===r&&tt.splice(at,1)});var H=n.get("onAnnotationChange");H==null||H(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Gl(s.marginLeft),f=o.getBoundingClientRect().width;Xa(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=Td(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,g=u.y,p=u.id,C=u.collapsed,F=u.card;if(!(F&&F.style.display==="none"&&!t)){var H=n.findById(p)||n.get("canvas");s.push({id:p,x:l,y:g,collapsed:C,title:f||(a==null?void 0:a(H)),content:c||(o==null?void 0:o(H)),visible:F&&F.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,g=a.visible,p=n.findById(o);if(!p&&o===p0&&(p=n.get("canvas")),!p){var C=r.get("cardInfoMap")||{};C[o]=a,r.set("cardInfoMap",C);return}r.toggleAnnotation(p,{x:s,y:u,title:f,content:c,collapsed:l}),g||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(Js),Hw=jw,Kw=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var g=t[l],p=c.x-g.x,C=c.y-g.y,F=p*p+C*C;o>F&&(o=F,r=c,n=g,a=[f,l])})});var s=20,u=Ms.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},Td=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,g=u.maxY,p=e.getModel(),C=p.x,F=p.y;f+=C,c+=F,l+=C,g+=F,o={left:{x:f,y:(c+g)/2},right:{x:l,y:(c+g)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:g}}}Object.keys(o).forEach(function(xe){var se=o[xe],Oe=se.x,Ve=se.y,Ir=r.getClientByPoint(Oe,Ve);o[xe]=n.getPointByClient(Ir.x,Ir.y)});var H=t.top,tt=H===void 0?0:H,at=t.left,ut=at===void 0?0:at,ht=t.right,_t=ht===void 0?0:ht,Gt=t.bottom,Bt=Gt===void 0?0:Gt,re={left:n.getPointByClient(ut,(tt+Bt)/2),right:n.getPointByClient(_t,(tt+Bt)/2),top:n.getPointByClient((ut+_t)/2,tt),bottom:n.getPointByClient((ut+_t)/2,Bt)};return Kw(o,re)},Gl=function(e){return Number(e.replace(/\s+|px/gi,""))||0},Zw={PluginBase:Js,Menu:sb,Grid:nb,Minimap:db,Bundling:mb,ToolBar:Mb,Tooltip:Tb,Fisheye:Eb,TimeBar:Aw,ImageMinimap:Lw,EdgeFilterLens:kw,SnapLine:zw,Legend:Yw,Annotation:Hw},$w=Zw,es=$w;vc("circle",{options:{size:un.defaultNode.size,style:{x:0,y:0,stroke:un.defaultNode.style.stroke,fill:un.defaultNode.style.fill,lineWidth:un.defaultNode.style.lineWidth},labelCfg:{style:{fill:un.nodeLabel.style.fill,fontSize:un.nodeLabel.style.fontSize,fontFamily:un.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:un.defaultNode.linkPoints.size,lineWidth:un.defaultNode.linkPoints.lineWidth,fill:un.defaultNode.linkPoints.fill,stroke:un.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},un.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,g=o.text;if(l){var p="".concat(this.type,"-icon");g?t.shapeMap[p]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:p,name:p,draggable:!0}):t.shapeMap[p]=t.addShape("image",{attrs:(0,x.__assign)({x:-f/2,y:-c/2},o),className:p,name:p,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0]/2;if(o){var C="link-point-left";t.shapeMap[C]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p,y:0,r:f/2||c||5}),className:C,name:C,isAnchorPoint:!0})}if(s){var F="link-point-right";t.shapeMap[F]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p,y:0,r:f/2||c||5}),className:F,name:F,isAnchorPoint:!0})}if(a){var H="link-point-top";t.shapeMap[H]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-p,r:f/2||c||5}),className:H,name:H,isAnchorPoint:!0})}if(u){var tt="link-point-bottom";t.shapeMap[tt]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:p,r:f/2||c||5}),className:tt,name:tt,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,x.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,x.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),vc("rect",{options:{size:[100,30],style:{radius:0,stroke:un.defaultNode.style.stroke,fill:un.defaultNode.style.fill,lineWidth:un.defaultNode.style.lineWidth},labelCfg:{style:{fill:un.nodeLabel.style.fill,fontSize:un.nodeLabel.style.fontSize,fontFamily:un.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:un.defaultNode.linkPoints.size,lineWidth:un.defaultNode.linkPoints.lineWidth,fill:un.defaultNode.linkPoints.fill,stroke:un.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,x.__assign)({},un.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0],C=g[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,x.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,d.mix)({},a,s.attr(),u);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),vc("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:un.defaultNode.style.stroke,fill:un.defaultNode.style.fill,lineWidth:un.defaultNode.style.lineWidth},labelCfg:{style:{fill:un.nodeLabel.style.fill,fontSize:un.nodeLabel.style.fontSize,fontFamily:un.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:un.defaultNode.linkPoints.size,lineWidth:un.defaultNode.linkPoints.lineWidth,fill:un.defaultNode.linkPoints.fill,stroke:un.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},un.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0]/2,C=g[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-C,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:C,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,x.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),vc("diamond",{options:{size:[80,80],style:{stroke:un.defaultNode.style.stroke,fill:un.defaultNode.style.fill,lineWidth:un.defaultNode.style.lineWidth},labelCfg:{style:{fill:un.nodeLabel.style.fill,fontSize:un.nodeLabel.style.fontSize,fontFamily:un.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:un.defaultNode.linkPoints.size,lineWidth:un.defaultNode.linkPoints.lineWidth,fill:un.defaultNode.linkPoints.fill,stroke:un.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},un.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0],C=g[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,x.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),vc("triangle",{options:{size:40,direction:"up",style:{stroke:un.defaultNode.style.stroke,fill:un.defaultNode.style.fill,lineWidth:un.defaultNode.style.lineWidth},labelCfg:{style:{fill:un.nodeLabel.style.fill,fontSize:un.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:un.defaultNode.linkPoints.size,lineWidth:un.defaultNode.linkPoints.lineWidth,fill:un.defaultNode.linkPoints.fill,stroke:un.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,x.__assign)({},un.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,g=a.show,p=a.offset,C=a.text;if(g)if(C)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var F=-c/2,H=-l/2;(u==="up"||u==="down")&&(H+=p),(u==="left"||u==="right")&&(F+=p),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:F,y:H},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,g=a.size,p=a.r,C=(0,x.__rest)(a,["top","left","right","bottom","size","r"]),F=this.getSize(e),H=F[0];if(f){var tt=null,at=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="up"?tt=[-ut,at]:s==="down"?tt=[-ut,-at]:s==="left"&&(tt=[-ut,ut-at]),tt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},C),{x:tt[0],y:tt[1],r:g/2||p||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var ht=null,at=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="up"?ht=[ut,at]:s==="down"?ht=[ut,-at]:s==="right"&&(ht=[ut,ut-at]),ht&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},C),{x:ht[0],y:ht[1],r:g/2||p||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var _t=null,at=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="up"?_t=[ut-at,-at]:s==="left"?_t=[ut,-at]:s==="right"&&(_t=[-ut,-at]),_t&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},C),{x:_t[0],y:_t[1],r:g/2||p||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var Gt=null,at=H*Math.sin(1/3*Math.PI),ut=H*Math.sin(1/3*Math.PI);s==="down"?Gt=[-ut+at,at]:s==="left"?Gt=[ut,at]:s==="right"&&(Gt=[-ut,at]),Gt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},C),{x:Gt[0],y:Gt[1],r:g/2||p||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,x.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(Er){return Er.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(Er){return Er.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(Er){return Er.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(Er){return Er.get("className")==="link-point-bottom"}),l=n,g=s||u||f||c;g&&(l=g.attr());var p=(0,d.mix)({},l,e.linkPoints),C=p.fill,F=p.stroke,H=p.lineWidth,tt=p.size/2;tt||(tt=p.r);var at=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},ut=at.left,ht=at.right,_t=at.top,Gt=at.bottom,Bt=this.getSize(e),re=Bt[0],xe={r:tt,fill:C,stroke:F,lineWidth:H},se=null,Oe=re*Math.sin(1/3*Math.PI),Ve=re*Math.sin(1/3*Math.PI);o==="up"?se=[-Ve,Oe]:o==="down"?se=[-Ve,-Oe]:o==="left"&&(se=[-Ve,Ve-Oe]),se&&(s?!ut&&ut!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,x.__assign)((0,x.__assign)({},xe),{x:se[0],y:se[1]})):ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},xe),{x:se[0],y:se[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Ir=null;o==="up"?Ir=[Ve,Oe]:o==="down"?Ir=[Ve,-Oe]:o==="right"&&(Ir=[Ve,Ve-Oe]),Ir&&(u?!ht&&ht!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,x.__assign)((0,x.__assign)({},xe),{x:Ir[0],y:Ir[1]})):ht&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},xe),{x:Ir[0],y:Ir[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var Wr=null;o==="up"?Wr=[Ve-Oe,-Oe]:o==="left"?Wr=[Ve,-Oe]:o==="right"&&(Wr=[-Ve,-Oe]),Wr&&(f?!_t&&_t!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,x.__assign)((0,x.__assign)({},xe),{x:Wr[0],y:Wr[1]})):_t&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},xe),{x:Wr[0],y:Wr[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Nr=null;o==="down"?Nr=[-Ve+Oe,Oe]:o==="left"?Nr=[Ve,Oe]:o==="right"&&(Nr=[-Ve,Oe]),Nr&&(c?!Gt&&Gt!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,x.__assign)((0,x.__assign)({},xe),{x:Nr[0],y:Nr[1]})):Gt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},xe),{x:Nr[0],y:Nr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),vc("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:un.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:un.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:un.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,x.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,x.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,g=n.text,p=(0,x.__rest)(n,["width","height","x","y","offset","text"]);g?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},p),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,x.__assign)((0,x.__assign)({},p),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,g=n.text,p=(0,x.__rest)(n,["width","height","x","y","offset","text"]);g?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},p),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,x.__assign)((0,x.__assign)({},p),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,x.__rest)(n,["top","left","right","bottom","size","r"]),g=this.getSize(e),p=g[0],C=g[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:-p/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:p/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],g=null,p=s.show,C=s.width,F=-l/2+a.offset;p&&(F=-l/2+C+a.offset);var H=a.style,tt=f.style,at=f.paddingTop;return(0,d.isString)(e.description)?(g=t.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},H),{x:F,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=g,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},tt),{x:F,y:17+(at||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(g=t.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},H),{x:F,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=g),g},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,x.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],g=c[1],p=t.get("keyShape");p.attr((0,x.__assign)((0,x.__assign)({},a),{x:-l/2,y:-g/2,width:l,height:g}));var C=t.getContainer(),F=C.shapeMap["rect-logo-icon"]||C.find(function(Oa){return Oa.get("className")==="rect-logo-icon"}),H=F?F.attr():{},tt=(0,d.mix)({},H,e.logoIcon),at=tt.width;at===void 0&&(at=this.options.logoIcon.width);var ut=e.logoIcon?e.logoIcon.show:void 0,ht=s.offset,_t=-l/2+at+ht;!ut&&ut!==void 0&&(_t=-l/2+ht);var Gt=C.shapeMap["node-label"]||C.find(function(Oa){return Oa.get("className")==="node-label"}),Bt=C.shapeMap["rect-description"]||C.find(function(Oa){return Oa.get("className")==="rect-description"});if(e.label)if(!Gt)C.shapeMap["node-label"]=C.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},s.style),{x:_t,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var re=e.labelCfg?e.labelCfg.style:{},xe=(0,d.mix)({},Gt.attr(),re);e.label&&(xe.text=e.label),xe.x=_t,(0,d.isString)(e.description)&&(xe.y=-5),Bt&&(Bt.resetMatrix(),Bt.attr({x:_t})),Gt.resetMatrix(),Gt.attr(xe)}if((0,d.isString)(e.description)){var se=f.paddingTop;if(!Bt)C.shapeMap["rect-description"]=C.addShape("text",{attrs:(0,x.__assign)((0,x.__assign)({},f.style),{x:_t,y:17+(se||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var re=e.descriptionCfg?e.descriptionCfg.style:{},Oe=(0,d.mix)({},Bt.attr(),re);(0,d.isString)(e.description)&&(Oe.text=e.description),Oe.x=_t,Bt.resetMatrix(),Bt.attr((0,x.__assign)((0,x.__assign)({},Oe),{y:17+(se||0)}))}}var Ve=C.shapeMap["pre-rect"]||C.find(function(Oa){return Oa.get("className")==="pre-rect"});if(Ve&&!Ve.destroyed){var Ir=(0,d.mix)({},Ve.attr(),e.preRect);Ve.attr((0,x.__assign)((0,x.__assign)({},Ir),{x:-l/2,y:-g/2,height:g}))}if(F&&!F.destroyed)if(!ut&&ut!==void 0)F.remove(),delete C.shapeMap["pre-rect"];else{var Wr=tt.width,Nr=tt.height,Er=tt.x,fn=tt.y,rn=tt.offset,wr=(0,x.__rest)(tt,["width","height","x","y","offset"]);F.attr((0,x.__assign)((0,x.__assign)({},wr),{x:Er||-l/2+Wr+rn,y:fn||-Nr/2,width:Wr,height:Nr}))}else ut&&this.drawLogoIcon(e,C);var kr=C.shapeMap["rect-state-icon"]||C.find(function(Oa){return Oa.get("className")==="rect-state-icon"}),qr=kr?kr.attr():{},Qr=(0,d.mix)({},qr,e.stateIcon);if(kr){!Qr.show&&Qr.show!==void 0&&(kr.remove(),delete C.shapeMap["rect-state-icon"]);var gn=Qr.width,Nr=Qr.height,Er=Qr.x,fn=Qr.y,Tn=Qr.offset,fa=(0,x.__rest)(Qr,["width","height","x","y","offset"]);kr.attr((0,x.__assign)((0,x.__assign)({},fa),{x:Er||l/2-gn+Tn,y:fn||-Nr/2,width:gn,height:Nr}))}else Qr.show&&this.drawStateIcon(e,C);this.updateLinkPoints(e,C)},getOptions:function(e,t){return t==="move"?e:(0,d.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),vc("star",{options:{size:60,style:{stroke:un.defaultNode.style.stroke,fill:un.defaultNode.style.fill,lineWidth:un.defaultNode.style.lineWidth},labelCfg:{style:{fill:un.nodeLabel.style.fill,fontSize:un.nodeLabel.style.fontSize,fontFamily:un.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:un.defaultNode.linkPoints.size,lineWidth:un.defaultNode.linkPoints.lineWidth,fill:un.defaultNode.linkPoints.fill,stroke:un.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},un.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,g=(0,x.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),p=this.getSize(e),C=p[0];if(s){var F=Math.cos(.1*Math.PI)*C,H=Math.sin((18+72*0)/180*Math.PI)*C;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:F,y:-H,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var F=Math.cos(.5*Math.PI)*C,H=Math.sin((18+72*1)/180*Math.PI)*C;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:F,y:-H,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var F=Math.cos(.9*Math.PI)*C,H=Math.sin((18+72*2)/180*Math.PI)*C;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:F,y:-H,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var F=Math.cos(1.3*Math.PI)*C,H=Math.sin((18+72*3)/180*Math.PI)*C;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:F,y:-H,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var F=Math.cos(1.7*Math.PI)*C,H=Math.sin((18+72*4)/180*Math.PI)*C;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},g),{x:F,y:-H,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return Ms.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,d.mix)({},t,r),a=this.getPath(e),o=(0,x.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,d.mix)({},a,u.attr(),s);f=(0,d.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Oe){return Oe.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Oe){return Oe.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Oe){return Oe.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Oe){return Oe.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Oe){return Oe.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,d.mix)({},f,e.linkPoints),g=l.fill,p=l.stroke,C=l.lineWidth,F=l.size/2;F||(F=l.r);var H=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},tt=H.left,at=H.right,ut=H.top,ht=H.leftBottom,_t=H.rightBottom,Gt=this.getSize(e),Bt=Gt[0],re={r:F,fill:g,stroke:p,lineWidth:C},xe=Math.cos((18+72*0)/180*Math.PI)*Bt,se=Math.sin((18+72*0)/180*Math.PI)*Bt;a?!at&&at!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se})):at&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),xe=Math.cos((18+72*1)/180*Math.PI)*Bt,se=Math.sin((18+72*1)/180*Math.PI)*Bt,o?!ut&&ut!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se})):ut&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),xe=Math.cos((18+72*2)/180*Math.PI)*Bt,se=Math.sin((18+72*2)/180*Math.PI)*Bt,n?!tt&&tt!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se})):tt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),xe=Math.cos((18+72*3)/180*Math.PI)*Bt,se=Math.sin((18+72*3)/180*Math.PI)*Bt,s?!ht&&ht!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se})):ht&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),xe=Math.cos((18+72*4)/180*Math.PI)*Bt,se=Math.sin((18+72*4)/180*Math.PI)*Bt,u?!_t&&_t!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se})):_t&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,x.__assign)((0,x.__assign)({},re),{x:xe,y:-se}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var y0=Ms.defaultSubjectColors,Xh="fan-shape-";vc("donut",{options:{size:un.defaultNode.size,style:{x:0,y:0,stroke:un.defaultNode.style.stroke,fill:un.defaultNode.style.fill,lineWidth:un.defaultNode.style.lineWidth},labelCfg:{style:{fill:un.nodeLabel.style.fill,fontSize:un.nodeLabel.style.fontSize,fontFamily:un.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:un.defaultNode.linkPoints.size,lineWidth:un.defaultNode.linkPoints.lineWidth,fill:un.defaultNode.linkPoints.fill,stroke:un.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,x.__assign)({},un.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,d.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;return c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,x.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,x.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),qw(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,x.__assign)({},r)),Qw(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var qw=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=m0(a,s),c=f.configs,l=f.totalValue;if(l){var g=x0(r),p=g.lineWidth,C=g.arcR,F=[C,0],H=0;if(u===1){Id(t,{arcR:C,arcBegin:F,beginAngle:H,config:c[0],fanIndex:0,lineWidth:p,totalValue:l,drawWhole:!0});return}for(var tt=0;tt<c.length;tt++){var at=Id(t,{arcR:C,arcBegin:F,beginAngle:H,config:c[tt],fanIndex:tt,lineWidth:p,totalValue:l});if(at.shouldEnd)return;F=at.arcBegin,H=at.beginAngle}}}},Id=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,l=c===void 0?!1:c,g=t.updateShape,p=g===void 0?void 0:g,C=o.value/f;if(C<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var F,H,tt;if(l||C>.999)F=[r,1e-4],tt=1;else{var at=C*Math.PI*2;H=a+at,F=[r*Math.cos(H),-r*Math.sin(H)],tt=at>Math.PI?1:0}var ut={path:[["M",n[0],n[1]],["A",r,r,0,tt,0,F[0],F[1]]],stroke:o.color||(p==null?void 0:p.attr("stroke"))||y0[s%y0.length],lineWidth:u};return p?p.attr(ut):e.shapeMap["".concat(Xh).concat(s)]=e.addShape("path",{attrs:ut,name:"".concat(Xh).concat(s),draggable:!0}),{beginAngle:H,arcBegin:F,shape:e.shapeMap["".concat(Xh).concat(s)],shouldEnd:l||C>.999}},Qw=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=m0(n,o),c=f.configs,l=f.totalValue;if(l)for(var g=x0(r),p=g.lineWidth,C=g.arcR,F=[C,0],H=0,tt=0;tt<c.length;tt++){var at="".concat(Xh).concat(tt),ut=Id(u,{arcR:C,arcBegin:F,beginAngle:H,config:c[tt],fanIndex:tt,lineWidth:p,totalValue:l,drawWhole:c.length===1,updateShape:u.shapeMap[at]});if(ut.shape&&(s[at]=!0),ut.shouldEnd)break;F=ut.arcBegin,H=ut.beginAngle}}var ht=Object.keys(u.shapeMap).filter(function(_t){return _t.includes(Xh)});ht.forEach(function(_t){s[_t]||(u.shapeMap[_t].remove(!0),delete u.shapeMap[_t])})},m0=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},x0=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},Mv=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},Jw=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},B_=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Od=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},b0=function(e){return Od(e)},F_=function(e,t){return[e,{x:e.x,y:t.y},t]},Av=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},tS=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},Ld=function(e,t,r){var n=tS(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},E0=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},Dd=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Cv=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},eS=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},rS=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},nS=function(e,t){return eS(e,t.x).concat(rS(e,t.y))},Yh=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},aS=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},w0=function(e,t,r,n,a){return Yh(e,t)+Yh(e,r)+aS(e,[t,r,n,a])},iS=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},G_=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Tv=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,g=n.y-t.y,p=a*u-o*s,C=f*g-c*l,F=a*c-o*f,H=s*g-u*l;return p*C<=0&&F*H<=0},Nd=function(e,t,r){if(r.width||r.height){var n=Dd(r),a=n[0],o=n[1],s=n[2],u=n[3];return Tv(e,t,a,o)||Tv(e,t,a,u)||Tv(e,t,o,s)||Tv(e,t,s,u)}return!1},oS=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Nd(o,t,r)||Nd(o,t,n))return;a.push(o)}}),Od(a)},sS=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),l={},g={},p={};g[t.id]=0,p[t.id]=w0(t,r,t);var C=new M0;C.add({id:t.id,value:p[t.id]});var F={};e.forEach(function(_t){F[_t.id]=_t});for(var H;Object.keys(c).length;){var tt=C.minId(!1);if(tt)H=c[tt];else break;if(H===r){var at=[];return iS(at,F,l,r.id),at}delete c[H.id],C.remove(H.id),f.push(H);var ut=oS(e,H,n,a),ht=function(Gt){Gt.forEach(function(Bt){if(f.indexOf(Bt)===-1){var re=Bt.id;c[re]||(c[re]=Bt);var xe=p[H.id]+Yh(H,Bt);if(g[re]&&xe>=g[re]){C.add({id:re,value:p[re]});return}l[re]=H.id,g[re]=xe,p[re]=g[re]+w0(Bt,r,t,o,s),C.add({id:re,value:p[re]})}})};ht(ut)}return[t,r]},uS=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},fS=function(e,t,r,n){var a=Yh(e,t),o=Yh(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},S0=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(uS(a,s,u)){var f=fS(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},_0=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=Mv(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=Mv(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=Mv(t);else if(n.getType()==="combo"){var g=n.getKeyShape().getBBox();if(g){var p=n.getModel(),C=p.x,F=p.y;s={x:C,y:F,width:g.width,height:g.height,minX:g.minX+C,maxX:g.maxX+C,minY:g.minY+F,maxY:g.maxY+F},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Mv(t)}else s=n&&n.getBBox();var H=Av(o,a),tt=Av(s,a),at=Ld(H,e,t),ut=Ld(tt,t,e),ht=Jw([at,ut]),_t=E0(H,ht),Gt=E0(tt,ht),Bt=[];Bt=Bt.concat(Dd(_t)).concat(Dd(Gt));var re={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[ht,_t,Gt].forEach(function(se){Bt=Bt.concat(nS(se,re).filter(function(Oe){return Cv(Oe,H)&&Cv(Oe,tt)}))}),[{x:at.x,y:ut.y},{x:ut.x,y:at.y}].forEach(function(se){Cv(se,H)&&Cv(se,tt)&&Bt.push(se)}),Bt.unshift(at),Bt.push(ut),Bt=Od(Bt);var xe=sS(Bt,at,ut,o,s,e,t);return xe.unshift(e),xe.push(t),b0(xe)},cS=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},M0=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),lS=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},hS=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},vS=function(e,t){return[e,t]},dS=function(e,t,r,n,a){return b0(_0(e,t,r,n,a.offset))},gS={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:lS,fallbackRoute:dS},z_={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:hS,fallbackRoute:vS},xc=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},pS=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=Av(a.getBBox(),r),s=xc(o.minX,t);s<=xc(o.maxX,t);s+=1)for(var u=xc(o.minY,t);u<=xc(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Pd=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},A0=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},C0=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},T0=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=Av(f,u);for(var g in l)l[g]=xc(l[g],a.gridSize);if(c){for(var p=0,C=s;p<C.length;p++)for(var F=C[p],H=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],g=0;g<4;g++){var tt=H[g],at=Ms.getLineIntersect(e,{x:e.x+F.stepX*l.width,y:e.y+F.stepY*l.height},tt[0],tt[1]);at&&!Nd(e,at,f)&&(at.id="".concat(at.x,"|||").concat(at.y),o.push(at))}return o}var ut=Ld(l,e,n);return ut.id="".concat(ut.x,"|||").concat(ut.y),[ut]},kd=function(e,t,r,n){var a=Pd(e,t),o=r[e.id];if(!o){var s=Pd(n,e);return A0(s,a)}var u=Pd({x:o.x,y:o.y},e);return A0(u,a)},yS=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,l=e.x,g=e.y,p={x:l,y:g,id:c};kd(p,o,t,r)&&(f={x:o.x===n.x?n.x:p.x*s,y:o.y===n.y?n.y:p.y*s},u.unshift(f));for(var C=t[c];C&&C.id!==c;){var F={x:l,y:g,id:c},H={x:C.x,y:C.y,id:C.id},tt=kd(H,F,t,r);tt&&(f={x:H.x===F.x?f.x:H.x*s,y:H.y===F.y?f.y:H.y*s},u.unshift(f)),c=H.id,l=H.x,g=H.y,C=t[c]}return u[0].x=l===r.x?a.x:f.x,u[0].y=g===r.y?a.y:f.y,u.unshift(a),u},mS=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,d.deepMix)(gS,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=pS(o.obstacles.concat([r,n]),u,o.offset),c={x:xc(e.x,u),y:xc(e.y,u)},l={x:xc(t.x,u),y:xc(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(l.x,"|||").concat(l.y);var g=T0(c,e,r,l,o),p=T0(l,t,n,c,o);g.forEach(function(wr){delete f[wr.id]}),p.forEach(function(wr){delete f[wr.id]});for(var C={},F={},H={},tt={},at={},ut=new M0,ht=0;ht<g.length;ht++){var _t=g[ht];C[_t.id]=_t,tt[_t.id]=0,at[_t.id]=C0(_t,p,o.distFunc),ut.add({id:_t.id,value:at[_t.id]})}var Gt=o.maximumLoops,Bt,re,xe,se,Oe,Ve,Ir=1/0,Wr={};for(p.forEach(function(wr){Wr["".concat(wr.x,"|||").concat(wr.y)]=!0}),Object.keys(C).forEach(function(wr){var kr=C[wr].id;at[kr]<=Ir&&(Ir=at[kr],Bt=C[kr])});Object.keys(C).length>0&&Gt>0;){var Nr=ut.minId((Gt+1)%30===0);if(Nr)Bt=C[Nr];else break;if(Wr["".concat(Bt.x,"|||").concat(Bt.y)])return yS(Bt,H,c,t,e,l,u);delete C[Bt.id],ut.remove(Bt.id),F[Bt.id]=!0;for(var ht=0;ht<o.directions.length;ht++){re=o.directions[ht];var Er="".concat(Math.round(Bt.x)+re.stepX,"|||").concat(Math.round(Bt.y)+re.stepY);if(xe={x:Bt.x+re.stepX,y:Bt.y+re.stepY,id:Er},!F[Er]&&(Ve=kd(Bt,xe,H,c),!(Ve>o.maxAllowedDirectionChange)&&!f[Er])){C[Er]||(C[Er]=xe);var fn=s[Ve];se=o.distFunc(Bt,xe)+(isNaN(fn)?u:fn),Oe=tt[Bt.id]+se;var rn=tt[Er];rn&&Oe>=rn||(H[Er]=Bt,tt[Er]=Oe,at[Er]=Oe+C0(xe,p,o.distFunc),ut.add({id:Er,value:at[Er]}))}}Gt-=1}return o.fallbackRoute(e,t,r,n,o)};mg("polyline",{options:{color:un.defaultEdge.color,size:un.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:un.defaultEdge.style.stroke,lineAppendWidth:un.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:un.edgeLabel.style.fill,fontSize:un.edgeLabel.style.fontSize,fontFamily:un.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,x.__assign)({},un.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,d.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,g=this.options.routeCfg,p=(0,d.mix)({},g,e.routeCfg);p.offset=n.offset;var C=this.getPath(u,f,c,l,p,!s);((0,d.isArray)(C)&&C.length<=1||(0,d.isString)(C)&&C.indexOf("L")===-1)&&(C="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(C="M0 0, L0 0");var F=(0,d.mix)({},un.defaultEdge.style,n,{lineWidth:e.size,path:C});return F},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(ht){return ht.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),g=(0,d.mix)({},n,l,e.style),p=e.sourceNode,C=e.targetNode,F=g.radius,H=this.options.routeCfg,tt=(0,d.mix)({},H,e.routeCfg);tt.offset=g.offset;var at=this.getPath(c,p,C,F,tt,!f);((0,d.isArray)(at)&&at.length<=1||(0,d.isString)(at)&&at.indexOf("L")===-1)&&(at="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(at="M0 0, L0 0"),l.endArrow&&g.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&g.startArrow===!1&&(e.style.startArrow={path:""});var ut=(0,d.mix)(n,a.attr(),{lineWidth:o,path:at},e.style);a&&a.attr(ut)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return S0(e,n);var c=[];return(0,d.each)(e,function(C,F){F===0?c.push(["M",C.x,C.y]):c.push(["L",C.x,C.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var l=f?_0(e[e.length-1],e[0],r,t,s):mS(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var g=S0(l,n);return g}l=cS(l);var p=Ms.pointsToPolygon(l);return p}},"single-edge");var I0=pc.cloneEvent,O0=pc.isNaN,L0=Math.abs,xS=10,bS=["shift","ctrl","alt","control"],ES={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(O0(r)||O0(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(ut){ut.set("ori-visibility",ut.get("ori-visibility")||ut.get("visible")),ut.hide()})}for(var f=n.getNodes(),c=0,l=f.length;c<l;c++)for(var g=f[c].getContainer(),p=g.get("children"),C=0,F=p;C<F.length;C++){var H=F[C],tt=H.get("isKeyShape");tt||(H.set("ori-visibility",H.get("ori-visibility")||H.get("visible")),H.hide())}}if(typeof window!="undefined"){var at=this;this.handleDOMContextMenu=function(ut){return at.onMouseUp(ut)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=I0(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(L0(this.origin.x-e.clientX)+L0(this.origin.y-e.clientY)<xS)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(Bt){return Bt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var g=f[c].get("group").get("children");g&&g.forEach(function(Bt){var re=Bt.get("ori-visibility");Bt.set("ori-visibility",void 0),re&&Bt.show()})}if(a>u)for(var p=n.getNodes(),C=0,F=p.length;C<F;C++)for(var H=p[C].getContainer(),tt=H.get("children"),at=0,ut=tt;at<ut.length;at++){var ht=ut[at],_t=ht.get("isKeyShape");if(!_t){var Gt=ht.get("ori-visibility");ht.set("ori-visibility",void 0),Gt&&ht.show()}}}if(!this.dragging){this.origin=null;return}e=I0(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(bS.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,d.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,d.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},wS={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,x.__assign)((0,x.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,x.__assign)((0,x.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(p){var C=p.get("id");return c===C});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(p){var C=p.hasLocked();C||t.targets.push(p)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var g=[];this.targets.forEach(function(p){var C=p.getModel(),F=C.x,H=C.y,tt=C.id;g.push({x:F,y:H,id:tt})}),this.set("beforeDragNodes",g)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(p){var C=p.getEdges();C.forEach(function(F){F.isVisible()&&(t.hidenEdge[F.getID()]=!0,F.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,d.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,d.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),l=f.get("id");r[l]||(r[l]={x:c.x||0,y:c.y||0});var g=a.x-n.x+r[l].x,p=a.y-n.y+r[l].y,C={x:g,y:p};o?t.updateItem(f,C,!1):f.updatePosition(C)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var g=e.x-this.origin.x+this.originPoint.minX,p=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:g,y:p})}else{var r=t.get("group"),n=(0,d.deepMix)({},Pl.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,x.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,g=f.maxX,p=f.maxY;c<r&&(r=c),l<a&&(a=l),g>n&&(n=g),p>o&&(o=p)}var C=Math.floor(r),F=Math.floor(a),H=Math.ceil(n)-Math.floor(r),tt=Math.ceil(o)-Math.floor(a);return{x:C,y:F,width:H,height:tt,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},Iv=null,SS={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this,r=this.shouldClearStatusOnSecond;r&&(Iv=null),this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,d.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){var n=e.shouldClearStatusOnSecond,a=t.getModel().id;if(Iv===a&&n){e.throttleClearActiveState(i,e),Iv=null;return}for(var o=e.activeState,s=e.inactiveState,u=r.getNodes(),f=r.getCombos(),c=r.getEdges(),l=r.get("vedges"),g=u.length,p=f.length,C=c.length,F=l.length,H=e.inactiveItems||{},tt=e.activeItems||{},at=0;at<g;at++){var ut=u[at],ht=ut.getID(),_t=ut.hasState("selected");e.resetSelected&&_t&&r.setItemState(ut,"selected",!1),tt[ht]&&(r.setItemState(ut,o,!1),delete tt[ht]),s&&!H[ht]&&(r.setItemState(ut,s,!0),H[ht]=ut)}for(var at=0;at<p;at++){var Gt=f[at],Bt=Gt.getID(),_t=Gt.hasState("selected");e.resetSelected&&_t&&r.setItemState(Gt,"selected",!1),tt[Bt]&&(r.setItemState(Gt,o,!1),delete tt[Bt]),s&&!H[Bt]&&(r.setItemState(Gt,s,!0),H[Bt]=Gt)}for(var at=0;at<C;at++){var re=c[at],xe=re.getID();tt[xe]&&(r.setItemState(re,o,!1),delete tt[xe]),s&&!H[xe]&&(r.setItemState(re,s,!0),H[xe]=re)}for(var at=0;at<F;at++){var se=l[at],Oe=se.getID();tt[Oe]&&(r.setItemState(se,o,!1),delete tt[Oe]),s&&!H[Oe]&&(r.setItemState(se,s,!0),H[Oe]=se)}if(t&&!t.destroyed){s&&(r.setItemState(t,s,!1),delete H[t.getID()]),tt[t.getID()]||(r.setItemState(t,o,!0),tt[t.getID()]=t);for(var Ve=t.getEdges(),Ir=Ve.length,at=0;at<Ir;at++){var re=Ve[at],xe=re.getID(),Wr=void 0;re.getSource()===t?Wr=re.getTarget():Wr=re.getSource();var Nr=Wr.getID();s&&H[Nr]&&(r.setItemState(Wr,s,!1),delete H[Nr]),tt[Nr]||(r.setItemState(Wr,o,!0),tt[Nr]=Wr),H[xe]&&(r.setItemState(re,s,!1),delete H[xe]),tt[xe]||(r.setItemState(re,o,!0),tt[xe]=re),re.toFront()}}e.activeItems=tt,e.inactiveItems=H,n&&(Iv=t.getModel().id),r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,d.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Ov=Math.min,D0=Math.max,N0=Math.abs,P0="shift",_S=["drag","shift","ctrl","alt","control"],MS={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:P0,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return _S.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=P0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush,n=this.selectOnCombo,a=(t==null?void 0:t.getType())==="combo";a&&!n||!a&&t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=Ov(f.x,c.x),g=D0(f.x,c.x),p=Ov(f.y,c.y),C=D0(f.y,c.y),F=[],H=[];n.getNodes().forEach(function(ut){if(ut.isVisible()&&s(ut,l,g,p,C)&&o(ut,"select",t)){F.push(ut);var ht=ut.getModel();H.push(ht.id),n.setItemState(ut,u,!0)}});var tt=[];this.includeEdges&&F.forEach(function(ut){var ht=ut.getOutEdges();ht.forEach(function(_t){if(_t.isVisible()){var Gt=_t.getModel(),Bt=Gt.source,re=Gt.target;H.includes(Bt)&&H.includes(re)&&o(_t,"select",t)&&(tt.push(_t),n.setItemState(_t,t.selectedState,!0))}})});var at=[];this.includeCombos&&n.getCombos().forEach(function(ut){if(ut.isVisible()&&s(ut,l,g,p,C)&&o(ut,"select",t)){at.push(ut);var ht=ut.getModel();H.push(ht.id),n.setItemState(ut,u,!0)}}),this.selectedEdges=tt,this.selectedNodes=F,this.selectedCombos=at,this.onSelect&&this.onSelect(F,tt,at),n.emit("nodeselectchange",{selectedItems:{nodes:F,edges:tt,combos:at},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:N0(e.canvasX-t.x),height:N0(e.canvasY-t.y),x:Ov(e.canvasX,t.x),y:Ov(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},k0="shift",AS=["shift","ctrl","alt","control"],CS={getDefaultCfg:function(){return{multiple:!0,trigger:k0,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return AS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=k0,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,d.each)(c,function(F){F!==r&&a.setItemState(F,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var g=a.findAllByState("node",t.selectedState),p=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:g,edges:p,combos:C},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var g=a.findAllByState("node",t.selectedState),p=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:g,edges:p,combos:C},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var g=a.findAllByState("node",t.selectedState),p=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:g,edges:p,combos:C},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,d.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,d.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,d.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},TS=Jt,Lv=.05,IS={getDefaultCfg:function(){return this.isFireFox=dp()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(F,H){return Math.hypot(H.x-F.x,H.y-F.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),g=this.graph.get("canvas"),p=g.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:p.x,y:p.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-Lv*u:c=1/(1-Lv*u):e.wheelDelta<0?c=1-Lv*u:c=1/(1-Lv*u),l=f*c;var g=this.get("minZoom")||n.get("minZoom"),p=this.get("maxZoom")||n.get("maxZoom");l>p?l=p:l<g&&(l=g);var C=this.get("enableOptimize");if(C){var F=this.get("optimizeZoom"),H=this.get("optimized"),tt=n.getNodes(),at=n.getEdges(),ut=tt.length,ht=at.length;if(!H){for(var _t=0;_t<ut;_t++){var Gt=tt[_t];if(!Gt.destroyed)for(var Bt=Gt.get("group").get("children"),re=Bt.length,xe=0;xe<re;xe++){var se=Bt[xe];!se.destoryed&&!se.get("isKeyShape")&&(se.set("ori-visibility",se.get("ori-visibility")||se.get("visible")),se.hide())}}for(var Oe=0;Oe<ht;Oe++)for(var Ve=at[Oe],Bt=Ve.get("group").get("children"),re=Bt.length,xe=0;xe<re;xe++){var se=Bt[xe];se.set("ori-visibility",se.get("ori-visibility")||se.get("visible")),se.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Ir=setTimeout(function(){var Ya=n.getZoom(),di=t.get("optimized");if(di){t.set("optimized",!1);for(var Ua=0;Ua<ut;Ua++){var gi=tt[Ua],Oi=gi.get("group").get("children"),Xn=Oi.length;if(Ya<F){var Ha=gi.getKeyShape(),Za=Ha.get("ori-visibility");Ha.set("ori-visibility",void 0),Za&&Ha.show()}else for(var Li=0;Li<Xn;Li++){var qa=Oi[Li],Za=qa.get("ori-visibility");qa.set("ori-visibility",void 0),!qa.get("visible")&&Za&&Za&&qa.show()}}for(var ui=0;ui<ht;ui++){var fo=at[ui],Oi=fo.get("group").get("children"),Xn=Oi.length;if(Ya<F){var Ha=fo.getKeyShape(),Za=Ha.get("ori-visibility");Ha.set("ori-visibility",void 0),Za&&Ha.show()}else for(var Li=0;Li<Xn;Li++){var qa=Oi[Li];if(!qa.get("visible")){var Za=qa.get("ori-visibility");qa.set("ori-visibility",void 0),Za&&qa.show()}}}}},100);this.set("timeout",Ir)}if(f<=1){var Wr=void 0,Nr=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Wr=n.findAllByState("node",a.fixState),Nr=n.findAllByState("edge",a.fixState);for(var Er=f/l,fn=Wr.length,rn=0;rn<fn;rn++){var Gt=Wr[rn],wr=Gt.getContainer(),kr=Gt.getModel(),qr=Gt.getOriginStyle(),Qr=Gt.getStateStyle(a.fixState),gn=Gt.get("shapeFactory").getShape(kr.type).getStateStyle(a.fixState,Gt)[a.fixState];if(a.fixAll){if(l<=1){var Tn=(0,d.clone)(wr.getMatrix());Tn||(Tn=[1,0,0,0,1,0,0,0,1]);var fa=Gt.getModel(),Oa=fa.x,pi=fa.y;Tn=TS(Tn,[["t",-Oa,-pi],["s",Er,Er],["t",Oa,pi]]),wr.setMatrix(Tn)}}else for(var Bt=wr.get("children"),re=Bt.length,xe=0;xe<re;xe++){var se=Bt[xe],ri=void 0,yi=void 0;if(a.fixLabel){var Si=se.get("type");if(Si==="text"){ri=se.attr("fontSize")||12;var Ki=Qr[se.get("name")],Pi=gn[se.get("name")],ku=Ki?Ki.fontSize:12,rs=Pi?Pi.fontSize:12,Ru=ku||rs||12;if(l<=1&&se.attr("fontSize",Ru/l),yi)break}}if(a.fixLineWidth&&se.get("isKeyShape")){yi=se.attr("lineWidth")||0;var ns=Qr.lineWidth||gn.lineWidth||qr.lineWidth||0;if(l<=1&&se.attr("lineWidth",ns/l),ri)break}}}for(var as=Nr.length,pu=0;pu<as;pu++)for(var Ve=Nr[pu],wr=Ve.getContainer(),Bt=wr.get("children"),kr=Ve.getModel(),Qr=Ve.getStateStyle(a.fixState),gn=Ve.get("shapeFactory").getShape(kr.type).getStateStyle(a.fixState,Ve)[a.fixState],re=Bt.length,xe=0;xe<re;xe++){var se=Bt[xe],ri=void 0,yi=void 0;if(a.fixLabel||a.fixAll){var Si=se.get("type");if(Si==="text"){ri=se.attr("fontSize")||12;var Ki=Qr[se.get("name")],Pi=gn[se.get("name")],ku=Ki?Ki.fontSize:12,rs=Pi?Pi.fontSize:12,Ru=ku||rs||12;if(l<=1&&se.attr("fontSize",Ru/l),yi)break}}if((a.fixLineWidth||a.fixAll)&&se.get("isKeyShape")){yi=se.attr("lineWidth")||0;var ns=Qr.lineWidth||gn.lineWidth||1;if(l<=1&&se.attr("lineWidth",ns/l),ri)break}}}}var As=this.get("animate"),Xs=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},As,Xs),n.emit("wheelzoom",e)}}},R0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,Xa(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Xa(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){Xa(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,g=o.getBoundingClientRect();c>n/2?c-=g.width:c+=this.offset,l>a/2?l-=g.height:l+=this.offset;var p="".concat(c,"px"),C="".concat(l,"px");Xa(this.container,{left:p,top:C,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=ro('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),Xa(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},OS=(0,x.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},R0),LS=(0,x.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},R0),B0="click",DS=["click","dblclick"],NS={getDefaultCfg:function(){return{trigger:B0,onChange:function(){}}},getEvents:function(){var e,t;return DS.includes(this.trigger)?t=this.trigger:(t=B0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},PS=pc.calculationItemsBBox,kS=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,d.each)(r,function(n){i(n,t)})}},RS={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,g=c.y,p=c.id;u.push({x:l,y:g,id:p})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],kS(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(g){var p=g.getModel();return a.parentId,p.id!==a.id&&!t.currentItemChildCombos.includes(p.id)});l.map(function(g){var p=g.getBBox(),C=p.centerX,F=p.centerY,H=p.width,tt=u-C,at=f-F,ut=2*Math.sqrt(tt*tt+at*at);c+H-ut>.8*c?r.setItemState(g,t.activeState,!0):r.setItemState(g,t.activeState,!1)})}(0,d.each)(this.targets,function(g){t.updateCombo(g,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,d.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,g=f.id;s.after.combos.push({x:c,y:l,id:g}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,d.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,d.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var g=e.x-this.origin.x+this.originPoint.minX,p=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:g,y:p})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=PS(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,x.__assign)((0,x.__assign)({},Pl.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,x.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},F0="dblclick",BS=["click","dblclick"],FS={getDefaultCfg:function(){return{trigger:F0,relayout:!0}},getEvents:function(){var e,t;return BS.includes(this.trigger)?t=this.trigger:(t=F0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},GS=pc.isPolygonsIntersect,zS=pc.pathToPoints,G0="shift",US=["drag","shift","ctrl","alt","control"],WS=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=zS(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return GS(t,r)},XS={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:G0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return US.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=G0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&WS(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(g){if(g.isVisible()){var p=g.getModel(),C=p.source,F=p.target;u.includes(C)&&u.includes(F)&&n(g,"select",e)&&(f.push(g),r.setItemState(g,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,x.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},z0="click",YS=["click","drag"],U0=void 0,VS=["shift","ctrl","control","alt","meta",void 0],jS={getDefaultCfg:function(){return{trigger:z0,key:U0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;YS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=z0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&VS.indexOf(e.key.toLowerCase())===-1&&(e.trigger=U0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,x.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,x.__assign)((0,x.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,d.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,x.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},W0="ctrl",HS=["shift","ctrl","alt","control"],KS="1",ZS={getDefaultCfg:function(){return{trigger:W0,combinedKey:KS,functionName:"fitView",functionParams:[]}},getEvents:function(){return HS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=W0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},$S=["shift","ctrl","alt","control","meta"],qS={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||$S.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(kr){return e["".concat(kr,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var l=this.graph.get("width"),g=this.graph.get("height"),p=this.graph.get("canvas").getCanvasBBox(),C=this.scalableRange,F=this.scalableRange;C<1&&C>-1&&(C=l*C,F=g*F);var H=p.minX,tt=p.maxX,at=p.minY,ut=p.maxY;f>0?tt<-C?f=0:tt-f<-C&&(f=tt+C):f<0&&(H>l+C?f=0:H-f>l+C&&(f=H-(l+C))),c>0?ut<-F?c=0:ut-c<-F&&(c=ut+F):c<0&&(at>g+F?c=0:at-c>g+F&&(c=at-(g+F))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var ht=this.get("enableOptimize");if(ht){var _t=this.get("optimizeZoom"),Gt=this.get("optimized"),Bt=r.getNodes(),re=r.getEdges(),xe=Bt.length,se=re.length;if(!Gt){for(var Oe=0;Oe<xe;Oe++){var Ve=Bt[Oe];if(!Ve.destroyed)for(var Ir=Ve.get("group").get("children"),Wr=Ir.length,Nr=0;Nr<Wr;Nr++){var Er=Ir[Nr];!Er.destoryed&&!Er.get("isKeyShape")&&(Er.set("ori-visibility",Er.get("ori-visibility")||Er.get("visible")),Er.hide())}}for(var fn=0;fn<se;fn++)for(var rn=re[fn],Ir=rn.get("group").get("children"),Wr=Ir.length,Nr=0;Nr<Wr;Nr++){var Er=Ir[Nr];Er.set("ori-visibility",Er.get("ori-visibility")||Er.get("visible")),Er.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var wr=setTimeout(function(){var kr=r.getZoom(),qr=t.get("optimized");if(qr){t.set("optimized",!1);for(var Qr=0;Qr<xe;Qr++){var gn=Bt[Qr],Tn=gn.get("group").get("children"),fa=Tn.length;if(kr<_t){var Oa=gn.getKeyShape(),pi=Oa.get("ori-visibility");pi&&Oa.show()}else for(var ri=0;ri<fa;ri++){var yi=Tn[ri],pi=yi.get("ori-visibility");!yi.get("visible")&&pi&&pi&&yi.show()}}for(var Si=0;Si<se;Si++){var Ki=re[Si],Tn=Ki.get("group").get("children"),fa=Tn.length;if(kr<_t){var Oa=Ki.getKeyShape(),pi=Oa.get("ori-visibility");pi&&Oa.show()}else for(var ri=0;ri<fa;ri++){var yi=Tn[ri];if(!yi.get("visible")){var pi=yi.get("ori-visibility");pi&&yi.show()}}}}},100);this.set("timeout",wr)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,d.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,d.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},QS={"drag-canvas":ES,"zoom-canvas":IS,"drag-node":wS,"activate-relations":SS,"brush-select":MS,"click-select":CS,"lasso-select":XS,tooltip:OS,"edge-tooltip":LS,"collapse-expand":NS,"drag-combo":RS,"collapse-expand-combo":FS,"create-edge":jS,"shortcuts-call":ZS,"scroll-canvas":qS};(0,d.each)(QS,function(i,e){xg(e,i)});var JS=(0,x.__assign)((0,x.__assign)({},B),jy),U_=es.Grid,W_=es.Minimap,X_=es.Bundling,Y_=es.Menu,t_=es.Fisheye,V_=es.ToolBar,j_=es.Tooltip,e_=es.TimeBar,r_=es.ImageMinimap,n_=es.EdgeFilterLens,a_=es.SnapLine,H_=es.Legend,i_=es.Annotation,X0={version:Pl.version,Graph:bp,TreeGraph:Jx,Util:pc,Layout:Ka.Layouts,TreeLayout:Rx,registerLayout:Bx,Global:Pl,registerBehavior:xg,registerCombo:Vy,registerEdge:mg,registerNode:vc,Minimap:es.Minimap,Grid:es.Grid,Bundling:es.Bundling,Menu:es.Menu,ToolBar:es.ToolBar,Tooltip:es.Tooltip,Legend:es.Legend,TimeBar:e_,SnapLine:a_,Fisheye:t_,ImageMinimap:r_,EdgeFilterLens:n_,Annotation:i_,Algorithm:JS,Arrow:vg,Marker:dg,Shape:Zc};X0.version="4.8.23";var o_=X0,K_="4.8.23"},199905:function(dr,R,z){"use strict";z.r(R),z.d(R,{Graph:function(){return Q},GraphWithEvent:function(){return Ut},algorithm:function(){return B},comparision:function(){return k},essence:function(){return X},generate:function(){return P}});var B={};z.r(B),z.d(B,{components:function(){return Ee},dfs:function(){return Xt},dijkstra:function(){return sn},dijkstraAll:function(){return En},findCycles:function(){return Zn},floydWarshall:function(){return wt},isAcyclic:function(){return ft},postorder:function(){return L},preorder:function(){return w},prim:function(){return Yt},tarjan:function(){return ea},topsort:function(){return Ca}});var X={};z.r(X),z.d(X,{hasSelfLoop:function(){return Ea},isGraph:function(){return Mn},isNullGraph:function(){return Fa},isSimpleGraph:function(){return Un}});var k={};z.r(k),z.d(k,{containAllSameEdges:function(){return gr},containAllSameNodes:function(){return er},containSameEdges:function(){return Ce},containSameNodes:function(){return Rt},getSameEdges:function(){return Ke},getSameNodes:function(){return me},isGraphComplement:function(){return Kr},isGraphContainsAnother:function(){return Ue},isGraphOptionSame:function(){return yr},isGraphSame:function(){return dn}});var P={};z.r(P),z.d(P,{getGraphComplement:function(){return kn}});var N;(function(_e){_e.DEFAULT_EDGE_NAME="\0",_e.GRAPH_NODE="\0",_e.EDGE_KEY_DELIM=""})(N||(N={}));function D(_e,Nt){var fe=_e.get(Nt)||0;_e.set(Nt,fe+1)}function E(_e,Nt){var fe=_e.get(Nt);fe!==void 0&&(fe=fe-1,fe>0?_e.set(Nt,fe):_e.delete(Nt))}function y(_e,Nt,fe,Te){var Me=String(Nt),Le=String(fe);if(!_e&&Me>Le){var nr=Me;Me=Le,Le=nr}return Me+N.EDGE_KEY_DELIM+Le+N.EDGE_KEY_DELIM+(Te===void 0?N.DEFAULT_EDGE_NAME:Te)}function M(_e,Nt,fe,Te){var Me=String(Nt),Le=String(fe),nr={v:Nt,w:fe};if(!_e&&Me>Le){var Dr=nr.v;nr.v=nr.w,nr.w=Dr}return Te!==void 0&&(nr.name=Te),nr}function _(_e,Nt){return y(_e,Nt.v,Nt.w,Nt.name)}function m(_e){return typeof _e=="function"}var I=function(Nt){return Nt.nodes().map(function(fe){var Te=Nt.node(fe),Me=Nt.parent(fe),Le={id:fe,value:Te,parent:Me};return Le.value===void 0&&delete Le.value,Le.parent===void 0&&delete Le.parent,Le})},A=function(Nt){return Nt.edges().map(function(fe){var Te=Nt.edge(fe),Me={v:fe.v,w:fe.w,value:Te,name:fe.name};return Me.name===void 0&&delete Me.name,Me.value===void 0&&delete Me.value,Me})},O=function(Nt){var fe={options:{directed:Nt.isDirected(),multigraph:Nt.isMultigraph(),compound:Nt.isCompound()},nodes:I(Nt),edges:A(Nt),value:Nt.graph()};return fe.value===void 0&&delete fe.value,fe},U=function(Nt){var fe=new Q(Nt.options);return Nt.value!==void 0&&fe.setGraph(Nt.value),Nt.nodes.forEach(function(Te){fe.setNode(Te.id,Te.value),Te.parent&&fe.setParent(Te.id,Te.parent)}),Nt.edges.forEach(function(Te){fe.setEdge(Te.v,Te.w,Te.value,Te.name)}),fe};function j(_e,Nt){var fe=Object.keys(_e);if(Object.getOwnPropertySymbols){var Te=Object.getOwnPropertySymbols(_e);Nt&&(Te=Te.filter(function(Me){return Object.getOwnPropertyDescriptor(_e,Me).enumerable})),fe.push.apply(fe,Te)}return fe}function x(_e){for(var Nt=1;Nt<arguments.length;Nt++){var fe=arguments[Nt]!=null?arguments[Nt]:{};Nt%2?j(Object(fe),!0).forEach(function(Te){d(_e,Te,fe[Te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(fe)):j(Object(fe)).forEach(function(Te){Object.defineProperty(_e,Te,Object.getOwnPropertyDescriptor(fe,Te))})}return _e}function d(_e,Nt,fe){return Nt in _e?Object.defineProperty(_e,Nt,{value:fe,enumerable:!0,configurable:!0,writable:!0}):_e[Nt]=fe,_e}function it(_e,Nt){if(!(_e instanceof Nt))throw new TypeError("Cannot call a class as a function")}function Y(_e,Nt){for(var fe=0;fe<Nt.length;fe++){var Te=Nt[fe];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(_e,Te.key,Te)}}function W(_e,Nt,fe){return Nt&&Y(_e.prototype,Nt),fe&&Y(_e,fe),Object.defineProperty(_e,"prototype",{writable:!1}),_e}var K={compound:!1,multigraph:!1,directed:!0},Q=function(){function _e(){var Nt=this,fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};it(this,_e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=N.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Nt.directed},this.isMultigraph=function(){return Nt.multigraph},this.isCompound=function(){return Nt.compound},this.setGraph=function(Me){return Nt.label=Me,Nt},this.graph=function(){return Nt.label},this.setDefaultNodeLabel=function(Me){return m(Me)?Nt.defaultNodeLabelFn=Me:Nt.defaultNodeLabelFn=function(){return Me},Nt},this.nodeCount=function(){return Nt.nodeCountNum},this.node=function(Me){return Nt.nodesLabelMap.get(Me)},this.nodes=function(){return Array.from(Nt.nodesLabelMap.keys())},this.sources=function(){return Nt.nodes().filter(function(Me){var Le;return!(!((Le=Nt.inEdgesMap.get(Me))===null||Le===void 0)&&Le.size)})},this.sinks=function(){return Nt.nodes().filter(function(Me){var Le;return!(!((Le=Nt.outEdgesMap.get(Me))===null||Le===void 0)&&Le.size)})},this.setNodes=function(Me,Le){return Me.map(function(nr){return Nt.setNode(nr,Le)}),Nt},this.hasNode=function(Me){return Nt.nodesLabelMap.has(Me)},this.checkCompound=function(){if(!Nt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(Me){if(Nt.isCompound()){var Le,nr=(Le=Nt.parentMap)===null||Le===void 0?void 0:Le.get(Me);if(nr!==Nt.GRAPH_NODE)return nr}},this.removeFromParentsChildList=function(Me){var Le=Nt.parentMap.get(Me);Nt.childrenMap.get(Le).delete(Me)},this.setParent=function(Me,Le){var nr,Dr;Nt.checkCompound();for(var jr=Le===void 0?Nt.GRAPH_NODE:Le,Sn=Nt.parent(jr);Sn;){if(Me===Sn)throw new Error("Setting "+Le+" as parent of "+Me+" would create a cycle");Sn=Nt.parent(Sn)}Le&&Nt.setNode(Le),Nt.setNode(Me),Nt.removeFromParentsChildList(Me),(nr=Nt.parentMap)===null||nr===void 0||nr.set(Me,jr);var An=Nt.childrenMap.get(jr);return An.set(Me,!0),(Dr=Nt.childrenMap)===null||Dr===void 0||Dr.set(jr,An),Nt},this.children=function(Me){var Le=Me===void 0?Nt.GRAPH_NODE:Me;if(Nt.isCompound()){var nr,Dr=(nr=Nt.childrenMap)===null||nr===void 0?void 0:nr.get(Le);return Dr?Array.from(Dr.keys()):void 0}if(Le===Nt.GRAPH_NODE)return Nt.nodes();if(Me&&Nt.hasNode(Me))return[]},this.predecessors=function(Me){var Le=Nt.predecessorsMap.get(Me);return Le?Array.from(Le.keys()):void 0},this.successors=function(Me){var Le=Nt.successorsMap.get(Me);return Le?Array.from(Le.keys()):void 0},this.neighbors=function(Me){var Le;if(Nt.hasNode(Me))return Array.from(new Set((Le=Nt.predecessors(Me))===null||Le===void 0?void 0:Le.concat(Nt.successors(Me))))},this.isLeaf=function(Me){var Le;if(Nt.isDirected()){var nr;return!(!((nr=Nt.successors(Me))===null||nr===void 0)&&nr.length)}return!(!((Le=Nt.neighbors(Me))===null||Le===void 0)&&Le.length)},this.filterNodes=function(Me){var Le=Nt.directed,nr=Nt.multigraph,Dr=Nt.compound,jr=new _e({directed:Le,multigraph:nr,compound:Dr});if(jr.setGraph(Nt.graph()),Nt.nodes().forEach(function(An){Me(An)&&jr.setNode(An,Nt.node(An))}),Nt.edges().forEach(function(An){jr.hasNode(An.v)&&jr.hasNode(An.w)&&jr.setEdgeObj(An,Nt.edge(An))}),Dr){var Sn=function(Fn){for(var da=Nt.parent(Fn);da!==void 0&&!jr.hasNode(da);)da=Nt.parent(da);return da};jr.nodes().forEach(function(An){jr.setParent(An,Sn(An))})}return jr},this.setDefaultEdgeLabel=function(Me){return m(Me)?Nt.defaultEdgeLabelFn=Me:Nt.defaultEdgeLabelFn=function(){return Me},Nt},this.edgeCount=function(){return Nt.edgeCountNum},this.setEdgeObj=function(Me,Le){return Nt.setEdge(Me.v,Me.w,Le,Me.name)},this.setPath=function(Me,Le){return Me.reduce(function(nr,Dr){return Nt.setEdge(nr,Dr,Le),Dr}),Nt},this.edgeFromArgs=function(Me,Le,nr){return Nt.edge({v:Me,w:Le,name:nr})},this.edge=function(Me){return Nt.edgesLabelsMap.get(_(Nt.isDirected(),Me))},this.hasEdge=function(Me,Le,nr){return Nt.edgesLabelsMap.has(_(Nt.isDirected(),{v:Me,w:Le,name:nr}))},this.removeEdgeObj=function(Me){var Le=Me.v,nr=Me.w,Dr=Me.name;return Nt.removeEdge(Le,nr,Dr)},this.edges=function(){return Array.from(Nt.edgesMap.values())},this.inEdges=function(Me,Le){var nr=Nt.inEdgesMap.get(Me);if(nr)return Array.from(nr.values()).filter(function(Dr){return!Le||Dr.v===Le})},this.outEdges=function(Me,Le){var nr=Nt.outEdgesMap.get(Me);if(nr)return Array.from(nr.values()).filter(function(Dr){return!Le||Dr.w===Le})},this.nodeEdges=function(Me,Le){var nr;if(Nt.hasNode(Me))return(nr=Nt.inEdges(Me,Le))===null||nr===void 0?void 0:nr.concat(Nt.outEdges(Me,Le))},this.toJSON=function(){return O(Nt)},this.nodeInDegree=function(Me){var Le=Nt.inEdgesMap.get(Me);return Le?Le.size:0},this.nodeOutDegree=function(Me){var Le=Nt.outEdgesMap.get(Me);return Le?Le.size:0},this.nodeDegree=function(Me){return Nt.nodeInDegree(Me)+Nt.nodeOutDegree(Me)},this.source=function(Me){return Me.v},this.target=function(Me){return Me.w};var Te=x(x({},K),fe);this.compound=Te.compound,this.directed=Te.directed,this.multigraph=Te.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return W(_e,[{key:"setNode",value:function(fe,Te){var Me=this.nodesLabelMap,Le=this.defaultNodeLabelFn,nr=this.isCompound,Dr=this.parentMap,jr=this.childrenMap,Sn=this.inEdgesMap,An=this.outEdgesMap,Fn=this.predecessorsMap,da=this.successorsMap;if(Me.has(fe))return Te!==void 0&&Me.set(fe,Te),this;if(Me.set(fe,Te||Le(fe)),nr()){var wa;Dr==null||Dr.set(fe,this.GRAPH_NODE),jr==null||jr.set(fe,new Map),jr!=null&&jr.has(this.GRAPH_NODE)||jr==null||jr.set(this.GRAPH_NODE,new Map),jr==null||(wa=jr.get(this.GRAPH_NODE))===null||wa===void 0||wa.set(fe,!0)}return[Sn,An,Fn,da].forEach(function(hi){return hi.set(fe,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(fe){var Te=this;if(this.hasNode(fe)){var Me=function(fi){Te.removeEdge(fi.v,fi.w,fi.name)},Le=this.inEdgesMap,nr=this.outEdgesMap,Dr=this.predecessorsMap,jr=this.successorsMap,Sn=this.nodesLabelMap;if(this.isCompound()){var An,Fn,da;this.removeFromParentsChildList(fe),(An=this.parentMap)===null||An===void 0||An.delete(fe),(Fn=this.children(fe))===null||Fn===void 0||Fn.forEach(function(Wn){return Te.setParent(Wn)}),(da=this.childrenMap)===null||da===void 0||da.delete(fe)}var wa=Le.get(fe),hi=nr.get(fe);Array.from(wa.values()).forEach(function(Wn){return Me(Wn)}),Array.from(hi.values()).forEach(function(Wn){return Me(Wn)}),Sn.delete(fe),Le.delete(fe),nr.delete(fe),Dr.delete(fe),jr.delete(fe),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(fe,Te,Me,Le){var nr,Dr,jr=M(this.isDirected(),fe,Te,Le),Sn=_(this.isDirected(),jr),An=jr.v,Fn=jr.w;if(this.edgesLabelsMap.has(Sn))return this.edgesLabelsMap.set(Sn,Me),this;if(Le!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(An),this.setNode(Fn),this.edgesLabelsMap.set(Sn,Me||this.defaultEdgeLabelFn(An,Fn,Le)),Object.freeze(jr),this.edgesMap.set(Sn,jr);var da=this.predecessorsMap.get(Fn),wa=this.successorsMap.get(An);return D(da,An),D(wa,Fn),(nr=this.inEdgesMap.get(Fn))===null||nr===void 0||nr.set(Sn,jr),(Dr=this.outEdgesMap.get(An))===null||Dr===void 0||Dr.set(Sn,jr),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(fe,Te,Me){var Le=y(this.isDirected(),fe,Te,Me),nr=this.edgesMap.get(Le);if(nr){var Dr=M(this.isDirected(),fe,Te,Me),jr=Dr.v,Sn=Dr.w;this.edgesLabelsMap.delete(Le),this.edgesMap.delete(Le);var An=this.predecessorsMap.get(Sn),Fn=this.successorsMap.get(jr);E(An,jr),E(Fn,Sn),this.inEdgesMap.get(Sn).delete(Le),this.outEdgesMap.get(jr).delete(Le),this.edgeCountNum-=1}return this}}]),_e}();Q.fromJSON=U;function rt(_e){"@babel/helpers - typeof";return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nt){return typeof Nt}:function(Nt){return Nt&&typeof Symbol=="function"&&Nt.constructor===Symbol&&Nt!==Symbol.prototype?"symbol":typeof Nt},rt(_e)}function J(_e,Nt){if(!(_e instanceof Nt))throw new TypeError("Cannot call a class as a function")}function ot(_e,Nt){for(var fe=0;fe<Nt.length;fe++){var Te=Nt[fe];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(_e,Te.key,Te)}}function vt(_e,Nt,fe){return Nt&&ot(_e.prototype,Nt),fe&&ot(_e,fe),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function gt(){return typeof Reflect!="undefined"&&Reflect.get?gt=Reflect.get:gt=function(Nt,fe,Te){var Me=Pt(Nt,fe);if(Me){var Le=Object.getOwnPropertyDescriptor(Me,fe);return Le.get?Le.get.call(arguments.length<3?Nt:Te):Le.value}},gt.apply(this,arguments)}function Pt(_e,Nt){for(;!Object.prototype.hasOwnProperty.call(_e,Nt)&&(_e=St(_e),_e!==null););return _e}function It(_e,Nt){if(typeof Nt!="function"&&Nt!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(Nt&&Nt.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),Nt&&Jt(_e,Nt)}function Jt(_e,Nt){return Jt=Object.setPrototypeOf||function(Te,Me){return Te.__proto__=Me,Te},Jt(_e,Nt)}function zt(_e){var Nt=lt();return function(){var Te=St(_e),Me;if(Nt){var Le=St(this).constructor;Me=Reflect.construct(Te,arguments,Le)}else Me=Te.apply(this,arguments);return kt(this,Me)}}function kt(_e,Nt){if(Nt&&(rt(Nt)==="object"||typeof Nt=="function"))return Nt;if(Nt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $(_e)}function $(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function lt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_e){return!1}}function St(_e){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},St(_e)}var Ut=function(_e){It(fe,_e);var Nt=zt(fe);function fe(){var Te;J(this,fe);for(var Me=arguments.length,Le=new Array(Me),nr=0;nr<Me;nr++)Le[nr]=arguments[nr];return Te=Nt.call.apply(Nt,[this].concat(Le)),Te.eventPool={},Te}return vt(fe,[{key:"appendEvent",value:function(Me,Le){this.eventPool[Me]||(this.eventPool[Me]=[]),this.eventPool[Me].push(Le)}},{key:"removeEvent",value:function(Me,Le){if(this.eventPool[Me]){var nr=this.eventPool[Me].indexOf(Le);nr>-1&&this.eventPool[Me].splice(nr,1)}}},{key:"emitEvent",value:function(Me){for(var Le=arguments.length,nr=new Array(Le>1?Le-1:0),Dr=1;Dr<Le;Dr++)nr[Dr-1]=arguments[Dr];this.eventPool[Me]&&this.eventPool[Me].forEach(function(jr){jr.apply(void 0,nr)})}},{key:"setNode",value:function(Me,Le){return gt(St(fe.prototype),"setNode",this).call(this,Me,Le),this.emitEvent("nodeAdd",Me,Le),this}},{key:"removeNode",value:function(Me){return gt(St(fe.prototype),"removeNode",this).call(this,Me),this.emitEvent("nodeRemove",Me),this}},{key:"setEdge",value:function(Me,Le,nr,Dr){return gt(St(fe.prototype),"setEdge",this).call(this,Me,Le,nr,Dr),this.emitEvent("edgeAdd",Me,Le,nr,Dr),this}},{key:"removeEdge",value:function(Me,Le,nr){return gt(St(fe.prototype),"removeEdge",this).call(this,Me,Le,nr),this.emitEvent("edgeRemove",Me,Le,nr),this}}]),fe}(Q);function Ft(_e,Nt){for(var fe=0;fe<Nt.length;fe++){var Te=Nt[fe];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(_e,Te.key,Te)}}function ee(_e,Nt,fe){return Nt&&Ft(_e.prototype,Nt),fe&&Ft(_e,fe),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function ve(_e,Nt){if(!(_e instanceof Nt))throw new TypeError("Cannot call a class as a function")}var be=ee(function _e(){var Nt=this;ve(this,_e),this.arr=[],this.keyIndice=new Map,this.size=function(){return Nt.arr.length},this.keys=function(){return Nt.arr.map(function(fe){return fe.key})},this.has=function(fe){return Nt.keyIndice.has(fe)},this.priority=function(fe){var Te=Nt.keyIndice.get(fe);if(Te!==void 0)return Nt.arr[Te].priority},this.swap=function(fe,Te){var Me=Nt.arr,Le=Nt.keyIndice,nr=[Me[fe],Me[Te]],Dr=nr[0],jr=nr[1];Me[fe]=jr,Me[Te]=Dr,Le.set(Dr.key,Te),Le.set(jr.key,fe)},this.innerDecrease=function(fe){for(var Te=Nt.arr,Me=Te[fe].priority,Le,nr=fe;nr!==0;){var Dr;if(Le=nr>>1,((Dr=Te[Le])===null||Dr===void 0?void 0:Dr.priority)<Me)break;Nt.swap(nr,Le),nr=Le}},this.heapify=function(fe){var Te=Nt.arr,Me=fe<<1,Le=Me+1,nr=fe;Me<Te.length&&(nr=Te[Me].priority<Te[nr].priority?Me:nr,Le<Te.length&&(nr=Te[Le].priority<Te[nr].priority?Le:nr),nr!==fe&&(Nt.swap(fe,nr),Nt.heapify(nr)))},this.min=function(){if(Nt.size()===0)throw new Error("Queue underflow");return Nt.arr[0].key},this.add=function(fe,Te){var Me=Nt.keyIndice,Le=Nt.arr;if(!Me.has(fe)){var nr=Le.length;return Me.set(fe,nr),Le.push({key:fe,priority:Te}),Nt.innerDecrease(nr),!0}return!1},this.removeMin=function(){Nt.swap(0,Nt.arr.length-1);var fe=Nt.arr.pop();return Nt.keyIndice.delete(fe.key),Nt.heapify(0),fe.key},this.decrease=function(fe,Te){if(!Nt.has(fe))throw new Error("There's no key named ".concat(fe));var Me=Nt.keyIndice.get(fe);if(Te>Nt.arr[Me].priority)throw new Error("New priority is greater than current priority.Key: ".concat(fe," Old: + ").concat(Nt.arr[Me].priority," New: ").concat(Te));Nt.arr[Me].priority=Te,Nt.innerDecrease(Me)}}),Ht=function(Nt,fe){var Te=new Q,Me=new Map,Le=new be,nr;function Dr(An){var Fn=An.v===nr?An.w:An.v,da=Le.priority(Fn);if(da!==void 0){var wa=fe(An);wa<da&&(Me.set(Fn,nr),Le.decrease(Fn,wa))}}if(Nt.nodeCount()===0)return Te;Nt.nodes().forEach(function(An){Le.add(An,Number.POSITIVE_INFINITY),Te.setNode(An)}),Le.decrease(Nt.nodes()[0],0);for(var jr=!1;Le.size()>0;){var Sn;if(nr=Le.removeMin(),Me.has(nr))Te.setEdge(nr,Me.get(nr));else{if(jr)throw new Error("Input graph is not connected: "+Nt.graph());jr=!0}(Sn=Nt.nodeEdges(nr))===null||Sn===void 0||Sn.forEach(Dr)}return Te},Yt=Ht,de=function(Nt){var fe=new Set,Te=[],Me=Nt.nodes();return Me.forEach(function(Le){for(var nr=[],Dr=[Le];Dr.length>0;){var jr=Dr.pop();if(!fe.has(jr)){var Sn,An;fe.add(jr),nr.push(jr),(Sn=Nt.successors(jr))===null||Sn===void 0||Sn.forEach(function(Fn){return Dr.push(Fn)}),(An=Nt.predecessors(jr))===null||An===void 0||An.forEach(function(Fn){return Dr.push(Fn)})}}nr.length&&Te.push(nr)}),Te},Ee=de,ge=function _e(Nt,fe,Te,Me,Le,nr){Me.includes(fe)||(Me.push(fe),Te||nr.push(fe),Le(fe).forEach(function(Dr){return _e(Nt,Dr,Te,Me,Le,nr)}),Te&&nr.push(fe))},Ot=function(Nt,fe,Te){var Me=Array.isArray(fe)?fe:[fe],Le=function(Sn){return Nt.isDirected()?Nt.successors(Sn):Nt.neighbors(Sn)},nr=[],Dr=[];return Me.forEach(function(jr){if(Nt.hasNode(jr))ge(Nt,jr,Te==="post",Dr,Le,nr);else throw new Error("Graph does not have node: "+jr)}),nr},Xt=Ot;function ce(_e,Nt){return Je(_e)||We(_e,Nt)||Kt(_e,Nt)||Lt()}function Lt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kt(_e,Nt){if(_e){if(typeof _e=="string")return pe(_e,Nt);var fe=Object.prototype.toString.call(_e).slice(8,-1);if(fe==="Object"&&_e.constructor&&(fe=_e.constructor.name),fe==="Map"||fe==="Set")return Array.from(_e);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return pe(_e,Nt)}}function pe(_e,Nt){(Nt==null||Nt>_e.length)&&(Nt=_e.length);for(var fe=0,Te=new Array(Nt);fe<Nt;fe++)Te[fe]=_e[fe];return Te}function We(_e,Nt){var fe=_e==null?null:typeof Symbol!="undefined"&&_e[Symbol.iterator]||_e["@@iterator"];if(fe!=null){var Te=[],Me=!0,Le=!1,nr,Dr;try{for(fe=fe.call(_e);!(Me=(nr=fe.next()).done)&&(Te.push(nr.value),!(Nt&&Te.length===Nt));Me=!0);}catch(jr){Le=!0,Dr=jr}finally{try{!Me&&fe.return!=null&&fe.return()}finally{if(Le)throw Dr}}return Te}}function Je(_e){if(Array.isArray(_e))return _e}var Mr=function(){return 1},Vt=function(Nt,fe,Te,Me){return on(Nt,fe,Te||Mr,Me||function(Le){return Nt.outEdges(Le)})},on=function(Nt,fe,Te,Me){var Le=new Map,nr=new be,Dr,jr,Sn=function(da){var wa=da.v!==Dr?da.v:da.w,hi=Le.get(wa),Wn=Te(da),fi=jr.distance+Wn;if(Wn<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+da+" Weight: "+Wn);fi<hi.distance&&(hi.distance=fi,hi.predecessor=Dr,nr.decrease(wa,fi))};for(Nt.nodes().forEach(function(Fn){var da=Fn===fe?0:Number.POSITIVE_INFINITY;Le.set(Fn,{distance:da}),nr.add(Fn,da)});nr.size()>0&&(Dr=nr.removeMin(),jr=Le.get(Dr),!(jr&&jr.distance===Number.POSITIVE_INFINITY));)Me(Dr).forEach(Sn);var An={};return Array.from(Le.entries()).forEach(function(Fn){var da=ce(Fn,2),wa=da[0],hi=da[1];return An[String(wa)]=hi,An}),An},sn=Vt,pn=function(Nt,fe,Te){var Me={};return Nt.nodes().forEach(function(Le){return Me[String(Le)]=sn(Nt,Le,fe,Te),Me}),Me},En=pn,Yn=function(Nt){var fe=0,Te=[],Me=new Map,Le=[];function nr(Dr){var jr,Sn={onStack:!0,lowlink:fe,index:fe};if(Me.set(Dr,Sn),fe+=1,Te.push(Dr),(jr=Nt.successors(Dr))===null||jr===void 0||jr.forEach(function(wa){var hi;if(Me.has(wa)){if(!((hi=Me.get(wa))===null||hi===void 0)&&hi.onStack){var fi=Me.get(wa);Sn.lowlink=Math.min(Sn.lowlink,fi.index)}}else{nr(wa);var Wn=Me.get(wa);Sn.lowlink=Math.min(Sn.lowlink,Wn.lowlink)}}),Sn.lowlink===Sn.index){var An=[],Fn;do{Fn=Te.pop();var da=Me.get(Fn);da.onStack=!1,An.push(Fn)}while(Dr!==Fn);Le.push(An)}}return Nt.nodes().forEach(function(Dr){Me.has(Dr)||nr(Dr)}),Le},ea=Yn,Nn=function(Nt){return ea(Nt).filter(function(fe){return fe.length>1||fe.length===1&&Nt.hasEdge(fe[0],fe[0])})},Zn=Nn;function La(_e){"@babel/helpers - typeof";return La=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nt){return typeof Nt}:function(Nt){return Nt&&typeof Symbol=="function"&&Nt.constructor===Symbol&&Nt!==Symbol.prototype?"symbol":typeof Nt},La(_e)}function Aa(_e,Nt){for(var fe=0;fe<Nt.length;fe++){var Te=Nt[fe];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(_e,Te.key,Te)}}function fr(_e,Nt,fe){return Nt&&Aa(_e.prototype,Nt),fe&&Aa(_e,fe),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function Or(_e,Nt){if(!(_e instanceof Nt))throw new TypeError("Cannot call a class as a function")}function vn(_e,Nt){if(typeof Nt!="function"&&Nt!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(Nt&&Nt.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),Nt&&wn(_e,Nt)}function yn(_e){var Nt=ma();return function(){var Te=na(_e),Me;if(Nt){var Le=na(this).constructor;Me=Reflect.construct(Te,arguments,Le)}else Me=Te.apply(this,arguments);return qn(this,Me)}}function qn(_e,Nt){if(Nt&&(La(Nt)==="object"||typeof Nt=="function"))return Nt;if(Nt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vn(_e)}function Vn(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function jn(_e){var Nt=typeof Map=="function"?new Map:void 0;return jn=function(Te){if(Te===null||!Pa(Te))return Te;if(typeof Te!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Nt!="undefined"){if(Nt.has(Te))return Nt.get(Te);Nt.set(Te,Me)}function Me(){return ba(Te,arguments,na(this).constructor)}return Me.prototype=Object.create(Te.prototype,{constructor:{value:Me,enumerable:!1,writable:!0,configurable:!0}}),wn(Me,Te)},jn(_e)}function ba(_e,Nt,fe){return ma()?ba=Reflect.construct:ba=function(Me,Le,nr){var Dr=[null];Dr.push.apply(Dr,Le);var jr=Function.bind.apply(Me,Dr),Sn=new jr;return nr&&wn(Sn,nr.prototype),Sn},ba.apply(null,arguments)}function ma(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_e){return!1}}function Pa(_e){return Function.toString.call(_e).indexOf("[native code]")!==-1}function wn(_e,Nt){return wn=Object.setPrototypeOf||function(Te,Me){return Te.__proto__=Me,Te},wn(_e,Nt)}function na(_e){return na=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},na(_e)}var Qn=function(_e){vn(fe,_e);var Nt=yn(fe);function fe(){return Or(this,fe),Nt.apply(this,arguments)}return fr(fe)}(jn(Error));function In(_e){var Nt=new Set,fe=new Set,Te=[];function Me(Le){if(fe.has(Le))throw new Qn;if(!Nt.has(Le)){var nr;fe.add(Le),Nt.add(Le),(nr=_e.predecessors(Le))===null||nr===void 0||nr.forEach(Me),fe.delete(Le),Te.push(Le)}}if(_e.sinks().forEach(Me),Nt.size!==_e.nodeCount())throw new Qn;return Te}var Ca=In,q=function(Nt){try{Ca(Nt)}catch(fe){if(fe instanceof Qn)return!1;throw fe}return!0},ft=q,nt=function(Nt,fe){return Xt(Nt,fe,"post")},L=nt,b=function(Nt,fe){return Xt(Nt,fe,"pre")},w=b,V=function(){return 1};function xt(_e,Nt,fe){return Ct(_e,Nt||V,fe||function(Te){return _e.outEdges(Te)})}function Ct(_e,Nt,fe){var Te={},Me=_e.nodes();return Me.forEach(function(Le){var nr=String(Le);Te[nr]={},Te[nr][nr]={distance:0},Me.forEach(function(Dr){Le!==Dr&&(Te[nr][String(Dr)]={distance:Number.POSITIVE_INFINITY})}),fe(Le).forEach(function(Dr){var jr=Dr.v===Le?Dr.w:Dr.v,Sn=Nt(Dr);Te[nr][String(jr)]={distance:Sn,predecessor:Le}})}),Me.forEach(function(Le){var nr=String(Le),Dr=Te[nr];Me.forEach(function(jr){var Sn=String(jr),An=Te[Sn];Me.forEach(function(Fn){var da=String(Fn),wa=An[nr],hi=Dr[da],Wn=An[da],fi=wa.distance+hi.distance;fi<Wn.distance&&(Wn.distance=fi,Wn.predecessor=hi.predecessor)})})}),Te}var wt=xt,Rt=function(Nt,fe){for(var Te=Nt.nodes(),Me=0;Me<Te.length;Me++){var Le=Te[Me];if(fe.hasNode(Le))return!0}return!1},Ce=function(Nt,fe){for(var Te=Nt.edges(),Me=0;Me<Te.length;Me++){var Le=Te[Me];if(fe.hasEdge(Le.v,Le.w,Le.name))return!0}return!1},me=function(Nt,fe){var Te=Nt.nodes(),Me=Te.filter(function(Le){return fe.hasNode(Le)});return Me},Ke=function(Nt,fe){var Te=Nt.edges(),Me=Te.filter(function(Le){return fe.hasEdge(Le.v,Le.w,Le.name)});return Me},yr=function(Nt,fe){return Nt.isCompound()===fe.isCompound()&&Nt.isDirected()===fe.isDirected()&&Nt.isMultigraph()===fe.isMultigraph()},er=function(Nt,fe){var Te=me(Nt,fe);return Te.length===Nt.nodes().length},gr=function(Nt,fe){var Te=Ke(Nt,fe);return Te.length===Nt.edges().length},dn=function(Nt,fe){return yr(Nt,fe)&&Nt.nodeCount()===fe.nodeCount()&&er(Nt,fe)&&Nt.edgeCount()===fe.edgeCount()&&gr(Nt,fe)},Ue=function(Nt,fe){return er(Nt,fe)&&gr(Nt,fe)};function or(_e,Nt){return Sa(_e)||va(_e,Nt)||$r(_e,Nt)||mr()}function mr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $r(_e,Nt){if(_e){if(typeof _e=="string")return Pr(_e,Nt);var fe=Object.prototype.toString.call(_e).slice(8,-1);if(fe==="Object"&&_e.constructor&&(fe=_e.constructor.name),fe==="Map"||fe==="Set")return Array.from(_e);if(fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return Pr(_e,Nt)}}function Pr(_e,Nt){(Nt==null||Nt>_e.length)&&(Nt=_e.length);for(var fe=0,Te=new Array(Nt);fe<Nt;fe++)Te[fe]=_e[fe];return Te}function va(_e,Nt){var fe=_e==null?null:typeof Symbol!="undefined"&&_e[Symbol.iterator]||_e["@@iterator"];if(fe!=null){var Te=[],Me=!0,Le=!1,nr,Dr;try{for(fe=fe.call(_e);!(Me=(nr=fe.next()).done)&&(Te.push(nr.value),!(Nt&&Te.length===Nt));Me=!0);}catch(jr){Le=!0,Dr=jr}finally{try{!Me&&fe.return!=null&&fe.return()}finally{if(Le)throw Dr}}return Te}}function Sa(_e){if(Array.isArray(_e))return _e}function Mn(_e){return _e instanceof Q}function Un(_e){if(_e.isMultigraph())return!1;for(var Nt=_e.edges(),fe=new Map,Te=0;Te<Nt.length;Te++){var Me=Nt[Te];if(Me.v===Me.w)return!1;var Le=[Me.v,Me.w].sort(),nr=or(Le,2),Dr=nr[0],jr=nr[1],Sn="".concat(Dr,"-").concat(jr);if(fe.has(Sn))return!1;fe.set(Sn,!0)}return!0}function Fa(_e){return _e.nodes().length===0}function Ea(_e){for(var Nt=_e.edges(),fe=0;fe<Nt.length;fe++){var Te=Nt[fe];if(Te.v===Te.w)return!0}return!1}var Kr=function(Nt,fe){if(!Un(Nt)||!Un(fe)||!er(Nt,fe)||Ce(Nt,fe))return!1;var Te=Nt.nodeCount();return Nt.edgeCount()+fe.edgeCount()===Te*(Te-1)/2},kn=function(Nt){if(!Un(Nt))return null;for(var fe=Nt.nodeCount(),Te=new Q({compound:Nt.isCompound(),directed:Nt.isDirected(),multigraph:Nt.isMultigraph()}),Me=Nt.nodes(),Le=0;Le<fe;Le++){var nr=Me[Le];Te.setNode(nr,Nt.node(nr));for(var Dr=Le+1;Dr<fe;Dr++){var jr=Me[Dr];Nt.hasEdge(nr,jr)||Te.setEdge(nr,jr)}}return Te}},981746:function(dr){(function(z,B){dr.exports=B()})(typeof self!="undefined"?self:this,function(){return function(R){var z={};function B(X){if(z[X])return z[X].exports;var k=z[X]={i:X,l:!1,exports:{}};return R[X].call(k.exports,k,k.exports,B),k.l=!0,k.exports}return B.m=R,B.c=z,B.d=function(X,k,P){B.o(X,k)||Object.defineProperty(X,k,{configurable:!1,enumerable:!0,get:P})},B.n=function(X){var k=X&&X.__esModule?function(){return X.default}:function(){return X};return B.d(k,"a",k),k},B.o=function(X,k){return Object.prototype.hasOwnProperty.call(X,k)},B.p="",B(B.s=36)}([function(R,z,B){"use strict";var X=B(3);z.a=function(k){return Array.isArray?Array.isArray(k):Object(X.a)(k,"Array")}},function(R,z,B){"use strict";var X=function(k){return k!==null&&typeof k!="function"&&isFinite(k.length)};z.a=X},function(R,z,B){"use strict";var X=B(3);z.a=function(k){return Object(X.a)(k,"Function")}},function(R,z,B){"use strict";var X={}.toString,k=function(P,N){return X.call(P)==="[object "+N+"]"};z.a=k},function(R,z,B){"use strict";var X=B(3);z.a=function(k){return Object(X.a)(k,"String")}},function(R,z,B){"use strict";var X=B(3),k=function(P){return Object(X.a)(P,"Number")};z.a=k},function(R,z,B){var X=B(38),k=X.mix;function P(N,D,E,y){return y===void 0&&(y="height"),E==="center"?(N[y]+D[y])/2:N.height}R.exports={assign:k,getHeight:P}},function(R,z,B){"use strict";var X=function(k){return k==null};z.a=X},function(R,z,B){"use strict";var X=B(0),k=B(12);function P(N,D){if(N){var E;if(Object(X.a)(N))for(var y=0,M=N.length;y<M&&(E=D(N[y],y),E!==!1);y++);else if(Object(k.a)(N)){for(var _ in N)if(N.hasOwnProperty(_)&&(E=D(N[_],_),E===!1))break}}}z.a=P},function(R,z,B){"use strict";var X=B(7);z.a=function(k){return Object(X.a)(k)?"":k.toString()}},function(R,z,B){"use strict";var X=B(14),k=B(3),P=function(N){if(!Object(X.a)(N)||!Object(k.a)(N,"Object"))return!1;if(Object.getPrototypeOf(N)===null)return!0;for(var D=N;Object.getPrototypeOf(D)!==null;)D=Object.getPrototypeOf(D);return Object.getPrototypeOf(N)===D};z.a=P},function(R,z,B){var X=B(18),k=function(){function P(D,E){E===void 0&&(E={});var y=this;y.options=E,y.rootNode=X(D,E)}var N=P.prototype;return N.execute=function(){throw new Error("please override this method")},P}();R.exports=k},function(R,z,B){"use strict";z.a=function(X){var k=typeof X;return X!==null&&k==="object"||k==="function"}},function(R,z,B){"use strict";var X=B(1),k=function(P,N){return Object(X.a)(P)?P.indexOf(N)>-1:!1};z.a=k},function(R,z,B){"use strict";var X=function(k){return typeof k=="object"&&k!==null};z.a=X},function(R,z,B){"use strict";var X=B(8),k=B(2),P=Object.values?function(N){return Object.values(N)}:function(N){var D=[];return Object(X.a)(N,function(E,y){Object(k.a)(N)&&y==="prototype"||D.push(E)}),D};z.a=P},function(R,z,B){"use strict";z.a=k;function X(P,N){for(var D in N)N.hasOwnProperty(D)&&D!=="constructor"&&N[D]!==void 0&&(P[D]=N[D])}function k(P,N,D,E){return N&&X(P,N),D&&X(P,D),E&&X(P,E),P}},function(R,z,B){var X=B(35),k=["LR","RL","TB","BT","H","V"],P=["LR","RL","H"],N=function(y){return P.indexOf(y)>-1},D=k[0];R.exports=function(E,y,M){var _=y.direction||D;if(y.isHorizontal=N(_),_&&k.indexOf(_)===-1)throw new TypeError("Invalid direction: "+_);if(_===k[0])M(E,y);else if(_===k[1])M(E,y),E.right2left();else if(_===k[2])M(E,y);else if(_===k[3])M(E,y),E.bottom2top();else if(_===k[4]||_===k[5]){var m=X(E,y),I=m.left,A=m.right;M(I,y),M(A,y),y.isHorizontal?I.right2left():I.bottom2top(),A.translate(I.x-A.x,I.y-A.y),E.x=I.x,E.y=A.y;var O=E.getBoundingBox();y.isHorizontal?O.top<0&&E.translate(0,-O.top):O.left<0&&E.translate(-O.left,0)}var U=y.fixedRoot;return U===void 0&&(U=!0),U&&E.translate(-(E.x+E.width/2+E.hgap),-(E.y+E.height/2+E.vgap)),E}},function(R,z,B){var X=B(6),k=18,P=k*2,N=k,D={getId:function(_){return _.id||_.name},getPreH:function(_){return _.preH||0},getPreV:function(_){return _.preV||0},getHGap:function(_){return _.hgap||N},getVGap:function(_){return _.vgap||N},getChildren:function(_){return _.children},getHeight:function(_){return _.height||P},getWidth:function(_){var m=_.label||" ";return _.width||m.split("").length*k}};function E(M,_){var m=this;if(m.vgap=m.hgap=0,M instanceof E)return M;m.data=M;var I=_.getHGap(M),A=_.getVGap(M);return m.preH=_.getPreH(M),m.preV=_.getPreV(M),m.width=_.getWidth(M),m.height=_.getHeight(M),m.width+=m.preH,m.height+=m.preV,m.id=_.getId(M),m.x=m.y=0,m.depth=0,m.children||(m.children=[]),m.addGap(I,A),m}X.assign(E.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(_,m){var I=this;I.hgap+=_,I.vgap+=m,I.width+=2*_,I.height+=2*m},eachNode:function(_){for(var m=this,I=[m],A;A=I.shift();)_(A),I=A.children.concat(I)},DFTraverse:function(_){this.eachNode(_)},BFTraverse:function(_){for(var m=this,I=[m],A;A=I.shift();)_(A),I=I.concat(A.children)},getBoundingBox:function(){var _={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(m){_.left=Math.min(_.left,m.x),_.top=Math.min(_.top,m.y),_.width=Math.max(_.width,m.x+m.width),_.height=Math.max(_.height,m.y+m.height)}),_},translate:function(_,m){_===void 0&&(_=0),m===void 0&&(m=0),this.eachNode(function(I){I.x+=_,I.y+=m,I.x+=I.preH,I.y+=I.preV})},right2left:function(){var _=this,m=_.getBoundingBox();_.eachNode(function(I){I.x=I.x-(I.x-m.left)*2-I.width}),_.translate(m.width,0)},bottom2top:function(){var _=this,m=_.getBoundingBox();_.eachNode(function(I){I.y=I.y-(I.y-m.top)*2-I.height}),_.translate(0,m.height)}});function y(M,_,m){_===void 0&&(_={}),_=X.assign({},D,_);var I=new E(M,_),A=[I],O;if(!m&&!M.collapsed){for(;O=A.shift();)if(!O.data.collapsed){var U=_.getChildren(O.data),j=U?U.length:0;if(O.children=new Array(j),U&&j)for(var x=0;x<j;x++){var d=new E(U[x],_);O.children[x]=d,A.push(d),d.parent=O,d.depth=O.depth+1}}}return I}R.exports=y},function(R,z,B){"use strict";var X=B(1),k=function(P,N){if(!Object(X.a)(P))return P;for(var D=[],E=0;E<P.length;E++){var y=P[E];N(y,E)&&D.push(y)}return D};z.a=k},function(R,z,B){"use strict";var X=B(7),k=B(21);function P(N,D){var E=Object(k.a)(D),y=E.length;if(Object(X.a)(N))return!y;for(var M=0;M<y;M+=1){var _=E[M];if(D[_]!==N[_]||!(_ in N))return!1}return!0}z.a=P},function(R,z,B){"use strict";var X=B(8),k=B(2),P=Object.keys?function(N){return Object.keys(N)}:function(N){var D=[];return Object(X.a)(N,function(E,y){Object(k.a)(N)&&y==="prototype"||D.push(y)}),D};z.a=P},function(R,z,B){"use strict";var X=B(0);z.a=function(k){if(Object(X.a)(k))return k.reduce(function(P,N){return Math.max(P,N)},k[0])}},function(R,z,B){"use strict";var X=B(0);z.a=function(k){if(Object(X.a)(k))return k.reduce(function(P,N){return Math.min(P,N)},k[0])}},function(R,z,B){"use strict";var X=B(1),k=Array.prototype.splice,P=function(D,E){if(!Object(X.a)(D))return[];for(var y=D?E.length:0,M=y-1;y--;){var _=void 0,m=E[y];(y===M||m!==_)&&(_=m,k.call(D,m,1))}return D};z.a=P},function(R,z,B){"use strict";var X=B(8),k=B(0),P=B(10),N=function(D,E,y){if(!Object(k.a)(D)&&!Object(P.a)(D))return D;var M=y;return Object(X.a)(D,function(_,m){M=E(M,_,m)}),M};z.a=N},function(R,z,B){"use strict";z.a=X;function X(k,P){P===void 0&&(P=new Map);var N=[];if(Array.isArray(k))for(var D=0,E=k.length;D<E;D++){var y=k[D];P.has(y)||(N.push(y),P.set(y,!0))}return N}},function(R,z,B){"use strict";z.a=N;var X=B(0),k=B(2),P=B(28);function N(D,E){if(!E)return{0:D};if(!Object(k.a)(E)){var y=Object(X.a)(E)?E:E.replace(/\s+/g,"").split("*");E=function(M){for(var _="_",m=0,I=y.length;m<I;m++)_+=M[y[m]]&&M[y[m]].toString();return _}}return Object(P.a)(D,E)}},function(R,z,B){"use strict";var X=B(0),k=B(2),P=Object.prototype.hasOwnProperty;function N(D,E){if(!E||!Object(X.a)(D))return{};for(var y={},M=Object(k.a)(E)?E:function(A){return A[E]},_,m=0;m<D.length;m++){var I=D[m];_=M(I),P.call(y,_)?y[_].push(I):y[_]=[I]}return y}z.a=N},function(R,z,B){"use strict";z.a=function(X,k){return X.hasOwnProperty(k)}},function(R,z,B){"use strict";var X={}.toString,k=function(P){return X.call(P).replace(/^\[object /,"").replace(/]$/,"")};z.a=k},function(R,z,B){"use strict";var X=Object.prototype,k=function(P){var N=P&&P.constructor,D=typeof N=="function"&&N.prototype||X;return P===D};z.a=k},function(R,z,B){"use strict";var X=B(2);z.a=function(k,P){if(!Object(X.a)(k))throw new TypeError("Expected a function");var N=function(){for(var D=[],E=0;E<arguments.length;E++)D[E]=arguments[E];var y=P?P.apply(this,D):D[0],M=N.cache;if(M.has(y))return M.get(y);var _=k.apply(this,D);return M.set(y,_),_};return N.cache=new Map,N}},function(R,z,B){"use strict";var X=B(14),k=B(1),P=B(4),N=function(D,E){if(D===E)return!0;if(!D||!E||Object(P.a)(D)||Object(P.a)(E))return!1;if(Object(k.a)(D)||Object(k.a)(E)){if(D.length!==E.length)return!1;for(var y=!0,M=0;M<D.length&&(y=N(D[M],E[M]),!!y);M++);return y}if(Object(X.a)(D)||Object(X.a)(E)){var _=Object.keys(D),m=Object.keys(E);if(_.length!==m.length)return!1;for(var y=!0,M=0;M<_.length&&(y=N(D[_[M]],E[_[M]]),!!y);M++);return y}return!1};z.a=N},function(R,z,B){"use strict";var X=B(116),k=B(15),P=B(32),N=B(4),D;z.a=Object(P.a)(function(E,y){y===void 0&&(y={});var M=y.fontSize,_=y.fontFamily,m=y.fontWeight,I=y.fontStyle,A=y.fontVariant;return D||(D=document.createElement("canvas").getContext("2d")),D.font=[I,A,m,M+"px",_].join(" "),D.measureText(Object(N.a)(E)?E:"").width},function(E,y){return y===void 0&&(y={}),Object(X.a)([E],Object(k.a)(y)).join("")})},function(R,z,B){var X=B(18);R.exports=function(k,P){for(var N=X(k.data,P,!0),D=X(k.data,P,!0),E=k.children.length,y=Math.round(E/2),M=P.getSide||function(A,O){return O<y?"right":"left"},_=0;_<E;_++){var m=k.children[_],I=M(m,_);I==="right"?D.children.push(m):N.children.push(m)}return N.eachNode(function(A){A.isRoot()||(A.side="left")}),D.eachNode(function(A){A.isRoot()||(A.side="right")}),{left:N,right:D}}},function(R,z,B){var X={compactBox:B(37),dendrogram:B(120),indented:B(122),mindmap:B(124)};R.exports=X},function(R,z,B){function X(m,I){m.prototype=Object.create(I.prototype),m.prototype.constructor=m,k(m,I)}function k(m,I){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,U){return O.__proto__=U,O},k(m,I)}var P=B(11),N=B(119),D=B(17),E=B(6),y=function(m){X(I,m);function I(){return m.apply(this,arguments)||this}var A=I.prototype;return A.execute=function(){var U=this;return D(U.rootNode,U.options,N)},I}(P),M={};function _(m,I){return I=E.assign({},M,I),new y(m,I).execute()}R.exports=_},function(R,z,B){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var X=B(13);B.d(z,"contains",function(){return X.a}),B.d(z,"includes",function(){return X.a});var k=B(39);B.d(z,"difference",function(){return k.a});var P=B(40);B.d(z,"find",function(){return P.a});var N=B(41);B.d(z,"findIndex",function(){return N.a});var D=B(42);B.d(z,"firstValue",function(){return D.a});var E=B(43);B.d(z,"flatten",function(){return E.a});var y=B(44);B.d(z,"flattenDeep",function(){return y.a});var M=B(45);B.d(z,"getRange",function(){return M.a});var _=B(46);B.d(z,"pull",function(){return _.a});var m=B(24);B.d(z,"pullAt",function(){return m.a});var I=B(25);B.d(z,"reduce",function(){return I.a});var A=B(47);B.d(z,"remove",function(){return A.a});var O=B(48);B.d(z,"sortBy",function(){return O.a});var U=B(49);B.d(z,"union",function(){return U.a});var j=B(26);B.d(z,"uniq",function(){return j.a});var x=B(50);B.d(z,"valuesOfKey",function(){return x.a});var d=B(51);B.d(z,"head",function(){return d.a});var it=B(52);B.d(z,"last",function(){return it.a});var Y=B(53);B.d(z,"startsWith",function(){return Y.a});var W=B(54);B.d(z,"endsWith",function(){return W.a});var K=B(19);B.d(z,"filter",function(){return K.a});var Q=B(55);B.d(z,"every",function(){return Q.a});var rt=B(56);B.d(z,"some",function(){return rt.a});var J=B(57);B.d(z,"group",function(){return J.a});var ot=B(28);B.d(z,"groupBy",function(){return ot.a});var vt=B(27);B.d(z,"groupToMap",function(){return vt.a});var gt=B(58);B.d(z,"getWrapBehavior",function(){return gt.a});var Pt=B(59);B.d(z,"wrapBehavior",function(){return Pt.a});var It=B(60);B.d(z,"number2color",function(){return It.a});var Jt=B(61);B.d(z,"parseRadius",function(){return Jt.a});var zt=B(62);B.d(z,"clamp",function(){return zt.a});var kt=B(63);B.d(z,"fixedBase",function(){return kt.a});var $=B(64);B.d(z,"isDecimal",function(){return $.a});var lt=B(65);B.d(z,"isEven",function(){return lt.a});var St=B(66);B.d(z,"isInteger",function(){return St.a});var Ut=B(67);B.d(z,"isNegative",function(){return Ut.a});var Ft=B(68);B.d(z,"isNumberEqual",function(){return Ft.a});var ee=B(69);B.d(z,"isOdd",function(){return ee.a});var ve=B(70);B.d(z,"isPositive",function(){return ve.a});var be=B(22);B.d(z,"max",function(){return be.a});var Ht=B(71);B.d(z,"maxBy",function(){return Ht.a});var Yt=B(23);B.d(z,"min",function(){return Yt.a});var de=B(72);B.d(z,"minBy",function(){return de.a});var Ee=B(73);B.d(z,"mod",function(){return Ee.a});var ge=B(74);B.d(z,"toDegree",function(){return ge.a});var Ot=B(75);B.d(z,"toInteger",function(){return Ot.a});var Xt=B(76);B.d(z,"toRadian",function(){return Xt.a});var ce=B(77);B.d(z,"forIn",function(){return ce.a});var Lt=B(29);B.d(z,"has",function(){return Lt.a});var Kt=B(78);B.d(z,"hasKey",function(){return Kt.a});var pe=B(79);B.d(z,"hasValue",function(){return pe.a});var We=B(21);B.d(z,"keys",function(){return We.a});var Je=B(20);B.d(z,"isMatch",function(){return Je.a});var Mr=B(15);B.d(z,"values",function(){return Mr.a});var Vt=B(80);B.d(z,"lowerCase",function(){return Vt.a});var on=B(81);B.d(z,"lowerFirst",function(){return on.a});var sn=B(82);B.d(z,"substitute",function(){return sn.a});var pn=B(83);B.d(z,"upperCase",function(){return pn.a});var En=B(84);B.d(z,"upperFirst",function(){return En.a});var Yn=B(30);B.d(z,"getType",function(){return Yn.a});var ea=B(85);B.d(z,"isArguments",function(){return ea.a});var Nn=B(0);B.d(z,"isArray",function(){return Nn.a});var Zn=B(1);B.d(z,"isArrayLike",function(){return Zn.a});var La=B(86);B.d(z,"isBoolean",function(){return La.a});var Aa=B(87);B.d(z,"isDate",function(){return Aa.a});var fr=B(88);B.d(z,"isError",function(){return fr.a});var Or=B(2);B.d(z,"isFunction",function(){return Or.a});var vn=B(89);B.d(z,"isFinite",function(){return vn.a});var yn=B(7);B.d(z,"isNil",function(){return yn.a});var qn=B(90);B.d(z,"isNull",function(){return qn.a});var Vn=B(5);B.d(z,"isNumber",function(){return Vn.a});var jn=B(12);B.d(z,"isObject",function(){return jn.a});var ba=B(14);B.d(z,"isObjectLike",function(){return ba.a});var ma=B(10);B.d(z,"isPlainObject",function(){return ma.a});var Pa=B(31);B.d(z,"isPrototype",function(){return Pa.a});var wn=B(91);B.d(z,"isRegExp",function(){return wn.a});var na=B(4);B.d(z,"isString",function(){return na.a});var Qn=B(3);B.d(z,"isType",function(){return Qn.a});var In=B(92);B.d(z,"isUndefined",function(){return In.a});var Ca=B(93);B.d(z,"isElement",function(){return Ca.a});var q=B(94);B.d(z,"requestAnimationFrame",function(){return q.a});var ft=B(95);B.d(z,"clearAnimationFrame",function(){return ft.a});var nt=B(96);B.d(z,"augment",function(){return nt.a});var L=B(97);B.d(z,"clone",function(){return L.a});var b=B(98);B.d(z,"debounce",function(){return b.a});var w=B(32);B.d(z,"memoize",function(){return w.a});var V=B(99);B.d(z,"deepMix",function(){return V.a});var xt=B(8);B.d(z,"each",function(){return xt.a});var Ct=B(100);B.d(z,"extend",function(){return Ct.a});var wt=B(101);B.d(z,"indexOf",function(){return wt.a});var Rt=B(102);B.d(z,"isEmpty",function(){return Rt.a});var Ce=B(33);B.d(z,"isEqual",function(){return Ce.a});var me=B(103);B.d(z,"isEqualWith",function(){return me.a});var Ke=B(104);B.d(z,"map",function(){return Ke.a});var yr=B(105);B.d(z,"mapValues",function(){return yr.a});var er=B(16);B.d(z,"mix",function(){return er.a}),B.d(z,"assign",function(){return er.a});var gr=B(106);B.d(z,"get",function(){return gr.a});var dn=B(107);B.d(z,"set",function(){return dn.a});var Ue=B(108);B.d(z,"pick",function(){return Ue.a});var or=B(109);B.d(z,"omit",function(){return or.a});var mr=B(110);B.d(z,"throttle",function(){return mr.a});var $r=B(111);B.d(z,"toArray",function(){return $r.a});var Pr=B(9);B.d(z,"toString",function(){return Pr.a});var va=B(112);B.d(z,"uniqueId",function(){return va.a});var Sa=B(113);B.d(z,"noop",function(){return Sa.a});var Mn=B(114);B.d(z,"identity",function(){return Mn.a});var Un=B(115);B.d(z,"size",function(){return Un.a});var Fa=B(34);B.d(z,"measureTextWidth",function(){return Fa.a});var Ea=B(117);B.d(z,"getEllipsisText",function(){return Ea.a});var Kr=B(118);B.d(z,"Cache",function(){return Kr.a})},function(R,z,B){"use strict";var X=B(19),k=B(13),P=function(N,D){return D===void 0&&(D=[]),Object(X.a)(N,function(E){return!Object(k.a)(D,E)})};z.a=P},function(R,z,B){"use strict";var X=B(2),k=B(20),P=B(0),N=B(10);function D(E,y){if(!Object(P.a)(E))return null;var M;if(Object(X.a)(y)&&(M=y),Object(N.a)(y)&&(M=function(m){return Object(k.a)(m,y)}),M){for(var _=0;_<E.length;_+=1)if(M(E[_]))return E[_]}return null}z.a=D},function(R,z,B){"use strict";function X(k,P,N){N===void 0&&(N=0);for(var D=N;D<k.length;D++)if(P(k[D],D))return D;return-1}z.a=X},function(R,z,B){"use strict";var X=B(7),k=B(0),P=function(N,D){for(var E=null,y=0;y<N.length;y++){var M=N[y],_=M[D];if(!Object(X.a)(_)){Object(k.a)(_)?E=_[0]:E=_;break}}return E};z.a=P},function(R,z,B){"use strict";var X=B(0),k=function(P){if(!Object(X.a)(P))return[];for(var N=[],D=0;D<P.length;D++)N=N.concat(P[D]);return N};z.a=k},function(R,z,B){"use strict";var X=B(0),k=function(P,N){if(N===void 0&&(N=[]),!Object(X.a)(P))N.push(P);else for(var D=0;D<P.length;D+=1)k(P[D],N);return N};z.a=k},function(R,z,B){"use strict";var X=B(0),k=B(22),P=B(23),N=function(D){var E=D.filter(function(I){return!isNaN(I)});if(!E.length)return{min:0,max:0};if(Object(X.a)(D[0])){for(var y=[],M=0;M<D.length;M++)y=y.concat(D[M]);E=y}var _=Object(k.a)(E),m=Object(P.a)(E);return{min:m,max:_}};z.a=N},function(R,z,B){"use strict";var X=Array.prototype,k=X.splice,P=X.indexOf,N=function(D){for(var E=[],y=1;y<arguments.length;y++)E[y-1]=arguments[y];for(var M=0;M<E.length;M++)for(var _=E[M],m=-1;(m=P.call(D,_))>-1;)k.call(D,m,1);return D};z.a=N},function(R,z,B){"use strict";var X=B(1),k=B(24),P=function(N,D){var E=[];if(!Object(X.a)(N))return E;for(var y=-1,M=[],_=N.length;++y<_;){var m=N[y];D(m,y,N)&&(E.push(m),M.push(y))}return Object(k.a)(N,M),E};z.a=P},function(R,z,B){"use strict";var X=B(0),k=B(4),P=B(2);function N(D,E){var y;if(Object(P.a)(E))y=function(_,m){return E(_)-E(m)};else{var M=[];Object(k.a)(E)?M.push(E):Object(X.a)(E)&&(M=E),y=function(_,m){for(var I=0;I<M.length;I+=1){var A=M[I];if(_[A]>m[A])return 1;if(_[A]<m[A])return-1}return 0}}return D.sort(y),D}z.a=N},function(R,z,B){"use strict";var X=B(26),k=function(){for(var P=[],N=0;N<arguments.length;N++)P[N]=arguments[N];return Object(X.a)([].concat.apply([],P))};z.a=k},function(R,z,B){"use strict";var X=B(0),k=B(7);z.a=function(P,N){for(var D=[],E={},y=0;y<P.length;y++){var M=P[y],_=M[N];if(!Object(k.a)(_)){Object(X.a)(_)||(_=[_]);for(var m=0;m<_.length;m++){var I=_[m];E[I]||(D.push(I),E[I]=!0)}}}return D}},function(R,z,B){"use strict";z.a=k;var X=B(1);function k(P){if(Object(X.a)(P))return P[0]}},function(R,z,B){"use strict";z.a=k;var X=B(1);function k(P){if(Object(X.a)(P)){var N=P;return N[N.length-1]}}},function(R,z,B){"use strict";var X=B(0),k=B(4);function P(N,D){return Object(X.a)(N)||Object(k.a)(N)?N[0]===D:!1}z.a=P},function(R,z,B){"use strict";var X=B(0),k=B(4);function P(N,D){return Object(X.a)(N)||Object(k.a)(N)?N[N.length-1]===D:!1}z.a=P},function(R,z,B){"use strict";var X=function(k,P){for(var N=0;N<k.length;N++)if(!P(k[N],N))return!1;return!0};z.a=X},function(R,z,B){"use strict";var X=function(k,P){for(var N=0;N<k.length;N++)if(P(k[N],N))return!0;return!1};z.a=X},function(R,z,B){"use strict";var X=B(27);z.a=function(k,P){if(!P)return[k];var N=Object(X.a)(k,P),D=[];for(var E in N)D.push(N[E]);return D}},function(R,z,B){"use strict";function X(k,P){return k["_wrap_"+P]}z.a=X},function(R,z,B){"use strict";function X(k,P){if(k["_wrap_"+P])return k["_wrap_"+P];var N=function(D){k[P](D)};return k["_wrap_"+P]=N,N}z.a=X},function(R,z,B){"use strict";var X={};function k(P){var N=X[P];if(!N){for(var D=P.toString(16),E=D.length;E<6;E++)D="0"+D;N="#"+D,X[P]=N}return N}z.a=k},function(R,z,B){"use strict";var X=B(0);function k(P){var N=0,D=0,E=0,y=0;return Object(X.a)(P)?P.length===1?N=D=E=y=P[0]:P.length===2?(N=E=P[0],D=y=P[1]):P.length===3?(N=P[0],D=y=P[1],E=P[2]):(N=P[0],D=P[1],E=P[2],y=P[3]):N=D=E=y=P,{r1:N,r2:D,r3:E,r4:y}}z.a=k},function(R,z,B){"use strict";var X=function(k,P,N){return k<P?P:k>N?N:k};z.a=X},function(R,z,B){"use strict";var X=function(k,P){var N=P.toString(),D=N.indexOf(".");if(D===-1)return Math.round(k);var E=N.substr(D+1).length;return E>20&&(E=20),parseFloat(k.toFixed(E))};z.a=X},function(R,z,B){"use strict";var X=B(5),k=function(P){return Object(X.a)(P)&&P%1!==0};z.a=k},function(R,z,B){"use strict";var X=B(5),k=function(P){return Object(X.a)(P)&&P%2===0};z.a=k},function(R,z,B){"use strict";var X=B(5),k=Number.isInteger?Number.isInteger:function(P){return Object(X.a)(P)&&P%1===0};z.a=k},function(R,z,B){"use strict";var X=B(5),k=function(P){return Object(X.a)(P)&&P<0};z.a=k},function(R,z,B){"use strict";z.a=k;var X=1e-5;function k(P,N,D){return D===void 0&&(D=X),Math.abs(P-N)<D}},function(R,z,B){"use strict";var X=B(5),k=function(P){return Object(X.a)(P)&&P%2!==0};z.a=k},function(R,z,B){"use strict";var X=B(5),k=function(P){return Object(X.a)(P)&&P>0};z.a=k},function(R,z,B){"use strict";var X=B(0),k=B(2);z.a=function(P,N){if(Object(X.a)(P)){for(var D,E=-1/0,y=0;y<P.length;y++){var M=P[y],_=Object(k.a)(N)?N(M):M[N];_>E&&(D=M,E=_)}return D}}},function(R,z,B){"use strict";var X=B(0),k=B(2);z.a=function(P,N){if(Object(X.a)(P)){for(var D,E=1/0,y=0;y<P.length;y++){var M=P[y],_=Object(k.a)(N)?N(M):M[N];_<E&&(D=M,E=_)}return D}}},function(R,z,B){"use strict";var X=function(k,P){return(k%P+P)%P};z.a=X},function(R,z,B){"use strict";var X=180/Math.PI,k=function(P){return X*P};z.a=k},function(R,z,B){"use strict";z.a=parseInt},function(R,z,B){"use strict";var X=Math.PI/180,k=function(P){return X*P};z.a=k},function(R,z,B){"use strict";var X=B(8);z.a=X.a},function(R,z,B){"use strict";var X=B(29);z.a=X.a},function(R,z,B){"use strict";var X=B(13),k=B(15);z.a=function(P,N){return Object(X.a)(Object(k.a)(P),N)}},function(R,z,B){"use strict";var X=B(9),k=function(P){return Object(X.a)(P).toLowerCase()};z.a=k},function(R,z,B){"use strict";var X=B(9),k=function(P){var N=Object(X.a)(P);return N.charAt(0).toLowerCase()+N.substring(1)};z.a=k},function(R,z,B){"use strict";function X(k,P){return!k||!P?k:k.replace(/\\?\{([^{}]+)\}/g,function(N,D){return N.charAt(0)==="\\"?N.slice(1):P[D]===void 0?"":P[D]})}z.a=X},function(R,z,B){"use strict";var X=B(9),k=function(P){return Object(X.a)(P).toUpperCase()};z.a=k},function(R,z,B){"use strict";var X=B(9),k=function(P){var N=Object(X.a)(P);return N.charAt(0).toUpperCase()+N.substring(1)};z.a=k},function(R,z,B){"use strict";var X=B(3),k=function(P){return Object(X.a)(P,"Arguments")};z.a=k},function(R,z,B){"use strict";var X=B(3),k=function(P){return Object(X.a)(P,"Boolean")};z.a=k},function(R,z,B){"use strict";var X=B(3),k=function(P){return Object(X.a)(P,"Date")};z.a=k},function(R,z,B){"use strict";var X=B(3),k=function(P){return Object(X.a)(P,"Error")};z.a=k},function(R,z,B){"use strict";var X=B(5);z.a=function(k){return Object(X.a)(k)&&isFinite(k)}},function(R,z,B){"use strict";var X=function(k){return k===null};z.a=X},function(R,z,B){"use strict";var X=B(3),k=function(P){return Object(X.a)(P,"RegExp")};z.a=k},function(R,z,B){"use strict";var X=function(k){return k===void 0};z.a=X},function(R,z,B){"use strict";var X=function(k){return k instanceof Element||k instanceof HTMLDocument};z.a=X},function(R,z,B){"use strict";z.a=X;function X(k){var P=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(N){return setTimeout(N,16)};return P(k)}},function(R,z,B){"use strict";z.a=X;function X(k){var P=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;P(k)}},function(R,z,B){"use strict";var X=B(16),k=B(2),P=function(){for(var N=[],D=0;D<arguments.length;D++)N[D]=arguments[D];for(var E=N[0],y=1;y<N.length;y++){var M=N[y];Object(k.a)(M)&&(M=M.prototype),Object(X.a)(E.prototype,M)}};z.a=P},function(R,z,B){"use strict";var X=B(0),k=function(P){if(typeof P!="object"||P===null)return P;var N;if(Object(X.a)(P)){N=[];for(var D=0,E=P.length;D<E;D++)typeof P[D]=="object"&&P[D]!=null?N[D]=k(P[D]):N[D]=P[D]}else{N={};for(var y in P)typeof P[y]=="object"&&P[y]!=null?N[y]=k(P[y]):N[y]=P[y]}return N};z.a=k},function(R,z,B){"use strict";function X(k,P,N){var D;return function(){var E=this,y=arguments,M=function(){D=null,N||k.apply(E,y)},_=N&&!D;clearTimeout(D),D=setTimeout(M,P),_&&k.apply(E,y)}}z.a=X},function(R,z,B){"use strict";var X=B(0),k=B(10),P=5;function N(E,y,M,_){M=M||0,_=_||P;for(var m in y)if(y.hasOwnProperty(m)){var I=y[m];I!==null&&Object(k.a)(I)?(Object(k.a)(E[m])||(E[m]={}),M<_?N(E[m],I,M+1,_):E[m]=y[m]):Object(X.a)(I)?(E[m]=[],E[m]=E[m].concat(I)):I!==void 0&&(E[m]=I)}}var D=function(E){for(var y=[],M=1;M<arguments.length;M++)y[M-1]=arguments[M];for(var _=0;_<y.length;_+=1)N(E,y[_]);return E};z.a=D},function(R,z,B){"use strict";var X=B(16),k=B(2),P=function(N,D,E,y){Object(k.a)(D)||(E=D,D=N,N=function(){});var M=Object.create?function(m,I){return Object.create(m,{constructor:{value:I}})}:function(m,I){function A(){}A.prototype=m;var O=new A;return O.constructor=I,O},_=M(D.prototype,N);return N.prototype=Object(X.a)(_,N.prototype),N.superclass=M(D.prototype,D),Object(X.a)(_,E),Object(X.a)(N,y),N};z.a=P},function(R,z,B){"use strict";var X=B(1),k=function(P,N){if(!Object(X.a)(P))return-1;var D=Array.prototype.indexOf;if(D)return D.call(P,N);for(var E=-1,y=0;y<P.length;y++)if(P[y]===N){E=y;break}return E};z.a=k},function(R,z,B){"use strict";var X=B(7),k=B(1),P=B(30),N=B(31),D=Object.prototype.hasOwnProperty;function E(y){if(Object(X.a)(y))return!0;if(Object(k.a)(y))return!y.length;var M=Object(P.a)(y);if(M==="Map"||M==="Set")return!y.size;if(Object(N.a)(y))return!Object.keys(y).length;for(var _ in y)if(D.call(y,_))return!1;return!0}z.a=E},function(R,z,B){"use strict";var X=B(2),k=B(33);z.a=function(P,N,D){return Object(X.a)(D)?!!D(P,N):Object(k.a)(P,N)}},function(R,z,B){"use strict";var X=B(1),k=function(P,N){if(!Object(X.a)(P))return P;for(var D=[],E=0;E<P.length;E++){var y=P[E];D.push(N(y,E))}return D};z.a=k},function(R,z,B){"use strict";var X=B(7),k=B(12),P=function(N){return N};z.a=function(N,D){D===void 0&&(D=P);var E={};return Object(k.a)(N)&&!Object(X.a)(N)&&Object.keys(N).forEach(function(y){E[y]=D(N[y],y)}),E}},function(R,z,B){"use strict";var X=B(4);z.a=function(k,P,N){for(var D=0,E=Object(X.a)(P)?P.split("."):P;k&&D<E.length;)k=k[E[D++]];return k===void 0||D<E.length?N:k}},function(R,z,B){"use strict";var X=B(12),k=B(4),P=B(5);z.a=function(N,D,E){var y=N,M=Object(k.a)(D)?D.split("."):D;return M.forEach(function(_,m){m<M.length-1?(Object(X.a)(y[_])||(y[_]=Object(P.a)(M[m+1])?[]:{}),y=y[_]):y[_]=E}),N}},function(R,z,B){"use strict";var X=B(8),k=B(10),P=Object.prototype.hasOwnProperty;z.a=function(N,D){if(N===null||!Object(k.a)(N))return{};var E={};return Object(X.a)(D,function(y){P.call(N,y)&&(E[y]=N[y])}),E}},function(R,z,B){"use strict";var X=B(25);z.a=function(k,P){return Object(X.a)(k,function(N,D,E){return P.includes(E)||(N[E]=D),N},{})}},function(R,z,B){"use strict";z.a=function(X,k,P){var N,D,E,y,M=0;P||(P={});var _=function(){M=P.leading===!1?0:Date.now(),N=null,y=X.apply(D,E),N||(D=E=null)},m=function(){var I=Date.now();!M&&P.leading===!1&&(M=I);var A=k-(I-M);return D=this,E=arguments,A<=0||A>k?(N&&(clearTimeout(N),N=null),M=I,y=X.apply(D,E),N||(D=E=null)):!N&&P.trailing!==!1&&(N=setTimeout(_,A)),y};return m.cancel=function(){clearTimeout(N),M=0,N=D=E=null},m}},function(R,z,B){"use strict";var X=B(1);z.a=function(k){return Object(X.a)(k)?Array.prototype.slice.call(k):[]}},function(R,z,B){"use strict";var X={};z.a=function(k){return k=k||"g",X[k]?X[k]+=1:X[k]=1,k+X[k]}},function(R,z,B){"use strict";z.a=function(){}},function(R,z,B){"use strict";z.a=function(X){return X}},function(R,z,B){"use strict";z.a=P;var X=B(7),k=B(1);function P(N){return Object(X.a)(N)?0:Object(k.a)(N)?N.length:Object.keys(N).length}},function(R,z,B){"use strict";z.a=Y;var X=function(kt,$){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(lt,St){lt.__proto__=St}||function(lt,St){for(var Ut in St)Object.prototype.hasOwnProperty.call(St,Ut)&&(lt[Ut]=St[Ut])},X(kt,$)};function k(kt,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");X(kt,$);function lt(){this.constructor=kt}kt.prototype=$===null?Object.create($):(lt.prototype=$.prototype,new lt)}var P=function(){return P=Object.assign||function($){for(var lt,St=1,Ut=arguments.length;St<Ut;St++){lt=arguments[St];for(var Ft in lt)Object.prototype.hasOwnProperty.call(lt,Ft)&&($[Ft]=lt[Ft])}return $},P.apply(this,arguments)};function N(kt,$){var lt={};for(var St in kt)Object.prototype.hasOwnProperty.call(kt,St)&&$.indexOf(St)<0&&(lt[St]=kt[St]);if(kt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ut=0,St=Object.getOwnPropertySymbols(kt);Ut<St.length;Ut++)$.indexOf(St[Ut])<0&&Object.prototype.propertyIsEnumerable.call(kt,St[Ut])&&(lt[St[Ut]]=kt[St[Ut]]);return lt}function D(kt,$,lt,St){var Ut=arguments.length,Ft=Ut<3?$:St===null?St=Object.getOwnPropertyDescriptor($,lt):St,ee;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ft=Reflect.decorate(kt,$,lt,St);else for(var ve=kt.length-1;ve>=0;ve--)(ee=kt[ve])&&(Ft=(Ut<3?ee(Ft):Ut>3?ee($,lt,Ft):ee($,lt))||Ft);return Ut>3&&Ft&&Object.defineProperty($,lt,Ft),Ft}function E(kt,$){return function(lt,St){$(lt,St,kt)}}function y(kt,$,lt,St,Ut,Ft){function ee(Lt){if(Lt!==void 0&&typeof Lt!="function")throw new TypeError("Function expected");return Lt}for(var ve=St.kind,be=ve==="getter"?"get":ve==="setter"?"set":"value",Ht=!$&&kt?St.static?kt:kt.prototype:null,Yt=$||(Ht?Object.getOwnPropertyDescriptor(Ht,St.name):{}),de,Ee=!1,ge=lt.length-1;ge>=0;ge--){var Ot={};for(var Xt in St)Ot[Xt]=Xt==="access"?{}:St[Xt];for(var Xt in St.access)Ot.access[Xt]=St.access[Xt];Ot.addInitializer=function(Lt){if(Ee)throw new TypeError("Cannot add initializers after decoration has completed");Ft.push(ee(Lt||null))};var ce=(0,lt[ge])(ve==="accessor"?{get:Yt.get,set:Yt.set}:Yt[be],Ot);if(ve==="accessor"){if(ce===void 0)continue;if(ce===null||typeof ce!="object")throw new TypeError("Object expected");(de=ee(ce.get))&&(Yt.get=de),(de=ee(ce.set))&&(Yt.set=de),(de=ee(ce.init))&&Ut.push(de)}else(de=ee(ce))&&(ve==="field"?Ut.push(de):Yt[be]=de)}Ht&&Object.defineProperty(Ht,St.name,Yt),Ee=!0}function M(kt,$,lt){for(var St=arguments.length>2,Ut=0;Ut<$.length;Ut++)lt=St?$[Ut].call(kt,lt):$[Ut].call(kt);return St?lt:void 0}function _(kt){return typeof kt=="symbol"?kt:"".concat(kt)}function m(kt,$,lt){return typeof $=="symbol"&&($=$.description?"[".concat($.description,"]"):""),Object.defineProperty(kt,"name",{configurable:!0,value:lt?"".concat(lt," ",$):$})}function I(kt,$){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(kt,$)}function A(kt,$,lt,St){function Ut(Ft){return Ft instanceof lt?Ft:new lt(function(ee){ee(Ft)})}return new(lt||(lt=Promise))(function(Ft,ee){function ve(Yt){try{Ht(St.next(Yt))}catch(de){ee(de)}}function be(Yt){try{Ht(St.throw(Yt))}catch(de){ee(de)}}function Ht(Yt){Yt.done?Ft(Yt.value):Ut(Yt.value).then(ve,be)}Ht((St=St.apply(kt,$||[])).next())})}function O(kt,$){var lt={label:0,sent:function(){if(Ft[0]&1)throw Ft[1];return Ft[1]},trys:[],ops:[]},St,Ut,Ft,ee;return ee={next:ve(0),throw:ve(1),return:ve(2)},typeof Symbol=="function"&&(ee[Symbol.iterator]=function(){return this}),ee;function ve(Ht){return function(Yt){return be([Ht,Yt])}}function be(Ht){if(St)throw new TypeError("Generator is already executing.");for(;ee&&(ee=0,Ht[0]&&(lt=0)),lt;)try{if(St=1,Ut&&(Ft=Ht[0]&2?Ut.return:Ht[0]?Ut.throw||((Ft=Ut.return)&&Ft.call(Ut),0):Ut.next)&&!(Ft=Ft.call(Ut,Ht[1])).done)return Ft;switch(Ut=0,Ft&&(Ht=[Ht[0]&2,Ft.value]),Ht[0]){case 0:case 1:Ft=Ht;break;case 4:return lt.label++,{value:Ht[1],done:!1};case 5:lt.label++,Ut=Ht[1],Ht=[0];continue;case 7:Ht=lt.ops.pop(),lt.trys.pop();continue;default:if(Ft=lt.trys,!(Ft=Ft.length>0&&Ft[Ft.length-1])&&(Ht[0]===6||Ht[0]===2)){lt=0;continue}if(Ht[0]===3&&(!Ft||Ht[1]>Ft[0]&&Ht[1]<Ft[3])){lt.label=Ht[1];break}if(Ht[0]===6&&lt.label<Ft[1]){lt.label=Ft[1],Ft=Ht;break}if(Ft&&lt.label<Ft[2]){lt.label=Ft[2],lt.ops.push(Ht);break}Ft[2]&&lt.ops.pop(),lt.trys.pop();continue}Ht=$.call(kt,lt)}catch(Yt){Ht=[6,Yt],Ut=0}finally{St=Ft=0}if(Ht[0]&5)throw Ht[1];return{value:Ht[0]?Ht[1]:void 0,done:!0}}}var U=Object.create?function(kt,$,lt,St){St===void 0&&(St=lt);var Ut=Object.getOwnPropertyDescriptor($,lt);(!Ut||("get"in Ut?!$.__esModule:Ut.writable||Ut.configurable))&&(Ut={enumerable:!0,get:function(){return $[lt]}}),Object.defineProperty(kt,St,Ut)}:function(kt,$,lt,St){St===void 0&&(St=lt),kt[St]=$[lt]};function j(kt,$){for(var lt in kt)lt!=="default"&&!Object.prototype.hasOwnProperty.call($,lt)&&U($,kt,lt)}function x(kt){var $=typeof Symbol=="function"&&Symbol.iterator,lt=$&&kt[$],St=0;if(lt)return lt.call(kt);if(kt&&typeof kt.length=="number")return{next:function(){return kt&&St>=kt.length&&(kt=void 0),{value:kt&&kt[St++],done:!kt}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(kt,$){var lt=typeof Symbol=="function"&&kt[Symbol.iterator];if(!lt)return kt;var St=lt.call(kt),Ut,Ft=[],ee;try{for(;($===void 0||$-- >0)&&!(Ut=St.next()).done;)Ft.push(Ut.value)}catch(ve){ee={error:ve}}finally{try{Ut&&!Ut.done&&(lt=St.return)&&lt.call(St)}finally{if(ee)throw ee.error}}return Ft}function it(){for(var kt=[],$=0;$<arguments.length;$++)kt=kt.concat(d(arguments[$]));return kt}function Y(){for(var kt=0,$=0,lt=arguments.length;$<lt;$++)kt+=arguments[$].length;for(var St=Array(kt),Ut=0,$=0;$<lt;$++)for(var Ft=arguments[$],ee=0,ve=Ft.length;ee<ve;ee++,Ut++)St[Ut]=Ft[ee];return St}function W(kt,$,lt){if(lt||arguments.length===2)for(var St=0,Ut=$.length,Ft;St<Ut;St++)(Ft||!(St in $))&&(Ft||(Ft=Array.prototype.slice.call($,0,St)),Ft[St]=$[St]);return kt.concat(Ft||Array.prototype.slice.call($))}function K(kt){return this instanceof K?(this.v=kt,this):new K(kt)}function Q(kt,$,lt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var St=lt.apply(kt,$||[]),Ut,Ft=[];return Ut={},ee("next"),ee("throw"),ee("return"),Ut[Symbol.asyncIterator]=function(){return this},Ut;function ee(Ee){St[Ee]&&(Ut[Ee]=function(ge){return new Promise(function(Ot,Xt){Ft.push([Ee,ge,Ot,Xt])>1||ve(Ee,ge)})})}function ve(Ee,ge){try{be(St[Ee](ge))}catch(Ot){de(Ft[0][3],Ot)}}function be(Ee){Ee.value instanceof K?Promise.resolve(Ee.value.v).then(Ht,Yt):de(Ft[0][2],Ee)}function Ht(Ee){ve("next",Ee)}function Yt(Ee){ve("throw",Ee)}function de(Ee,ge){Ee(ge),Ft.shift(),Ft.length&&ve(Ft[0][0],Ft[0][1])}}function rt(kt){var $,lt;return $={},St("next"),St("throw",function(Ut){throw Ut}),St("return"),$[Symbol.iterator]=function(){return this},$;function St(Ut,Ft){$[Ut]=kt[Ut]?function(ee){return(lt=!lt)?{value:K(kt[Ut](ee)),done:!1}:Ft?Ft(ee):ee}:Ft}}function J(kt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=kt[Symbol.asyncIterator],lt;return $?$.call(kt):(kt=typeof x=="function"?x(kt):kt[Symbol.iterator](),lt={},St("next"),St("throw"),St("return"),lt[Symbol.asyncIterator]=function(){return this},lt);function St(Ft){lt[Ft]=kt[Ft]&&function(ee){return new Promise(function(ve,be){ee=kt[Ft](ee),Ut(ve,be,ee.done,ee.value)})}}function Ut(Ft,ee,ve,be){Promise.resolve(be).then(function(Ht){Ft({value:Ht,done:ve})},ee)}}function ot(kt,$){return Object.defineProperty?Object.defineProperty(kt,"raw",{value:$}):kt.raw=$,kt}var vt=Object.create?function(kt,$){Object.defineProperty(kt,"default",{enumerable:!0,value:$})}:function(kt,$){kt.default=$};function gt(kt){if(kt&&kt.__esModule)return kt;var $={};if(kt!=null)for(var lt in kt)lt!=="default"&&Object.prototype.hasOwnProperty.call(kt,lt)&&U($,kt,lt);return vt($,kt),$}function Pt(kt){return kt&&kt.__esModule?kt:{default:kt}}function It(kt,$,lt,St){if(lt==="a"&&!St)throw new TypeError("Private accessor was defined without a getter");if(typeof $=="function"?kt!==$||!St:!$.has(kt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return lt==="m"?St:lt==="a"?St.call(kt):St?St.value:$.get(kt)}function Jt(kt,$,lt,St,Ut){if(St==="m")throw new TypeError("Private method is not writable");if(St==="a"&&!Ut)throw new TypeError("Private accessor was defined without a setter");if(typeof $=="function"?kt!==$||!Ut:!$.has(kt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return St==="a"?Ut.call(kt,lt):Ut?Ut.value=lt:$.set(kt,lt),lt}function zt(kt,$){if($===null||typeof $!="object"&&typeof $!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof kt=="function"?$===kt:kt.has($)}},function(R,z,B){"use strict";var X=B(4),k=B(9),P=B(34);z.a=function(N,D,E,y){y===void 0&&(y="...");var M=16,_=Object(P.a)(y,E),m=Object(X.a)(N)?N:Object(k.a)(N),I=D,A=[],O,U;if(Object(P.a)(N,E)<=D)return N;for(;O=m.substr(0,M),U=Object(P.a)(O,E),!(U+_>I&&U>I);)if(A.push(O),I-=U,m=m.substr(M),!m)return A.join("");for(;O=m.substr(0,1),U=Object(P.a)(O,E),!(U+_>I);)if(A.push(O),I-=U,m=m.substr(1),!m)return A.join("");return""+A.join("")+y}},function(R,z,B){"use strict";var X=function(){function k(){this.map={}}return k.prototype.has=function(P){return this.map[P]!==void 0},k.prototype.get=function(P,N){var D=this.map[P];return D===void 0?N:D},k.prototype.set=function(P,N){this.map[P]=N},k.prototype.clear=function(){this.map={}},k.prototype.delete=function(P){delete this.map[P]},k.prototype.size=function(){return Object.keys(this.map).length},k}();z.a=X},function(R,z){function B(E,y,M,_){_===void 0&&(_=[]);var m=this;m.w=E||0,m.h=y||0,m.y=M||0,m.x=0,m.c=_||[],m.cs=_.length,m.prelim=0,m.mod=0,m.shift=0,m.change=0,m.tl=null,m.tr=null,m.el=null,m.er=null,m.msel=0,m.mser=0}B.fromNode=function(E,y){if(!E)return null;var M=[];return E.children.forEach(function(_){M.push(B.fromNode(_,y))}),y?new B(E.height,E.width,E.x,M):new B(E.width,E.height,E.y,M)};function X(E,y,M){M?E.y+=y:E.x+=y,E.children.forEach(function(_){X(_,y,M)})}function k(E,y){var M=y?E.y:E.x;return E.children.forEach(function(_){M=Math.min(k(_,y),M)}),M}function P(E,y){var M=k(E,y);X(E,-M,y)}function N(E,y,M){M?y.y=E.x:y.x=E.x,E.c.forEach(function(_,m){N(_,y.children[m],M)})}function D(E,y,M){M===void 0&&(M=0),y?(E.x=M,M+=E.width):(E.y=M,M+=E.height),E.children.forEach(function(_){D(_,y,M)})}R.exports=function(E,y){y===void 0&&(y={});var M=y.isHorizontal;function _(J){if(J.cs===0){m(J);return}_(J.c[0]);for(var ot=Q(j(J.c[0].el),0,null),vt=1;vt<J.cs;++vt){_(J.c[vt]);var gt=j(J.c[vt].er);I(J,vt,ot),ot=Q(gt,vt,ot)}it(J),m(J)}function m(J){J.cs===0?(J.el=J,J.er=J,J.msel=J.mser=0):(J.el=J.c[0].el,J.msel=J.c[0].msel,J.er=J.c[J.cs-1].er,J.mser=J.c[J.cs-1].mser)}function I(J,ot,vt){for(var gt=J.c[ot-1],Pt=gt.mod,It=J.c[ot],Jt=It.mod;gt!==null&&It!==null;){j(gt)>vt.low&&(vt=vt.nxt);var zt=Pt+gt.prelim+gt.w-(Jt+It.prelim);zt>0&&(Jt+=zt,A(J,ot,vt.index,zt));var kt=j(gt),$=j(It);kt<=$&&(gt=U(gt),gt!==null&&(Pt+=gt.mod)),kt>=$&&(It=O(It),It!==null&&(Jt+=It.mod))}!gt&&It?x(J,ot,It,Jt):gt&&!It&&d(J,ot,gt,Pt)}function A(J,ot,vt,gt){J.c[ot].mod+=gt,J.c[ot].msel+=gt,J.c[ot].mser+=gt,W(J,ot,vt,gt)}function O(J){return J.cs===0?J.tl:J.c[0]}function U(J){return J.cs===0?J.tr:J.c[J.cs-1]}function j(J){return J.y+J.h}function x(J,ot,vt,gt){var Pt=J.c[0].el;Pt.tl=vt;var It=gt-vt.mod-J.c[0].msel;Pt.mod+=It,Pt.prelim-=It,J.c[0].el=J.c[ot].el,J.c[0].msel=J.c[ot].msel}function d(J,ot,vt,gt){var Pt=J.c[ot].er;Pt.tr=vt;var It=gt-vt.mod-J.c[ot].mser;Pt.mod+=It,Pt.prelim-=It,J.c[ot].er=J.c[ot-1].er,J.c[ot].mser=J.c[ot-1].mser}function it(J){J.prelim=(J.c[0].prelim+J.c[0].mod+J.c[J.cs-1].mod+J.c[J.cs-1].prelim+J.c[J.cs-1].w)/2-J.w/2}function Y(J,ot){ot+=J.mod,J.x=J.prelim+ot,K(J);for(var vt=0;vt<J.cs;vt++)Y(J.c[vt],ot)}function W(J,ot,vt,gt){if(vt!==ot-1){var Pt=ot-vt;J.c[vt+1].shift+=gt/Pt,J.c[ot].shift-=gt/Pt,J.c[ot].change-=gt-gt/Pt}}function K(J){for(var ot=0,vt=0,gt=0;gt<J.cs;gt++)ot+=J.c[gt].shift,vt+=ot+J.c[gt].change,J.c[gt].mod+=vt}function Q(J,ot,vt){for(;vt!==null&&J>=vt.low;)vt=vt.nxt;return{low:J,index:ot,nxt:vt}}D(E,M);var rt=B.fromNode(E,M);return _(rt),Y(rt,0),N(rt,E,M),P(E,M),E}},function(R,z,B){function X(m,I){m.prototype=Object.create(I.prototype),m.prototype.constructor=m,k(m,I)}function k(m,I){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,U){return O.__proto__=U,O},k(m,I)}var P=B(11),N=B(121),D=B(17),E=B(6),y=function(m){X(I,m);function I(){return m.apply(this,arguments)||this}var A=I.prototype;return A.execute=function(){var U=this;return U.rootNode.width=0,D(U.rootNode,U.options,N)},I}(P),M={};function _(m,I){return I=E.assign({},M,I),new y(m,I).execute()}R.exports=_},function(R,z,B){var X=B(6);function k(D,E){D===void 0&&(D=0),E===void 0&&(E=[]);var y=this;y.x=y.y=0,y.leftChild=y.rightChild=null,y.height=0,y.children=E}var P={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function N(D,E,y){y?(E.x=D.x,E.y=D.y):(E.x=D.y,E.y=D.x),D.children.forEach(function(M,_){N(M,E.children[_],y)})}R.exports=function(D,E){E===void 0&&(E={}),E=X.assign({},P,E);var y=0;function M(O){if(!O)return null;O.width=0,O.depth&&O.depth>y&&(y=O.depth);var U=O.children,j=U.length,x=new k(O.height,[]);return U.forEach(function(d,it){var Y=M(d);x.children.push(Y),it===0&&(x.leftChild=Y),it===j-1&&(x.rightChild=Y)}),x.originNode=O,x.isLeaf=O.isLeaf(),x}function _(O){if(O.isLeaf||O.children.length===0)O.drawingDepth=y;else{var U=O.children.map(function(x){return _(x)}),j=Math.min.apply(null,U);O.drawingDepth=j-1}return O.drawingDepth}var m;function I(O){O.x=O.drawingDepth*E.rankSep,O.isLeaf?(O.y=0,m&&(O.y=m.y+m.height+E.nodeSep,O.originNode.parent!==m.originNode.parent&&(O.y+=E.subTreeSep)),m=O):(O.children.forEach(function(U){I(U)}),O.y=(O.leftChild.y+O.rightChild.y)/2)}var A=M(D);return _(A),I(A),N(A,D,E.isHorizontal),D}},function(R,z,B){function X(A,O){A.prototype=Object.create(O.prototype),A.prototype.constructor=A,k(A,O)}function k(A,O){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(j,x){return j.__proto__=x,j},k(A,O)}var P=B(11),N=B(123),D=B(35),E=B(6),y=["LR","RL","H"],M=y[0],_=function(A){X(O,A);function O(){return A.apply(this,arguments)||this}var U=O.prototype;return U.execute=function(){var x=this,d=x.options,it=x.rootNode;d.isHorizontal=!0;var Y=d.indent,W=Y===void 0?20:Y,K=d.dropCap,Q=K===void 0?!0:K,rt=d.direction,J=rt===void 0?M:rt,ot=d.align;if(J&&y.indexOf(J)===-1)throw new TypeError("Invalid direction: "+J);if(J===y[0])N(it,W,Q,ot);else if(J===y[1])N(it,W,Q,ot),it.right2left();else if(J===y[2]){var vt=D(it,d),gt=vt.left,Pt=vt.right;N(gt,W,Q,ot),gt.right2left(),N(Pt,W,Q,ot);var It=gt.getBoundingBox();Pt.translate(It.width,0),it.x=Pt.x-it.width/2}return it},O}(P),m={};function I(A,O){return O=E.assign({},m,O),new _(A,O).execute()}R.exports=I},function(R,z,B){var X=B(6);function k(P,N,D,E,y){var M=typeof D=="function"?D(P):D*P.depth;if(!E)try{if(P.id===P.parent.children[0].id){P.x+=M,P.y=N?N.y:0;return}}catch(I){}if(P.x+=M,N){if(P.y=N.y+X.getHeight(N,P,y),N.parent&&P.parent.id!==N.parent.id){var _=N.parent,m=_.y+X.getHeight(_,P,y);P.y=m>P.y?m:P.y}}else P.y=0}R.exports=function(P,N,D,E){var y=null;P.eachNode(function(M){k(M,y,N,D,E),y=M})}},function(R,z,B){function X(m,I){m.prototype=Object.create(I.prototype),m.prototype.constructor=m,k(m,I)}function k(m,I){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,U){return O.__proto__=U,O},k(m,I)}var P=B(11),N=B(125),D=B(17),E=B(6),y=function(m){X(I,m);function I(){return m.apply(this,arguments)||this}var A=I.prototype;return A.execute=function(){var U=this;return D(U.rootNode,U.options,N)},I}(P),M={};function _(m,I){return I=E.assign({},M,I),new y(m,I).execute()}R.exports=_},function(R,z,B){var X=B(6);function k(D,E){var y=0;return D.children.length?D.children.forEach(function(M){y+=k(M,E)}):y=D.height,D._subTreeSep=E.getSubTreeSep(D.data),D.totalHeight=Math.max(D.height,y)+2*D._subTreeSep,D.totalHeight}function P(D){var E=D.children,y=E.length;if(y){E.forEach(function(O){P(O)});var M=E[0],_=E[y-1],m=_.y-M.y+_.height,I=0;if(E.forEach(function(O){I+=O.totalHeight}),m>D.height)D.y=M.y+m/2-D.height/2;else if(E.length!==1||D.height>I){var A=D.y+(D.height-m)/2-M.y;E.forEach(function(O){O.translate(0,A)})}else D.y=(M.y+M.height/2+_.y+_.height/2)/2-D.height/2}}var N={getSubTreeSep:function(){return 0}};R.exports=function(D,E){E===void 0&&(E={}),E=X.assign({},N,E),D.parent={x:0,width:0,height:0,y:0},D.BFTraverse(function(y){y.x=y.parent.x+y.parent.width}),D.parent=null,k(D,E),D.startY=0,D.y=D.totalHeight/2-D.height/2,D.eachNode(function(y){var M=y.children,_=M.length;if(_){var m=M[0];if(m.startY=y.startY+y._subTreeSep,_===1)m.y=y.y+y.height/2-m.height/2;else{m.y=m.startY+m.totalHeight/2-m.height/2;for(var I=1;I<_;I++){var A=M[I];A.startY=M[I-1].startY+M[I-1].totalHeight,A.y=A.startY+A.totalHeight/2-A.height/2}}}}),P(D)}}])})},483360:function(dr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(P,N,D,E){E===void 0&&(E=D);var y=Object.getOwnPropertyDescriptor(N,D);(!y||("get"in y?!N.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return N[D]}}),Object.defineProperty(P,E,y)}:function(P,N,D,E){E===void 0&&(E=D),P[E]=N[D]}),X=this&&this.__exportStar||function(P,N){for(var D in P)D!=="default"&&!Object.prototype.hasOwnProperty.call(N,D)&&B(N,P,D)};Object.defineProperty(R,"__esModule",{value:!0}),R.getLayoutByName=R.unRegisterLayout=R.registerLayout=void 0;var k=z(695326);Object.defineProperty(R,"registerLayout",{enumerable:!0,get:function(){return k.registerLayout}}),Object.defineProperty(R,"unRegisterLayout",{enumerable:!0,get:function(){return k.unRegisterLayout}}),Object.defineProperty(R,"getLayoutByName",{enumerable:!0,get:function(){return k.getLayoutByName}}),X(z(702584),R)},762329:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Base=void 0;var z=function(){function B(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return B.prototype.layout=function(X){return this.init(X),this.execute(!0)},B.prototype.init=function(X){this.nodes=X.nodes||[],this.edges=X.edges||[],this.combos=X.combos||[],this.comboEdges=X.comboEdges||[],this.hiddenNodes=X.hiddenNodes||[],this.hiddenEdges=X.hiddenEdges||[],this.hiddenCombos=X.hiddenCombos||[],this.vedges=X.vedges||[]},B.prototype.execute=function(X){},B.prototype.executeWithWorker=function(){},B.prototype.getDefaultCfg=function(){return{}},B.prototype.updateCfg=function(X){X&&Object.assign(this,X)},B.prototype.getType=function(){return"base"},B.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},B}();R.Base=z},964885:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,_){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,_)};return function(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");y(M,_);function m(){this.constructor=M}M.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.CircularLayout=void 0;var X=z(762329),k=z(449784);function P(y,M,_,m){y.forEach(function(I,A){y[A].children=[],y[A].parent=[]}),m?M.forEach(function(I){var A=(0,k.getEdgeTerminal)(I,"source"),O=(0,k.getEdgeTerminal)(I,"target"),U=0;A&&(U=_[A]);var j=0;O&&(j=_[O]);var x=y[U].children,d=y[j].parent;x.push(y[j].id),d.push(y[U].id)}):M.forEach(function(I){var A=(0,k.getEdgeTerminal)(I,"source"),O=(0,k.getEdgeTerminal)(I,"target"),U=0;A&&(U=_[A]);var j=0;O&&(j=_[O]);var x=y[U].children,d=y[j].children;x.push(y[j].id),d.push(y[U].id)})}function N(y,M,_){for(var m=_.length,I=0;I<m;I++){var A=(0,k.getEdgeTerminal)(_[I],"source"),O=(0,k.getEdgeTerminal)(_[I],"target");if(y.id===A&&M.id===O||M.id===A&&y.id===O)return!0}return!1}function D(y,M){var _=y.degree,m=M.degree;return _<m?-1:_>m?1:0}var E=function(y){B(M,y);function M(_){var m=y.call(this)||this;return m.radius=null,m.nodeSize=void 0,m.startRadius=null,m.endRadius=null,m.startAngle=0,m.endAngle=2*Math.PI,m.clockwise=!0,m.divisions=1,m.ordering=null,m.angleRatio=1,m.nodes=[],m.edges=[],m.nodeMap={},m.degrees=[],m.width=300,m.height=300,m.updateCfg(_),m}return M.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},M.prototype.execute=function(){var _,m=this,I=m.nodes,A=m.edges,O=I.length;if(O===0){m.onLayoutEnd&&m.onLayoutEnd();return}!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),m.center||(m.center=[m.width/2,m.height/2]);var U=m.center;if(O===1){I[0].x=U[0],I[0].y=U[1],m.onLayoutEnd&&m.onLayoutEnd();return}var j=m.radius,x=m.startRadius,d=m.endRadius,it=m.divisions,Y=m.startAngle,W=m.endAngle,K=m.angleRatio,Q=m.ordering,rt=m.clockwise,J=m.nodeSpacing,ot=m.nodeSize,vt=(W-Y)/O,gt={};I.forEach(function(ve,be){gt[ve.id]=be}),m.nodeMap=gt;var Pt=(0,k.getDegree)(I.length,gt,A);if(m.degrees=Pt,J){var It=(0,k.getFuncByUnknownType)(10,J),Jt=(0,k.getFuncByUnknownType)(10,ot),zt=-1/0;I.forEach(function(ve){var be=Jt(ve);zt<be&&(zt=be)});var kt=0;I.forEach(function(ve,be){be===0?kt+=zt||10:kt+=(It(ve)||0)+(zt||10)}),j=kt/(2*Math.PI)}else!j&&!x&&!d?j=m.height>m.width?m.width/2:m.height/2:!x&&d?x=d:x&&!d&&(d=x);var $=vt*K,lt=[];Q==="topology"?lt=m.topologyOrdering():Q==="topology-directed"?lt=m.topologyOrdering(!0):Q==="degree"?lt=m.degreeOrdering():lt=I;for(var St=Math.ceil(O/it),Ut=0;Ut<O;++Ut){var Ft=j;!Ft&&x!==null&&d!==null&&(Ft=x+Ut*(d-x)/(O-1)),Ft||(Ft=10+Ut*100/(O-1));var ee=Y+Ut%St*$+2*Math.PI/it*Math.floor(Ut/St);rt||(ee=W-Ut%St*$-2*Math.PI/it*Math.floor(Ut/St)),lt[Ut].x=U[0]+Math.cos(ee)*Ft,lt[Ut].y=U[1]+Math.sin(ee)*Ft,lt[Ut].weight=Pt[Ut].all}return(_=m.onLayoutEnd)===null||_===void 0||_.call(m),{nodes:lt,edges:this.edges}},M.prototype.topologyOrdering=function(_){_===void 0&&(_=!1);var m=this,I=m.degrees,A=m.edges,O=m.nodes,U=(0,k.clone)(O),j=m.nodeMap,x=[U[0]],d=[O[0]],it=[],Y=O.length;it[0]=!0,P(U,A,j,_);var W=0;return U.forEach(function(K,Q){if(Q!==0)if((Q===Y-1||I[Q].all!==I[Q+1].all||N(x[W],K,A))&&!it[Q])x.push(K),d.push(O[j[K.id]]),it[Q]=!0,W++;else{for(var rt=x[W].children,J=!1,ot=0;ot<rt.length;ot++){var vt=j[rt[ot]];if(I[vt].all===I[Q].all&&!it[vt]){x.push(U[vt]),d.push(O[j[U[vt].id]]),it[vt]=!0,J=!0;break}}for(var gt=0;!J&&(it[gt]||(x.push(U[gt]),d.push(O[j[U[gt].id]]),it[gt]=!0,J=!0),gt++,gt!==Y););}}),d},M.prototype.degreeOrdering=function(){var _=this,m=_.nodes,I=[],A=_.degrees;return m.forEach(function(O,U){O.degree=A[U].all,I.push(O)}),I.sort(D),I},M.prototype.getType=function(){return"circular"},M}(X.Base);R.CircularLayout=E},263861:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,_){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,_)};return function(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");y(M,_);function m(){this.constructor=M}M.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),X=this&&this.__assign||function(){return X=Object.assign||function(y){for(var M,_=1,m=arguments.length;_<m;_++){M=arguments[_];for(var I in M)Object.prototype.hasOwnProperty.call(M,I)&&(y[I]=M[I])}return y},X.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.ComboCombinedLayout=void 0;var k=z(416470),P=z(762329),N=z(449784),D=z(702584),E=function(y){B(M,y);function M(_){var m=y.call(this)||this;return m.center=[0,0],m.nodes=[],m.edges=[],m.combos=[],m.comboEdges=[],m.comboPadding=10,m.comboTrees=[],m.updateCfg(_),m}return M.prototype.getDefaultCfg=function(){return{}},M.prototype.execute=function(){var _=this,m=_.nodes,I=_.center;if(!m||m.length===0){_.onLayoutEnd&&_.onLayoutEnd();return}if(m.length===1){m[0].x=I[0],m[0].y=I[1],_.onLayoutEnd&&_.onLayoutEnd();return}_.initVals(),_.run(),_.onLayoutEnd&&_.onLayoutEnd()},M.prototype.run=function(){var _,m=this,I=m.nodes,A=m.edges,O=m.combos,U=m.comboEdges,j=m.center,x={};I.forEach(function(zt){x[zt.id]=zt});var d={};O.forEach(function(zt){d[zt.id]=zt});var it=m.getInnerGraphs(x),Y=[],W=[],K={},Q=!0;this.comboTrees.forEach(function(zt){var kt=it[zt.id],$=X(X({},zt),{x:kt.x||d[zt.id].x,y:kt.y||d[zt.id].y,fx:kt.fx||d[zt.id].fx,fy:kt.fy||d[zt.id].fy,mass:kt.mass||d[zt.id].mass,size:kt.size});W.push($),!isNaN($.x)&&$.x!==0&&!isNaN($.y)&&$.y!==0?Q=!1:($.x=Math.random()*100,$.y=Math.random()*100),Y.push(zt.id),(0,N.traverseTreeUp)(zt,function(lt){return lt.id!==zt.id&&(K[lt.id]=zt.id),!0})}),I.forEach(function(zt){if(!(zt.comboId&&d[zt.comboId])){var kt=X({},zt);W.push(kt),!isNaN(kt.x)&&kt.x!==0&&!isNaN(kt.y)&&kt.y!==0?Q=!1:(kt.x=Math.random()*100,kt.y=Math.random()*100),Y.push(zt.id)}});var rt=[];if(A.concat(U).forEach(function(zt){var kt=K[zt.source]||zt.source,$=K[zt.target]||zt.target;kt!==$&&Y.includes(kt)&&Y.includes($)&&rt.push({source:kt,target:$})}),W!=null&&W.length){if(W.length===1)W[0].x=j[0],W[0].y=j[1];else{var J={nodes:W,edges:rt},ot=this.outerLayout||new D.GForceLayout({gravity:1,factor:4,linkDistance:function(zt,kt,$){var lt,St,Ut=((((lt=kt.size)===null||lt===void 0?void 0:lt[0])||30)+(((St=$.size)===null||St===void 0?void 0:St[0])||30))/2;return Math.min(Ut*1.5,700)}}),vt=(_=ot.getType)===null||_===void 0?void 0:_.call(ot);if(ot.updateCfg({center:j,kg:5,preventOverlap:!0,animate:!1}),Q&&k.FORCE_LAYOUT_TYPE_MAP[vt]){var gt=W.length<100?new D.MDSLayout:new D.GridLayout;gt.layout(J)}ot.layout(J)}W.forEach(function(zt){var kt=it[zt.id];if(!kt){var $=x[zt.id];$&&($.x=zt.x,$.y=zt.y);return}kt.visited=!0,kt.x=zt.x,kt.y=zt.y,kt.nodes.forEach(function(lt){lt.x+=zt.x,lt.y+=zt.y})})}for(var Pt=Object.keys(it),It=function(zt){var kt=Pt[zt],$=it[kt];if(!$)return"continue";$.nodes.forEach(function(lt){$.visited||(lt.x+=$.x||0,lt.y+=$.y||0),x[lt.id]&&(x[lt.id].x=lt.x,x[lt.id].y=lt.y)}),d[kt]&&(d[kt].x=$.x,d[kt].y=$.y)},Jt=Pt.length-1;Jt>=0;Jt--)It(Jt);return{nodes:I,edges:A,combos:O,comboEdges:U}},M.prototype.getInnerGraphs=function(_){var m=this,I=m.comboTrees,A=m.nodeSize,O=m.edges,U=m.comboPadding,j=m.spacing,x={},d=this.innerLayout||new D.ConcentricLayout({type:"concentric",sortBy:"id"});return d.center=[0,0],d.preventOverlap=!0,d.nodeSpacing=j,(I||[]).forEach(function(it){(0,N.traverseTreeUp)(it,function(Y){var W,K=(U==null?void 0:U(Y))||10;if((0,N.isArray)(K)&&(K=Math.max.apply(Math,K)),!((W=Y.children)===null||W===void 0)&&W.length){var rt=Y.children.map(function(St){if(St.itemType==="combo")return x[St.id];var Ut=_[St.id]||{};return X(X({},Ut),St)}),J=rt.map(function(St){return St.id}),ot={nodes:rt,edges:O.filter(function(St){return J.includes(St.source)&&J.includes(St.target)})},vt=1/0;rt.forEach(function(St){var Ut;St.size||(St.size=((Ut=x[St.id])===null||Ut===void 0?void 0:Ut.size)||(A==null?void 0:A(St))||[30,30]),(0,N.isNumber)(St.size)&&(St.size=[St.size,St.size]),vt>St.size[0]&&(vt=St.size[0]),vt>St.size[1]&&(vt=St.size[1])}),d.layout(ot);var gt=(0,N.getLayoutBBox)(rt),Pt=gt.minX,It=gt.minY,Jt=gt.maxX,zt=gt.maxY,kt={x:(Jt+Pt)/2,y:(zt+It)/2};ot.nodes.forEach(function(St){St.x-=kt.x,St.y-=kt.y});var $=Math.max(Jt-Pt,vt)+K*2,lt=Math.max(zt-It,vt)+K*2;x[Y.id]={id:Y.id,nodes:rt,size:[$,lt]}}else if(Y.itemType==="combo"){var Q=K?[K*2,K*2]:[30,30];x[Y.id]={id:Y.id,nodes:[],size:Q}}return!0})}),x},M.prototype.initVals=function(){var _=this,m=_.nodeSize,I=_.spacing,A,O;if((0,N.isNumber)(I)?O=function(){return I}:(0,N.isFunction)(I)?O=I:O=function(){return 0},this.spacing=O,!m)A=function(Y){var W=O(Y);if(Y.size){if((0,N.isArray)(Y.size)){var K=Y.size[0]>Y.size[1]?Y.size[0]:Y.size[1];return(K+W)/2}if((0,N.isObject)(Y.size)){var K=Y.size.width>Y.size.height?Y.size.width:Y.size.height;return(K+W)/2}return(Y.size+W)/2}return 10+W/2};else if((0,N.isFunction)(m))A=function(Y){var W=m(Y),K=O(Y);if((0,N.isArray)(Y.size)){var Q=Y.size[0]>Y.size[1]?Y.size[0]:Y.size[1];return(Q+K)/2}return((W||10)+K)/2};else if((0,N.isArray)(m)){var U=m[0]>m[1]?m[0]:m[1],j=U/2;A=function(Y){return j+O(Y)/2}}else{var x=m/2;A=function(Y){return x+O(Y)/2}}this.nodeSize=A;var d=_.comboPadding,it;(0,N.isNumber)(d)?it=function(){return d}:(0,N.isArray)(d)?it=function(){return Math.max.apply(null,d)}:(0,N.isFunction)(d)?it=d:it=function(){return 0},this.comboPadding=it},M.prototype.getType=function(){return"comboCombined"},M}(P.Base);R.ComboCombinedLayout=E},366590:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var N=function(D,E){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,M){y.__proto__=M}||function(y,M){for(var _ in M)Object.prototype.hasOwnProperty.call(M,_)&&(y[_]=M[_])},N(D,E)};return function(D,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");N(D,E);function y(){this.constructor=D}D.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.ComboForceLayout=void 0;var X=z(762329),k=z(449784),P=function(N){B(D,N);function D(E){var y=N.call(this)||this;return y.center=[0,0],y.maxIteration=100,y.gravity=10,y.comboGravity=10,y.linkDistance=10,y.alpha=1,y.alphaMin=.001,y.alphaDecay=1-Math.pow(y.alphaMin,1/300),y.alphaTarget=0,y.velocityDecay=.6,y.edgeStrength=.6,y.nodeStrength=30,y.preventOverlap=!1,y.preventNodeOverlap=!1,y.preventComboOverlap=!1,y.collideStrength=void 0,y.nodeCollideStrength=.5,y.comboCollideStrength=.5,y.comboSpacing=20,y.comboPadding=10,y.optimizeRangeFactor=1,y.onTick=function(){},y.onLayoutEnd=function(){},y.depthAttractiveForceScale=1,y.depthRepulsiveForceScale=2,y.nodes=[],y.edges=[],y.combos=[],y.comboTrees=[],y.width=300,y.height=300,y.bias=[],y.nodeMap={},y.oriComboMap={},y.indexMap={},y.comboMap={},y.previousLayouted=!1,y.updateCfg(E),y}return D.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},D.prototype.execute=function(){var E=this,y=E.nodes,M=E.center;if(E.comboTree={id:"comboTreeRoot",depth:-1,children:E.comboTrees},!y||y.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}if(y.length===1){y[0].x=M[0],y[0].y=M[1],E.onLayoutEnd&&E.onLayoutEnd();return}E.initVals(),E.run(),E.onLayoutEnd&&E.onLayoutEnd()},D.prototype.run=function(){var E=this,y=E.nodes,M=E.previousLayouted?E.maxIteration/5:E.maxIteration;!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight);var _=E.center,m=E.velocityDecay,I=E.comboMap;E.previousLayouted||E.initPos(I);for(var A=function(x){var d=[];y.forEach(function(it,Y){d[Y]={x:0,y:0}}),E.applyCalculate(d),E.applyComboCenterForce(d),y.forEach(function(it,Y){!(0,k.isNumber)(it.x)||!(0,k.isNumber)(it.y)||(it.x+=d[Y].x*m,it.y+=d[Y].y*m)}),E.alpha+=(E.alphaTarget-E.alpha)*E.alphaDecay,E.onTick()},O=0;O<M;O++)A(O);var U=[0,0];y.forEach(function(x){!(0,k.isNumber)(x.x)||!(0,k.isNumber)(x.y)||(U[0]+=x.x,U[1]+=x.y)}),U[0]/=y.length,U[1]/=y.length;var j=[_[0]-U[0],_[1]-U[1]];y.forEach(function(x,d){!(0,k.isNumber)(x.x)||!(0,k.isNumber)(x.y)||(x.x+=j[0],x.y+=j[1])}),E.combos.forEach(function(x){var d=I[x.id];d&&d.empty&&(x.x=d.cx||x.x,x.y=d.cy||x.y)}),E.previousLayouted=!0},D.prototype.initVals=function(){var E=this,y=E.edges,M=E.nodes,_=E.combos,m={},I={},A={};M.forEach(function(Ft,ee){I[Ft.id]=Ft,A[Ft.id]=ee}),E.nodeMap=I,E.indexMap=A;var O={};_.forEach(function(Ft){O[Ft.id]=Ft}),E.oriComboMap=O,E.comboMap=E.getComboMap();var U=E.preventOverlap;E.preventComboOverlap=E.preventComboOverlap||U,E.preventNodeOverlap=E.preventNodeOverlap||U;var j=E.collideStrength;j&&(E.comboCollideStrength=j,E.nodeCollideStrength=j),E.comboCollideStrength=E.comboCollideStrength?E.comboCollideStrength:0,E.nodeCollideStrength=E.nodeCollideStrength?E.nodeCollideStrength:0;for(var x=0;x<y.length;++x){var d=(0,k.getEdgeTerminal)(y[x],"source"),it=(0,k.getEdgeTerminal)(y[x],"target");m[d]?m[d]++:m[d]=1,m[it]?m[it]++:m[it]=1}for(var Y=[],x=0;x<y.length;++x){var d=(0,k.getEdgeTerminal)(y[x],"source"),it=(0,k.getEdgeTerminal)(y[x],"target");Y[x]=m[d]/(m[d]+m[it])}this.bias=Y;var W=E.nodeSize,K=E.nodeSpacing,Q,rt;if((0,k.isNumber)(K)?rt=function(){return K}:(0,k.isFunction)(K)?rt=K:rt=function(){return 0},this.nodeSpacing=rt,!W)Q=function(Ft){if(Ft.size){if((0,k.isArray)(Ft.size)){var ee=Ft.size[0]>Ft.size[1]?Ft.size[0]:Ft.size[1];return ee/2}if((0,k.isObject)(Ft.size)){var ee=Ft.size.width>Ft.size.height?Ft.size.width:Ft.size.height;return ee/2}return Ft.size/2}return 10};else if((0,k.isFunction)(W))Q=function(Ft){return W(Ft)};else if((0,k.isArray)(W)){var J=W[0]>W[1]?W[0]:W[1],ot=J/2;Q=function(Ft){return ot}}else{var vt=W/2;Q=function(Ft){return vt}}this.nodeSize=Q;var gt=E.comboSpacing,Pt;(0,k.isNumber)(gt)?Pt=function(){return gt}:(0,k.isFunction)(gt)?Pt=gt:Pt=function(){return 0},this.comboSpacing=Pt;var It=E.comboPadding,Jt;(0,k.isNumber)(It)?Jt=function(){return It}:(0,k.isArray)(It)?Jt=function(){return Math.max.apply(null,It)}:(0,k.isFunction)(It)?Jt=It:Jt=function(){return 0},this.comboPadding=Jt;var zt=this.linkDistance,kt;zt||(zt=10),(0,k.isNumber)(zt)?kt=function(Ft){return zt}:kt=zt,this.linkDistance=kt;var $=this.edgeStrength,lt;$||($=1),(0,k.isNumber)($)?lt=function(Ft){return $}:lt=$,this.edgeStrength=lt;var St=this.nodeStrength,Ut;St||(St=30),(0,k.isNumber)(St)?Ut=function(Ft){return St}:Ut=St,this.nodeStrength=Ut},D.prototype.initPos=function(E){var y=this,M=y.nodes;M.forEach(function(_,m){var I=_.comboId,A=E[I];I&&A?(_.x=A.cx+100/(m+1),_.y=A.cy+100/(m+1)):(_.x=100/(m+1),_.y=100/(m+1))})},D.prototype.getComboMap=function(){var E=this,y=E.nodeMap,M=E.comboTrees,_=E.oriComboMap,m={};return(M||[]).forEach(function(I){var A=[];(0,k.traverseTreeUp)(I,function(O){if(O.itemType==="node"||!_[O.id])return!0;if(m[O.id]===void 0){var U={id:O.id,name:O.id,cx:0,cy:0,count:0,depth:E.oriComboMap[O.id].depth||0,children:[]};m[O.id]=U}var j=O.children;j&&j.forEach(function(it){if(!m[it.id]&&!y[it.id])return!0;A.push(it)});var x=m[O.id];if(x.cx=0,x.cy=0,A.length===0){x.empty=!0;var d=_[O.id];x.cx=d.x,x.cy=d.y}return A.forEach(function(it){if(x.count++,it.itemType!=="node"){var Y=m[it.id];(0,k.isNumber)(Y.cx)&&(x.cx+=Y.cx),(0,k.isNumber)(Y.cy)&&(x.cy+=Y.cy);return}var W=y[it.id];W&&((0,k.isNumber)(W.x)&&(x.cx+=W.x),(0,k.isNumber)(W.y)&&(x.cy+=W.y))}),x.cx/=x.count||1,x.cy/=x.count||1,x.children=A,!0})}),m},D.prototype.applyComboCenterForce=function(E){var y=this,M=y.gravity,_=y.comboGravity||M,m=this.alpha,I=y.comboTrees,A=y.indexMap,O=y.nodeMap,U=y.comboMap;(I||[]).forEach(function(j){(0,k.traverseTreeUp)(j,function(x){if(x.itemType==="node")return!0;var d=U[x.id];if(!d)return!0;var it=U[x.id],Y=(it.depth+1)/10*.5,W=it.cx,K=it.cy;return it.cx=0,it.cy=0,it.children.forEach(function(Q){if(Q.itemType!=="node"){var rt=U[Q.id];rt&&(0,k.isNumber)(rt.cx)&&(it.cx+=rt.cx),rt&&(0,k.isNumber)(rt.cy)&&(it.cy+=rt.cy);return}var J=O[Q.id],ot=J.x-W||.005,vt=J.y-K||.005,gt=Math.sqrt(ot*ot+vt*vt),Pt=A[J.id],It=_*m/gt*Y;E[Pt].x-=ot*It,E[Pt].y-=vt*It,(0,k.isNumber)(J.x)&&(it.cx+=J.x),(0,k.isNumber)(J.y)&&(it.cy+=J.y)}),it.cx/=it.count||1,it.cy/=it.count||1,!0})})},D.prototype.applyCalculate=function(E){var y=this,M=y.comboMap,_=y.nodes,m={};_.forEach(function(A,O){_.forEach(function(U,j){if(!(O<j)){var x=A.x-U.x||.005,d=A.y-U.y||.005,it=x*x+d*d,Y=Math.sqrt(it);it<1&&(it=Y),m["".concat(A.id,"-").concat(U.id)]={vx:x,vy:d,vl2:it,vl:Y},m["".concat(U.id,"-").concat(A.id)]={vl2:it,vl:Y,vx:-x,vy:-d}}})}),y.updateComboSizes(M),y.calRepulsive(E,m),y.calAttractive(E,m);var I=y.preventComboOverlap;I&&y.comboNonOverlapping(E,M)},D.prototype.updateComboSizes=function(E){var y=this,M=y.comboTrees,_=y.nodeMap,m=y.nodeSize,I=y.comboSpacing,A=y.comboPadding;(M||[]).forEach(function(O){var U=[];(0,k.traverseTreeUp)(O,function(j){if(j.itemType==="node")return!0;var x=E[j.id];if(!x)return!1;var d=j.children;d&&d.forEach(function(W){!E[W.id]&&!_[W.id]||U.push(W)}),x.minX=1/0,x.minY=1/0,x.maxX=-1/0,x.maxY=-1/0,U.forEach(function(W){if(W.itemType!=="node")return!0;var K=_[W.id];if(!K)return!0;var Q=m(K),rt=K.x-Q,J=K.y-Q,ot=K.x+Q,vt=K.y+Q;x.minX>rt&&(x.minX=rt),x.minY>J&&(x.minY=J),x.maxX<ot&&(x.maxX=ot),x.maxY<vt&&(x.maxY=vt)});var it=y.oriComboMap[j.id].size||10;(0,k.isArray)(it)&&(it=it[0]);var Y=Math.max(x.maxX-x.minX,x.maxY-x.minY,it);return x.r=Y/2+I(x)/2+A(x),!0})})},D.prototype.comboNonOverlapping=function(E,y){var M=this,_=M.comboTree,m=M.comboCollideStrength,I=M.indexMap,A=M.nodeMap;(0,k.traverseTreeUp)(_,function(O){if(!y[O.id]&&!A[O.id]&&O.id!=="comboTreeRoot")return!1;var U=O.children;return U&&U.length>1&&U.forEach(function(j,x){if(j.itemType==="node")return!1;var d=y[j.id];d&&U.forEach(function(it,Y){if(x<=Y||it.itemType==="node")return!1;var W=y[it.id];if(!W)return!1;var K=d.cx-W.cx||.005,Q=d.cy-W.cy||.005,rt=K*K+Q*Q,J=d.r||1,ot=W.r||1,vt=J+ot,gt=ot*ot,Pt=J*J;if(rt<vt*vt){var It=j.children;if(!It||It.length===0)return!1;var Jt=it.children;if(!Jt||Jt.length===0)return!1;var zt=Math.sqrt(rt),kt=(vt-zt)/zt*m,$=K*kt,lt=Q*kt,St=gt/(Pt+gt),Ut=1-St;It.forEach(function(Ft){if(Ft.itemType!=="node")return!1;if(A[Ft.id]){var ee=I[Ft.id];Jt.forEach(function(ve){if(ve.itemType!=="node"||!A[ve.id])return!1;var be=I[ve.id];E[ee].x+=$*St,E[ee].y+=lt*St,E[be].x-=$*Ut,E[be].y-=lt*Ut})}})}})}),!0})},D.prototype.calRepulsive=function(E,y){var M=this,_=M.nodes,m=M.width*M.optimizeRangeFactor,I=M.nodeStrength,A=M.alpha,O=M.nodeCollideStrength,U=M.preventNodeOverlap,j=M.nodeSize,x=M.nodeSpacing,d=M.depthRepulsiveForceScale,it=M.center;_.forEach(function(Y,W){if(!(!Y.x||!Y.y)){if(it){var K=M.gravity,Q=Y.x-it[0]||.005,rt=Y.y-it[1]||.005,J=Math.sqrt(Q*Q+rt*rt);E[W].x-=Q*K*A/J,E[W].y-=rt*K*A/J}_.forEach(function(ot,vt){if(W!==vt&&!(!ot.x||!ot.y)){var gt=y["".concat(Y.id,"-").concat(ot.id)],Pt=gt.vl2,It=gt.vl;if(!(It>m)){var Jt=y["".concat(Y.id,"-").concat(ot.id)],zt=Jt.vx,kt=Jt.vy,$=Math.log(Math.abs(ot.depth-Y.depth)/10)+1||1;$=$<1?1:$,ot.comboId!==Y.comboId&&($+=1);var lt=$?Math.pow(d,$):1,St=I(ot)*A/Pt*lt;if(E[W].x+=zt*St,E[W].y+=kt*St,W<vt&&U){var Ut=j(Y)+x(Y)||1,Ft=j(ot)+x(ot)||1,ee=Ut+Ft;if(Pt<ee*ee){var ve=(ee-It)/It*O,be=Ft*Ft,Ht=be/(Ut*Ut+be),Yt=zt*ve,de=kt*ve;E[W].x+=Yt*Ht,E[W].y+=de*Ht,Ht=1-Ht,E[vt].x-=Yt*Ht,E[vt].y-=de*Ht}}}}})}})},D.prototype.calAttractive=function(E,y){var M=this,_=M.edges,m=M.linkDistance,I=M.alpha,A=M.edgeStrength,O=M.bias,U=M.depthAttractiveForceScale;_.forEach(function(j,x){var d=(0,k.getEdgeTerminal)(j,"source"),it=(0,k.getEdgeTerminal)(j,"target");if(!(!d||!it||d===it)){var Y=M.indexMap[d],W=M.indexMap[it],K=M.nodeMap[d],Q=M.nodeMap[it];if(!(!K||!Q)){var rt=K.depth===Q.depth?0:Math.log(Math.abs(K.depth-Q.depth)/10);K.comboId===Q.comboId&&(rt=rt/2);var J=rt?Math.pow(U,rt):1;if(K.comboId!==Q.comboId&&J===1?J=U/2:K.comboId===Q.comboId&&(J=2),!(!(0,k.isNumber)(Q.x)||!(0,k.isNumber)(K.x)||!(0,k.isNumber)(Q.y)||!(0,k.isNumber)(K.y))){var ot=y["".concat(it,"-").concat(d)],vt=ot.vl,gt=ot.vx,Pt=ot.vy,It=(vt-m(j))/vt*I*A(j)*J,Jt=gt*It,zt=Pt*It,kt=O[x];E[W].x-=Jt*kt,E[W].y-=zt*kt,E[Y].x+=Jt*(1-kt),E[Y].y+=zt*(1-kt)}}}})},D.prototype.getType=function(){return"comboForce"},D}(X.Base);R.ComboForceLayout=P},843281:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var N=function(D,E){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,M){y.__proto__=M}||function(y,M){for(var _ in M)Object.prototype.hasOwnProperty.call(M,_)&&(y[_]=M[_])},N(D,E)};return function(D,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");N(D,E);function y(){this.constructor=D}D.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.ConcentricLayout=void 0;var X=z(449784),k=z(762329),P=function(N){B(D,N);function D(E){var y=N.call(this)||this;return y.nodeSize=30,y.minNodeSpacing=10,y.nodeSpacing=10,y.preventOverlap=!1,y.equidistant=!1,y.startAngle=3/2*Math.PI,y.clockwise=!0,y.sortBy="degree",y.nodes=[],y.edges=[],y.width=300,y.height=300,y.onLayoutEnd=function(){},y.updateCfg(E),y}return D.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},D.prototype.execute=function(){var E,y,M=this,_=M.nodes,m=M.edges,I=_.length;if(I===0){(E=M.onLayoutEnd)===null||E===void 0||E.call(M);return}!M.width&&typeof window!="undefined"&&(M.width=window.innerWidth),!M.height&&typeof window!="undefined"&&(M.height=window.innerHeight),M.center||(M.center=[M.width/2,M.height/2]);var A=M.center;if(I===1){_[0].x=A[0],_[0].y=A[1],(y=M.onLayoutEnd)===null||y===void 0||y.call(M);return}var O=M.nodeSize,U=M.nodeSpacing,j=[],x,d=0;(0,X.isArray)(O)?x=Math.max(O[0],O[1]):x=O,(0,X.isArray)(U)?d=Math.max(U[0],U[1]):(0,X.isNumber)(U)&&(d=U),_.forEach(function($){j.push($);var lt=x;(0,X.isArray)($.size)?lt=Math.max($.size[0],$.size[1]):(0,X.isNumber)($.size)?lt=$.size:(0,X.isObject)($.size)&&(lt=Math.max($.size.width,$.size.height)),x=Math.max(x,lt),(0,X.isFunction)(U)&&(d=Math.max(U($),d))}),M.clockwise=M.counterclockwise!==void 0?!M.counterclockwise:M.clockwise;var it={},Y={};if(j.forEach(function($,lt){it[$.id]=$,Y[$.id]=lt}),(M.sortBy==="degree"||!(0,X.isString)(M.sortBy)||j[0][M.sortBy]===void 0)&&(M.sortBy="degree",!(0,X.isNumber)(_[0].degree))){var W=(0,X.getDegree)(_.length,Y,m);j.forEach(function($,lt){$.degree=W[lt].all})}j.sort(function($,lt){return lt[M.sortBy]-$[M.sortBy]}),M.maxValueNode=j[0],M.maxLevelDiff=M.maxLevelDiff||M.maxValueNode[M.sortBy]/4;var K=[[]],Q=K[0];j.forEach(function($){if(Q.length>0){var lt=Math.abs(Q[0][M.sortBy]-$[M.sortBy]);M.maxLevelDiff&&lt>=M.maxLevelDiff&&(Q=[],K.push(Q))}Q.push($)});var rt=x+(d||M.minNodeSpacing);if(!M.preventOverlap){var J=K.length>0&&K[0].length>1,ot=Math.min(M.width,M.height)/2-rt,vt=ot/(K.length+(J?1:0));rt=Math.min(rt,vt)}var gt=0;if(K.forEach(function($){var lt=M.sweep;lt===void 0&&(lt=2*Math.PI-2*Math.PI/$.length);var St=$.dTheta=lt/Math.max(1,$.length-1);if($.length>1&&M.preventOverlap){var Ut=Math.cos(St)-Math.cos(0),Ft=Math.sin(St)-Math.sin(0),ee=Math.sqrt(rt*rt/(Ut*Ut+Ft*Ft));gt=Math.max(ee,gt)}$.r=gt,gt+=rt}),M.equidistant){for(var Pt=0,It=0,Jt=0;Jt<K.length;Jt++){var zt=K[Jt],kt=zt.r-It;Pt=Math.max(Pt,kt)}It=0,K.forEach(function($,lt){lt===0&&(It=$.r),$.r=It,It+=Pt})}return K.forEach(function($){var lt=$.dTheta,St=$.r;$.forEach(function(Ut,Ft){var ee=M.startAngle+(M.clockwise?1:-1)*lt*Ft;Ut.x=A[0]+St*Math.cos(ee),Ut.y=A[1]+St*Math.sin(ee)})}),M.onLayoutEnd&&M.onLayoutEnd(),{nodes:_,edges:m}},D.prototype.getType=function(){return"concentric"},D}(k.Base);R.ConcentricLayout=P},416470:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.FORCE_LAYOUT_TYPE_MAP=R.LAYOUT_MESSAGE=void 0,R.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},R.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},920171:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var M=function(_,m){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,A){I.__proto__=A}||function(I,A){for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(I[O]=A[O])},M(_,m)};return function(_,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");M(_,m);function I(){this.constructor=_}_.prototype=m===null?Object.create(m):(I.prototype=m.prototype,new I)}}(),X=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(R,"__esModule",{value:!0}),R.DagreLayout=void 0;var k=X(z(441106)),P=z(449784),N=z(762329),D=z(627652),E=function(M){B(_,M);function _(m){var I=M.call(this)||this;return I.rankdir="TB",I.nodesep=50,I.ranksep=50,I.controlPoints=!1,I.sortByCombo=!1,I.edgeLabelSpace=!0,I.radial=!1,I.nodes=[],I.edges=[],I.onLayoutEnd=function(){},I.layoutNode=function(A){var O=I,U=O.nodes,j=U.find(function(d){return d.id===A});if(j){var x=j.layout!==!1;return x}return!0},I.updateCfg(m),I}return _.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},_.prototype.execute=function(){var m=this,I,A,O,U,j=this,x=j.nodes,d=j.nodeSize,it=j.rankdir,Y=j.combos,W=j.begin,K=j.radial,Q=j.comboEdges,rt=Q===void 0?[]:Q,J=j.vedges,ot=J===void 0?[]:J;if(x){var vt=j.edges||[],gt=new D.Graph({multigraph:!0,compound:!0});j.nodeMap={};var Pt={};x.forEach(function(fr){j.nodeMap[fr.id]=fr,fr.comboId&&(Pt[fr.comboId]=Pt[fr.comboId]||[],Pt[fr.comboId].push(fr.id))});var It=[],Jt={};!((I=j.nodeOrder)===null||I===void 0)&&I.length?(j.nodeOrder.forEach(function(fr){Jt[fr]=!0,It.push(j.nodeMap[fr])}),x.forEach(function(fr){Jt[fr.id]||It.push(fr)})):It=x;var zt;d?(0,P.isArray)(d)?zt=function(){return d}:zt=function(){return[d,d]}:zt=function(fr){return fr.size?(0,P.isArray)(fr.size)?fr.size:(0,P.isObject)(fr.size)?[fr.size.width||40,fr.size.height||40]:[fr.size,fr.size]:[40,40]};var kt=(0,P.getFunc)(j.ranksep,50,j.ranksepFunc),$=(0,P.getFunc)(j.nodesep,50,j.nodesepFunc),lt=$,St=kt;(it==="LR"||it==="RL")&&(lt=kt,St=$),gt.setDefaultEdgeLabel(function(){return{}}),gt.setGraph(j);var Ut={};this.sortByCombo&&Y&&Y.forEach(function(fr){if(Ut[fr.id]=fr,fr.collapsed){var Or=zt(fr),vn=St(fr),yn=lt(fr),qn=Or[0]+2*yn,Vn=Or[1]+2*vn;gt.setNode(fr.id,{width:qn,height:Vn})}fr.parentId&&(Ut[fr.parentId]||gt.setNode(fr.parentId,{}),gt.setParent(fr.id,fr.parentId))}),It.filter(function(fr){return fr.layout!==!1}).forEach(function(fr){var Or=zt(fr),vn=St(fr),yn=lt(fr),qn=Or[0]+2*yn,Vn=Or[1]+2*vn,jn=fr.layer;(0,P.isNumber)(jn)?gt.setNode(fr.id,{width:qn,height:Vn,layer:jn}):gt.setNode(fr.id,{width:qn,height:Vn}),m.sortByCombo&&fr.comboId&&(Ut[fr.comboId]||(Ut[fr.comboId]={id:fr.comboId},gt.setNode(fr.comboId,{})),gt.setParent(fr.id,fr.comboId))}),vt.forEach(function(fr){var Or=(0,P.getEdgeTerminal)(fr,"source"),vn=(0,P.getEdgeTerminal)(fr,"target");m.layoutNode(Or)&&m.layoutNode(vn)&&gt.setEdge(Or,vn,{weight:fr.weight||1})}),(A=rt==null?void 0:rt.concat(ot||[]))===null||A===void 0||A.forEach(function(fr){var Or,vn,yn=fr.source,qn=fr.target,Vn=!((Or=Ut[yn])===null||Or===void 0)&&Or.collapsed?[yn]:Pt[yn]||[yn],jn=!((vn=Ut[qn])===null||vn===void 0)&&vn.collapsed?[qn]:Pt[qn]||[qn];Vn.forEach(function(ba){jn.forEach(function(ma){gt.setEdge(ba,ma,{weight:fr.weight||1})})})});var Ft=void 0;!((O=j.preset)===null||O===void 0)&&O.nodes&&(Ft=new D.Graph({multigraph:!0,compound:!0}),j.preset.nodes.forEach(function(fr){Ft==null||Ft.setNode(fr.id,fr)})),k.default.layout(gt,{prevGraph:Ft,edgeLabelSpace:j.edgeLabelSpace,keepNodeOrder:!!j.nodeOrder,nodeOrder:j.nodeOrder});var ee=[0,0];if(W){var ve=1/0,be=1/0;gt.nodes().forEach(function(fr){var Or=gt.node(fr);ve>Or.x&&(ve=Or.x),be>Or.y&&(be=Or.y)}),gt.edges().forEach(function(fr){var Or,vn=gt.edge(fr);(Or=vn.points)===null||Or===void 0||Or.forEach(function(yn){ve>yn.x&&(ve=yn.x),be>yn.y&&(be=yn.y)})}),ee[0]=W[0]-ve,ee[1]=W[1]-be}var Ht=it==="LR"||it==="RL";if(K){var Yt=this,de=Yt.focusNode,Ee=Yt.ranksep,ge=Yt.getRadialPos,Ot=(0,P.isString)(de)?de:de==null?void 0:de.id,Xt=Ot?(U=gt.node(Ot))===null||U===void 0?void 0:U._rank:0,ce=[],Lt=Ht?"y":"x",Kt=Ht?"height":"width",pe=1/0,We=-1/0;gt.nodes().forEach(function(fr){var Or=gt.node(fr);if(j.nodeMap[fr]){var vn=$(j.nodeMap[fr]);if(Xt===0)ce[Or._rank]||(ce[Or._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),ce[Or._rank].nodes.push(fr),ce[Or._rank].totalWidth+=vn*2+Or[Kt],ce[Or._rank].maxSize<Math.max(Or.width,Or.height)&&(ce[Or._rank].maxSize=Math.max(Or.width,Or.height));else{var yn=Or._rank-Xt;if(yn===0)ce[yn]||(ce[yn]={nodes:[],totalWidth:0,maxSize:-1/0}),ce[yn].nodes.push(fr),ce[yn].totalWidth+=vn*2+Or[Kt],ce[yn].maxSize<Math.max(Or.width,Or.height)&&(ce[yn].maxSize=Math.max(Or.width,Or.height));else{var qn=Math.abs(yn);ce[qn]||(ce[qn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),ce[qn].totalWidth+=vn*2+Or[Kt],ce[qn].maxSize<Math.max(Or.width,Or.height)&&(ce[qn].maxSize=Math.max(Or.width,Or.height)),yn<0?ce[qn].left.push(fr):ce[qn].right.push(fr)}}var Vn=Or[Lt]-Or[Kt]/2-vn,jn=Or[Lt]+Or[Kt]/2+vn;Vn<pe&&(pe=Vn),jn>We&&(We=jn)}});var Je=Ee||50,Mr={},Vt=(We-pe)/.9,on=[(pe+We-Vt)*.5,(pe+We+Vt)*.5],sn=function(fr,Or,vn,yn){vn===void 0&&(vn=-1/0),yn===void 0&&(yn=[0,1]);var qn=vn;return fr.forEach(function(Vn){var jn=gt.node(Vn);Mr[Vn]=Or;var ba=ge(jn[Lt],on,Vt,Or,yn),ma=ba.x,Pa=ba.y;if(j.nodeMap[Vn]){j.nodeMap[Vn].x=ma+ee[0],j.nodeMap[Vn].y=Pa+ee[1],j.nodeMap[Vn]._order=jn._order;var wn=kt(j.nodeMap[Vn]);qn<wn&&(qn=wn)}}),qn},pn=!0,En=0;ce.forEach(function(fr){var Or,vn,yn,qn,Vn,jn,ba;if(!(!(!((Or=fr==null?void 0:fr.nodes)===null||Or===void 0)&&Or.length)&&!(!((vn=fr==null?void 0:fr.left)===null||vn===void 0)&&vn.length)&&!(!((yn=fr==null?void 0:fr.right)===null||yn===void 0)&&yn.length))){if(pn&&fr.nodes.length===1){var ma=fr.nodes[0];if(!j.nodeMap[ma])return;j.nodeMap[ma].x=ee[0],j.nodeMap[ma].y=ee[1],Mr[fr.nodes[0]]=0,Je=kt(j.nodeMap[ma]),pn=!1;return}Je=Math.max(Je,fr.totalWidth/(2*Math.PI));var Pa=-1/0;if(Xt===0||!((qn=fr.nodes)===null||qn===void 0)&&qn.length)Pa=sn(fr.nodes,Je,Pa,[0,1]);else{var wn=((Vn=fr.left)===null||Vn===void 0?void 0:Vn.length)/(((jn=fr.left)===null||jn===void 0?void 0:jn.length)+((ba=fr.right)===null||ba===void 0?void 0:ba.length));Pa=sn(fr.left,Je,Pa,[0,wn]),Pa=sn(fr.right,Je,Pa,[wn+.05,1])}Je+=Pa,pn=!1,En-fr.maxSize}}),gt.edges().forEach(function(fr){var Or,vn,yn,qn=gt.edge(fr),Vn=vt.findIndex(function(In){var Ca=(0,P.getEdgeTerminal)(In,"source"),q=(0,P.getEdgeTerminal)(In,"target");return Ca===fr.v&&q===fr.w});if(!(Vn<=-1)&&j.edgeLabelSpace&&j.controlPoints&&vt[Vn].type!=="loop"){var jn=Lt==="x"?"y":"x",ba=(Or=qn==null?void 0:qn.points)===null||Or===void 0?void 0:Or.slice(1,qn.points.length-1),ma=[],Pa=(vn=gt.node(fr.v))===null||vn===void 0?void 0:vn[jn],wn=Pa-((yn=gt.node(fr.w))===null||yn===void 0?void 0:yn[jn]),na=Mr[fr.v],Qn=na-Mr[fr.w];ba==null||ba.forEach(function(In){var Ca=(In[jn]-Pa)/wn*Qn+na,q=ge(In[Lt],on,Vt,Ca);ma.push({x:q.x+ee[0],y:q.y+ee[1]})}),vt[Vn].controlPoints=ma}})}else{var Yn=new Set,ea=it==="BT"||it==="RL",Nn=ea?function(fr,Or){return Or-fr}:function(fr,Or){return fr-Or};gt.nodes().forEach(function(fr){var Or=gt.node(fr);if(Or){var vn=m.nodeMap[fr];vn||(vn=Y==null?void 0:Y.find(function(yn){return yn.id===fr})),vn&&(vn.x=Or.x+ee[0],vn.y=Or.y+ee[1],vn._order=Or._order,Yn.add(Ht?vn.x:vn.y))}});var Zn=Array.from(Yn).sort(Nn),La=Ht?function(fr,Or){return fr.x!==Or.x}:function(fr,Or){return fr.y!==Or.y},Aa=Ht?function(fr,Or,vn){var yn=Math.max(Or.y,vn.y),qn=Math.min(Or.y,vn.y);return fr.filter(function(Vn){return Vn.y<=yn&&Vn.y>=qn})}:function(fr,Or,vn){var yn=Math.max(Or.x,vn.x),qn=Math.min(Or.x,vn.x);return fr.filter(function(Vn){return Vn.x<=yn&&Vn.x>=qn})};gt.edges().forEach(function(fr){var Or,vn=gt.edge(fr),yn=vt.findIndex(function(jn){var ba=(0,P.getEdgeTerminal)(jn,"source"),ma=(0,P.getEdgeTerminal)(jn,"target");return ba===fr.v&&ma===fr.w});if(!(yn<=-1)&&j.edgeLabelSpace&&j.controlPoints&&vt[yn].type!=="loop"){(Or=vn==null?void 0:vn.points)===null||Or===void 0||Or.forEach(function(jn){jn.x+=ee[0],jn.y+=ee[1]});var qn=j.nodeMap[fr.v],Vn=j.nodeMap[fr.w];vt[yn].controlPoints=y(vn==null?void 0:vn.points,qn,Vn,Zn,Ht,La,Aa)}})}return j.onLayoutEnd&&j.onLayoutEnd(),{nodes:x,edges:vt}}},_.prototype.getRadialPos=function(m,I,A,O,U){U===void 0&&(U=[0,1]);var j=(m-I[0])/A;j=j*(U[1]-U[0])+U[0];var x=j*2*Math.PI;return{x:Math.cos(x)*O,y:Math.sin(x)*O}},_.prototype.getType=function(){return"dagre"},_}(N.Base);R.DagreLayout=E;var y=function(M,_,m,I,A,O,U){var j=(M==null?void 0:M.slice(1,M.length-1))||[];if(_&&m){var x=_.x,d=_.y,it=m.x,Y=m.y;if(A&&(x=_.y,d=_.x,it=m.y,Y=m.x),Y!==d&&x!==it){var W=I.indexOf(d),K=I[W+1];if(K){var Q=j[0],rt=A?{x:(d+K)/2,y:(Q==null?void 0:Q.y)||it}:{x:(Q==null?void 0:Q.x)||it,y:(d+K)/2};(!Q||O(Q,rt))&&j.unshift(rt)}var J=I.indexOf(Y),ot=Math.abs(J-W);if(ot===1)j=U(j,_,m),j.length||j.push(A?{x:(d+Y)/2,y:x}:{x,y:(d+Y)/2});else if(ot>1){var vt=I[J-1];if(vt){var gt=j[j.length-1],Pt=A?{x:(Y+vt)/2,y:(gt==null?void 0:gt.y)||it}:{x:(gt==null?void 0:gt.x)||x,y:(Y+vt)/2};(!gt||O(gt,Pt))&&j.push(Pt)}}}}return j}},627652:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var P=function(N,D){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,y){E.__proto__=y}||function(E,y){for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&(E[M]=y[M])},P(N,D)};return function(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");P(N,D);function E(){this.constructor=N}N.prototype=D===null?Object.create(D):(E.prototype=D.prototype,new E)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.Graph=void 0;var X=z(199905),k=function(P){B(N,P);function N(){return P!==null&&P.apply(this,arguments)||this}return N}(X.Graph);R.Graph=k},441106:function(dr,R,z){"use strict";var B=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(R,"__esModule",{value:!0});var X=B(z(265236)),k=z(269209);R.default={layout:X.default,util:{time:k.time,notime:k.notime}}},178029:function(dr,R,z){"use strict";var B=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(R,"__esModule",{value:!0});var X=B(z(40773)),k=function(D){var E=function(M){return function(_){var m;return((m=M.edge(_))===null||m===void 0?void 0:m.weight)||1}},y=D.graph().acyclicer==="greedy"?(0,X.default)(D,E(D)):P(D);y==null||y.forEach(function(M){var _=D.edge(M);D.removeEdgeObj(M),_.forwardName=M.name,_.reversed=!0,D.setEdge(M.w,M.v,_,"rev-".concat(Math.random()))})},P=function(D){var E=[],y={},M={},_=function(m){var I;M[m]||(M[m]=!0,y[m]=!0,(I=D.outEdges(m))===null||I===void 0||I.forEach(function(A){y[A.w]?E.push(A):_(A.w)}),delete y[m])};return D.nodes().forEach(_),E},N=function(D){D.edges().forEach(function(E){var y=D.edge(E);if(y.reversed){D.removeEdgeObj(E);var M=y.forwardName;delete y.reversed,delete y.forwardName,D.setEdge(E.w,E.v,y,M)}})};R.default={run:k,undo:N}},111500:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),X=function(P){var N,D=function(E){var y=P.children(E),M=P.node(E);if(y!=null&&y.length&&y.forEach(function(I){return D(I)}),M.hasOwnProperty("minRank")){M.borderLeft=[],M.borderRight=[];for(var _=M.minRank,m=M.maxRank+1;_<m;_+=1)k(P,"borderLeft","_bl",E,M,_),k(P,"borderRight","_br",E,M,_)}};(N=P.children())===null||N===void 0||N.forEach(function(E){return D(E)})},k=function(P,N,D,E,y,M){var _={rank:M,borderType:N,width:0,height:0},m=y[N][M-1],I=(0,B.addDummyNode)(P,"border",_,D);y[N][M]=I,P.setParent(I,E),m&&P.setEdge(m,I,{weight:1})};R.default=X},335279:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(y){var M,_=(M=y.graph().rankdir)===null||M===void 0?void 0:M.toLowerCase();(_==="lr"||_==="rl")&&X(y)},B=function(y){var M,_=(M=y.graph().rankdir)===null||M===void 0?void 0:M.toLowerCase();(_==="bt"||_==="rl")&&P(y),(_==="lr"||_==="rl")&&(D(y),X(y))},X=function(y){y.nodes().forEach(function(M){k(y.node(M))}),y.edges().forEach(function(M){k(y.edge(M))})},k=function(y){var M=y.width;y.width=y.height,y.height=M},P=function(y){y.nodes().forEach(function(M){N(y.node(M))}),y.edges().forEach(function(M){var _,m=y.edge(M);(_=m.points)===null||_===void 0||_.forEach(function(I){return N(I)}),m.hasOwnProperty("y")&&N(m)})},N=function(y){y!=null&&y.y&&(y.y=-y.y)},D=function(y){y.nodes().forEach(function(M){E(y.node(M))}),y.edges().forEach(function(M){var _,m=y.edge(M);(_=m.points)===null||_===void 0||_.forEach(function(I){return E(I)}),m.hasOwnProperty("x")&&E(m)})},E=function(y){var M=y.x;y.x=y.y,y.y=M};R.default={adjust:z,undo:B}},455532:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(k,P){if(k!=="next"&&k!=="prev")return P},B=function(k){k.prev.next=k.next,k.next.prev=k.prev,delete k.next,delete k.prev},X=function(){function k(){var P={};P.prev=P,P.next=P.prev,this.shortcut=P}return k.prototype.dequeue=function(){var P=this.shortcut,N=P.prev;if(N&&N!==P)return B(N),N},k.prototype.enqueue=function(P){var N=this.shortcut;P.prev&&P.next&&B(P),P.next=N.next,N.next.prev=P,N.next=P,P.prev=N},k.prototype.toString=function(){for(var P=[],N=this.shortcut,D=N.prev;D!==N;)P.push(JSON.stringify(D,z)),D=D==null?void 0:D.prev;return"[".concat(P.join(", "),"]")},k}();R.default=X},40773:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var A=function(O,U){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,x){j.__proto__=x}||function(j,x){for(var d in x)Object.prototype.hasOwnProperty.call(x,d)&&(j[d]=x[d])},A(O,U)};return function(O,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");A(O,U);function j(){this.constructor=O}O.prototype=U===null?Object.create(U):(j.prototype=U.prototype,new j)}}(),X=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(R,"__esModule",{value:!0});var k=X(z(455532)),P=z(199905),N=function(A){B(O,A);function O(){return A!==null&&A.apply(this,arguments)||this}return O}(k.default),D=function(A){B(O,A);function O(){return A!==null&&A.apply(this,arguments)||this}return O}(P.Graph),E=function(){return 1},y=function(A,O){var U;if(A.nodeCount()<=1)return[];var j=m(A,O||E),x=M(j.graph,j.buckets,j.zeroIdx);return(U=x.map(function(d){return A.outEdges(d.v,d.w)}))===null||U===void 0?void 0:U.flat()},M=function(A,O,U){for(var j=[],x=O[O.length-1],d=O[0],it;A.nodeCount();){for(;it=d.dequeue();)_(A,O,U,it);for(;it=x.dequeue();)_(A,O,U,it);if(A.nodeCount()){for(var Y=O.length-2;Y>0;--Y)if(it=O[Y].dequeue(),it){j=j.concat(_(A,O,U,it,!0));break}}}return j},_=function(A,O,U,j,x){var d,it,Y=[];return(d=A.inEdges(j.v))===null||d===void 0||d.forEach(function(W){var K=A.edge(W),Q=A.node(W.v);x&&Y.push({v:W.v,w:W.w,in:0,out:0}),Q.out===void 0&&(Q.out=0),Q.out-=K,I(O,U,Q)}),(it=A.outEdges(j.v))===null||it===void 0||it.forEach(function(W){var K=A.edge(W),Q=W.w,rt=A.node(Q);rt.in===void 0&&(rt.in=0),rt.in-=K,I(O,U,rt)}),A.removeNode(j.v),x?Y:void 0},m=function(A,O){var U=new D,j=0,x=0;A.nodes().forEach(function(K){U.setNode(K,{v:K,in:0,out:0})}),A.edges().forEach(function(K){var Q=U.edge(K)||0,rt=(O==null?void 0:O(K))||1,J=Q+rt;U.setEdge(K.v,K.w,J),x=Math.max(x,U.node(K.v).out+=rt),j=Math.max(j,U.node(K.w).in+=rt)});for(var d=[],it=x+j+3,Y=0;Y<it;Y++)d.push(new N);var W=j+1;return U.nodes().forEach(function(K){I(d,W,U.node(K))}),{buckets:d,zeroIdx:W,graph:U}},I=function(A,O,U){U.out?U.in?A[U.out-U.in+O].enqueue(U):A[A.length-1].enqueue(U):A[0].enqueue(U)};R.default=y},265236:function(dr,R,z){"use strict";var B=this&&this.__assign||function(){return B=Object.assign||function(Ht){for(var Yt,de=1,Ee=arguments.length;de<Ee;de++){Yt=arguments[de];for(var ge in Yt)Object.prototype.hasOwnProperty.call(Yt,ge)&&(Ht[ge]=Yt[ge])}return Ht},B.apply(this,arguments)},X=this&&this.__importDefault||function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}};Object.defineProperty(R,"__esModule",{value:!0});var k=X(z(178029)),P=X(z(546171)),N=X(z(576827)),D=z(269209),E=X(z(933562)),y=X(z(59596)),M=X(z(111500)),_=X(z(335279)),m=X(z(819597)),I=X(z(100095)),A=X(z(724956)),O=z(627652),U=function(Ht,Yt){var de=Yt&&Yt.debugTiming?D.time:D.notime;de("layout",function(){Yt&&!Yt.keepNodeOrder&&Yt.prevGraph&&de("  inheritOrder",function(){x(Ht,Yt.prevGraph)});var Ee=de("  buildLayoutGraph",function(){return vt(Ht)});Yt&&Yt.edgeLabelSpace===!1||de("  makeSpaceForEdgeLabels",function(){gt(Ee)});try{de("  runLayout",function(){j(Ee,de,Yt)})}catch(ge){if(ge.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,ge);return}throw ge}de("  updateInputGraph",function(){d(Ht,Ee)})})},j=function(Ht,Yt,de){Yt("    removeSelfEdges",function(){Ut(Ht)}),Yt("    acyclic",function(){k.default.run(Ht)}),Yt("    nestingGraph.run",function(){y.default.run(Ht)}),Yt("    rank",function(){(0,N.default)((0,D.asNonCompoundGraph)(Ht))}),Yt("    injectEdgeLabelProxies",function(){Pt(Ht)}),Yt("    removeEmptyRanks",function(){(0,D.removeEmptyRanks)(Ht)}),Yt("    nestingGraph.cleanup",function(){y.default.cleanup(Ht)}),Yt("    normalizeRanks",function(){(0,D.normalizeRanks)(Ht)}),Yt("    assignRankMinMax",function(){It(Ht)}),Yt("    removeEdgeLabelProxies",function(){Jt(Ht)}),Yt("    normalize.run",function(){P.default.run(Ht)}),Yt("    parentDummyChains",function(){(0,E.default)(Ht)}),Yt("    addBorderSegments",function(){(0,M.default)(Ht)}),de&&de.keepNodeOrder&&Yt("    initDataOrder",function(){(0,A.default)(Ht,de.nodeOrder)}),Yt("    order",function(){(0,m.default)(Ht,de==null?void 0:de.keepNodeOrder)}),Yt("    insertSelfEdges",function(){Ft(Ht)}),Yt("    adjustCoordinateSystem",function(){_.default.adjust(Ht)}),Yt("    position",function(){(0,I.default)(Ht)}),Yt("    positionSelfEdges",function(){ee(Ht)}),Yt("    removeBorderNodes",function(){St(Ht)}),Yt("    normalize.undo",function(){P.default.undo(Ht)}),Yt("    fixupEdgeLabelCoords",function(){$(Ht)}),Yt("    undoCoordinateSystem",function(){_.default.undo(Ht)}),Yt("    translateGraph",function(){zt(Ht)}),Yt("    assignNodeIntersects",function(){kt(Ht)}),Yt("    reversePoints",function(){lt(Ht)}),Yt("    acyclic.undo",function(){k.default.undo(Ht)})},x=function(Ht,Yt){Ht.nodes().forEach(function(de){var Ee=Ht.node(de),ge=Yt.node(de);ge!==void 0?(Ee.fixorder=ge._order,delete ge._order):delete Ee.fixorder})},d=function(Ht,Yt){Ht.nodes().forEach(function(de){var Ee,ge=Ht.node(de);if(ge){var Ot=Yt.node(de);ge.x=Ot.x,ge.y=Ot.y,ge._order=Ot.order,ge._rank=Ot.rank,!((Ee=Yt.children(de))===null||Ee===void 0)&&Ee.length&&(ge.width=Ot.width,ge.height=Ot.height)}}),Ht.edges().forEach(function(de){var Ee=Ht.edge(de),ge=Yt.edge(de);Ee.points=ge?ge.points:[],ge&&ge.hasOwnProperty("x")&&(Ee.x=ge.x,Ee.y=ge.y)}),Ht.graph().width=Yt.graph().width,Ht.graph().height=Yt.graph().height},it=["nodesep","edgesep","ranksep","marginx","marginy"],Y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},W=["acyclicer","ranker","rankdir","align"],K=["width","height","layer","fixorder"],Q={width:0,height:0},rt=["minlen","weight","width","height","labeloffset"],J={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ot=["labelpos"],vt=function(Ht){var Yt=new O.Graph({multigraph:!0,compound:!0}),de=be(Ht.graph()),Ee={};return W==null||W.forEach(function(ge){de[ge]!==void 0&&(Ee[ge]=de[ge])}),Yt.setGraph(Object.assign({},Y,ve(de,it),Ee)),Ht.nodes().forEach(function(ge){var Ot=be(Ht.node(ge)),Xt=B(B({},Q),Ot),ce=ve(Xt,K);Yt.setNode(ge,ce),Yt.setParent(ge,Ht.parent(ge))}),Ht.edges().forEach(function(ge){var Ot=be(Ht.edge(ge)),Xt={};ot==null||ot.forEach(function(ce){Ot[ce]!==void 0&&(Xt[ce]=Ot[ce])}),Yt.setEdgeObj(ge,Object.assign({},J,ve(Ot,rt),Xt))}),Yt},gt=function(Ht){var Yt=Ht.graph();Yt.ranksep||(Yt.ranksep=0),Yt.ranksep/=2,Ht.nodes().forEach(function(de){var Ee=Ht.node(de);isNaN(Ee.layer)||Ee.layer||(Ee.layer=0)}),Ht.edges().forEach(function(de){var Ee,ge=Ht.edge(de);ge.minlen*=2,((Ee=ge.labelpos)===null||Ee===void 0?void 0:Ee.toLowerCase())!=="c"&&(Yt.rankdir==="TB"||Yt.rankdir==="BT"?ge.width+=ge.labeloffset:ge.height+=ge.labeloffset)})},Pt=function(Ht){Ht.edges().forEach(function(Yt){var de=Ht.edge(Yt);if(de.width&&de.height){var Ee=Ht.node(Yt.v),ge=Ht.node(Yt.w),Ot={e:Yt,rank:(ge.rank-Ee.rank)/2+Ee.rank};(0,D.addDummyNode)(Ht,"edge-proxy",Ot,"_ep")}})},It=function(Ht){var Yt=0;Ht.nodes().forEach(function(de){var Ee,ge,Ot=Ht.node(de);Ot.borderTop&&(Ot.minRank=(Ee=Ht.node(Ot.borderTop))===null||Ee===void 0?void 0:Ee.rank,Ot.maxRank=(ge=Ht.node(Ot.borderBottom))===null||ge===void 0?void 0:ge.rank,Yt=Math.max(Yt,Ot.maxRank||-1/0))}),Ht.graph().maxRank=Yt},Jt=function(Ht){Ht.nodes().forEach(function(Yt){var de=Ht.node(Yt);de.dummy==="edge-proxy"&&(Ht.edge(de.e).labelRank=de.rank,Ht.removeNode(Yt))})},zt=function(Ht){var Yt,de=0,Ee,ge=0,Ot=Ht.graph(),Xt=Ot.marginx||0,ce=Ot.marginy||0,Lt=function(Kt){if(Kt){var pe=Kt.x,We=Kt.y,Je=Kt.width,Mr=Kt.height;!isNaN(pe)&&!isNaN(Je)&&(Yt===void 0&&(Yt=pe-Je/2),Yt=Math.min(Yt,pe-Je/2),de=Math.max(de,pe+Je/2)),!isNaN(We)&&!isNaN(Mr)&&(Ee===void 0&&(Ee=We-Mr/2),Ee=Math.min(Ee,We-Mr/2),ge=Math.max(ge,We+Mr/2))}};Ht.nodes().forEach(function(Kt){Lt(Ht.node(Kt))}),Ht.edges().forEach(function(Kt){var pe=Ht.edge(Kt);pe!=null&&pe.hasOwnProperty("x")&&Lt(pe)}),Yt-=Xt,Ee-=ce,Ht.nodes().forEach(function(Kt){var pe=Ht.node(Kt);pe&&(pe.x-=Yt,pe.y-=Ee)}),Ht.edges().forEach(function(Kt){var pe,We=Ht.edge(Kt);(pe=We.points)===null||pe===void 0||pe.forEach(function(Je){Je.x-=Yt,Je.y-=Ee}),We.hasOwnProperty("x")&&(We.x-=Yt),We.hasOwnProperty("y")&&(We.y-=Ee)}),Ot.width=de-Yt+Xt,Ot.height=ge-Ee+ce},kt=function(Ht){Ht.edges().forEach(function(Yt){var de=Ht.edge(Yt),Ee=Ht.node(Yt.v),ge=Ht.node(Yt.w),Ot,Xt;de.points?(Ot=de.points[0],Xt=de.points[de.points.length-1]):(de.points=[],Ot=ge,Xt=Ee),de.points.unshift((0,D.intersectRect)(Ee,Ot)),de.points.push((0,D.intersectRect)(ge,Xt))})},$=function(Ht){Ht.edges().forEach(function(Yt){var de=Ht.edge(Yt);if(de!=null&&de.hasOwnProperty("x"))switch((de.labelpos==="l"||de.labelpos==="r")&&(de.width-=de.labeloffset),de.labelpos){case"l":de.x-=de.width/2+de.labeloffset;break;case"r":de.x+=de.width/2+de.labeloffset;break}})},lt=function(Ht){Ht.edges().forEach(function(Yt){var de,Ee=Ht.edge(Yt);Ee.reversed&&((de=Ee.points)===null||de===void 0||de.reverse())})},St=function(Ht){Ht.nodes().forEach(function(Yt){var de,Ee,ge;if(!((de=Ht.children(Yt))===null||de===void 0)&&de.length){var Ot=Ht.node(Yt),Xt=Ht.node(Ot.borderTop),ce=Ht.node(Ot.borderBottom),Lt=Ht.node(Ot.borderLeft[((Ee=Ot.borderLeft)===null||Ee===void 0?void 0:Ee.length)-1]),Kt=Ht.node(Ot.borderRight[((ge=Ot.borderRight)===null||ge===void 0?void 0:ge.length)-1]);Ot.width=Math.abs((Kt==null?void 0:Kt.x)-(Lt==null?void 0:Lt.x))||10,Ot.height=Math.abs((ce==null?void 0:ce.y)-(Xt==null?void 0:Xt.y))||10,Ot.x=((Lt==null?void 0:Lt.x)||0)+Ot.width/2,Ot.y=((Xt==null?void 0:Xt.y)||0)+Ot.height/2}}),Ht.nodes().forEach(function(Yt){var de;((de=Ht.node(Yt))===null||de===void 0?void 0:de.dummy)==="border"&&Ht.removeNode(Yt)})},Ut=function(Ht){Ht.edges().forEach(function(Yt){if(Yt.v===Yt.w){var de=Ht.node(Yt.v);de.selfEdges||(de.selfEdges=[]),de.selfEdges.push({e:Yt,label:Ht.edge(Yt)}),Ht.removeEdgeObj(Yt)}})},Ft=function(Ht){var Yt=(0,D.buildLayerMatrix)(Ht);Yt==null||Yt.forEach(function(de){var Ee=0;de==null||de.forEach(function(ge,Ot){var Xt,ce=Ht.node(ge);ce.order=Ot+Ee,(Xt=ce.selfEdges)===null||Xt===void 0||Xt.forEach(function(Lt){(0,D.addDummyNode)(Ht,"selfedge",{width:Lt.label.width,height:Lt.label.height,rank:ce.rank,order:Ot+ ++Ee,e:Lt.e,label:Lt.label},"_se")}),delete ce.selfEdges})})},ee=function(Ht){Ht.nodes().forEach(function(Yt){var de=Ht.node(Yt);if(de.dummy==="selfedge"){var Ee=Ht.node(de.e.v),ge=Ee.x+Ee.width/2,Ot=Ee.y,Xt=de.x-ge,ce=Ee.height/2;Ht.setEdgeObj(de.e,de.label),Ht.removeNode(Yt),de.label.points=[{x:ge+2*Xt/3,y:Ot-ce},{x:ge+5*Xt/6,y:Ot-ce},{y:Ot,x:ge+Xt},{x:ge+5*Xt/6,y:Ot+ce},{x:ge+2*Xt/3,y:Ot+ce}],de.label.x=de.x,de.label.y=de.y}})},ve=function(Ht,Yt){var de={};return Yt==null||Yt.forEach(function(Ee){Ht[Ee]!==void 0&&(de[Ee]=+Ht[Ee])}),de},be=function(Ht){Ht===void 0&&(Ht={});var Yt={};return Object.keys(Ht).forEach(function(de){Yt[de.toLowerCase()]=Ht[de]}),Yt};R.default=U},59596:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),X=function(E){var y,M=(0,B.addDummyNode)(E,"root",{},"_root"),_=P(E),m=Math.max.apply(Math,Object.values(_));Math.abs(m)===1/0&&(m=1);var I=m-1,A=2*I+1;E.graph().nestingRoot=M,E.edges().forEach(function(U){E.edge(U).minlen*=A});var O=N(E)+1;(y=E.children())===null||y===void 0||y.forEach(function(U){k(E,M,A,O,I,_,U)}),E.graph().nodeRankFactor=A},k=function(E,y,M,_,m,I,A){var O=E.children(A);if(!(O!=null&&O.length)){A!==y&&E.setEdge(y,A,{weight:0,minlen:M});return}var U=(0,B.addBorderNode)(E,"_bt"),j=(0,B.addBorderNode)(E,"_bb"),x=E.node(A);E.setParent(U,A),x.borderTop=U,E.setParent(j,A),x.borderBottom=j,O==null||O.forEach(function(d){k(E,y,M,_,m,I,d);var it=E.node(d),Y=it.borderTop?it.borderTop:d,W=it.borderBottom?it.borderBottom:d,K=it.borderTop?_:2*_,Q=Y!==W?1:m-I[A]+1;E.setEdge(U,Y,{minlen:Q,weight:K,nestingEdge:!0}),E.setEdge(W,j,{minlen:Q,weight:K,nestingEdge:!0})}),E.parent(A)||E.setEdge(y,U,{weight:0,minlen:m+I[A]})},P=function(E){var y,M={},_=function(m,I){var A=E.children(m);A==null||A.forEach(function(O){return _(O,I+1)}),M[m]=I};return(y=E.children())===null||y===void 0||y.forEach(function(m){return _(m,1)}),M},N=function(E){var y=0;return E.edges().forEach(function(M){y+=E.edge(M).weight}),y},D=function(E){var y=E.graph();y.nestingRoot&&E.removeNode(y.nestingRoot),delete y.nestingRoot,E.edges().forEach(function(M){var _=E.edge(M);_.nestingEdge&&E.removeEdgeObj(M)})};R.default={run:X,cleanup:D}},546171:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),X=function(N){N.graph().dummyChains=[],N.edges().forEach(function(D){return k(N,D)})},k=function(N,D){var E=D.v,y=N.node(E).rank,M=D.w,_=N.node(M).rank,m=D.name,I=N.edge(D),A=I.labelRank;if(_!==y+1){N.removeEdgeObj(D);var O=N.graph(),U,j,x;for(x=0,++y;y<_;++x,++y)I.points=[],j={edgeLabel:I,width:0,height:0,edgeObj:D,rank:y},U=(0,B.addDummyNode)(N,"edge",j,"_d"),y===A&&(j.width=I.width,j.height=I.height,j.dummy="edge-label",j.labelpos=I.labelpos),N.setEdge(E,U,{weight:I.weight},m),x===0&&(O.dummyChains||(O.dummyChains=[]),O.dummyChains.push(U)),E=U;N.setEdge(E,M,{weight:I.weight},m)}},P=function(N){var D;(D=N.graph().dummyChains)===null||D===void 0||D.forEach(function(E){var y=N.node(E),M=y.edgeLabel,_;y.edgeObj&&N.setEdgeObj(y.edgeObj,M);for(var m=E;y.dummy;)_=N.successors(m)[0],N.removeNode(m),M.points.push({x:y.x,y:y.y}),y.dummy==="edge-label"&&(M.x=y.x,M.y=y.y,M.width=y.width,M.height=y.height),m=_,y=N.node(m)})};R.default={run:X,undo:P}},680314:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(B,X,k){var P={},N;k==null||k.forEach(function(D){for(var E=B.parent(D),y,M;E;){if(y=B.parent(E),y?(M=P[y],P[y]=E):(M=N,N=E),M&&M!==E){X.setEdge(M,E);return}E=y}})};R.default=z},989921:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(B,X){return X.map(function(k){var P=B.inEdges(k);if(!(P!=null&&P.length))return{v:k};{var N={sum:0,weight:0};return P==null||P.forEach(function(D){var E=B.edge(D),y=B.node(D.v);N.sum+=E.weight*y.order,N.weight+=E.weight}),{v:k,barycenter:N.sum/N.weight,weight:N.weight}}})};R.default=z},277006:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(627652),X=function(P,N,D){var E=k(P),y=new B.Graph({compound:!0}).setGraph({root:E}).setDefaultNodeLabel(function(M){return P.node(M)});return P.nodes().forEach(function(M){var _,m=P.node(M),I=P.parent(M);(m.rank===N||m.minRank<=N&&N<=m.maxRank)&&(y.setNode(M),y.setParent(M,I||E),(_=P[D](M))===null||_===void 0||_.forEach(function(A){var O=A.v===M?A.w:A.v,U=y.edgeFromArgs(O,M),j=U!==void 0?U.weight:0;y.setEdge(O,M,{weight:P.edge(A).weight+j})}),m.hasOwnProperty("minRank")&&y.setNode(M,{borderLeft:m.borderLeft[N],borderRight:m.borderRight[N]}))}),y},k=function(P){for(var N;P.hasNode(N="_root".concat(Math.random())););return N};R.default=X},632957:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),X=function(P,N,D){for(var E=(0,B.zipObject)(D,D.map(function(O,U){return U})),y=N.map(function(O){var U,j=(U=P.outEdges(O))===null||U===void 0?void 0:U.map(function(x){return{pos:E[x.w]||0,weight:P.edge(x).weight}});return j==null?void 0:j.sort(function(x,d){return x.pos-d.pos})}),M=y.flat().filter(function(O){return O!==void 0}),_=1;_<D.length;)_<<=1;var m=2*_-1;_-=1;var I=Array(m).fill(0,0,m),A=0;return M==null||M.forEach(function(O){if(O){var U=O.pos+_;I[U]+=O.weight;for(var j=0;U>0;)U%2&&(j+=I[U+1]),U=U-1>>1,I[U]+=O.weight;A+=O.weight*j}}),A},k=function(P,N){for(var D=0,E=1;E<(N==null?void 0:N.length);E+=1)D+=X(P,N[E-1],N[E]);return D};R.default=k},819597:function(dr,R,z){"use strict";var B=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(R,"__esModule",{value:!0});var X=B(z(115697)),k=B(z(632957)),P=B(z(277006)),N=B(z(680314)),D=B(z(99455)),E=z(449784),y=z(627652),M=z(269209),_=function(O,U){for(var j=(0,M.maxRank)(O),x=[],d=[],it=1;it<j+1;it++)x.push(it);for(var it=j-1;it>-1;it--)d.push(it);var Y=m(O,x,"inEdges"),W=m(O,d,"outEdges"),K=(0,X.default)(O);A(O,K);for(var Q=Number.POSITIVE_INFINITY,rt,it=0,J=0;J<4;++it,++J){I(it%2?Y:W,it%4>=2,!1,U),K=(0,M.buildLayerMatrix)(O);var ot=(0,k.default)(O,K);ot<Q&&(J=0,rt=(0,E.clone)(K),Q=ot)}K=(0,X.default)(O),A(O,K);for(var it=0,J=0;J<4;++it,++J){I(it%2?Y:W,it%4>=2,!0,U),K=(0,M.buildLayerMatrix)(O);var ot=(0,k.default)(O,K);ot<Q&&(J=0,rt=(0,E.clone)(K),Q=ot)}A(O,rt)},m=function(O,U,j){return U.map(function(x){return(0,P.default)(O,x,j)})},I=function(O,U,j,x){var d=new y.Graph;O==null||O.forEach(function(it){for(var Y,W=it.graph().root,K=(0,D.default)(it,W,d,U,j,x),Q=0;Q<((Y=K.vs)===null||Y===void 0?void 0:Y.length);Q++){var rt=it.node(K.vs[Q]);rt&&(rt.order=Q)}(0,N.default)(it,d,K.vs)})},A=function(O,U){U==null||U.forEach(function(j){j==null||j.forEach(function(x,d){O.node(x).order=d})})};R.default=_},724956:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(B,X){for(var k=B.nodes().filter(function(y){var M;return!(!((M=B.children(y))===null||M===void 0)&&M.length)}),P=k.map(function(y){return B.node(y).rank}),N=Math.max.apply(Math,P),D=[],E=0;E<N+1;E++)D[E]=[];X==null||X.forEach(function(y){var M=B.node(y);!M||M!=null&&M.dummy||isNaN(M.rank)||(M.fixorder=D[M.rank].length,D[M.rank].push(y))})};R.default=z},115697:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(772549),X=function(k){for(var P={},N=k.nodes().filter(function(O){var U;return!(!((U=k.children(O))===null||U===void 0)&&U.length)}),D=N.map(function(O){return k.node(O).rank}),E=(0,B.max)(D),y=[],M=0;M<E+1;M++)y.push([]);var _=function(O){var U;if(!P.hasOwnProperty(O)){P[O]=!0;var j=k.node(O);isNaN(j.rank)||y[j.rank].push(O),(U=k.successors(O))===null||U===void 0||U.forEach(function(x){return _(x)})}},m=N.sort(function(O,U){return k.node(O).rank-k.node(U).rank}),I=m.filter(function(O){return k.node(O).fixorder!==void 0}),A=I.sort(function(O,U){return k.node(O).fixorder-k.node(U).fixorder});return A==null||A.forEach(function(O){isNaN(k.node(O).rank)||y[k.node(O).rank].push(O),P[O]=!0}),m==null||m.forEach(_),y};R.default=X},707043:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(k,P){var N,D,E,y={};k==null||k.forEach(function(_,m){y[_.v]={i:m,indegree:0,in:[],out:[],vs:[_.v]};var I=y[_.v];_.barycenter!==void 0&&(I.barycenter=_.barycenter,I.weight=_.weight)}),(N=P.edges())===null||N===void 0||N.forEach(function(_){var m=y[_.v],I=y[_.w];m!==void 0&&I!==void 0&&(I.indegree++,m.out.push(y[_.w]))});var M=(E=(D=Object.values(y)).filter)===null||E===void 0?void 0:E.call(D,function(_){return!_.indegree});return B(M)},B=function(k){for(var P,N,D=[],E=function(I){return function(A){A.merged||(A.barycenter===void 0||I.barycenter===void 0||A.barycenter>=I.barycenter)&&X(I,A)}},y=function(I){return function(A){A.in.push(I),--A.indegree===0&&k.push(A)}},M=function(){var I=k.pop();D.push(I),(P=I.in.reverse())===null||P===void 0||P.forEach(function(A){return E(I)(A)}),(N=I.out)===null||N===void 0||N.forEach(function(A){return y(I)(A)})};k!=null&&k.length;)M();var _=D.filter(function(I){return!I.merged}),m=["vs","i","barycenter","weight"];return _.map(function(I){var A={};return m==null||m.forEach(function(O){I[O]!==void 0&&(A[O]=I[O])}),A})},X=function(k,P){var N,D=0,E=0;k.weight&&(D+=k.barycenter*k.weight,E+=k.weight),P.weight&&(D+=P.barycenter*P.weight,E+=P.weight),k.vs=(N=P.vs)===null||N===void 0?void 0:N.concat(k.vs),k.barycenter=D/E,k.weight=E,k.i=Math.min(P.i,k.i),P.merged=!0};R.default=z},99455:function(dr,R,z){"use strict";var B=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(R,"__esModule",{value:!0});var X=B(z(989921)),k=B(z(707043)),P=B(z(421498)),N=function(y,M,_,m,I,A){var O,U,j,x,d=y.children(M),it=y.node(M),Y=it?it.borderLeft:void 0,W=it?it.borderRight:void 0,K={};Y&&(d=d==null?void 0:d.filter(function(gt){return gt!==Y&&gt!==W}));var Q=(0,X.default)(y,d||[]);Q==null||Q.forEach(function(gt){var Pt;if(!((Pt=y.children(gt.v))===null||Pt===void 0)&&Pt.length){var It=N(y,gt.v,_,m,A);K[gt.v]=It,It.hasOwnProperty("barycenter")&&E(gt,It)}});var rt=(0,k.default)(Q,_);D(rt,K),(O=rt.filter(function(gt){return gt.vs.length>0}))===null||O===void 0||O.forEach(function(gt){var Pt=y.node(gt.vs[0]);Pt&&(gt.fixorder=Pt.fixorder,gt.order=Pt.order)});var J=(0,P.default)(rt,m,I,A);if(Y&&(J.vs=[Y,J.vs,W].flat(),!((U=y.predecessors(Y))===null||U===void 0)&&U.length)){var ot=y.node(((j=y.predecessors(Y))===null||j===void 0?void 0:j[0])||""),vt=y.node(((x=y.predecessors(W))===null||x===void 0?void 0:x[0])||"");J.hasOwnProperty("barycenter")||(J.barycenter=0,J.weight=0),J.barycenter=(J.barycenter*J.weight+ot.order+vt.order)/(J.weight+2),J.weight+=2}return J},D=function(y,M){y==null||y.forEach(function(_){var m,I=(m=_.vs)===null||m===void 0?void 0:m.map(function(A){return M[A]?M[A].vs:A});_.vs=I.flat()})},E=function(y,M){y.barycenter!==void 0?(y.barycenter=(y.barycenter*y.weight+M.barycenter*M.weight)/(y.weight+M.weight),y.weight+=M.weight):(y.barycenter=M.barycenter,y.weight=M.weight)};R.default=N},421498:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(269209),X=function(N,D,E,y){var M=(0,B.partition)(N,function(x){var d=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return y?!d&&x.hasOwnProperty("barycenter"):d||x.hasOwnProperty("barycenter")}),_=M.lhs,m=M.rhs.sort(function(x,d){return-x.i- -d.i}),I=[],A=0,O=0,U=0;_==null||_.sort(P(!!D,!!E)),U=k(I,m,U),_==null||_.forEach(function(x){var d;U+=(d=x.vs)===null||d===void 0?void 0:d.length,I.push(x.vs),A+=x.barycenter*x.weight,O+=x.weight,U=k(I,m,U)});var j={vs:I.flat()};return O&&(j.barycenter=A/O,j.weight=O),j},k=function(N,D,E){for(var y=E,M;D.length&&(M=D[D.length-1]).i<=y;)D.pop(),N==null||N.push(M.vs),y++;return y},P=function(N,D){return function(E,y){if(E.fixorder!==void 0&&y.fixorder!==void 0)return E.fixorder-y.fixorder;if(E.barycenter<y.barycenter)return-1;if(E.barycenter>y.barycenter)return 1;if(D&&E.order!==void 0&&y.order!==void 0){if(E.order<y.order)return-1;if(E.order>y.order)return 1}return N?y.i-E.i:E.i-y.i}};R.default=X},933562:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(k){var P,N={},D=0,E=function(y){var M,_=D;(M=k.children(y))===null||M===void 0||M.forEach(E),N[y]={low:_,lim:D++}};return(P=k.children())===null||P===void 0||P.forEach(E),N},B=function(k,P,N,D){var E=[],y=[],M=Math.min(P[N].low,P[D].low),_=Math.max(P[N].lim,P[D].lim),m,I;m=N;do m=k.parent(m),E.push(m);while(m&&(P[m].low>M||_>P[m].lim));for(I=m,m=D;m&&m!==I;)y.push(m),m=k.parent(m);return{lca:I,path:E.concat(y.reverse())}},X=function(k){var P,N=z(k);(P=k.graph().dummyChains)===null||P===void 0||P.forEach(function(D){var E,y,M=D,_=k.node(M),m=_.edgeObj;if(m)for(var I=B(k,N,m.v,m.w),A=I.path,O=I.lca,U=0,j=A[U],x=!0;M!==m.w;){if(_=k.node(M),x){for(;j!==O&&((E=k.node(j))===null||E===void 0?void 0:E.maxRank)<_.rank;)U++,j=A[U];j===O&&(x=!1)}if(!x){for(;U<A.length-1&&((y=k.node(A[U+1]))===null||y===void 0?void 0:y.minRank)<=_.rank;)U++;j=A[U]}k.setParent(M,j),M=k.successors(M)[0]}})};R.default=X},371963:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var Y=function(W,K){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,rt){Q.__proto__=rt}||function(Q,rt){for(var J in rt)Object.prototype.hasOwnProperty.call(rt,J)&&(Q[J]=rt[J])},Y(W,K)};return function(W,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");Y(W,K);function Q(){this.constructor=W}W.prototype=K===null?Object.create(K):(Q.prototype=K.prototype,new Q)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.width=R.sep=R.positionX=R.balance=R.alignCoordinates=R.findSmallestWidthAlignment=R.buildBlockGraph=R.horizontalCompaction=R.verticalAlignment=R.hasConflict=R.addConflict=R.findOtherInnerSegmentNode=R.findType2Conflicts=R.findType1Conflicts=void 0;var X=z(199905),k=z(772549),P=z(269209),N=function(Y){B(W,Y);function W(){return Y!==null&&Y.apply(this,arguments)||this}return W}(X.Graph),D=function(Y,W){var K={},Q=function(rt,J){var ot=0,vt=0,gt=rt.length,Pt=J==null?void 0:J[(J==null?void 0:J.length)-1];return J==null||J.forEach(function(It,Jt){var zt,kt=(0,R.findOtherInnerSegmentNode)(Y,It),$=kt?Y.node(kt).order:gt;(kt||It===Pt)&&((zt=J.slice(vt,Jt+1))===null||zt===void 0||zt.forEach(function(lt){var St;(St=Y.predecessors(lt))===null||St===void 0||St.forEach(function(Ut){var Ft,ee=Y.node(Ut),ve=ee.order;(ve<ot||$<ve)&&!(ee.dummy&&(!((Ft=Y.node(lt))===null||Ft===void 0)&&Ft.dummy))&&(0,R.addConflict)(K,Ut,lt)})}),vt=Jt+1,ot=$)}),J};return W!=null&&W.length&&W.reduce(Q),K};R.findType1Conflicts=D;var E=function(Y,W){var K={};function Q(vt,gt,Pt,It,Jt){for(var zt,kt,$,lt=gt;lt<Pt;lt++)$=vt[lt],!((zt=Y.node($))===null||zt===void 0)&&zt.dummy&&((kt=Y.predecessors($))===null||kt===void 0||kt.forEach(function(St){var Ut=Y.node(St);Ut.dummy&&(Ut.order<It||Ut.order>Jt)&&(0,R.addConflict)(K,St,$)}))}function rt(vt){return JSON.stringify(vt.slice(1))}function J(vt,gt){var Pt=rt(vt);gt.get(Pt)||(Q.apply(void 0,vt),gt.set(Pt,!0))}var ot=function(vt,gt){var Pt=-1,It,Jt=0,zt=new Map;return gt==null||gt.forEach(function(kt,$){var lt;if(((lt=Y.node(kt))===null||lt===void 0?void 0:lt.dummy)==="border"){var St=Y.predecessors(kt)||[];St.length&&(It=Y.node(St[0]).order,J([gt,Jt,$,Pt,It],zt),Jt=$,Pt=It)}J([gt,Jt,gt.length,It,vt.length],zt)}),gt};return W!=null&&W.length&&W.reduce(ot),K};R.findType2Conflicts=E;var y=function(Y,W){var K,Q;if(!((K=Y.node(W))===null||K===void 0)&&K.dummy)return(Q=Y.predecessors(W))===null||Q===void 0?void 0:Q.find(function(rt){return Y.node(rt).dummy})};R.findOtherInnerSegmentNode=y;var M=function(Y,W,K){var Q=W,rt=K;if(Q>rt){var J=Q;Q=rt,rt=J}var ot=Y[Q];ot||(Y[Q]=ot={}),ot[rt]=!0};R.addConflict=M;var _=function(Y,W,K){var Q=W,rt=K;if(Q>rt){var J=W;Q=rt,rt=J}return!!Y[Q]};R.hasConflict=_;var m=function(Y,W,K,Q){var rt={},J={},ot={};return W==null||W.forEach(function(vt){vt==null||vt.forEach(function(gt,Pt){rt[gt]=gt,J[gt]=gt,ot[gt]=Pt})}),W==null||W.forEach(function(vt){var gt=-1;vt==null||vt.forEach(function(Pt){var It=Q(Pt);if(It.length){It=It.sort(function(lt,St){return ot[lt]-ot[St]});for(var Jt=(It.length-1)/2,zt=Math.floor(Jt),kt=Math.ceil(Jt);zt<=kt;++zt){var $=It[zt];J[Pt]===Pt&&gt<ot[$]&&!(0,R.hasConflict)(K,Pt,$)&&(J[$]=Pt,J[Pt]=rt[Pt]=rt[$],gt=ot[$])}}})}),{root:rt,align:J}};R.verticalAlignment=m;var I=function(Y,W,K,Q,rt){var J,ot={},vt=(0,R.buildBlockGraph)(Y,W,K,rt),gt=rt?"borderLeft":"borderRight",Pt=function(zt,kt){for(var $=vt.nodes(),lt=$.pop(),St={};lt;)St[lt]?zt(lt):(St[lt]=!0,$.push(lt),$=$.concat(kt(lt))),lt=$.pop()},It=function(zt){ot[zt]=(vt.inEdges(zt)||[]).reduce(function(kt,$){return Math.max(kt,(ot[$.v]||0)+vt.edge($))},0)},Jt=function(zt){var kt=(vt.outEdges(zt)||[]).reduce(function(lt,St){return Math.min(lt,(ot[St.w]||0)-vt.edge(St))},Number.POSITIVE_INFINITY),$=Y.node(zt);kt!==Number.POSITIVE_INFINITY&&$.borderType!==gt&&(ot[zt]=Math.max(ot[zt],kt))};return Pt(It,vt.predecessors.bind(vt)),Pt(Jt,vt.successors.bind(vt)),(J=Object.values(Q))===null||J===void 0||J.forEach(function(zt){ot[zt]=ot[K[zt]]}),ot};R.horizontalCompaction=I;var A=function(Y,W,K,Q){var rt=new N,J=Y.graph(),ot=(0,R.sep)(J.nodesep,J.edgesep,Q);return W==null||W.forEach(function(vt){var gt;vt==null||vt.forEach(function(Pt){var It=K[Pt];if(rt.setNode(It),gt){var Jt=K[gt],zt=rt.edgeFromArgs(Jt,It);rt.setEdge(Jt,It,Math.max(ot(Y,Pt,gt),zt||0))}gt=Pt})}),rt};R.buildBlockGraph=A;var O=function(Y,W){return(0,P.minBy)(Object.values(W),function(K){var Q,rt=Number.NEGATIVE_INFINITY,J=Number.POSITIVE_INFINITY;return(Q=Object.keys(K))===null||Q===void 0||Q.forEach(function(ot){var vt=K[ot],gt=(0,R.width)(Y,ot)/2;rt=Math.max(vt+gt,rt),J=Math.min(vt-gt,J)}),rt-J})};R.findSmallestWidthAlignment=O;function U(Y,W){var K=Object.values(W),Q=(0,k.min)(K),rt=(0,k.max)(K);["u","d"].forEach(function(J){["l","r"].forEach(function(ot){var vt=J+ot,gt=Y[vt],Pt;if(gt!==W){var It=Object.values(gt);Pt=ot==="l"?Q-(0,k.min)(It):rt-(0,k.max)(It),Pt&&(Y[vt]={},Object.keys(gt).forEach(function(Jt){Y[vt][Jt]=gt[Jt]+Pt}))}})})}R.alignCoordinates=U;var j=function(Y,W){var K={};return Object.keys(Y.ul).forEach(function(Q){if(W)K[Q]=Y[W.toLowerCase()][Q];else{var rt=Object.values(Y).map(function(J){return J[Q]});K[Q]=(rt[0]+rt[1])/2}}),K};R.balance=j;var x=function(Y){var W=(0,P.buildLayerMatrix)(Y),K=Object.assign((0,R.findType1Conflicts)(Y,W),(0,R.findType2Conflicts)(Y,W)),Q={},rt;["u","d"].forEach(function(ot){rt=ot==="u"?W:Object.values(W).reverse(),["l","r"].forEach(function(vt){vt==="r"&&(rt=rt.map(function(Jt){return Object.values(Jt).reverse()}));var gt=(ot==="u"?Y.predecessors:Y.successors).bind(Y),Pt=(0,R.verticalAlignment)(Y,rt,K,gt),It=(0,R.horizontalCompaction)(Y,rt,Pt.root,Pt.align,vt==="r");vt==="r"&&Object.keys(It).forEach(function(Jt){It[Jt]=-It[Jt]}),Q[ot+vt]=It})});var J=(0,R.findSmallestWidthAlignment)(Y,Q);return U(Q,J),(0,R.balance)(Q,Y.graph().align)};R.positionX=x;var d=function(Y,W,K){return function(Q,rt,J){var ot=Q.node(rt),vt=Q.node(J),gt=0,Pt;if(gt+=ot.width/2,ot.hasOwnProperty("labelpos"))switch((ot.labelpos||"").toLowerCase()){case"l":Pt=-ot.width/2;break;case"r":Pt=ot.width/2;break}if(Pt&&(gt+=K?Pt:-Pt),Pt=0,gt+=(ot.dummy?W:Y)/2,gt+=(vt.dummy?W:Y)/2,gt+=vt.width/2,vt.labelpos)switch((vt.labelpos||"").toLowerCase()){case"l":Pt=vt.width/2;break;case"r":Pt=-vt.width/2;break}return Pt&&(gt+=K?Pt:-Pt),Pt=0,gt}};R.sep=d;var it=function(Y,W){return Y.node(W).width||0};R.width=it},100095:function(dr,R,z){"use strict";var B=this&&this.__spreadArray||function(E,y,M){if(M||arguments.length===2)for(var _=0,m=y.length,I;_<m;_++)(I||!(_ in y))&&(I||(I=Array.prototype.slice.call(y,0,_)),I[_]=y[_]);return E.concat(I||Array.prototype.slice.call(y))};Object.defineProperty(R,"__esModule",{value:!0});var X=z(269209),k=z(371963),P=function(E){var y=(0,X.buildLayerMatrix)(E),M=E.graph().ranksep,_=0;y==null||y.forEach(function(m){var I=m.map(function(O){return E.node(O).height}),A=Math.max.apply(Math,B(B([],I,!1),[0],!1));m==null||m.forEach(function(O){E.node(O).y=_+A/2}),_+=A+M})},N=function(E){var y=(0,X.buildLayerMatrix)(E),M=Object.assign((0,k.findType1Conflicts)(E,y),(0,k.findType2Conflicts)(E,y)),_={},m=[];["u","d"].forEach(function(A){m=A==="u"?y:Object.values(y).reverse(),["l","r"].forEach(function(O){O==="r"&&(m=m.map(function(d){return Object.values(d).reverse()}));var U=(A==="u"?E.predecessors:E.successors).bind(E),j=(0,k.verticalAlignment)(E,m,M,U),x=(0,k.horizontalCompaction)(E,m,j.root,j.align,O==="r");O==="r"&&Object.keys(x).forEach(function(d){return x[d]=-x[d]}),_[A+O]=x})});var I=(0,k.findSmallestWidthAlignment)(E,_);return I&&(0,k.alignCoordinates)(_,I),(0,k.balance)(_,E.graph().align)},D=function(E){var y,M=(0,X.asNonCompoundGraph)(E);P(M);var _=N(M);(y=Object.keys(_))===null||y===void 0||y.forEach(function(m){M.node(m).x=_[m]})};R.default=D},813614:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.feasibleTreeWithLayer=R.feasibleTree=void 0;var B=z(337323),X=z(269209),k=z(627652),P=function(_){var m=new k.Graph({directed:!1}),I=_.nodes()[0],A=_.nodeCount();m.setNode(I,{});for(var O,U;N(m,_)<A;)O=y(m,_),U=m.hasNode(O.v)?(0,B.slack)(_,O):-(0,B.slack)(_,O),M(m,_,U);return m};R.feasibleTree=P;var N=function(_,m){var I=function(A){m.nodeEdges(A).forEach(function(O){var U=O.v,j=A===U?O.w:U;!_.hasNode(j)&&!(0,B.slack)(m,O)&&(_.setNode(j,{}),_.setEdge(A,j,{}),I(j))})};return _.nodes().forEach(I),_.nodeCount()},D=function(_){var m=new k.Graph({directed:!1}),I=_.nodes()[0],A=_.nodes().filter(function(j){return!!_.node(j)}).length;m.setNode(I,{});for(var O,U;E(m,_)<A;)O=y(m,_),U=m.hasNode(O.v)?(0,B.slack)(_,O):-(0,B.slack)(_,O),M(m,_,U);return m};R.feasibleTreeWithLayer=D;var E=function(_,m){var I=function(A){var O;(O=m.nodeEdges(A))===null||O===void 0||O.forEach(function(U){var j=U.v,x=A===j?U.w:j;!_.hasNode(x)&&(m.node(x).layer!==void 0||!(0,B.slack)(m,U))&&(_.setNode(x,{}),_.setEdge(A,x,{}),I(x))})};return _.nodes().forEach(I),_.nodeCount()},y=function(_,m){return(0,X.minBy)(m.edges(),function(I){return _.hasNode(I.v)!==_.hasNode(I.w)?(0,B.slack)(m,I):1/0})},M=function(_,m,I){_.nodes().forEach(function(A){m.node(A).rank||(m.node(A).rank=0),m.node(A).rank+=I})};R.default={feasibleTree:P,feasibleTreeWithLayer:D}},576827:function(dr,R,z){"use strict";var B=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(R,"__esModule",{value:!0});var X=z(337323),k=z(813614),P=B(z(432253)),N=function(M){switch(M.graph().ranker){case"network-simplex":y(M);break;case"tight-tree":E(M);break;case"longest-path":D(M);break;default:E(M)}},D=X.longestPath,E=function(M){(0,X.longestPathWithLayer)(M),(0,k.feasibleTreeWithLayer)(M)},y=function(M){(0,P.default)(M)};R.default=N},432253:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.exchangeEdges=R.enterEdge=R.leaveEdge=R.initLowLimValues=R.calcCutValue=R.initCutValues=void 0;var B=z(813614),X=z(337323),k=z(269209),P=z(199905),N=P.algorithm.preorder,D=P.algorithm.postorder,E=function(it){var Y=(0,k.simplify)(it);(0,X.longestPath)(Y);var W=(0,B.feasibleTree)(Y);(0,R.initLowLimValues)(W),(0,R.initCutValues)(W,Y);for(var K,Q;K=(0,R.leaveEdge)(W);)Q=(0,R.enterEdge)(W,Y,K),(0,R.exchangeEdges)(W,Y,K,Q)},y=function(it,Y){var W=D(it,it.nodes());W=W==null?void 0:W.slice(0,(W==null?void 0:W.length)-1),W==null||W.forEach(function(K){M(it,Y,K)})};R.initCutValues=y;var M=function(it,Y,W){var K=it.node(W),Q=K.parent;it.edgeFromArgs(W,Q).cutvalue=(0,R.calcCutValue)(it,Y,W)},_=function(it,Y,W){var K,Q=it.node(W),rt=Q.parent,J=!0,ot=Y.edgeFromArgs(W,rt),vt=0;return ot||(J=!1,ot=Y.edgeFromArgs(rt,W)),vt=ot.weight,(K=Y.nodeEdges(W))===null||K===void 0||K.forEach(function(gt){var Pt=gt.v===W,It=Pt?gt.w:gt.v;if(It!==rt){var Jt=Pt===J,zt=Y.edge(gt).weight;if(vt+=Jt?zt:-zt,x(it,W,It)){var kt=it.edgeFromArgs(W,It).cutvalue;vt+=Jt?-kt:kt}}}),vt};R.calcCutValue=_;var m=function(it,Y){Y===void 0&&(Y=it.nodes()[0]),I(it,{},1,Y)};R.initLowLimValues=m;var I=function(it,Y,W,K,Q){var rt,J=W,ot=W,vt=it.node(K);return Y[K]=!0,(rt=it.neighbors(K))===null||rt===void 0||rt.forEach(function(gt){Y[gt]||(ot=I(it,Y,ot,gt,K))}),vt.low=J,vt.lim=ot++,Q?vt.parent=Q:delete vt.parent,ot},A=function(it){return it.edges().find(function(Y){return it.edge(Y).cutvalue<0})};R.leaveEdge=A;var O=function(it,Y,W){var K=W.v,Q=W.w;Y.hasEdge(K,Q)||(K=W.w,Q=W.v);var rt=it.node(K),J=it.node(Q),ot=rt,vt=!1;rt.lim>J.lim&&(ot=J,vt=!0);var gt=Y.edges().filter(function(Pt){return vt===d(it,it.node(Pt.v),ot)&&vt!==d(it,it.node(Pt.w),ot)});return(0,k.minBy)(gt,function(Pt){return(0,X.slack)(Y,Pt)})};R.enterEdge=O;var U=function(it,Y,W,K){var Q=W.v,rt=W.w;it.removeEdge(Q,rt),it.setEdge(K.v,K.w,{}),(0,R.initLowLimValues)(it),(0,R.initCutValues)(it,Y),j(it,Y)};R.exchangeEdges=U;var j=function(it,Y){var W=it.nodes().find(function(Q){var rt;return!(!((rt=Y.node(Q))===null||rt===void 0)&&rt.parent)}),K=N(it,W);K=K==null?void 0:K.slice(1),K==null||K.forEach(function(Q){var rt=it.node(Q).parent,J=Y.edgeFromArgs(Q,rt),ot=!1;J||(J=Y.edgeFromArgs(rt,Q),ot=!0),Y.node(Q).rank=Y.node(rt).rank+(ot?J.minlen:-J.minlen)})},x=function(it,Y,W){return it.hasEdge(Y,W)},d=function(it,Y,W){return W.low<=Y.lim&&Y.lim<=W.lim};R.default=E},337323:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.slack=R.longestPathWithLayer=R.longestPath=void 0;var z=function(k){var P,N={},D=function(E){var y,M=k.node(E);if(!M)return 0;if(N[E])return M.rank;N[E]=!0;var _;return(y=k.outEdges(E))===null||y===void 0||y.forEach(function(m){var I=D(m.w),A=k.edge(m).minlen,O=I-A;O&&(_===void 0||O<_)&&(_=O)}),_||(_=0),M.rank=_,_};(P=k.sources())===null||P===void 0||P.forEach(function(E){return D(E)})};R.longestPath=z;var B=function(k){var P,N={},D,E=function(_){var m,I=k.node(_);if(!I)return 0;if(N[_])return I.rank;N[_]=!0;var A;return(m=k.outEdges(_))===null||m===void 0||m.forEach(function(O){var U=E(O.w),j=k.edge(O).minlen,x=U-j;x&&(A===void 0||x<A)&&(A=x)}),A||(A=0),(D===void 0||A<D)&&(D=A),I.rank=A,A};(P=k.sources())===null||P===void 0||P.forEach(function(_){k.node(_)&&E(_)}),D===void 0&&(D=0);var y={},M=function(_,m){var I,A=k.node(_),O=isNaN(A.layer)?m:A.layer;(A.rank===void 0||A.rank<O)&&(A.rank=O),!y[_]&&(y[_]=!0,(I=k.outEdges(_))===null||I===void 0||I.map(function(U){M(U.w,O+k.edge(U).minlen)}))};k.nodes().forEach(function(_){var m=k.node(_);m&&(isNaN(m.layer)?m.rank-=D:M(_,m.layer))})};R.longestPathWithLayer=B;var X=function(k,P){return k.node(P.w).rank-k.node(P.v).rank-k.edge(P).minlen};R.slack=X,R.default={longestPath:z,longestPathWithLayer:B,slack:X}},269209:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.minBy=R.notime=R.time=R.partition=R.maxRank=R.addBorderNode=R.removeEmptyRanks=R.normalizeRanks=R.buildLayerMatrix=R.intersectRect=R.predecessorWeights=R.successorWeights=R.zipObject=R.asNonCompoundGraph=R.simplify=R.addDummyNode=void 0;var B=z(449784),X=z(627652),k=function(Y,W){return Number(Y)-Number(W)},P=function(Y,W,K,Q){var rt;do rt="".concat(Q).concat(Math.random());while(Y.hasNode(rt));return K.dummy=W,Y.setNode(rt,K),rt};R.addDummyNode=P;var N=function(Y){var W=new X.Graph().setGraph(Y.graph());return Y.nodes().forEach(function(K){W.setNode(K,Y.node(K))}),Y.edges().forEach(function(K){var Q=W.edgeFromArgs(K.v,K.w)||{weight:0,minlen:1},rt=Y.edge(K);W.setEdge(K.v,K.w,{weight:Q.weight+rt.weight,minlen:Math.max(Q.minlen,rt.minlen)})}),W};R.simplify=N;var D=function(Y){var W=new X.Graph({multigraph:Y.isMultigraph()}).setGraph(Y.graph());return Y.nodes().forEach(function(K){var Q;!((Q=Y.children(K))===null||Q===void 0)&&Q.length||W.setNode(K,Y.node(K))}),Y.edges().forEach(function(K){W.setEdgeObj(K,Y.edge(K))}),W};R.asNonCompoundGraph=D;var E=function(Y,W){return Y==null?void 0:Y.reduce(function(K,Q,rt){return K[Q]=W[rt],K},{})};R.zipObject=E;var y=function(Y){var W={};return Y.nodes().forEach(function(K){var Q,rt={};(Q=Y.outEdges(K))===null||Q===void 0||Q.forEach(function(J){var ot;rt[J.w]=(rt[J.w]||0)+(((ot=Y.edge(J))===null||ot===void 0?void 0:ot.weight)||0)}),W[K]=rt}),W};R.successorWeights=y;var M=function(Y){var W=Y.nodes(),K=W.map(function(Q){var rt,J={};return(rt=Y.inEdges(Q))===null||rt===void 0||rt.forEach(function(ot){J[ot.v]=(J[ot.v]||0)+Y.edge(ot).weight}),J});return(0,R.zipObject)(W,K)};R.predecessorWeights=M;var _=function(Y,W){var K=Number(Y.x),Q=Number(Y.y),rt=Number(W.x)-K,J=Number(W.y)-Q,ot=Number(Y.width)/2,vt=Number(Y.height)/2;if(!rt&&!J)return{x:0,y:0};var gt,Pt;return Math.abs(J)*ot>Math.abs(rt)*vt?(J<0&&(vt=-vt),gt=vt*rt/J,Pt=vt):(rt<0&&(ot=-ot),gt=ot,Pt=ot*J/rt),{x:K+gt,y:Q+Pt}};R.intersectRect=_;var m=function(Y){for(var W=[],K=(0,R.maxRank)(Y)+1,Q=0;Q<K;Q++)W.push([]);Y.nodes().forEach(function(rt){var J=Y.node(rt);if(J){var ot=J.rank;ot!==void 0&&W[ot]&&W[ot].push(rt)}});for(var Q=0;Q<K;Q++)W[Q]=W[Q].sort(function(J,ot){var vt,gt;return k((vt=Y.node(J))===null||vt===void 0?void 0:vt.order,(gt=Y.node(ot))===null||gt===void 0?void 0:gt.order)});return W};R.buildLayerMatrix=m;var I=function(Y){var W=Y.nodes().filter(function(Q){var rt;return((rt=Y.node(Q))===null||rt===void 0?void 0:rt.rank)!==void 0}).map(function(Q){return Y.node(Q).rank}),K=Math.min.apply(Math,W);Y.nodes().forEach(function(Q){var rt=Y.node(Q);rt.hasOwnProperty("rank")&&K!==1/0&&(rt.rank-=K)})};R.normalizeRanks=I;var A=function(Y){var W=Y.nodes(),K=W.filter(function(Pt){var It;return((It=Y.node(Pt))===null||It===void 0?void 0:It.rank)!==void 0}).map(function(Pt){return Y.node(Pt).rank}),Q=Math.min.apply(Math,K),rt=[];W.forEach(function(Pt){var It,Jt=(((It=Y.node(Pt))===null||It===void 0?void 0:It.rank)||0)-Q;rt[Jt]||(rt[Jt]=[]),rt[Jt].push(Pt)});for(var J=0,ot=Y.graph().nodeRankFactor||0,vt=0;vt<rt.length;vt++){var gt=rt[vt];gt===void 0?vt%ot!==0&&(J-=1):J&&(gt==null||gt.forEach(function(Pt){var It=Y.node(Pt);It&&(It.rank=It.rank||0,It.rank+=J)}))}};R.removeEmptyRanks=A;var O=function(Y,W,K,Q){var rt={width:0,height:0};return(0,B.isNumber)(K)&&(0,B.isNumber)(Q)&&(rt.rank=K,rt.order=Q),(0,R.addDummyNode)(Y,"border",rt,W)};R.addBorderNode=O;var U=function(Y){var W;return Y.nodes().forEach(function(K){var Q,rt=(Q=Y.node(K))===null||Q===void 0?void 0:Q.rank;rt!==void 0&&(W===void 0||rt>W)&&(W=rt)}),W||(W=0),W};R.maxRank=U;var j=function(Y,W){var K={lhs:[],rhs:[]};return Y==null||Y.forEach(function(Q){W(Q)?K.lhs.push(Q):K.rhs.push(Q)}),K};R.partition=j;var x=function(Y,W){var K=Date.now();try{return W()}finally{console.log("".concat(Y," time: ").concat(Date.now()-K,"ms"))}};R.time=x;var d=function(Y,W){return W()};R.notime=d;var it=function(Y,W){return Y.reduce(function(K,Q){var rt=W(K),J=W(Q);return rt>J?Q:K})};R.minBy=it},177057:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,_){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,_)};return function(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");y(M,_);function m(){this.constructor=M}M.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),X=this&&this.__assign||function(){return X=Object.assign||function(y){for(var M,_=1,m=arguments.length;_<m;_++){M=arguments[_];for(var I in M)Object.prototype.hasOwnProperty.call(M,I)&&(y[I]=M[I])}return y},X.apply(this,arguments)},k=this&&this.__spreadArray||function(y,M,_){if(_||arguments.length===2)for(var m=0,I=M.length,A;m<I;m++)(A||!(m in M))&&(A||(A=Array.prototype.slice.call(M,0,m)),A[m]=M[m]);return y.concat(A||Array.prototype.slice.call(M))};Object.defineProperty(R,"__esModule",{value:!0}),R.DagreCompoundLayout=void 0;var P=z(762329),N=z(631969),D=z(449784),E=function(y){B(M,y);function M(_){var m=y.call(this)||this;return m.rankdir="TB",m.nodesep=50,m.edgesep=5,m.ranksep=50,m.controlPoints=!0,m.anchorPoint=!0,m.nodes=[],m.edges=[],m.combos=[],m.onLayoutEnd=function(){},m.updateCfg(_),m}return M.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},M.prototype.init=function(_){var m=_.hiddenNodes||[],I=_.hiddenEdges||[],A=_.hiddenCombos||[];this.nodes=this.getDataByOrder((_.nodes||[]).concat(m)),this.edges=this.getDataByOrder((_.edges||[]).concat(I)),this.combos=(_.combos||[]).concat(A.map(function(O){return X(X({},O),{collapsed:!0})}))},M.prototype.execute=function(){var _=this,m=_.nodes,I=_.edges;if(m){var A=_.getLayoutConfig(),O=A.graphDef,U=A.graphOption,j=A.graphSettings,x=(0,N.buildGraph)(O,U,j),d=(0,N.flatGraph)(x,!0);return this.updatePosition(d),_.onLayoutEnd&&_.onLayoutEnd(),{nodes:m,edges:I}}},M.prototype.getNodePath=function(_){var m=this,I=m.nodes,A=m.combos,O=I.find(function(j){return j.id===_}),U=function(j,x){x===void 0&&(x=[]);var d=A.find(function(it){return it.id===j});return d?(x.unshift(j),d.parentId?U(d.parentId,x):x):x};return O&&O.comboId?U(O.comboId,[_]):[_]},M.prototype.getLayoutConfig=function(){var _,m,I,A=this,O=A.nodes,U=A.edges,j=A.combos,x=A.nodeSize,d=A.rankdir,it=A.align,Y=A.edgesep,W=A.nodesep,K=A.ranksep,Q=A.settings,rt=(j||[]).reduce(function(ve,be){var Ht=O.filter(function(de){return de.comboId===be.id}).map(function(de){return de.id}),Yt=(j||[]).filter(function(de){return de.parentId===be.id}).map(function(de){return de.id});return(Ht.length||Yt.length)&&(ve[be.id]=k(k([],Ht,!0),Yt,!0)),ve},{}),J;x?(0,D.isArray)(x)?J=function(){return x}:J=function(){return[x,x]}:J=function(ve){return ve&&ve.size?(0,D.isArray)(ve.size)?ve.size:(0,D.isObject)(ve.size)?[ve.size.width||40,ve.size.height||40]:[ve.size,ve.size]:[40,40]};var ot=function(ve){return ve&&ve.size?(0,D.isArray)(ve.size)?ve.size:[ve.size,ve.size]:[80,40]},vt=ot(j==null?void 0:j[0]),gt=vt[0],Pt=vt[1],It=(m=(_=A.graphSettings)===null||_===void 0?void 0:_.subScene)===null||m===void 0?void 0:m.meta,Jt=((I=j.find(function(ve){return!ve.collapsed}))===null||I===void 0?void 0:I.padding)||[20,20,20,20],zt=Jt[0],kt=Jt[1],$=Jt[2],lt=Jt[3],St={compound:rt,nodes:k([],(O||[]).map(function(ve){var be=J(ve),Ht=be[0],Yt=be[1];return X(X({},ve),{width:Ht,height:Yt})}),!0),edges:k([],(U||[]).map(function(ve){return X(X({},ve),{v:ve.source,w:ve.target})}),!0)},Ut={expanded:(j||[]).filter(function(ve){return!ve.collapsed}).map(function(ve){return ve.id})},Ft={graph:{meta:{align:it,rankDir:d,nodeSep:W,edgeSep:Y,rankSep:K}},subScene:{meta:{paddingTop:zt||(It==null?void 0:It.paddingTop)||20,paddingRight:kt||(It==null?void 0:It.paddingRight)||20,paddingBottom:$||(It==null?void 0:It.paddingBottom)||20,paddingLeft:lt||(It==null?void 0:It.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:gt,height:Pt}}},ee=(0,N.mergeConfig)(Q,X({},(0,N.mergeConfig)(Ft,N.LAYOUT_CONFIG)));return A.graphSettings=ee,{graphDef:St,graphOption:Ut,graphSettings:ee}},M.prototype.updatePosition=function(_){var m=_.nodes,I=_.edges;this.updateNodePosition(m,I),this.updateEdgePosition(m,I)},M.prototype.getBegin=function(_,m){var I=this,A=I.begin,O=[0,0];if(A){var U=1/0,j=1/0;_.forEach(function(x){U>x.x&&(U=x.x),j>x.y&&(j=x.y)}),m.forEach(function(x){x.points.forEach(function(d){U>d.x&&(U=d.x),j>d.y&&(j=d.y)})}),O[0]=A[0]-U,O[1]=A[1]-j}return O},M.prototype.updateNodePosition=function(_,m){var I=this,A=I.combos,O=I.nodes,U=I.edges,j=I.anchorPoint,x=I.graphSettings,d=this.getBegin(_,m);_.forEach(function(it){var Y,W=it.x,K=it.y,Q=it.id,rt=it.type,J=it.coreBox;if(rt===N.HierarchyNodeType.META&&Q!==N.ROOT_NAME){var ot=A.findIndex(function(Jt){return Jt.id===Q}),vt=(Y=x==null?void 0:x.subScene)===null||Y===void 0?void 0:Y.meta;A[ot].offsetX=W+d[0],A[ot].offsetY=K+d[1],A[ot].fixSize=[J.width,J.height],A[ot].fixCollapseSize=[J.width,J.height],it.expanded?A[ot].padding=[vt==null?void 0:vt.paddingTop,vt==null?void 0:vt.paddingRight,vt==null?void 0:vt.paddingBottom,vt==null?void 0:vt.paddingLeft]:A[ot].padding=[0,0,0,0]}else if(rt===N.HierarchyNodeType.OP){var ot=O.findIndex(function(zt){return zt.id===Q});if(O[ot].x=W+d[0],O[ot].y=K+d[1],j){var gt=[],Pt=m.filter(function(zt){return zt.v===Q}),It=m.filter(function(zt){return zt.w===Q});Pt.length>0&&Pt.forEach(function(zt){var kt=zt.points[0],$=(kt.x-W)/it.width+.5,lt=(kt.y-K)/it.height+.5;gt.push([$,lt]),zt.baseEdgeList.forEach(function(St){var Ut=U.find(function(Ft){return Ft.source===St.v&&Ft.target===St.w});Ut&&(Ut.sourceAnchor=gt.length-1)})}),It.length>0&&It.forEach(function(zt){var kt=zt.points[zt.points.length-1],$=(kt.x-W)/it.width+.5,lt=(kt.y-K)/it.height+.5;gt.push([$,lt]),zt.baseEdgeList.forEach(function(St){var Ut=U.find(function(Ft){return Ft.source===St.v&&Ft.target===St.w});Ut&&(Ut.targetAnchor=gt.length-1)})}),O[ot].anchorPoints=gt.length>0?gt:O[ot].anchorPoints||[]}}})},M.prototype.updateEdgePosition=function(_,m){var I=this,A=I.combos,O=I.edges,U=I.controlPoints,j=this.getBegin(_,m);U&&(A.forEach(function(x){x.inEdges=[],x.outEdges=[]}),O.forEach(function(x){var d,it,Y,W,K=_.find(function(Jt){return Jt.id===x.source}),Q=_.find(function(Jt){return Jt.id===x.target}),rt=[],J=[];if(K&&Q)J=(0,N.getEdges)(K==null?void 0:K.id,Q==null?void 0:Q.id,_);else if(!K||!Q){var ot=I.getNodePath(x.source),vt=I.getNodePath(x.target),gt=ot.reverse().slice(K?0:1).find(function(Jt){return _.find(function(zt){return zt.id===Jt})}),Pt=vt.reverse().slice(Q?0:1).find(function(Jt){return _.find(function(zt){return zt.id===Jt})});K=_.find(function(Jt){return Jt.id===gt}),Q=_.find(function(Jt){return Jt.id===Pt}),J=(0,N.getEdges)(K==null?void 0:K.id,Q==null?void 0:Q.id,_,{v:x.source,w:x.target})}if(rt=J.reduce(function(Jt,zt){return k(k([],Jt,!0),zt.points.map(function(kt){return X(X({},kt),{x:kt.x+j[0],y:kt.y+j[1]})}),!0)},[]),rt=rt.slice(1,-1),x.controlPoints=rt,(Q==null?void 0:Q.type)===N.NodeType.META){var It=A.findIndex(function(Jt){return Jt.id===(Q==null?void 0:Q.id)});if(!A[It]||!((d=A[It].inEdges)===null||d===void 0)&&d.some(function(Jt){return Jt.source===K.id&&Jt.target===Q.id}))return;(it=A[It].inEdges)===null||it===void 0||it.push({source:K.id,target:Q.id,controlPoints:rt})}if((K==null?void 0:K.type)===N.NodeType.META){var It=A.findIndex(function(zt){return zt.id===(K==null?void 0:K.id)});if(!A[It]||!((Y=A[It].outEdges)===null||Y===void 0)&&Y.some(function(zt){return zt.source===K.id&&zt.target===Q.id}))return;(W=A[It].outEdges)===null||W===void 0||W.push({source:K.id,target:Q.id,controlPoints:rt})}}))},M.prototype.getType=function(){return"dagreCompound"},M.prototype.getDataByOrder=function(_){return _.every(function(m){return m.layoutOrder!==void 0})||_.forEach(function(m,I){m.layoutOrder=I}),_.sort(function(m,I){return m.layoutOrder-I.layoutOrder})},M}(P.Base);R.DagreCompoundLayout=E},934015:function(dr,R,z){"use strict";var B=this&&this.__assign||function(){return B=Object.assign||function(m){for(var I,A=1,O=arguments.length;A<O;A++){I=arguments[A];for(var U in I)Object.prototype.hasOwnProperty.call(I,U)&&(m[U]=I[U])}return m},B.apply(this,arguments)},X=this&&this.__createBinding||(Object.create?function(m,I,A,O){O===void 0&&(O=A);var U=Object.getOwnPropertyDescriptor(I,A);(!U||("get"in U?!I.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return I[A]}}),Object.defineProperty(m,O,U)}:function(m,I,A,O){O===void 0&&(O=A),m[O]=I[A]}),k=this&&this.__setModuleDefault||(Object.create?function(m,I){Object.defineProperty(m,"default",{enumerable:!0,value:I})}:function(m,I){m.default=I}),P=this&&this.__importStar||function(m){if(m&&m.__esModule)return m;var I={};if(m!=null)for(var A in m)A!=="default"&&Object.prototype.hasOwnProperty.call(m,A)&&X(I,m,A);return k(I,m),I},N=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(R,"__esModule",{value:!0});var D=P(z(971497)),E=N(z(788221)),y=N(z(87064)),M=z(920171);function _(m,I){var A=m.nodes,O=m.edges,U=I.width,j=I.height;if(!(A!=null&&A.length))return Promise.resolve();var x=[];A.forEach(function(J){var ot=O.filter(function(gt){return gt.source===J.id||gt.target===J.id});if(ot.length>1){var vt=B({},J);delete vt.size,x.push(vt)}});var d=[];O.forEach(function(J){var ot=x.find(function(gt){return gt.id===J.source}),vt=x.find(function(gt){return gt.id===J.target});ot&&vt&&d.push(J)});var it=new M.DagreLayout({type:"dagre",ranksep:I.nodeMinGap,nodesep:I.nodeMinGap}),Y=it.layout({nodes:x,edges:d}).nodes;A.forEach(function(J){var ot=(Y||[]).find(function(vt){return vt.id===J.id});J.x=(ot==null?void 0:ot.x)||U/2,J.y=(ot==null?void 0:ot.y)||j/2});var W=JSON.parse(JSON.stringify(A)),K=JSON.parse(JSON.stringify(O)),Q=D.forceSimulation().nodes(W).force("link",D.forceLink(K).id(function(J){return J.id}).distance(function(J){var ot=d.find(function(vt){return vt.source===J.source&&vt.target===J.target});return ot?30:20})).force("charge",D.forceManyBody()).force("center",D.forceCenter(U/2,j/2)).force("x",D.forceX(U/2)).force("y",D.forceY(j/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),rt=new Promise(function(J){Q.on("end",function(){A.forEach(function(zt){var kt=W.find(function($){return $.id===zt.id});kt&&(zt.x=kt.x,zt.y=kt.y)});var ot=Math.min.apply(Math,A.map(function(zt){return zt.x})),vt=Math.max.apply(Math,A.map(function(zt){return zt.x})),gt=Math.min.apply(Math,A.map(function(zt){return zt.y})),Pt=Math.max.apply(Math,A.map(function(zt){return zt.y})),It=U/(vt-ot),Jt=j/(Pt-gt);A.forEach(function(zt){zt.x!==void 0&&It<1&&(zt.x=(zt.x-ot)*It),zt.y!==void 0&&Jt<1&&(zt.y=(zt.y-gt)*Jt)}),A.forEach(function(zt){zt.sizeTemp=zt.size,zt.size=[10,10]}),(0,y.default)(A,O),A.forEach(function(zt){zt.size=zt.sizeTemp||[],delete zt.sizeTemp}),(0,E.default)({nodes:A,edges:O},I),J()})});return rt}R.default=_},788221:function(dr,R,z){"use strict";var B=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(R,"__esModule",{value:!0});var X=B(z(28611));function k(P,N){if(!P.nodes||P.nodes.length===0)return P;var D=N.width,E=N.height,y=N.nodeMinGap,M=1e4,_=1e4;P.nodes.forEach(function(K){var Q=K.size[0]||50,rt=K.size[1]||50;M=Math.min(Q,M),_=Math.min(rt,_)});var m=new X.default;m.init(D,E,{CELL_H:_,CELL_W:M}),P.nodes.forEach(function(K){var Q=m.occupyNearest(K);Q&&(Q.node={id:K.id,size:K.size},K.x=Q.x,K.y=Q.y,K.dx=Q.dx,K.dy=Q.dy)});for(var I=0;I<P.nodes.length;I++){var A=P.nodes[I],O=m.findGridByNodeId(A.id);if(!O)throw new Error("can not find node cell");var U=O.column,j=O.row;if(A.size[0]+y>M){for(var x=Math.ceil((A.size[0]+y)/M)-1,d=x,it=0;it<x;it++){var Y=m.additionColumn.indexOf(U+it+1)>-1;if(Y&&!m.cells[U+it+1][j].node)d--;else break}m.insertColumn(U,d)}if(A.size[1]+y>_){for(var x=Math.ceil((A.size[1]+y)/_)-1,d=x,it=0;it<x;it++){var Y=m.additionRow.indexOf(j+it+1)>-1;if(Y&&!m.cells[U][j+it+1].node)d--;else break}m.insertRow(j,d)}}for(var I=0;I<m.columnNum;I++)for(var W=function(Q){var rt=m.cells[I][Q];if(rt.node){var J=P.nodes.find(function(ot){var vt;return ot.id===((vt=rt==null?void 0:rt.node)===null||vt===void 0?void 0:vt.id)});J&&(J.x=rt.x+J.size[0]/2,J.y=rt.y+J.size[1]/2)}},it=0;it<m.rowNum;it++)W(it)}R.default=k},28611:function(dr,R){"use strict";var z=this&&this.__assign||function(){return z=Object.assign||function(X){for(var k,P=1,N=arguments.length;P<N;P++){k=arguments[P];for(var D in k)Object.prototype.hasOwnProperty.call(k,D)&&(X[D]=k[D])}return X},z.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0});var B=function(){function X(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return X.prototype.init=function(k,P,N){this.cells=[],this.CELL_W=N.CELL_W||X.DEFAULT_CELL_W,this.CELL_H=N.CELL_H||X.DEFAULT_CELL_H,this.columnNum=Math.ceil(k/this.CELL_W),this.rowNum=Math.ceil(P/this.CELL_H),X.MIN_DIST=Math.pow(k,2)+Math.pow(P,2);for(var D=0;D<this.columnNum;D++){for(var E=[],y=0;y<this.rowNum;y++){var M={dx:D,dy:y,x:D*this.CELL_W,y:y*this.CELL_H,occupied:!1};E.push(M)}this.cells.push(E)}},X.prototype.findGridByNodeId=function(k){for(var P,N,D=0;D<this.columnNum;D++)for(var E=0;E<this.rowNum;E++)if(this.cells[D][E].node&&((N=(P=this.cells[D][E])===null||P===void 0?void 0:P.node)===null||N===void 0?void 0:N.id)===k)return{column:D,row:E};return null},X.prototype.sqdist=function(k,P){return Math.pow(k.x-P.x,2)+Math.pow(k.y-P.y,2)},X.prototype.occupyNearest=function(k){for(var P=X.MIN_DIST,N,D=null,E=0;E<this.columnNum;E++)for(var y=0;y<this.rowNum;y++)!this.cells[E][y].occupied&&(N=this.sqdist(k,this.cells[E][y]))<P&&(P=N,D=this.cells[E][y]);return D&&(D.occupied=!0),D},X.prototype.insertColumn=function(k,P){if(!(P<=0)){for(var N=0;N<P;N++){this.cells[N+this.columnNum]=[];for(var D=0;D<this.rowNum;D++)this.cells[N+this.columnNum][D]={dx:N,dy:D,x:N*this.CELL_W,y:D*this.CELL_H,occupied:!1,node:null}}for(var N=this.columnNum-1;N>k;N--)for(var D=0;D<this.rowNum;D++)this.cells[N+P][D]=z(z({},this.cells[N][D]),{x:(N+P)*this.CELL_W,y:D*this.CELL_H}),this.cells[N][D]={x:N*this.CELL_W,y:D*this.CELL_H,occupied:!0,node:null};for(var D=0;D<this.additionColumn.length;D++)this.additionColumn[D]>=k&&(this.additionColumn[D]+=P);for(var N=0;N<P;N++)this.additionColumn.push(k+N+1);this.columnNum+=P}},X.prototype.insertRow=function(k,P){if(!(P<=0)){for(var N=0;N<P;N++)for(var D=0;D<this.columnNum;D++)this.cells[D][N+this.rowNum]={dx:D,dy:N,x:D*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var D=0;D<this.columnNum;D++)for(var N=this.rowNum-1;N>k;N--)this.cells[D][N+P]=z(z({},this.cells[D][N]),{dx:D,dy:N+P,x:D*this.CELL_W,y:(N+P)*this.CELL_H}),this.cells[D][N]={dx:D,dy:N,x:D*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var N=0;N<this.additionRow.length;N++)this.additionRow[N]>=k&&(this.additionRow[N]+=P);for(var D=0;D<P;D++)this.additionRow.push(k+D+1);this.rowNum+=P}},X.prototype.getNodes=function(){for(var k=[],P=0;P<this.columnNum;P++)for(var N=0;N<this.rowNum;N++)this.cells[P][N].node&&k.push(this.cells[P][N]);return k},X.MIN_DIST=50,X.DEFAULT_CELL_W=80,X.DEFAULT_CELL_H=80,X}();R.default=B},290441:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var D=function(E,y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,_){M.__proto__=_}||function(M,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(M[m]=_[m])},D(E,y)};return function(E,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");D(E,y);function M(){this.constructor=E}E.prototype=y===null?Object.create(y):(M.prototype=y.prototype,new M)}}(),X=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(R,"__esModule",{value:!0}),R.ERLayout=void 0;var k=z(762329),P=X(z(934015)),N=function(D){B(E,D);function E(y){var M=D.call(this)||this;return M.width=300,M.height=300,M.nodeMinGap=50,M.onLayoutEnd=function(){},y&&M.updateCfg(y),M}return E.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},E.prototype.execute=function(){var y=this,M=y.nodes,_=y.edges;return M==null||M.forEach(function(m){m.size||(m.size=[50,50])}),(0,P.default)({nodes:M,edges:_},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){y.onLayoutEnd&&y.onLayoutEnd()})},E.prototype.getType=function(){return"er"},E}(k.Base);R.ERLayout=N},87064:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=1200,B=800,X=1e7,k=10,P=3.141592653589793,N=1.5707963267948966,D=P*.375,E=P*.625,y=new Map,M=10,_=10,m=.8,I=.1,A=.5;function O(W,K,Q){var rt=W.x-W.size[0]/2,J=W.y-W.size[1]/2,ot=W.x+W.size[0]/2,vt=W.y+W.size[1]/2,gt=K.x-K.size[0]/2,Pt=K.y-K.size[1]/2,It=K.x+K.size[0]/2,Jt=K.y+K.size[1]/2,zt=W.x,kt=W.y,$=K.x,lt=K.y,St=$-zt,Ut=Math.atan2(St,lt-kt),Ft=0,ee=0,ve=0,be=0;Ut>N?(ee=J-Jt,Ft=gt-ot,ve=parseFloat(ee?(ee/Math.cos(Ut)).toFixed(2):Ft.toFixed(2)),be=parseFloat(Ft?(Ft/Math.sin(Ut)).toFixed(2):ee.toFixed(2))):0<Ut&&Ut<=N?(ee=Pt-vt,Ft=gt-ot,ee>Ft?ve=be=parseFloat(ee?(ee/Math.cos(Ut)).toFixed(2):Ft.toFixed(2)):ve=be=parseFloat(Ft?(Ft/Math.sin(Ut)).toFixed(2):ee.toFixed(2))):Ut<-N?(ee=J-Jt,Ft=-(It-rt),ee>Ft?ve=be=parseFloat(ee?(ee/Math.cos(Ut)).toFixed(2):Ft.toFixed(2)):ve=be=parseFloat(Ft?(Ft/Math.sin(Ut)).toFixed(2):ee.toFixed(2))):(ee=Pt-vt,Math.abs(St)>(ot-rt)/2?Ft=rt-It:Ft=St,ee>Ft?ve=be=parseFloat(ee?(ee/Math.cos(Ut)).toFixed(2):Ft.toFixed(2)):ve=be=parseFloat(Ft&&Ut!==0?(Ft/Math.sin(Ut)).toFixed(2):ee.toFixed(2)));var Ht=parseFloat(Ut.toFixed(2)),Yt=Q;return Q&&(Yt=D<Ht&&Ht<E),{distance:Math.abs(ve<be?ve:be),isHoriz:Yt}}function U(W,K){var Q=y.get(W.id)||[],rt=Q.find(function(We){return We.source===K.id||We.target===K.id}),J=W.size[0]*W.size[1],ot=K.size[0]*K.size[1],vt=J>ot?K:W,gt=J>ot?W:K,Pt=vt.x-vt.size[0]/2,It=vt.y-vt.size[1]/2,Jt=vt.x+vt.size[0]/2,zt=vt.y+vt.size[1]/2,kt=gt.x-gt.size[0]/2,$=gt.y-gt.size[1]/2,lt=gt.x+gt.size[0]/2,St=gt.y+gt.size[1]/2,Ut=vt.x,Ft=vt.y,ee=gt.x,ve=gt.y,be=Jt>=kt&&lt>=Pt&&zt>=$&&St>=It,Ht=0,Yt=0;if(be){Yt=Math.sqrt(Math.pow(ee-Ut,2)+Math.pow(ve-Ft,2));var de=Pt>kt?Pt:kt,Ee=It>$?It:$,ge=Jt<lt?Jt:lt,Ot=zt<St?zt:St,Xt=ge-de,ce=Ot-Ee,Lt=Xt*ce;Yt===0&&(Yt=1e-7),Ht=k*1/Yt*100+Lt,Ht*=X}else{var Kt=!1,pe=O(vt,gt,Kt);Yt=pe.distance,Kt=pe.isHoriz,Yt<=k?Yt!==0?rt?Ht+=k+X*1/Yt:Ht+=k+X*k/Yt:Ht+=X:(Ht+=Yt,rt&&(Ht+=Yt*Yt))}return Ht}function j(W){for(var K=0,Q=0;Q<W.length;Q++){var rt=W[Q];(rt.x<0||rt.y<0||rt.x>z||rt.y>B)&&(K+=1e12);for(var J=Q+1;J<W.length;J++)K+=U(rt,W[J])}return K}function x(W,K,Q,rt){var J=new Map;Q.forEach(function(Ut,Ft){J.set(Ut.id,Ut)});var ot=rt.filter(function(Ut){return Ut.source===W.id||Ut.target===W.id})||[],vt=[];ot.forEach(function(Ut){var Ft=Ut.source===W.id?Ut.target:Ut.source,ee=J.get(Ft);ee&&vt.push(ee)});for(var gt=!0,Pt=0;Pt<vt.length;Pt++){var It=vt[Pt],Jt=Math.atan((W.y-It.y)/(It.x-W.y))*180,zt=Math.atan((K.y-It.y)/(It.x-K.y))*180,kt=Jt<30||Jt>150,$=zt<30||zt>150,lt=Jt>70&&Jt<110,St=zt>70&&zt<110;if(kt&&!$||Jt*zt<0){gt=!1;break}else if(lt&&!St||Jt*zt<0){gt=!1;break}else if((It.x-W.x)*(It.x-K.x)<0){gt=!1;break}else if((It.y-W.y)*(It.y-K.y)<0){gt=!1;break}}return gt}function d(W,K){for(var Q=!1,rt=1,J=M*rt,ot=_*rt,vt=[J,-J,0,0],gt=[0,0,ot,-ot],Pt=0;Pt<W.length;++Pt)for(var It=W[Pt],Jt=it(It,W),zt=0;zt<vt.length;zt++){var kt=x(It,{x:It.x+vt[zt],y:It.y+gt[zt]},W,K);if(kt){It.x+=vt[zt],It.y+=gt[zt];var $=it(It,W),lt=Math.random();$<Jt||lt<m&&lt>I?(Jt=$,Q=!0):(It.x-=vt[zt],It.y-=gt[zt])}}return m>I&&(m*=A),Q?j(W):0}function it(W,K){var Q=0;(W.x<0||W.y<0||W.x+W.size[0]+20>z||W.y+W.size[1]+20>B)&&(Q+=1e12);for(var rt=0;rt<K.length;++rt)W.id!==K[rt].id&&(Q+=U(W,K[rt]));return Q}function Y(W,K){if(W.length===0)return{nodes:W,edges:K};W.forEach(function(It){var Jt=K.filter(function(zt){return zt.source===It.id||zt.target===It.id});y.set(It,Jt)}),W.sort(function(It,Jt){var zt,kt;return((zt=y.get(It.id))===null||zt===void 0?void 0:zt.length)-((kt=y.get(Jt.id))===null||kt===void 0?void 0:kt.length)});for(var Q=j(W),rt=20,J=1,ot=0,vt=50,gt=0;rt>0&&(gt++,!(gt>=vt));){var Pt=d(W,K);Pt!==0&&(ot=Pt),J=ot-Q,Q=ot,J===0?--rt:rt=20}return W.forEach(function(It){It.x=It.x-It.size[0]/2,It.y=It.y-It.size[1]/2}),{nodes:W,edges:K}}R.default=Y},589806:function(dr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(E,y,M,_){_===void 0&&(_=M);var m=Object.getOwnPropertyDescriptor(y,M);(!m||("get"in m?!y.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return y[M]}}),Object.defineProperty(E,_,m)}:function(E,y,M,_){_===void 0&&(_=M),E[_]=y[M]}),X=this&&this.__setModuleDefault||(Object.create?function(E,y){Object.defineProperty(E,"default",{enumerable:!0,value:y})}:function(E,y){E.default=y}),k=this&&this.__importStar||function(E){if(E&&E.__esModule)return E;var y={};if(E!=null)for(var M in E)M!=="default"&&Object.prototype.hasOwnProperty.call(E,M)&&B(y,E,M);return X(y,E),y};Object.defineProperty(R,"__esModule",{value:!0});var P=k(z(971497)),N=z(449784);function D(){function E(Ot){return function(){return Ot}}var y=function(Ot){return Ot.cluster},M=E(1),_=E(-1),m=E(100),I=E(.1),A=[0,0],O=[],U={},j=[],x=100,d=100,it={none:{x:0,y:0}},Y=[],W,K="force",Q=!0,rt=.1;function J(Ot){if(!Q)return J;W.tick(),Jt();for(var Xt=0,ce=O.length,Lt=void 0,Kt=Ot*rt;Xt<ce;++Xt)Lt=O[Xt],Lt.vx+=(it[y(Lt)].x-Lt.x)*Kt,Lt.vy+=(it[y(Lt)].y-Lt.y)*Kt}function ot(){O&&vt()}function vt(){if(!(!O||!O.length)){if(y(O[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Ot=gt();W=P.forceSimulation(Ot.nodes).force("x",P.forceX(x).strength(.1)).force("y",P.forceY(d).strength(.1)).force("collide",P.forceCollide(function(Xt){return Xt.r}).iterations(4)).force("charge",P.forceManyBody().strength(_)).force("links",P.forceLink(Ot.nodes.length?Ot.links:[]).distance(m).strength(I)),Y=W.nodes(),Jt()}}function gt(){var Ot=[],Xt=[],ce={},Lt=[],Kt={},pe=[];return Kt=Pt(O),pe=It(j),Lt=Object.keys(Kt),Lt.forEach(function(We,Je){var Mr=Kt[We];Ot.push({id:We,size:Mr.count,r:Math.sqrt(Mr.sumforceNodeSize/Math.PI)}),ce[We]=Je}),pe.forEach(function(We){var Je=(0,N.getEdgeTerminal)(We,"source"),Mr=(0,N.getEdgeTerminal)(We,"target"),Vt=ce[Je],on=ce[Mr];Vt!==void 0&&on!==void 0&&Xt.push({source:Vt,target:on,count:We.count})}),{nodes:Ot,links:Xt}}function Pt(Ot){var Xt={};return Ot.forEach(function(ce){var Lt=y(ce);Xt[Lt]||(Xt[Lt]={count:0,sumforceNodeSize:0})}),Ot.forEach(function(ce){var Lt=y(ce),Kt=M(ce),pe=Xt[Lt];pe.count=pe.count+1,pe.sumforceNodeSize=pe.sumforceNodeSize+Math.PI*(Kt*Kt)*1.3,Xt[Lt]=pe}),Xt}function It(Ot){var Xt={},ce=[];Ot.forEach(function(Kt){var pe=zt(Kt),We=0;Xt[pe]!==void 0&&(We=Xt[pe]),We+=1,Xt[pe]=We});var Lt=Object.entries(Xt);return Lt.forEach(function(Kt){var pe=Kt[0],We=Kt[1],Je=pe.split("~")[0],Mr=pe.split("~")[1];Je!==void 0&&Mr!==void 0&&ce.push({source:Je,target:Mr,count:We})}),ce}function Jt(){return it={none:{x:0,y:0}},Y.forEach(function(Ot){it[Ot.id]={x:Ot.x-A[0],y:Ot.y-A[1]}}),it}function zt(Ot){var Xt=(0,N.getEdgeTerminal)(Ot,"source"),ce=(0,N.getEdgeTerminal)(Ot,"target"),Lt=y(U[Xt]),Kt=y(U[ce]);return Lt<=Kt?"".concat(Lt,"~").concat(Kt):"".concat(Kt,"~").concat(Lt)}function kt(Ot){U={},Ot.forEach(function(Xt){U[Xt.id]=Xt})}function $(Ot){return arguments.length?(K=Ot,ot(),J):K}function lt(Ot){return arguments.length?typeof Ot=="string"?(y=function(Xt){return Xt[Ot]},J):(y=Ot,J):y}function St(Ot){return arguments.length?(Q=Ot,J):Q}function Ut(Ot){return arguments.length?(rt=Ot,J):rt}function Ft(Ot){return arguments.length?(x=Ot,J):x}function ee(Ot){return arguments.length?(d=Ot,J):d}function ve(Ot){return arguments.length?(kt(Ot||[]),O=Ot||[],J):O}function be(Ot){return arguments.length?(j=Ot||[],ot(),J):j}function Ht(Ot){return arguments.length?(typeof Ot=="function"?M=Ot:M=E(+Ot),ot(),J):M}function Yt(Ot){return arguments.length?(typeof Ot=="function"?_=Ot:_=E(+Ot),ot(),J):_}function de(Ot){return arguments.length?(typeof Ot=="function"?m=Ot:m=E(+Ot),ot(),J):m}function Ee(Ot){return arguments.length?(typeof Ot=="function"?I=Ot:I=E(+Ot),ot(),J):I}function ge(Ot){return arguments.length?(A=Ot,J):A}return J.initialize=function(Ot){O=Ot,ot()},J.template=$,J.groupBy=lt,J.enableGrouping=St,J.strength=Ut,J.centerX=Ft,J.centerY=ee,J.nodes=ve,J.links=be,J.forceNodeSize=Ht,J.nodeSize=J.forceNodeSize,J.forceCharge=Yt,J.forceLinkDistance=de,J.forceLinkStrength=Ee,J.offset=ge,J.getFocis=Jt,J}R.default=D},508810:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var O=function(U,j){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,d){x.__proto__=d}||function(x,d){for(var it in d)Object.prototype.hasOwnProperty.call(d,it)&&(x[it]=d[it])},O(U,j)};return function(U,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");O(U,j);function x(){this.constructor=U}U.prototype=j===null?Object.create(j):(x.prototype=j.prototype,new x)}}(),X=this&&this.__createBinding||(Object.create?function(O,U,j,x){x===void 0&&(x=j);var d=Object.getOwnPropertyDescriptor(U,j);(!d||("get"in d?!U.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return U[j]}}),Object.defineProperty(O,x,d)}:function(O,U,j,x){x===void 0&&(x=j),O[x]=U[j]}),k=this&&this.__setModuleDefault||(Object.create?function(O,U){Object.defineProperty(O,"default",{enumerable:!0,value:U})}:function(O,U){O.default=U}),P=this&&this.__importStar||function(O){if(O&&O.__esModule)return O;var U={};if(O!=null)for(var j in O)j!=="default"&&Object.prototype.hasOwnProperty.call(O,j)&&X(U,O,j);return k(U,O),U},N=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(R,"__esModule",{value:!0}),R.ForceLayout=void 0;var D=P(z(971497)),E=N(z(589806)),y=z(449784),M=z(762329),_=z(416470),m=function(O){B(U,O);function U(j){var x=O.call(this)||this;return x.center=[0,0],x.nodeStrength=null,x.edgeStrength=null,x.preventOverlap=!1,x.clusterNodeStrength=null,x.clusterEdgeStrength=null,x.clusterEdgeDistance=null,x.clusterNodeSize=null,x.clusterFociStrength=null,x.linkDistance=50,x.alphaDecay=.028,x.alphaMin=.001,x.alpha=.3,x.collideStrength=1,x.workerEnabled=!1,x.tick=function(){},x.onLayoutEnd=function(){},x.ticking=void 0,j&&x.updateCfg(j),x}return U.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},U.prototype.init=function(j){var x=this;x.nodes=j.nodes||[];var d=j.edges||[];x.edges=d.map(function(it){var Y={},W=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(it).forEach(function(K){W.indexOf(K)>-1||(Y[K]=it[K])}),Y}),x.ticking=!1},U.prototype.execute=function(j){var x=this,d=x.nodes,it=x.edges;if(!x.ticking){var Y=x.forceSimulation,W=x.alphaMin,K=x.alphaDecay,Q=x.alpha;if(Y){if(j){if(x.clustering&&x.clusterForce&&(x.clusterForce.nodes(d),x.clusterForce.links(it)),Y.nodes(d),it&&x.edgeForce)x.edgeForce.links(it);else if(it&&!x.edgeForce){var ot=D.forceLink().id(function(It){return It.id}).links(it);x.edgeStrength&&ot.strength(x.edgeStrength),x.linkDistance&&ot.distance(x.linkDistance),x.edgeForce=ot,Y.force("link",ot)}}x.preventOverlap&&x.overlapProcess(Y),Y.alpha(Q).restart(),this.ticking=!0}else try{var rt=D.forceManyBody();if(x.nodeStrength&&rt.strength(x.nodeStrength),Y=D.forceSimulation().nodes(d),x.clustering){var J=(0,E.default)();J.centerX(x.center[0]).centerY(x.center[1]).template("force").strength(x.clusterFociStrength),it&&J.links(it),d&&J.nodes(d),J.forceLinkDistance(x.clusterEdgeDistance).forceLinkStrength(x.clusterEdgeStrength).forceCharge(x.clusterNodeStrength).forceNodeSize(x.clusterNodeSize),x.clusterForce=J,Y.force("group",J)}if(Y.force("center",D.forceCenter(x.center[0],x.center[1])).force("charge",rt).alpha(Q).alphaDecay(K).alphaMin(W),x.preventOverlap&&x.overlapProcess(Y),it){var ot=D.forceLink().id(function(Pt){return Pt.id}).links(it);x.edgeStrength&&ot.strength(x.edgeStrength),x.linkDistance&&ot.distance(x.linkDistance),x.edgeForce=ot,Y.force("link",ot)}if(x.workerEnabled&&!A()&&(x.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!x.workerEnabled)Y.on("tick",function(){x.tick()}).on("end",function(){x.ticking=!1,x.onLayoutEnd&&x.onLayoutEnd()}),x.ticking=!0;else{Y.stop();for(var vt=I(Y),gt=1;gt<=vt;gt++)Y.tick(),postMessage({nodes:d,currentTick:gt,totalTicks:vt,type:_.LAYOUT_MESSAGE.TICK},void 0);x.ticking=!1}x.forceSimulation=Y,x.ticking=!0}catch(Pt){x.ticking=!1,console.warn(Pt)}}},U.prototype.overlapProcess=function(j){var x=this,d=x.nodeSize,it=x.nodeSpacing,Y,W,K=x.collideStrength;if((0,y.isNumber)(it)?W=function(){return it}:(0,y.isFunction)(it)?W=it:W=function(){return 0},!d)Y=function(ot){if(ot.size){if((0,y.isArray)(ot.size)){var vt=ot.size[0]>ot.size[1]?ot.size[0]:ot.size[1];return vt/2+W(ot)}if((0,y.isObject)(ot.size)){var vt=ot.size.width>ot.size.height?ot.size.width:ot.size.height;return vt/2+W(ot)}return ot.size/2+W(ot)}return 10+W(ot)};else if((0,y.isFunction)(d))Y=function(ot){var vt=d(ot);return vt+W(ot)};else if((0,y.isArray)(d)){var Q=d[0]>d[1]?d[0]:d[1],rt=Q/2;Y=function(ot){return rt+W(ot)}}else if((0,y.isNumber)(d)){var J=d/2;Y=function(ot){return J+W(ot)}}else Y=function(){return 10};j.force("collisionForce",D.forceCollide(Y).strength(K))},U.prototype.updateCfg=function(j){var x=this;x.ticking&&(x.forceSimulation.stop(),x.ticking=!1),x.forceSimulation=null,Object.assign(x,j)},U.prototype.destroy=function(){var j=this;j.ticking&&(j.forceSimulation.stop(),j.ticking=!1),j.nodes=null,j.edges=null,j.destroyed=!0},U}(M.Base);R.ForceLayout=m;function I(O){var U=O.alphaMin(),j=O.alphaTarget(),x=O.alpha(),d=Math.log((U-j)/(x-j))/Math.log(1-O.alphaDecay()),it=Math.ceil(d);return it}function A(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},885717:function(dr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(k,P,N,D){D===void 0&&(D=N);var E=Object.getOwnPropertyDescriptor(P,N);(!E||("get"in E?!P.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return P[N]}}),Object.defineProperty(k,D,E)}:function(k,P,N,D){D===void 0&&(D=N),k[D]=P[N]}),X=this&&this.__exportStar||function(k,P){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(P,N)&&B(P,k,N)};Object.defineProperty(R,"__esModule",{value:!0}),X(z(508810),R)},191019:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.forceNBody=void 0;var B=z(971829),X=.81,k=.1;function P(y,M,_,m,I){var A=_/m,O=y.map(function(j,x){var d=M[j.id],it=d.data,Y=d.x,W=d.y,K=d.size,Q=it.layout.force.nodeStrength;return{x:Y,y:W,size:K,index:x,vx:0,vy:0,weight:A*Q}}),U=(0,B.quadtree)(O,function(j){return j.x},function(j){return j.y}).visitAfter(N);return O.forEach(function(j){E(j,U)}),O.map(function(j,x){var d=M[y[x].id],it=d.data.layout.force.mass,Y=it===void 0?1:it;I[2*x]=j.vx/Y,I[2*x+1]=j.vy/Y}),I}R.forceNBody=P;function N(y){var M=0,_=0,m=0;if(y.length){for(var I=0;I<4;I++){var A=y[I];A&&A.weight&&(M+=A.weight,_+=A.x*A.weight,m+=A.y*A.weight)}y.x=_/M,y.y=m/M,y.weight=M}else{var A=y;y.x=A.data.x,y.y=A.data.y,y.weight=A.data.weight}}var D=function(y,M,_,m,I,A){var O=A.x-y.x||k,U=A.y-y.y||k,j=m-M,x=O*O+U*U,d=Math.sqrt(x)*x;if(j*j*X<x){var it=y.weight/d;return A.vx+=O*it,A.vy+=U*it,!0}if(y.length)return!1;if(y.data!==A){var it=y.data.weight/d;A.vx+=O*it,A.vy+=U*it}};function E(y,M){M.visit(function(_,m,I,A,O){return D(_,m,I,A,O,y)})}},306740:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,_){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,_)};return function(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");y(M,_);function m(){this.constructor=M}M.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),X=this&&this.__assign||function(){return X=Object.assign||function(y){for(var M,_=1,m=arguments.length;_<m;_++){M=arguments[_];for(var I in M)Object.prototype.hasOwnProperty.call(M,I)&&(y[I]=M[I])}return y},X.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.Force2Layout=void 0;var k=z(762329),P=z(449784),N=z(191019),D=function(y,M){var _;return y?(0,P.isNumber)(y)?_=function(m){return y}:_=y:_=function(m){return M||1},_},E=function(y){B(M,y);function M(_){var m=y.call(this)||this;m.maxIteration=1e3,m.workerEnabled=!1,m.edgeStrength=200,m.nodeStrength=1e3,m.coulombDisScale=.005,m.damping=.9,m.maxSpeed=500,m.minMovement=.4,m.interval=.02,m.factor=1,m.linkDistance=200,m.gravity=0,m.clusterNodeStrength=20,m.preventOverlap=!0,m.distanceThresholdMode="mean",m.tick=function(){},m.nodes=[],m.edges=[],m.width=300,m.height=300,m.nodeMap={},m.nodeIdxMap={},m.judgingDistance=0,m.centripetalOptions={leaf:2,single:2,others:1,center:function(A){return{x:m.width/2,y:m.height/2}}};var I=_.getMass;return m.propsGetMass=I,m.updateCfg(_),m}return M.prototype.getCentripetalOptions=function(){var _=this,m=_.leafCluster,I=_.clustering,A=_.nodeClusterBy,O=_.nodes,U=_.nodeMap,j=_.clusterNodeStrength,x=function(vt){return typeof j=="function"?j(vt):j},d={},it;if(m){it=this.getSameTypeLeafMap()||{};var Y=Array.from(new Set(O==null?void 0:O.map(function(vt){return vt[A]})))||[];d={single:100,leaf:function(vt,gt,Pt){var It=it[vt.id]||{},Jt=It.relativeLeafNodes,zt=It.sameTypeLeafNodes;return(zt==null?void 0:zt.length)===(Jt==null?void 0:Jt.length)||(Y==null?void 0:Y.length)===1?1:x(vt)},others:1,center:function(vt,gt,Pt){var It,Jt=(((It=vt.data)===null||It===void 0?void 0:It.layout)||{}).degree;if(!Jt)return{x:100,y:100};var zt;if(Jt===1){var kt=(it[vt.id]||{}).sameTypeLeafNodes,$=kt===void 0?[]:kt;$.length===1?zt=void 0:$.length>1&&(zt=(0,P.getAvgNodePosition)($))}else zt=void 0;return{x:zt==null?void 0:zt.x,y:zt==null?void 0:zt.y}}}}if(I){it||(it=this.getSameTypeLeafMap());var W=Array.from(new Set(O.map(function(vt,gt){return vt[A]}))).filter(function(vt){return vt!==void 0}),K={};W.forEach(function(vt){var gt=O.filter(function(Pt){return Pt[A]===vt}).map(function(Pt){return U[Pt.id]});K[vt]=(0,P.getAvgNodePosition)(gt)}),d={single:function(vt){return x(vt)},leaf:function(vt){return x(vt)},others:function(vt){return x(vt)},center:function(vt,gt,Pt){var It=K[vt[A]];return{x:It==null?void 0:It.x,y:It==null?void 0:It.y}}}}this.centripetalOptions=X(X({},this.centripetalOptions),d);var Q=this.centripetalOptions,rt=Q.leaf,J=Q.single,ot=Q.others;rt&&typeof rt!="function"&&(this.centripetalOptions.leaf=function(){return rt}),J&&typeof J!="function"&&(this.centripetalOptions.single=function(){return J}),ot&&typeof ot!="function"&&(this.centripetalOptions.others=function(){return ot})},M.prototype.updateCfg=function(_){_&&Object.assign(this,_)},M.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},M.prototype.execute=function(){var _=this;_.stop();var m=_.nodes,I=_.edges,A=_.defSpringLen;if(_.judgingDistance=0,!m||m.length===0){_.onLayoutEnd([]);return}!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]);var O=_.center;if(m.length===1){m[0].x=O[0],m[0].y=O[1],_.onLayoutEnd([X({},m[0])]);return}_.degreesMap=(0,P.getDegreeMap)(m,I),_.propsGetMass?_.getMass=_.propsGetMass:_.getMass=function(W){var K=1;(0,P.isNumber)(W.mass)&&(K=W.mass);var Q=_.degreesMap[W.id].all;return!Q||Q<5?K:Q*5*K};var U=_.nodeSize,j;if(_.preventOverlap){var x=_.nodeSpacing,d;(0,P.isNumber)(x)?d=function(){return x}:(0,P.isFunction)(x)?d=x:d=function(){return 0},U?(0,P.isArray)(U)?j=function(W){return Math.max(U[0],U[1])+d(W)}:j=function(W){return U+d(W)}:j=function(W){return W.size?(0,P.isArray)(W.size)?Math.max(W.size[0],W.size[1])+d(W):(0,P.isObject)(W.size)?Math.max(W.size.width,W.size.height)+d(W):W.size+d(W):10+d(W)}}_.nodeSize=j,_.linkDistance=D(_.linkDistance,1),_.nodeStrength=D(_.nodeStrength,1),_.edgeStrength=D(_.edgeStrength,1);var it={},Y={};m.forEach(function(W,K){(0,P.isNumber)(W.x)||(W.x=Math.random()*_.width),(0,P.isNumber)(W.y)||(W.y=Math.random()*_.height);var Q=_.degreesMap[W.id];it[W.id]=X(X({},W),{data:X(X({},W.data),{size:_.nodeSize(W)||30,layout:{inDegree:Q.in,outDegree:Q.out,degree:Q.all,tDegree:Q.in,sDegree:Q.out,force:{mass:_.getMass(W),nodeStrength:_.nodeStrength(W,I)}}})}),Y[W.id]=K}),_.nodeMap=it,_.nodeIdxMap=Y,_.edgeInfos=[],I==null||I.forEach(function(W){var K=it[W.source],Q=it[W.target];!K||!Q?elf.edgeInfos.push({}):_.edgeInfos.push({edgeStrength:_.edgeStrength(W),linkDistance:A?A(X(X({},W),{source:K,target:Q}),K,Q):_.linkDistance(W,K,Q)||1+(U(K)+U(K)||0)/2})}),this.getCentripetalOptions(),_.onLayoutEnd=_.onLayoutEnd||function(){},_.run()},M.prototype.run=function(){var _=this,m=_.maxIteration,I=_.nodes,A=_.edges,O=_.workerEnabled,U=_.minMovement,j=_.animate,x=_.nodeMap,d=_.height;if(_.currentMinY=0,_.currentMaxY=d,!!I){var it=[];if(I.forEach(function(ot,vt){it[2*vt]=0,it[2*vt+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var Y={};A.forEach(function(ot){var vt=ot.source,gt=ot.target;Y[vt]=Y[vt]||[],Y[vt].push(ot),Y[gt]=Y[gt]||[],Y[gt].push(ot)}),this.relatedEdges=Y}var W=m,K=!j;if(O||K){for(var Q=0,rt=0;(_.judgingDistance>U||rt<1)&&rt<W;rt++)Q=rt,_.runOneStep(rt,it);_.onLayoutEnd(Object.values(x))}else{if(typeof window=="undefined")return;var J=0;this.timeInterval=window.setInterval(function(){I&&(_.runOneStep(J,it),J++,(J>=W||_.judgingDistance<U)&&(_.onLayoutEnd(Object.values(x)),window.clearInterval(_.timeInterval)))},0)}}},M.prototype.runOneStep=function(_,m){var I,A=this,O=A.nodes,U=A.edges,j=A.nodeMap,x=A.monitor,d=[];if(O!=null&&O.length){A.calRepulsive(d),U&&A.calAttractive(d),A.calGravity(d),A.attractToSide(d);var it=A.interval;if(A.updateVelocity(d,m,it),A.updatePosition(m,it),(I=A.tick)===null||I===void 0||I.call(A),x){var Y=this.calTotalEnergy(d);x({energy:Y,nodes:O,edges:U,iterations:_})}}},M.prototype.calTotalEnergy=function(_){var m=this,I=m.nodes,A=m.nodeMap;if(!(I!=null&&I.length))return 0;var O=0;return I.forEach(function(U,j){var x=_[2*j],d=_[2*j+1],it=x*x+d*d,Y=A[U.id].data.layout.force.mass,W=Y===void 0?1:Y;O+=W*it*.5}),O},M.prototype.calRepulsive=function(_){var m=this,I=m.nodes,A=m.nodeMap,O=m.factor,U=m.coulombDisScale,j=m.nodeSize;(0,N.forceNBody)(I,A,O,U*U,_)},M.prototype.calAttractive=function(_){var m=this,I=m.edges,A=m.nodeMap,O=m.nodeIdxMap,U=m.edgeInfos,j=m.nodeSize;I.forEach(function(x,d){var it=(0,P.getEdgeTerminal)(x,"source"),Y=(0,P.getEdgeTerminal)(x,"target"),W=A[it],K=A[Y];if(!(!W||!K)){var Q=K.x-W.x,rt=K.y-W.y;!Q&&!rt&&(Q=Math.random()*.01,rt=Math.random()*.01);var J=Math.sqrt(Q*Q+rt*rt),ot=Q/J,vt=rt/J,gt=U[d]||{},Pt=gt.linkDistance,It=Pt===void 0?200:Pt,Jt=gt.edgeStrength,zt=Jt===void 0?200:Jt,kt=It-J,$=kt*zt,lt=W.data.layout.force.mass||1,St=K.data.layout.force.mass||1,Ut=1/lt,Ft=1/St,ee=ot*$,ve=vt*$,be=2*O[it],Ht=2*O[Y];_[be]-=ee*Ut,_[be+1]-=ve*Ut,_[Ht]+=ee*Ft,_[Ht+1]+=ve*Ft}})},M.prototype.calGravity=function(_){var m,I=this,A=I.nodes,O=I.edges,U=O===void 0?[]:O,j=I.nodeMap,x=I.width,d=I.height,it=I.center,Y=I.gravity,W=I.degreesMap,K=I.centripetalOptions;if(A)for(var Q=A.length,rt=0;rt<Q;rt++){var J=2*rt,ot=j[A[rt].id],vt=ot.data.layout.force.mass,gt=vt===void 0?1:vt,Pt=0,It=0,Jt=Y,zt=W[ot.id],kt=zt.in,$=zt.out,lt=zt.all,St=(m=I.getCenter)===null||m===void 0?void 0:m.call(I,ot,lt);if(St){var Ut=St[0],Ft=St[1],ee=St[2];Pt=ot.x-Ut,It=ot.y-Ft,Jt=ee}else Pt=ot.x-it[0],It=ot.y-it[1];if(Jt&&(_[J]-=Jt*Pt/gt,_[J+1]-=Jt*It/gt),K){var ve=K.leaf,be=K.single,Ht=K.others,Yt=K.center,de=(Yt==null?void 0:Yt(ot,A,U,x,d))||{x:0,y:0,centerStrength:0},Ee=de.x,ge=de.y,Ot=de.centerStrength;if(!(0,P.isNumber)(Ee)||!(0,P.isNumber)(ge))continue;var Xt=(ot.x-Ee)/gt,ce=(ot.y-ge)/gt;if(Ot&&(_[J]-=Ot*Xt,_[J+1]-=Ot*ce),lt===0){var Lt=be(ot);if(!Lt)continue;_[J]-=Lt*Xt,_[J+1]-=Lt*ce;continue}if(kt===0||$===0){var Kt=ve(ot,A,U);if(!Kt)continue;_[J]-=Kt*Xt,_[J+1]-=Kt*ce;continue}var pe=Ht(ot);if(!pe)continue;_[J]-=pe*Xt,_[J+1]-=pe*ce}}},M.prototype.attractToSide=function(_){var m=this,I=m.defSideCoe,A=m.height,O=m.nodes,U=m.relatedEdges,j=m.currentMinY,x=j===void 0?0:j,d=m.currentMaxY,it=d===void 0?this.height:d;!I||typeof I!="function"||!(O!=null&&O.length)||O.forEach(function(Y,W){var K=I(Y,U[Y.id]||[]);if(K!==0){var Q=K<0?x:it,rt=Math.abs(K);_[2*W+1]-=rt*(Y.y-Q)}})},M.prototype.updateVelocity=function(_,m,I){var A=this,O=A.nodes,U=A.damping,j=A.maxSpeed;O!=null&&O.length&&O.forEach(function(x,d){var it=(m[2*d]+_[2*d]*I)*U||.01,Y=(m[2*d+1]+_[2*d+1]*I)*U||.01,W=Math.sqrt(it*it+Y*Y);if(W>j){var K=j/W;it=K*it,Y=K*Y}m[2*d]=it,m[2*d+1]=Y})},M.prototype.updatePosition=function(_,m){var I=this,A=I.nodes,O=I.distanceThresholdMode,U=I.nodeMap;if(!(A!=null&&A.length)){this.judgingDistance=0;return}var j=0;O==="max"?I.judgingDistance=-1/0:O==="min"&&(I.judgingDistance=1/0);var x=1/0,d=-1/0;A.forEach(function(it,Y){var W=U[it.id];if((0,P.isNumber)(it.fx)&&(0,P.isNumber)(it.fy)){it.x=it.fx,it.y=it.fy,W.x=it.x,W.y=it.y;return}var K=_[2*Y]*m,Q=_[2*Y+1]*m;it.x+=K,it.y+=Q,W.x=it.x,W.y=it.y,it.y<x&&(x=it.y),it.y>d&&(d=it.y);var rt=Math.sqrt(K*K+Q*Q);switch(O){case"max":I.judgingDistance<rt&&(I.judgingDistance=rt);break;case"min":I.judgingDistance>rt&&(I.judgingDistance=rt);break;default:j=j+rt;break}}),this.currentMinY=x,this.currentMaxY=d,(!O||O==="mean")&&(I.judgingDistance=j/A.length)},M.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},M.prototype.destroy=function(){var _=this;_.stop(),_.tick=null,_.nodes=null,_.edges=null,_.destroyed=!0},M.prototype.getType=function(){return"force2"},M.prototype.getSameTypeLeafMap=function(){var _=this,m=_.nodeClusterBy,I=_.nodes,A=_.edges,O=_.nodeMap,U=_.degreesMap;if(I!=null&&I.length){var j={};return I.forEach(function(x,d){var it=U[x.id].all;it===1&&(j[x.id]=(0,P.getCoreNodeAndRelativeLeafNodes)("leaf",x,A,m,U,O))}),j}},M}(k.Base);R.Force2Layout=E},19712:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(){function B(X){this.id=X.id||0,this.rx=X.rx,this.ry=X.ry,this.fx=0,this.fy=0,this.mass=X.mass,this.degree=X.degree,this.g=X.g||0}return B.prototype.distanceTo=function(X){var k=this.rx-X.rx,P=this.ry-X.ry;return Math.hypot(k,P)},B.prototype.setPos=function(X,k){this.rx=X,this.ry=k},B.prototype.resetForce=function(){this.fx=0,this.fy=0},B.prototype.addForce=function(X){var k=X.rx-this.rx,P=X.ry-this.ry,N=Math.hypot(k,P);N=N<1e-4?1e-4:N;var D=this.g*(this.degree+1)*(X.degree+1)/N;this.fx+=D*k/N,this.fy+=D*P/N},B.prototype.in=function(X){return X.contains(this.rx,this.ry)},B.prototype.add=function(X){var k=this.mass+X.mass,P=(this.rx*this.mass+X.rx*X.mass)/k,N=(this.ry*this.mass+X.ry*X.mass)/k,D=this.degree+X.degree,E={rx:P,ry:N,mass:k,degree:D};return new B(E)},B}();R.default=z},148564:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var M=function(_,m){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,A){I.__proto__=A}||function(I,A){for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(I[O]=A[O])},M(_,m)};return function(_,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");M(_,m);function I(){this.constructor=_}_.prototype=m===null?Object.create(m):(I.prototype=m.prototype,new I)}}(),X=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(R,"__esModule",{value:!0}),R.ForceAtlas2Layout=void 0;var k=z(762329),P=z(449784),N=X(z(19712)),D=X(z(851638)),E=X(z(762732)),y=function(M){B(_,M);function _(m){var I=M.call(this)||this;return I.center=[0,0],I.width=300,I.height=300,I.nodes=[],I.edges=[],I.kr=5,I.kg=1,I.mode="normal",I.preventOverlap=!1,I.dissuadeHubs=!1,I.barnesHut=void 0,I.maxIteration=0,I.ks=.1,I.ksmax=10,I.tao=.1,I.onLayoutEnd=function(){},I.prune=void 0,I.updateCfg(m),I}return _.prototype.getDefaultCfg=function(){return{}},_.prototype.execute=function(){var m=this,I=m.nodes,A=m.onLayoutEnd,O=m.prune,U=m.maxIteration;!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight);for(var j=[],x=I.length,d=0;d<x;d+=1){var it=I[d],Y=10,W=10;(0,P.isNumber)(it.size)&&(Y=it.size,W=it.size),(0,P.isArray)(it.size)?(isNaN(it.size[0])||(Y=it.size[0]),isNaN(it.size[1])||(W=it.size[1])):(0,P.isObject)(it.size)&&(Y=it.size.width,W=it.size.height),m.getWidth&&!isNaN(m.getWidth(it))&&(W=m.getWidth(it)),m.getHeight&&!isNaN(m.getHeight(it))&&(Y=m.getHeight(it));var K=Math.max(Y,W);j.push(K)}m.barnesHut===void 0&&x>250&&(m.barnesHut=!0),m.prune===void 0&&x>100&&(m.prune=!0),this.maxIteration===0&&!m.prune?(U=250,x<=200&&x>100?U=1e3:x>200&&(U=1200),this.maxIteration=U):this.maxIteration===0&&O&&(U=100,x<=200&&x>100?U=500:x>200&&(U=950),this.maxIteration=U),m.kr||(m.kr=50,x>100&&x<=500?m.kr=20:x>500&&(m.kr=1)),m.kg||(m.kg=20,x>100&&x<=500?m.kg=10:x>500&&(m.kg=1)),this.nodes=m.updateNodesByForces(j),A()},_.prototype.updateNodesByForces=function(m){for(var I=this,A=I.edges,O=I.maxIteration,U=I.nodes,j=A.filter(function(zt){var kt=(0,P.getEdgeTerminal)(zt,"source"),$=(0,P.getEdgeTerminal)(zt,"target");return kt!==$}),x=U.length,d=j.length,it=[],Y={},W={},K=[],Q=0;Q<x;Q+=1)Y[U[Q].id]=Q,it[Q]=0,(U[Q].x===void 0||isNaN(U[Q].x))&&(U[Q].x=Math.random()*1e3),(U[Q].y===void 0||isNaN(U[Q].y))&&(U[Q].y=Math.random()*1e3),K.push({x:U[Q].x,y:U[Q].y});for(var Q=0;Q<d;Q+=1){for(var rt=void 0,J=void 0,ot=0,vt=0,gt=0;gt<x;gt+=1){var Pt=(0,P.getEdgeTerminal)(j[Q],"source"),It=(0,P.getEdgeTerminal)(j[Q],"target");U[gt].id===Pt?(rt=U[gt],ot=gt):U[gt].id===It&&(J=U[gt],vt=gt),W[Q]={sourceIdx:ot,targetIdx:vt}}rt&&(it[Y[rt.id]]+=1),J&&(it[Y[J.id]]+=1)}var Jt=O;if(U=this.iterate(Jt,Y,W,d,it,m),I.prune){for(var gt=0;gt<d;gt+=1)it[W[gt].sourceIdx]<=1?(U[W[gt].sourceIdx].x=U[W[gt].targetIdx].x,U[W[gt].sourceIdx].y=U[W[gt].targetIdx].y):it[W[gt].targetIdx]<=1&&(U[W[gt].targetIdx].x=U[W[gt].sourceIdx].x,U[W[gt].targetIdx].y=U[W[gt].sourceIdx].y);I.prune=!1,I.barnesHut=!1,Jt=100,U=this.iterate(Jt,Y,W,d,it,m)}return U},_.prototype.iterate=function(m,I,A,O,U,j){for(var x=this,d=x.nodes,it=x.kr,Y=x.preventOverlap,W=x.barnesHut,K=d.length,Q=0,rt=100,J=m,ot=50,vt=[],gt=[],Pt=[],It=0;It<K;It+=1)if(vt[2*It]=0,vt[2*It+1]=0,W){var Jt={id:It,rx:d[It].x,ry:d[It].y,mass:1,g:it,degree:U[It]};Pt[It]=new N.default(Jt)}for(;J>0;){for(var It=0;It<K;It+=1)gt[2*It]=vt[2*It],gt[2*It+1]=vt[2*It+1],vt[2*It]=0,vt[2*It+1]=0;vt=this.getAttrForces(J,ot,O,I,A,U,j,vt),W&&(Y&&J>ot||!Y)?vt=this.getOptRepGraForces(vt,Pt,U):vt=this.getRepGraForces(J,ot,vt,rt,j,U);var zt=this.updatePos(vt,gt,Q,U);d=zt.nodes,Q=zt.sg,J--,x.tick&&x.tick()}return d},_.prototype.getAttrForces=function(m,I,A,O,U,j,x,d){for(var it=this,Y=it.nodes,W=it.preventOverlap,K=it.dissuadeHubs,Q=it.mode,rt=it.prune,J=0;J<A;J+=1){var ot=Y[U[J].sourceIdx],vt=U[J].sourceIdx,gt=Y[U[J].targetIdx],Pt=U[J].targetIdx;if(!(rt&&(j[vt]<=1||j[Pt]<=1))){var It=[gt.x-ot.x,gt.y-ot.y],Jt=Math.hypot(It[0],It[1]);Jt=Jt<1e-4?1e-4:Jt,It[0]=It[0]/Jt,It[1]=It[1]/Jt,W&&m<I&&(Jt=Jt-x[vt]-x[Pt]);var zt=Jt,kt=zt;Q==="linlog"&&(zt=Math.log(1+Jt),kt=zt),K&&(zt=Jt/j[vt],kt=Jt/j[Pt]),W&&m<I&&Jt<=0?(zt=0,kt=0):W&&m<I&&Jt>0&&(zt=Jt,kt=Jt),d[2*O[ot.id]]+=zt*It[0],d[2*O[gt.id]]-=kt*It[0],d[2*O[ot.id]+1]+=zt*It[1],d[2*O[gt.id]+1]-=kt*It[1]}}return d},_.prototype.getRepGraForces=function(m,I,A,O,U,j){for(var x=this,d=x.nodes,it=x.preventOverlap,Y=x.kr,W=x.kg,K=x.center,Q=x.prune,rt=d.length,J=0;J<rt;J+=1){for(var ot=J+1;ot<rt;ot+=1)if(!(Q&&(j[J]<=1||j[ot]<=1))){var vt=[d[ot].x-d[J].x,d[ot].y-d[J].y],gt=Math.hypot(vt[0],vt[1]);gt=gt<1e-4?1e-4:gt,vt[0]=vt[0]/gt,vt[1]=vt[1]/gt,it&&m<I&&(gt=gt-U[J]-U[ot]);var Pt=Y*(j[J]+1)*(j[ot]+1)/gt;it&&m<I&&gt<0?Pt=O*(j[J]+1)*(j[ot]+1):it&&m<I&&gt===0?Pt=0:it&&m<I&&gt>0&&(Pt=Y*(j[J]+1)*(j[ot]+1)/gt),A[2*J]-=Pt*vt[0],A[2*ot]+=Pt*vt[0],A[2*J+1]-=Pt*vt[1],A[2*ot+1]+=Pt*vt[1]}var It=[d[J].x-K[0],d[J].y-K[1]],Jt=Math.hypot(It[0],It[1]);It[0]=It[0]/Jt,It[1]=It[1]/Jt;var zt=W*(j[J]+1);A[2*J]-=zt*It[0],A[2*J+1]-=zt*It[1]}return A},_.prototype.getOptRepGraForces=function(m,I,A){for(var O=this,U=O.nodes,j=O.kg,x=O.center,d=O.prune,it=U.length,Y=9e10,W=-9e10,K=9e10,Q=-9e10,rt=0;rt<it;rt+=1)d&&A[rt]<=1||(I[rt].setPos(U[rt].x,U[rt].y),U[rt].x>=W&&(W=U[rt].x),U[rt].x<=Y&&(Y=U[rt].x),U[rt].y>=Q&&(Q=U[rt].y),U[rt].y<=K&&(K=U[rt].y));for(var J=Math.max(W-Y,Q-K),ot={xmid:(W+Y)/2,ymid:(Q+K)/2,length:J,massCenter:x,mass:it},vt=new D.default(ot),gt=new E.default(vt),rt=0;rt<it;rt+=1)d&&A[rt]<=1||I[rt].in(vt)&&gt.insert(I[rt]);for(var rt=0;rt<it;rt+=1)if(!(d&&A[rt]<=1)){I[rt].resetForce(),gt.updateForce(I[rt]),m[2*rt]-=I[rt].fx,m[2*rt+1]-=I[rt].fy;var Pt=[U[rt].x-x[0],U[rt].y-x[1]],It=Math.hypot(Pt[0],Pt[1]);It=It<1e-4?1e-4:It,Pt[0]=Pt[0]/It,Pt[1]=Pt[1]/It;var Jt=j*(A[rt]+1);m[2*rt]-=Jt*Pt[0],m[2*rt+1]-=Jt*Pt[1]}return m},_.prototype.updatePos=function(m,I,A,O){for(var U=this,j=U.nodes,x=U.ks,d=U.tao,it=U.prune,Y=U.ksmax,W=j.length,K=[],Q=[],rt=0,J=0,ot=0;ot<W;ot+=1)if(!(it&&O[ot]<=1)){var vt=[m[2*ot]-I[2*ot],m[2*ot+1]-I[2*ot+1]],gt=Math.hypot(vt[0],vt[1]),Pt=[m[2*ot]+I[2*ot],m[2*ot+1]+I[2*ot+1]],It=Math.hypot(Pt[0],Pt[1]);K[ot]=gt,Q[ot]=It/2,rt+=(O[ot]+1)*K[ot],J+=(O[ot]+1)*Q[ot]}var Jt=A;A=d*J/rt,Jt!==0&&(A=A>1.5*Jt?1.5*Jt:A);for(var ot=0;ot<W;ot+=1)if(!(it&&O[ot]<=1)&&!((0,P.isNumber)(j[ot].fx)&&(0,P.isNumber)(j[ot].fy))){var zt=x*A/(1+A*Math.sqrt(K[ot])),kt=Math.hypot(m[2*ot],m[2*ot+1]);kt=kt<1e-4?1e-4:kt;var $=Y/kt;zt=zt>$?$:zt;var lt=zt*m[2*ot],St=zt*m[2*ot+1];j[ot].x+=lt,j[ot].y+=St}return{nodes:j,sg:A}},_}(k.Base);R.ForceAtlas2Layout=y},851638:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(){function B(X){this.xmid=X.xmid,this.ymid=X.ymid,this.length=X.length,this.massCenter=X.massCenter||[0,0],this.mass=X.mass||1}return B.prototype.getLength=function(){return this.length},B.prototype.contains=function(X,k){var P=this.length/2;return X<=this.xmid+P&&X>=this.xmid-P&&k<=this.ymid+P&&k>=this.ymid-P},B.prototype.NW=function(){var X=this.xmid-this.length/4,k=this.ymid+this.length/4,P=this.length/2,N={xmid:X,ymid:k,length:P},D=new B(N);return D},B.prototype.NE=function(){var X=this.xmid+this.length/4,k=this.ymid+this.length/4,P=this.length/2,N={xmid:X,ymid:k,length:P},D=new B(N);return D},B.prototype.SW=function(){var X=this.xmid-this.length/4,k=this.ymid-this.length/4,P=this.length/2,N={xmid:X,ymid:k,length:P},D=new B(N);return D},B.prototype.SE=function(){var X=this.xmid+this.length/4,k=this.ymid-this.length/4,P=this.length/2,N={xmid:X,ymid:k,length:P},D=new B(N);return D},B}();R.default=z},762732:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=function(){function B(X){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,X!=null&&(this.quad=X)}return B.prototype.insert=function(X){if(this.body==null){this.body=X;return}this._isExternal()?(this.quad&&(this.NW=new B(this.quad.NW()),this.NE=new B(this.quad.NE()),this.SW=new B(this.quad.SW()),this.SE=new B(this.quad.SE())),this._putBody(this.body),this._putBody(X),this.body=this.body.add(X)):(this.body=this.body.add(X),this._putBody(X))},B.prototype._putBody=function(X){this.quad&&(X.in(this.quad.NW())&&this.NW?this.NW.insert(X):X.in(this.quad.NE())&&this.NE?this.NE.insert(X):X.in(this.quad.SW())&&this.SW?this.SW.insert(X):X.in(this.quad.SE())&&this.SE&&this.SE.insert(X))},B.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},B.prototype.updateForce=function(X){if(!(this.body==null||X===this.body))if(this._isExternal())X.addForce(this.body);else{var k=this.quad?this.quad.getLength():0,P=this.body.distanceTo(X);k/P<this.theta?X.addForce(this.body):(this.NW&&this.NW.updateForce(X),this.NE&&this.NE.updateForce(X),this.SW&&this.SW.updateForce(X),this.SE&&this.SE.updateForce(X))}},B}();R.default=z},880374:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var D=function(E,y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,_){M.__proto__=_}||function(M,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(M[m]=_[m])},D(E,y)};return function(E,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");D(E,y);function M(){this.constructor=E}E.prototype=y===null?Object.create(y):(M.prototype=y.prototype,new M)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.FruchtermanLayout=void 0;var X=z(762329),k=z(449784),P=800,N=function(D){B(E,D);function E(y){var M=D.call(this)||this;return M.maxIteration=1e3,M.workerEnabled=!1,M.gravity=10,M.speed=5,M.clustering=!1,M.clusterGravity=10,M.nodes=[],M.edges=[],M.width=300,M.height=300,M.nodeMap={},M.nodeIdxMap={},M.onLayoutEnd=function(){},M.tick=function(){},M.animate=!0,M.updateCfg(y),M}return E.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},E.prototype.execute=function(){var y=this,M,_,m=this,I=m.nodes;if(m.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(m.timeInterval),!I||I.length===0){(M=m.onLayoutEnd)===null||M===void 0||M.call(m);return}!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),m.center||(m.center=[m.width/2,m.height/2]);var A=m.center;if(I.length===1){I[0].x=A[0],I[0].y=A[1],(_=m.onLayoutEnd)===null||_===void 0||_.call(m);return}var O={},U={};return I.forEach(function(j,x){(0,k.isNumber)(j.x)||(j.x=Math.random()*y.width),(0,k.isNumber)(j.y)||(j.y=Math.random()*y.height),O[j.id]=j,U[j.id]=x}),m.nodeMap=O,m.nodeIdxMap=U,m.run()},E.prototype.run=function(){var y,M=this,_=M.nodes;if(_){var m=M.edges,I=M.maxIteration,A=M.workerEnabled,O=M.clustering,U=M.animate,j={};if(O&&_.forEach(function(it){j[it.cluster]===void 0&&(j[it.cluster]={name:it.cluster,cx:0,cy:0,count:0})}),A||!U){for(var x=0;x<I;x++)M.runOneStep(j);(y=M.onLayoutEnd)===null||y===void 0||y.call(M)}else{if(typeof window=="undefined")return;var d=0;this.timeInterval=window.setInterval(function(){var it;M.runOneStep(j),d++,d>=I&&((it=M.onLayoutEnd)===null||it===void 0||it.call(M),window.clearInterval(M.timeInterval))},0)}return{nodes:_,edges:m}}},E.prototype.runOneStep=function(y){var M,_=this,m=_.nodes;if(m){var I=_.edges,A=_.center,O=_.gravity,U=_.speed,j=_.clustering,x=_.height*_.width,d=Math.sqrt(x)/10,it=x/(m.length+1),Y=Math.sqrt(it),W=[];if(m.forEach(function(rt,J){W[J]={x:0,y:0}}),_.applyCalculate(m,I,W,Y,it),j){for(var K in y)y[K].cx=0,y[K].cy=0,y[K].count=0;m.forEach(function(rt){var J=y[rt.cluster];(0,k.isNumber)(rt.x)&&(J.cx+=rt.x),(0,k.isNumber)(rt.y)&&(J.cy+=rt.y),J.count++});for(var K in y)y[K].cx/=y[K].count,y[K].cy/=y[K].count;var Q=_.clusterGravity||O;m.forEach(function(rt,J){if(!(!(0,k.isNumber)(rt.x)||!(0,k.isNumber)(rt.y))){var ot=y[rt.cluster],vt=Math.sqrt((rt.x-ot.cx)*(rt.x-ot.cx)+(rt.y-ot.cy)*(rt.y-ot.cy)),gt=Y*Q;W[J].x-=gt*(rt.x-ot.cx)/vt,W[J].y-=gt*(rt.y-ot.cy)/vt}})}m.forEach(function(rt,J){if(!(!(0,k.isNumber)(rt.x)||!(0,k.isNumber)(rt.y))){var ot=.01*Y*O;W[J].x-=ot*(rt.x-A[0]),W[J].y-=ot*(rt.y-A[1])}}),m.forEach(function(rt,J){if((0,k.isNumber)(rt.fx)&&(0,k.isNumber)(rt.fy)){rt.x=rt.fx,rt.y=rt.fy;return}if(!(!(0,k.isNumber)(rt.x)||!(0,k.isNumber)(rt.y))){var ot=Math.sqrt(W[J].x*W[J].x+W[J].y*W[J].y);if(ot>0){var vt=Math.min(d*(U/P),ot);rt.x+=W[J].x/ot*vt,rt.y+=W[J].y/ot*vt}}}),(M=_.tick)===null||M===void 0||M.call(_)}},E.prototype.applyCalculate=function(y,M,_,m,I){var A=this;A.calRepulsive(y,_,I),M&&A.calAttractive(M,_,m)},E.prototype.calRepulsive=function(y,M,_){y.forEach(function(m,I){M[I]={x:0,y:0},y.forEach(function(A,O){if(I!==O&&!(!(0,k.isNumber)(m.x)||!(0,k.isNumber)(A.x)||!(0,k.isNumber)(m.y)||!(0,k.isNumber)(A.y))){var U=m.x-A.x,j=m.y-A.y,x=U*U+j*j;if(x===0){x=1;var d=I>O?1:-1;U=.01*d,j=.01*d}var it=_/x;M[I].x+=U*it,M[I].y+=j*it}})})},E.prototype.calAttractive=function(y,M,_){var m=this;y.forEach(function(I){var A=(0,k.getEdgeTerminal)(I,"source"),O=(0,k.getEdgeTerminal)(I,"target");if(!(!A||!O)){var U=m.nodeIdxMap[A],j=m.nodeIdxMap[O];if(U!==j){var x=m.nodeMap[A],d=m.nodeMap[O];if(!(!(0,k.isNumber)(d.x)||!(0,k.isNumber)(x.x)||!(0,k.isNumber)(d.y)||!(0,k.isNumber)(x.y))){var it=d.x-x.x,Y=d.y-x.y,W=Math.sqrt(it*it+Y*Y),K=W*W/_;M[j].x-=it/W*K,M[j].y-=Y/W*K,M[U].x+=it/W*K,M[U].y+=Y/W*K}}}})},E.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},E.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},E.prototype.getType=function(){return"fruchterman"},E}(X.Base);R.FruchtermanLayout=N},113653:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var D=function(E,y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,_){M.__proto__=_}||function(M,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(M[m]=_[m])},D(E,y)};return function(E,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");D(E,y);function M(){this.constructor=E}E.prototype=y===null?Object.create(y):(M.prototype=y.prototype,new M)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.GForceLayout=void 0;var X=z(762329),k=z(449784),P=function(D,E){var y;return D?(0,k.isNumber)(D)?y=function(M){return D}:y=D:y=function(M){return E||1},y},N=function(D){B(E,D);function E(y){var M=D.call(this)||this;return M.maxIteration=500,M.workerEnabled=!1,M.edgeStrength=200,M.nodeStrength=1e3,M.coulombDisScale=.005,M.damping=.9,M.maxSpeed=1e3,M.minMovement=.5,M.interval=.02,M.factor=1,M.linkDistance=1,M.gravity=10,M.preventOverlap=!0,M.collideStrength=1,M.tick=function(){},M.nodes=[],M.edges=[],M.width=300,M.height=300,M.nodeMap={},M.nodeIdxMap={},M.animate=!0,M.updateCfg(y),M}return E.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},E.prototype.execute=function(){var y,M,_=this,m=_.nodes;if(_.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(_.timeInterval),!m||m.length===0){(y=_.onLayoutEnd)===null||y===void 0||y.call(_);return}!_.width&&typeof window!="undefined"&&(_.width=window.innerWidth),!_.height&&typeof window!="undefined"&&(_.height=window.innerHeight),_.center||(_.center=[_.width/2,_.height/2]);var I=_.center;if(m.length===1){m[0].x=I[0],m[0].y=I[1],(M=_.onLayoutEnd)===null||M===void 0||M.call(_);return}var A={},O={};m.forEach(function(Y,W){(0,k.isNumber)(Y.x)||(Y.x=Math.random()*_.width),(0,k.isNumber)(Y.y)||(Y.y=Math.random()*_.height),A[Y.id]=Y,O[Y.id]=W}),_.nodeMap=A,_.nodeIdxMap=O,_.linkDistance=P(_.linkDistance,1),_.nodeStrength=P(_.nodeStrength,1),_.edgeStrength=P(_.edgeStrength,1);var U=_.nodeSize,j;if(_.preventOverlap){var x=_.nodeSpacing,d;(0,k.isNumber)(x)?d=function(){return x}:(0,k.isFunction)(x)?d=x:d=function(){return 0},U?(0,k.isArray)(U)?j=function(Y){return Math.max(U[0],U[1])+d(Y)}:j=function(Y){return U+d(Y)}:j=function(Y){return Y.size?(0,k.isArray)(Y.size)?Math.max(Y.size[0],Y.size[1])+d(Y):(0,k.isObject)(Y.size)?Math.max(Y.size.width,Y.size.height)+d(Y):Y.size+d(Y):10+d(Y)}}_.nodeSize=j;var it=_.edges;_.degrees=(0,k.getDegree)(m.length,_.nodeIdxMap,it),_.getMass||(_.getMass=function(Y){var W=Y.mass||_.degrees[_.nodeIdxMap[Y.id]].all||1;return W}),_.run()},E.prototype.run=function(){var y,M=this,_=M.maxIteration,m=M.nodes,I=M.workerEnabled,A=M.minMovement,O=M.animate;if(m)if(I||!O){for(var U=0;U<_;U++){var j=M.runOneStep(U);if(M.reachMoveThreshold(m,j,A))break}(y=M.onLayoutEnd)===null||y===void 0||y.call(M)}else{if(typeof window=="undefined")return;var x=0;this.timeInterval=window.setInterval(function(){var d,it;if(m){var Y=M.runOneStep(x)||[];M.reachMoveThreshold(m,Y,A)&&((d=M.onLayoutEnd)===null||d===void 0||d.call(M),window.clearInterval(M.timeInterval)),x++,x>=_&&((it=M.onLayoutEnd)===null||it===void 0||it.call(M),window.clearInterval(M.timeInterval))}},0)}},E.prototype.reachMoveThreshold=function(y,M,_){var m=0;return y.forEach(function(I,A){var O=I.x-M[A].x,U=I.y-M[A].y;m+=Math.sqrt(O*O+U*U)}),m/=y.length,m<_},E.prototype.runOneStep=function(y){var M,_=this,m=_.nodes,I=_.edges,A=[],O=[];if(m){m.forEach(function(x,d){A[2*d]=0,A[2*d+1]=0,O[2*d]=0,O[2*d+1]=0}),_.calRepulsive(A,m),I&&_.calAttractive(A,I),_.calGravity(A,m);var U=Math.max(.02,_.interval-y*.002);_.updateVelocity(A,O,U,m);var j=[];return m.forEach(function(x){j.push({x:x.x,y:x.y})}),_.updatePosition(O,U,m),(M=_.tick)===null||M===void 0||M.call(_),j}},E.prototype.calRepulsive=function(y,M){var _=this,m=_.getMass,I=_.factor,A=_.coulombDisScale,O=_.preventOverlap,U=_.collideStrength,j=U===void 0?1:U,x=_.nodeStrength,d=_.nodeSize;M.forEach(function(it,Y){var W=m?m(it):1;M.forEach(function(K,Q){if(!(Y>=Q)){var rt=it.x-K.x,J=it.y-K.y;rt===0&&J===0&&(rt=Math.random()*.01,J=Math.random()*.01);var ot=rt*rt+J*J,vt=Math.sqrt(ot),gt=(vt+.1)*A,Pt=rt/vt,It=J/vt,Jt=(x(it)+x(K))*.5*I/(gt*gt),zt=m?m(K):1;if(y[2*Y]+=Pt*Jt,y[2*Y+1]+=It*Jt,y[2*Q]-=Pt*Jt,y[2*Q+1]-=It*Jt,O&&(d(it)+d(K))/2>vt){var kt=j*(x(it)+x(K))*.5/ot;y[2*Y]+=Pt*kt/W,y[2*Y+1]+=It*kt/W,y[2*Q]-=Pt*kt/zt,y[2*Q+1]-=It*kt/zt}}})})},E.prototype.calAttractive=function(y,M){var _=this,m=_.nodeMap,I=_.nodeIdxMap,A=_.linkDistance,O=_.edgeStrength,U=_.nodeSize,j=_.getMass;M.forEach(function(x,d){var it=(0,k.getEdgeTerminal)(x,"source"),Y=(0,k.getEdgeTerminal)(x,"target"),W=m[it],K=m[Y],Q=K.x-W.x,rt=K.y-W.y;Q===0&&rt===0&&(Q=Math.random()*.01,rt=Math.random()*.01);var J=Math.sqrt(Q*Q+rt*rt),ot=Q/J,vt=rt/J,gt=A(x,W,K)||1+(U(W)+U(K)||0)/2,Pt=gt-J,It=Pt*O(x),Jt=I[it],zt=I[Y],kt=j?j(W):1,$=j?j(K):1;y[2*Jt]-=ot*It/kt,y[2*Jt+1]-=vt*It/kt,y[2*zt]+=ot*It/$,y[2*zt+1]+=vt*It/$})},E.prototype.calGravity=function(y,M){for(var _=this,m=_.center,I=_.gravity,A=_.degrees,O=M.length,U=0;U<O;U++){var j=M[U],x=j.x-m[0],d=j.y-m[1],it=I;if(_.getCenter){var Y=_.getCenter(j,A[U].all);Y&&(0,k.isNumber)(Y[0])&&(0,k.isNumber)(Y[1])&&(0,k.isNumber)(Y[2])&&(x=j.x-Y[0],d=j.y-Y[1],it=Y[2])}it&&(y[2*U]-=it*x,y[2*U+1]-=it*d)}},E.prototype.updateVelocity=function(y,M,_,m){var I=this,A=_*I.damping;m.forEach(function(O,U){var j=y[2*U]*A||.01,x=y[2*U+1]*A||.01,d=Math.sqrt(j*j+x*x);if(d>I.maxSpeed){var it=I.maxSpeed/d;j=it*j,x=it*x}M[2*U]=j,M[2*U+1]=x})},E.prototype.updatePosition=function(y,M,_){_.forEach(function(m,I){if((0,k.isNumber)(m.fx)&&(0,k.isNumber)(m.fy)){m.x=m.fx,m.y=m.fy;return}var A=y[2*I]*M,O=y[2*I+1]*M;m.x+=A,m.y+=O})},E.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},E.prototype.destroy=function(){var y=this;y.stop(),y.tick=null,y.nodes=null,y.edges=null,y.destroyed=!0},E.prototype.getType=function(){return"gForce"},E}(X.Base);R.GForceLayout=N},687745:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var m=function(I,A){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,U){O.__proto__=U}||function(O,U){for(var j in U)Object.prototype.hasOwnProperty.call(U,j)&&(O[j]=U[j])},m(I,A)};return function(I,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");m(I,A);function O(){this.constructor=I}I.prototype=A===null?Object.create(A):(O.prototype=A.prototype,new O)}}(),X=this&&this.__awaiter||function(m,I,A,O){function U(j){return j instanceof A?j:new A(function(x){x(j)})}return new(A||(A=Promise))(function(j,x){function d(W){try{Y(O.next(W))}catch(K){x(K)}}function it(W){try{Y(O.throw(W))}catch(K){x(K)}}function Y(W){W.done?j(W.value):U(W.value).then(d,it)}Y((O=O.apply(m,I||[])).next())})},k=this&&this.__generator||function(m,I){var A={label:0,sent:function(){if(j[0]&1)throw j[1];return j[1]},trys:[],ops:[]},O,U,j,x;return x={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function d(Y){return function(W){return it([Y,W])}}function it(Y){if(O)throw new TypeError("Generator is already executing.");for(;x&&(x=0,Y[0]&&(A=0)),A;)try{if(O=1,U&&(j=Y[0]&2?U.return:Y[0]?U.throw||((j=U.return)&&j.call(U),0):U.next)&&!(j=j.call(U,Y[1])).done)return j;switch(U=0,j&&(Y=[Y[0]&2,j.value]),Y[0]){case 0:case 1:j=Y;break;case 4:return A.label++,{value:Y[1],done:!1};case 5:A.label++,U=Y[1],Y=[0];continue;case 7:Y=A.ops.pop(),A.trys.pop();continue;default:if(j=A.trys,!(j=j.length>0&&j[j.length-1])&&(Y[0]===6||Y[0]===2)){A=0;continue}if(Y[0]===3&&(!j||Y[1]>j[0]&&Y[1]<j[3])){A.label=Y[1];break}if(Y[0]===6&&A.label<j[1]){A.label=j[1],j=Y;break}if(j&&A.label<j[2]){A.label=j[2],A.ops.push(Y);break}j[2]&&A.ops.pop(),A.trys.pop();continue}Y=I.call(m,A)}catch(W){Y=[6,W],U=0}finally{O=j=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}};Object.defineProperty(R,"__esModule",{value:!0}),R.FruchtermanGPULayout=void 0;var P=z(762329),N=z(449784),D=z(901029),E=z(248835),y=z(108574),M=z(416470),_=function(m){B(I,m);function I(A){var O=m.call(this)||this;return O.maxIteration=1e3,O.gravity=10,O.speed=1,O.clustering=!1,O.clusterField="cluster",O.clusterGravity=10,O.workerEnabled=!1,O.nodes=[],O.edges=[],O.width=300,O.height=300,O.nodeMap={},O.nodeIdxMap={},O.updateCfg(A),O}return I.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},I.prototype.execute=function(){return X(this,void 0,void 0,function(){var A,O,U,j,x,d=this;return k(this,function(it){switch(it.label){case 0:return A=this,O=A.nodes,!O||O.length===0?(A.onLayoutEnd&&A.onLayoutEnd(),[2]):(!A.width&&typeof window!="undefined"&&(A.width=window.innerWidth),!A.height&&typeof window!="undefined"&&(A.height=window.innerHeight),A.center||(A.center=[A.width/2,A.height/2]),U=A.center,O.length===1?(O[0].x=U[0],O[0].y=U[1],A.onLayoutEnd&&A.onLayoutEnd(),[2]):(j={},x={},O.forEach(function(Y,W){(0,N.isNumber)(Y.x)||(Y.x=Math.random()*d.width),(0,N.isNumber)(Y.y)||(Y.y=Math.random()*d.height),j[Y.id]=Y,x[Y.id]=W}),A.nodeMap=j,A.nodeIdxMap=x,[4,A.run()]));case 1:return it.sent(),[2]}})})},I.prototype.executeWithWorker=function(A,O){return X(this,void 0,void 0,function(){var U,j,x,d,it,Y=this;return k(this,function(W){switch(W.label){case 0:return U=this,j=U.nodes,x=U.center,!j||j.length===0?[2]:j.length===1?(j[0].x=x[0],j[0].y=x[1],[2]):(d={},it={},j.forEach(function(K,Q){(0,N.isNumber)(K.x)||(K.x=Math.random()*Y.width),(0,N.isNumber)(K.y)||(K.y=Math.random()*Y.height),d[K.id]=K,it[K.id]=Q}),U.nodeMap=d,U.nodeIdxMap=it,[4,U.run(A,O)]);case 1:return W.sent(),[2]}})})},I.prototype.run=function(A,O){return X(this,void 0,void 0,function(){var U,j,x,d,it,Y,W,K,Q,rt,J,ot,vt,gt,Pt,It,Jt,zt,kt,$,lt,St,Ut,Ft,ee,ve,be=this;return k(this,function(Ht){switch(Ht.label){case 0:for(U=this,j=U.nodes,x=U.edges,d=U.maxIteration,it=U.center,Y=U.height*U.width,W=Math.sqrt(Y)/10,K=Y/(j.length+1),Q=Math.sqrt(K),rt=U.speed,J=U.clustering,ot=(0,E.attributesToTextureData)([U.clusterField],j),vt=ot.array,gt=ot.count,j.forEach(function(Yt,de){var Ee=0,ge=0;(0,N.isNumber)(Yt.fx)&&(0,N.isNumber)(Yt.fy)&&(Ee=Yt.fx||.001,ge=Yt.fy||.001),vt[4*de+1]=Ee,vt[4*de+2]=ge}),Pt=j.length,It=(0,E.buildTextureData)(j,x),Jt=It.maxEdgePerVetex,zt=It.array,kt=U.workerEnabled,kt?$=D.World.create({canvas:A,engineOptions:{supportCompute:!0}}):$=D.World.create({engineOptions:{supportCompute:!0}}),lt=U.onLayoutEnd,St=[],Ut=0;Ut<gt;Ut++)St.push(0,0,0,0);return Ft=$.createKernel(y.fruchtermanBundle).setDispatch([Pt,1,1]).setBinding({u_Data:zt,u_K:Q,u_K2:K,u_Gravity:U.gravity,u_ClusterGravity:U.clusterGravity||U.gravity||1,u_Speed:rt,u_MaxDisplace:W,u_Clustering:J?1:0,u_Center:it,u_AttributeArray:vt,u_ClusterCenters:St,MAX_EDGE_PER_VERTEX:Jt,VERTEX_COUNT:Pt}),J&&(ee=$.createKernel(y.clusterBundle).setDispatch([gt,1,1]).setBinding({u_Data:zt,u_NodeAttributes:vt,u_ClusterCenters:St,VERTEX_COUNT:Pt,CLUSTER_COUNT:gt})),ve=function(){return X(be,void 0,void 0,function(){var Yt,de;return k(this,function(Ee){switch(Ee.label){case 0:Yt=0,Ee.label=1;case 1:return Yt<d?[4,Ft.execute()]:[3,6];case 2:return Ee.sent(),J?(ee.setBinding({u_Data:Ft}),[4,ee.execute()]):[3,4];case 3:Ee.sent(),Ft.setBinding({u_ClusterCenters:ee}),Ee.label=4;case 4:Ft.setBinding({u_MaxDisplace:W*=.99}),Ee.label=5;case 5:return Yt++,[3,1];case 6:return[4,Ft.getOutput()];case 7:return de=Ee.sent(),A?O.postMessage({type:M.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:de}):j.forEach(function(ge,Ot){var Xt=de[4*Ot],ce=de[4*Ot+1];ge.x=Xt,ge.y=ce}),lt&&lt(),[2]}})})},[4,ve()];case 1:return Ht.sent(),[2]}})})},I.prototype.getType=function(){return"fruchterman-gpu"},I}(P.Base);R.FruchtermanGPULayout=_},108574:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.clusterBundle=R.clusterCode=R.fruchtermanBundle=R.fruchtermanCode=void 0,R.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,R.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',R.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,R.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},785194:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var I=function(A,O){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,j){U.__proto__=j}||function(U,j){for(var x in j)Object.prototype.hasOwnProperty.call(j,x)&&(U[x]=j[x])},I(A,O)};return function(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");I(A,O);function U(){this.constructor=A}A.prototype=O===null?Object.create(O):(U.prototype=O.prototype,new U)}}(),X=this&&this.__awaiter||function(I,A,O,U){function j(x){return x instanceof O?x:new O(function(d){d(x)})}return new(O||(O=Promise))(function(x,d){function it(K){try{W(U.next(K))}catch(Q){d(Q)}}function Y(K){try{W(U.throw(K))}catch(Q){d(Q)}}function W(K){K.done?x(K.value):j(K.value).then(it,Y)}W((U=U.apply(I,A||[])).next())})},k=this&&this.__generator||function(I,A){var O={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},U,j,x,d;return d={next:it(0),throw:it(1),return:it(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function it(W){return function(K){return Y([W,K])}}function Y(W){if(U)throw new TypeError("Generator is already executing.");for(;d&&(d=0,W[0]&&(O=0)),O;)try{if(U=1,j&&(x=W[0]&2?j.return:W[0]?j.throw||((x=j.return)&&x.call(j),0):j.next)&&!(x=x.call(j,W[1])).done)return x;switch(j=0,x&&(W=[W[0]&2,x.value]),W[0]){case 0:case 1:x=W;break;case 4:return O.label++,{value:W[1],done:!1};case 5:O.label++,j=W[1],W=[0];continue;case 7:W=O.ops.pop(),O.trys.pop();continue;default:if(x=O.trys,!(x=x.length>0&&x[x.length-1])&&(W[0]===6||W[0]===2)){O=0;continue}if(W[0]===3&&(!x||W[1]>x[0]&&W[1]<x[3])){O.label=W[1];break}if(W[0]===6&&O.label<x[1]){O.label=x[1],x=W;break}if(x&&O.label<x[2]){O.label=x[2],O.ops.push(W);break}x[2]&&O.ops.pop(),O.trys.pop();continue}W=A.call(I,O)}catch(K){W=[6,K],j=0}finally{U=x=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}};Object.defineProperty(R,"__esModule",{value:!0}),R.GForceGPULayout=void 0;var P=z(762329),N=z(449784),D=z(901029),E=z(248835),y=z(280628),M=z(549762),_=z(416470),m=function(I){B(A,I);function A(O){var U=I.call(this)||this;return U.maxIteration=1e3,U.edgeStrength=200,U.nodeStrength=1e3,U.coulombDisScale=.005,U.damping=.9,U.maxSpeed=1e3,U.minMovement=.5,U.interval=.02,U.factor=1,U.linkDistance=1,U.gravity=10,U.workerEnabled=!1,U.nodes=[],U.edges=[],U.width=300,U.height=300,U.nodeMap={},U.nodeIdxMap={},U.updateCfg(O),U}return A.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},A.prototype.execute=function(){return X(this,void 0,void 0,function(){var O,U,j,x,d;return k(this,function(it){switch(it.label){case 0:return O=this,U=O.nodes,!U||U.length===0?(O.onLayoutEnd&&O.onLayoutEnd(),[2]):(!O.width&&typeof window!="undefined"&&(O.width=window.innerWidth),!O.height&&typeof window!="undefined"&&(O.height=window.innerHeight),O.center||(O.center=[O.width/2,O.height/2]),j=O.center,U.length===1?(U[0].x=j[0],U[0].y=j[1],O.onLayoutEnd&&O.onLayoutEnd(),[2]):(x={},d={},U.forEach(function(Y,W){(0,N.isNumber)(Y.x)||(Y.x=Math.random()*O.width),(0,N.isNumber)(Y.y)||(Y.y=Math.random()*O.height),x[Y.id]=Y,d[Y.id]=W}),O.nodeMap=x,O.nodeIdxMap=d,O.nodeStrength=(0,E.proccessToFunc)(O.nodeStrength,1),O.edgeStrength=(0,E.proccessToFunc)(O.edgeStrength,1),[4,O.run()]));case 1:return it.sent(),[2]}})})},A.prototype.executeWithWorker=function(O,U){var j=this,x=j.nodes,d=j.center;if(!(!x||x.length===0)){if(x.length===1){x[0].x=d[0],x[0].y=d[1];return}var it={},Y={};x.forEach(function(W,K){(0,N.isNumber)(W.x)||(W.x=Math.random()*j.width),(0,N.isNumber)(W.y)||(W.y=Math.random()*j.height),it[W.id]=W,Y[W.id]=K}),j.nodeMap=it,j.nodeIdxMap=Y,j.nodeStrength=(0,E.proccessToFunc)(j.nodeStrength,1),j.edgeStrength=(0,E.proccessToFunc)(j.edgeStrength,1),j.run(O,U)}},A.prototype.run=function(O,U){return X(this,void 0,void 0,function(){var j,x,d,it,Y,W,K,Q,rt,J,ot,vt,gt,Pt,It,Jt,zt,kt,$,lt,St,Ut,Ft,ee,ve,be,Ht,Yt=this;return k(this,function(de){switch(de.label){case 0:for(j=this,x=j.nodes,d=j.edges,it=j.maxIteration,!j.width&&typeof window!="undefined"&&(j.width=window.innerWidth),!j.height&&typeof window!="undefined"&&(j.height=window.innerHeight),Y=x.length,j.linkDistance=(0,E.proccessToFunc)(j.linkDistance),j.edgeStrength=(0,E.proccessToFunc)(j.edgeStrength),W=(0,E.buildTextureDataWithTwoEdgeAttr)(x,d,j.linkDistance,j.edgeStrength),K=W.maxEdgePerVetex,Q=W.array,j.degrees=(0,y.getDegree)(x.length,j.nodeIdxMap,d).map(function(Ee){return Ee.all}),rt=[],J=[],ot=[],vt=[],gt=[],Pt=[],It=[],j.getMass||(j.getMass=function(Ee){return j.degrees[j.nodeIdxMap[Ee.id]]||1}),Jt=j.gravity,zt=j.center,x.forEach(function(Ee,ge){rt.push(j.getMass(Ee)),J.push(j.nodeStrength(Ee)),j.degrees[ge]||(j.degrees[ge]=0);var Ot=[zt[0],zt[1],Jt];if(j.getCenter){var Xt=j.getCenter(Ee,j.degrees[ge]);Xt&&(0,N.isNumber)(Xt[0])&&(0,N.isNumber)(Xt[1])&&(0,N.isNumber)(Xt[2])&&(Ot=Xt)}ot.push(Ot[0]),vt.push(Ot[1]),gt.push(Ot[2]),(0,N.isNumber)(Ee.fx)&&(0,N.isNumber)(Ee.fy)?(Pt.push(Ee.fx||.001),It.push(Ee.fy||.001)):(Pt.push(0),It.push(0))}),kt=(0,E.arrayToTextureData)([rt,j.degrees,J,Pt]),$=(0,E.arrayToTextureData)([ot,vt,gt,It]),lt=j.workerEnabled,lt?St=D.World.create({canvas:O,engineOptions:{supportCompute:!0}}):St=D.World.create({engineOptions:{supportCompute:!0}}),Ut=j.onLayoutEnd,Ft=[],Q.forEach(function(Ee){Ft.push(Ee)}),ee=0;ee<4;ee++)Ft.push(0);return ve=St.createKernel(M.gForceBundle).setDispatch([Y,1,1]).setBinding({u_Data:Q,u_damping:j.damping,u_maxSpeed:j.maxSpeed,u_minMovement:j.minMovement,u_coulombDisScale:j.coulombDisScale,u_factor:j.factor,u_NodeAttributeArray1:kt,u_NodeAttributeArray2:$,MAX_EDGE_PER_VERTEX:K,VERTEX_COUNT:Y,u_AveMovement:Ft,u_interval:j.interval}),be=St.createKernel(M.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:Q,VERTEX_COUNT:Y,u_AveMovement:[0,0,0,0]}),Ht=function(){return X(Yt,void 0,void 0,function(){var Ee,ge,Ot;return k(this,function(Xt){switch(Xt.label){case 0:Ee=0,Xt.label=1;case 1:return Ee<it?[4,ve.execute()]:[3,5];case 2:return Xt.sent(),be.setBinding({u_Data:ve}),[4,be.execute()];case 3:Xt.sent(),ge=Math.max(.02,j.interval-Ee*.002),ve.setBinding({u_interval:ge,u_AveMovement:be}),Xt.label=4;case 4:return Ee++,[3,1];case 5:return[4,ve.getOutput()];case 6:return Ot=Xt.sent(),O?U.postMessage({type:_.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Ot}):x.forEach(function(ce,Lt){var Kt=Ot[4*Lt],pe=Ot[4*Lt+1];ce.x=Kt,ce.y=pe}),Ut&&Ut(),[2]}})})},[4,Ht()];case 1:return de.sent(),[2]}})})},A.prototype.getType=function(){return"gForce-gpu"},A}(P.Base);R.GForceGPULayout=m},549762:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.aveMovementBundle=R.aveMovementCode=R.gForceBundle=R.gForceCode=void 0,R.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,R.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',R.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,R.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},694414:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var N=function(D,E){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,M){y.__proto__=M}||function(y,M){for(var _ in M)Object.prototype.hasOwnProperty.call(M,_)&&(y[_]=M[_])},N(D,E)};return function(D,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");N(D,E);function y(){this.constructor=D}D.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.GridLayout=void 0;var X=z(449784),k=z(762329),P=function(N){B(D,N);function D(E){var y=N.call(this)||this;return y.begin=[0,0],y.preventOverlap=!0,y.preventOverlapPadding=10,y.condense=!1,y.sortBy="degree",y.nodes=[],y.edges=[],y.width=300,y.height=300,y.row=0,y.col=0,y.cellWidth=0,y.cellHeight=0,y.cellUsed={},y.id2manPos={},y.onLayoutEnd=function(){},y.updateCfg(E),y}return D.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},D.prototype.execute=function(){var E=this,y=E.nodes,M=E.edges,_=E.begin,m=y.length;if(m===0)return E.onLayoutEnd&&E.onLayoutEnd(),{nodes:y,edges:M};if(m===1)return y[0].x=_[0],y[0].y=_[1],E.onLayoutEnd&&E.onLayoutEnd(),{nodes:y,edges:M};var I=E.sortBy,A=E.width,O=E.height,U=E.condense,j=E.preventOverlapPadding,x=E.preventOverlap,d=E.nodeSpacing,it=E.nodeSize,Y=[];y.forEach(function(kt){Y.push(kt)});var W={};if(Y.forEach(function(kt,$){W[kt.id]=$}),(I==="degree"||!(0,X.isString)(I)||Y[0][I]===void 0)&&(I="degree",(0,X.isNaN)(y[0].degree))){var K=(0,X.getDegree)(Y.length,W,M);Y.forEach(function(kt,$){kt.degree=K[$].all})}Y.sort(function(kt,$){return $[I]-kt[I]}),!A&&typeof window!="undefined"&&(A=window.innerWidth),!O&&typeof window!="undefined"&&(O=window.innerHeight);var Q=E.rows,rt=E.cols!=null?E.cols:E.columns;if(E.cells=m,Q!=null&&rt!=null?(E.rows=Q,E.cols=rt):Q!=null&&rt==null?(E.rows=Q,E.cols=Math.ceil(E.cells/E.rows)):Q==null&&rt!=null?(E.cols=rt,E.rows=Math.ceil(E.cells/E.cols)):(E.splits=Math.sqrt(E.cells*E.height/E.width),E.rows=Math.round(E.splits),E.cols=Math.round(E.width/E.height*E.splits)),E.rows=Math.max(E.rows,1),E.cols=Math.max(E.cols,1),E.cols*E.rows>E.cells){var J=E.small(),ot=E.large();(J-1)*ot>=E.cells?E.small(J-1):(ot-1)*J>=E.cells&&E.large(ot-1)}else for(;E.cols*E.rows<E.cells;){var J=E.small(),ot=E.large();(ot+1)*J>=E.cells?E.large(ot+1):E.small(J+1)}if(E.cellWidth=A/E.cols,E.cellHeight=O/E.rows,U&&(E.cellWidth=0,E.cellHeight=0),x||d){var vt=(0,X.getFuncByUnknownType)(10,d),gt=(0,X.getFuncByUnknownType)(30,it,!1);Y.forEach(function(kt){(!kt.x||!kt.y)&&(kt.x=0,kt.y=0);var $=gt(kt)||30,lt,St;(0,X.isArray)($)?(lt=$[0],St=$[1]):(lt=$,St=$);var Ut=vt!==void 0?vt(kt):j,Ft=lt+Ut,ee=St+Ut;E.cellWidth=Math.max(E.cellWidth,Ft),E.cellHeight=Math.max(E.cellHeight,ee)})}E.cellUsed={},E.row=0,E.col=0,E.id2manPos={};for(var Pt=0;Pt<Y.length;Pt++){var It=Y[Pt],Jt=void 0;if(E.position&&(Jt=E.position(It)),Jt&&(Jt.row!==void 0||Jt.col!==void 0)){var zt={row:Jt.row,col:Jt.col};if(zt.col===void 0)for(zt.col=0;E.used(zt.row,zt.col);)zt.col++;else if(zt.row===void 0)for(zt.row=0;E.used(zt.row,zt.col);)zt.row++;E.id2manPos[It.id]=zt,E.use(zt.row,zt.col)}E.getPos(It)}return E.onLayoutEnd&&E.onLayoutEnd(),{edges:M,nodes:Y}},D.prototype.small=function(E){var y=this,M,_=y.rows||5,m=y.cols||5;if(E==null)M=Math.min(_,m);else{var I=Math.min(_,m);I===y.rows?y.rows=E:y.cols=E}return M},D.prototype.large=function(E){var y=this,M,_=y.rows||5,m=y.cols||5;if(E==null)M=Math.max(_,m);else{var I=Math.max(_,m);I===y.rows?y.rows=E:y.cols=E}return M},D.prototype.used=function(E,y){var M=this;return M.cellUsed["c-".concat(E,"-").concat(y)]||!1},D.prototype.use=function(E,y){var M=this;M.cellUsed["c-".concat(E,"-").concat(y)]=!0},D.prototype.moveToNextCell=function(){var E=this,y=E.cols||5;E.col++,E.col>=y&&(E.col=0,E.row++)},D.prototype.getPos=function(E){var y=this,M=y.begin,_=y.cellWidth,m=y.cellHeight,I,A,O=y.id2manPos[E.id];if(O)I=O.col*_+_/2+M[0],A=O.row*m+m/2+M[1];else{for(;y.used(y.row,y.col);)y.moveToNextCell();I=y.col*_+_/2+M[0],A=y.row*m+m/2+M[1],y.use(y.row,y.col),y.moveToNextCell()}E.x=I,E.y=A},D.prototype.getType=function(){return"grid"},D}(k.Base);R.GridLayout=P},702584:function(dr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(K,Q,rt,J){J===void 0&&(J=rt);var ot=Object.getOwnPropertyDescriptor(Q,rt);(!ot||("get"in ot?!Q.__esModule:ot.writable||ot.configurable))&&(ot={enumerable:!0,get:function(){return Q[rt]}}),Object.defineProperty(K,J,ot)}:function(K,Q,rt,J){J===void 0&&(J=rt),K[J]=Q[rt]}),X=this&&this.__exportStar||function(K,Q){for(var rt in K)rt!=="default"&&!Object.prototype.hasOwnProperty.call(Q,rt)&&B(Q,K,rt)};Object.defineProperty(R,"__esModule",{value:!0}),R.ERLayout=R.ForceAtlas2Layout=R.ComboCombinedLayout=R.ComboForceLayout=R.GForceGPULayout=R.FruchtermanGPULayout=R.FruchtermanLayout=R.MDSLayout=R.ConcentricLayout=R.RadialLayout=R.DagreCompoundLayout=R.DagreLayout=R.CircularLayout=R.ForceLayout=R.Force2Layout=R.GForceLayout=R.RandomLayout=R.GridLayout=R.Layouts=R.Layout=void 0;var k=z(694414);Object.defineProperty(R,"GridLayout",{enumerable:!0,get:function(){return k.GridLayout}});var P=z(539711);Object.defineProperty(R,"RandomLayout",{enumerable:!0,get:function(){return P.RandomLayout}});var N=z(113653);Object.defineProperty(R,"GForceLayout",{enumerable:!0,get:function(){return N.GForceLayout}});var D=z(306740);Object.defineProperty(R,"Force2Layout",{enumerable:!0,get:function(){return D.Force2Layout}});var E=z(885717);Object.defineProperty(R,"ForceLayout",{enumerable:!0,get:function(){return E.ForceLayout}});var y=z(964885);Object.defineProperty(R,"CircularLayout",{enumerable:!0,get:function(){return y.CircularLayout}});var M=z(920171);Object.defineProperty(R,"DagreLayout",{enumerable:!0,get:function(){return M.DagreLayout}});var _=z(177057);Object.defineProperty(R,"DagreCompoundLayout",{enumerable:!0,get:function(){return _.DagreCompoundLayout}});var m=z(847944);Object.defineProperty(R,"RadialLayout",{enumerable:!0,get:function(){return m.RadialLayout}});var I=z(843281);Object.defineProperty(R,"ConcentricLayout",{enumerable:!0,get:function(){return I.ConcentricLayout}});var A=z(352899);Object.defineProperty(R,"MDSLayout",{enumerable:!0,get:function(){return A.MDSLayout}});var O=z(880374);Object.defineProperty(R,"FruchtermanLayout",{enumerable:!0,get:function(){return O.FruchtermanLayout}});var U=z(687745);Object.defineProperty(R,"FruchtermanGPULayout",{enumerable:!0,get:function(){return U.FruchtermanGPULayout}});var j=z(785194);Object.defineProperty(R,"GForceGPULayout",{enumerable:!0,get:function(){return j.GForceGPULayout}});var x=z(366590);Object.defineProperty(R,"ComboForceLayout",{enumerable:!0,get:function(){return x.ComboForceLayout}});var d=z(263861);Object.defineProperty(R,"ComboCombinedLayout",{enumerable:!0,get:function(){return d.ComboCombinedLayout}});var it=z(148564);Object.defineProperty(R,"ForceAtlas2Layout",{enumerable:!0,get:function(){return it.ForceAtlas2Layout}});var Y=z(290441);Object.defineProperty(R,"ERLayout",{enumerable:!0,get:function(){return Y.ERLayout}});var W=z(842875);Object.defineProperty(R,"Layout",{enumerable:!0,get:function(){return W.Layout}}),Object.defineProperty(R,"Layouts",{enumerable:!0,get:function(){return W.Layouts}}),X(z(932867),R)},842875:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Layouts=R.Layout=void 0;var B=z(695326),X=z(694414),k=z(539711),P=z(306740),N=z(113653),D=z(885717),E=z(964885),y=z(920171),M=z(847944),_=z(843281),m=z(352899),I=z(880374),A=z(687745),O=z(785194),U=z(366590),j=z(263861),x=z(148564),d=z(290441),it=z(177057),Y=z(449784),W=function(){function K(Q){var rt=(0,B.getLayoutByName)(Q.type);this.layoutInstance=new rt(Q)}return K.prototype.layout=function(Q){return this.layoutInstance.layout(Q)},K.prototype.updateCfg=function(Q){this.layoutInstance.updateCfg(Q)},K.prototype.init=function(Q){this.correctLayers(Q.nodes),this.layoutInstance.init(Q)},K.prototype.correctLayers=function(Q){if(Q!=null&&Q.length){var rt=1/0,J=[];if(Q.forEach(function(vt){(0,Y.isString)(vt.layer)&&(vt.layer=parseInt(vt.layer,10)),!(vt.layer===void 0||isNaN(vt.layer))&&(J.push(vt),vt.layer<rt&&(rt=vt.layer))}),rt<=0){var ot=Math.abs(rt)+1;J.forEach(function(vt){return vt.layer+=ot})}}},K.prototype.execute=function(){this.layoutInstance.execute()},K.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},K.prototype.destroy=function(){return this.layoutInstance.destroy()},K}();R.Layout=W,R.Layouts={force:D.ForceLayout,fruchterman:I.FruchtermanLayout,forceAtlas2:x.ForceAtlas2Layout,gForce:N.GForceLayout,force2:P.Force2Layout,dagre:y.DagreLayout,dagreCompound:it.DagreCompoundLayout,circular:E.CircularLayout,radial:M.RadialLayout,concentric:_.ConcentricLayout,grid:X.GridLayout,mds:m.MDSLayout,comboForce:U.ComboForceLayout,comboCombined:j.ComboCombinedLayout,random:k.RandomLayout,"gForce-gpu":O.GForceGPULayout,"fruchterman-gpu":A.FruchtermanGPULayout,er:d.ERLayout}},352899:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var D=function(E,y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,_){M.__proto__=_}||function(M,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(M[m]=_[m])},D(E,y)};return function(E,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");D(E,y);function M(){this.constructor=E}E.prototype=y===null?Object.create(y):(M.prototype=y.prototype,new M)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.MDSLayout=void 0;var X=z(249612),k=z(449784),P=z(762329),N=function(D){B(E,D);function E(y){var M=D.call(this)||this;return M.center=[0,0],M.linkDistance=50,M.nodes=[],M.edges=[],M.onLayoutEnd=function(){},M.updateCfg(y),M}return E.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},E.prototype.execute=function(){var y=this,M=y.nodes,_=y.edges,m=_===void 0?[]:_,I=y.center;if(!M||M.length===0){y.onLayoutEnd&&y.onLayoutEnd();return}if(M.length===1){M[0].x=I[0],M[0].y=I[1],y.onLayoutEnd&&y.onLayoutEnd();return}var A=y.linkDistance,O=(0,k.getAdjMatrix)({nodes:M,edges:m},!1),U=(0,k.floydWarshall)(O);y.handleInfinity(U);var j=(0,k.scaleMatrix)(U,A);y.scaledDistances=j;var x=y.runMDS();return y.positions=x,x.forEach(function(d,it){M[it].x=d[0]+I[0],M[it].y=d[1]+I[1]}),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:M,edges:m}},E.prototype.runMDS=function(){var y=this,M=2,_=y.scaledDistances,m=X.Matrix.mul(X.Matrix.pow(_,2),-.5),I=m.mean("row"),A=m.mean("column"),O=m.mean();m.add(O).subRowVector(I).subColumnVector(A);var U=new X.SingularValueDecomposition(m),j=X.Matrix.sqrt(U.diagonalMatrix).diagonal();return U.leftSingularVectors.toJSON().map(function(x){return X.Matrix.mul([x],[j]).toJSON()[0].splice(0,M)})},E.prototype.handleInfinity=function(y){var M=-999999;y.forEach(function(_){_.forEach(function(m){m!==1/0&&M<m&&(M=m)})}),y.forEach(function(_,m){_.forEach(function(I,A){I===1/0&&(y[m][A]=M)})})},E.prototype.getType=function(){return"mds"},E}(P.Base);R.MDSLayout=N},847944:function(dr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(k,P,N,D){D===void 0&&(D=N);var E=Object.getOwnPropertyDescriptor(P,N);(!E||("get"in E?!P.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return P[N]}}),Object.defineProperty(k,D,E)}:function(k,P,N,D){D===void 0&&(D=N),k[D]=P[N]}),X=this&&this.__exportStar||function(k,P){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(P,N)&&B(P,k,N)};Object.defineProperty(R,"__esModule",{value:!0}),X(z(255974),R)},366082:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=z(249612),X=function(){function k(P){this.distances=P.distances,this.dimension=P.dimension||2,this.linkDistance=P.linkDistance}return k.prototype.layout=function(){var P=this,N=P.dimension,D=P.distances,E=P.linkDistance;try{var y=B.Matrix.mul(B.Matrix.pow(D,2),-.5),M=y.mean("row"),_=y.mean("column"),m=y.mean();y.add(m).subRowVector(M).subColumnVector(_);var I=new B.SingularValueDecomposition(y),A=B.Matrix.sqrt(I.diagonalMatrix).diagonal();return I.leftSingularVectors.toJSON().map(function(d){return B.Matrix.mul([d],[A]).toJSON()[0].splice(0,N)})}catch(d){for(var O=[],U=0;U<D.length;U++){var j=Math.random()*E,x=Math.random()*E;O.push([j,x])}return O}},k}();R.default=X},255974:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var m=function(I,A){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,U){O.__proto__=U}||function(O,U){for(var j in U)Object.prototype.hasOwnProperty.call(U,j)&&(O[j]=U[j])},m(I,A)};return function(I,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");m(I,A);function O(){this.constructor=I}I.prototype=A===null?Object.create(A):(O.prototype=A.prototype,new O)}}(),X=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(R,"__esModule",{value:!0}),R.RadialLayout=void 0;var k=z(449784),P=z(762329),N=X(z(366082)),D=X(z(706290));function E(m){for(var I=m.length,A=m[0].length,O=[],U=0;U<I;U++){for(var j=[],x=0;x<A;x++)m[U][x]!==0?j.push(1/(m[U][x]*m[U][x])):j.push(0);O.push(j)}return O}function y(m,I){var A=-1;return m.forEach(function(O,U){O.id===I&&(A=U)}),A}function M(m,I){return Math.sqrt((m[0]-I[0])*(m[0]-I[0])+(m[1]-I[1])*(m[1]-I[1]))}var _=function(m){B(I,m);function I(A){var O=m.call(this)||this;return O.maxIteration=1e3,O.focusNode=null,O.unitRadius=null,O.linkDistance=50,O.preventOverlap=!1,O.strictRadial=!0,O.maxPreventOverlapIteration=200,O.sortStrength=10,O.nodes=[],O.edges=[],O.updateCfg(A),O}return I.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10,initWithMDS:!0}},I.prototype.execute=function(){var A=this,O=A.nodes,U=A.edges||[];if(!O||O.length===0){A.onLayoutEnd&&A.onLayoutEnd();return}!A.width&&typeof window!="undefined"&&(A.width=window.innerWidth),!A.height&&typeof window!="undefined"&&(A.height=window.innerHeight),A.center||(A.center=[A.width/2,A.height/2]);var j=A.center;if(O.length===1){O[0].x=j[0],O[0].y=j[1],A.onLayoutEnd&&A.onLayoutEnd();return}var x=A.linkDistance,d=null;if((0,k.isString)(A.focusNode)){for(var it=!1,Y=0;Y<O.length;Y++)O[Y].id===A.focusNode&&(d=O[Y],A.focusNode=d,it=!0,Y=O.length);it||(d=null)}else d=A.focusNode;d||(d=O[0],A.focusNode=d);var W=y(O,d.id);W<0&&(W=0),A.focusIndex=W;var K=(0,k.getAdjMatrix)({nodes:O,edges:U},!1),Q=(0,k.floydWarshall)(K),rt=A.maxToFocus(Q,W);A.handleInfinity(Q,W,rt+1),A.distances=Q;var J=Q[W],ot=A.width||500,vt=A.height||500,gt=ot-j[0]>j[0]?j[0]:ot-j[0],Pt=vt-j[1]>j[1]?j[1]:vt-j[1];gt===0&&(gt=ot/2),Pt===0&&(Pt=vt/2);var It=Pt>gt?gt:Pt,Jt=Math.max.apply(Math,J),zt=[];J.forEach(function(Ee,ge){A.unitRadius||(A.unitRadius=It/Jt),zt[ge]=Ee*A.unitRadius}),A.radii=zt;var kt=A.eIdealDisMatrix();A.eIdealDistances=kt;var $=E(kt);if(A.weights=$,A.initWithMDS){var lt=new N.default({linkDistance:x,distances:kt}),St=lt.layout();St.forEach(function(Ee){(0,k.isNaN)(Ee[0])&&(Ee[0]=Math.random()*x),(0,k.isNaN)(Ee[1])&&(Ee[1]=Math.random()*x)}),A.positions=St}else A.positions=O.map(function(Ee,ge){return[(Math.random()-.5)*kt[ge][W],(Math.random()-.5)*kt[ge][W]]});A.positions.forEach(function(Ee,ge){O[ge].x=Ee[0]+j[0],O[ge].y=Ee[1]+j[1]}),A.positions.forEach(function(Ee){Ee[0]-=A.positions[W][0],Ee[1]-=A.positions[W][1]}),A.run();var Ut=A.preventOverlap,Ft=A.nodeSize,ee,ve=A.strictRadial;if(Ut){var be=A.nodeSpacing,Ht;(0,k.isNumber)(be)?Ht=function(){return be}:(0,k.isFunction)(be)?Ht=be:Ht=function(){return 0},Ft?(0,k.isArray)(Ft)?ee=function(Ee){var ge=Ft[0]>Ft[1]?Ft[0]:Ft[1];return ge+Ht(Ee)}:ee=function(Ee){return Ft+Ht(Ee)}:ee=function(Ee){if(Ee.size){if((0,k.isArray)(Ee.size)){var ge=Ee.size[0]>Ee.size[1]?Ee.size[0]:Ee.size[1];return ge+Ht(Ee)}if((0,k.isObject)(Ee.size)){var ge=Ee.size.width>Ee.size.height?Ee.size.width:Ee.size.height;return ge+Ht(Ee)}return Ee.size+Ht(Ee)}return 10+Ht(Ee)};var Yt={nodes:O,nodeSizeFunc:ee,adjMatrix:K,positions:A.positions,radii:zt,height:vt,width:ot,strictRadial:ve,focusID:W,iterations:A.maxPreventOverlapIteration||200,k:A.positions.length/4.5},de=new D.default(Yt);A.positions=de.layout()}return A.positions.forEach(function(Ee,ge){O[ge].x=Ee[0]+j[0],O[ge].y=Ee[1]+j[1]}),A.onLayoutEnd&&A.onLayoutEnd(),{nodes:O,edges:U}},I.prototype.run=function(){for(var A=this,O=A.maxIteration,U=A.positions||[],j=A.weights||[],x=A.eIdealDistances||[],d=A.radii||[],it=0;it<=O;it++){var Y=it/O;A.oneIteration(Y,U,d,x,j)}},I.prototype.oneIteration=function(A,O,U,j,x){var d=this,it=1-A,Y=d.focusIndex;O.forEach(function(W,K){var Q=M(W,[0,0]),rt=Q===0?0:1/Q;if(K!==Y){var J=0,ot=0,vt=0;O.forEach(function(Pt,It){if(K!==It){var Jt=M(W,Pt),zt=Jt===0?0:1/Jt,kt=j[It][K];vt+=x[K][It],J+=x[K][It]*(Pt[0]+kt*(W[0]-Pt[0])*zt),ot+=x[K][It]*(Pt[1]+kt*(W[1]-Pt[1])*zt)}});var gt=U[K]===0?0:1/U[K];vt*=it,vt+=A*gt*gt,J*=it,J+=A*gt*W[0]*rt,W[0]=J/vt,ot*=it,ot+=A*gt*W[1]*rt,W[1]=ot/vt}})},I.prototype.eIdealDisMatrix=function(){var A=this,O=A.nodes;if(!O)return[];var U=A.distances,j=A.linkDistance,x=A.radii||[],d=A.unitRadius||50,it=[];return U&&U.forEach(function(Y,W){var K=[];Y.forEach(function(Q,rt){if(W===rt)K.push(0);else if(x[W]===x[rt])if(A.sortBy==="data")K.push(Q*(Math.abs(W-rt)*A.sortStrength)/(x[W]/d));else if(A.sortBy){var J=O[W][A.sortBy]||0,ot=O[rt][A.sortBy]||0;(0,k.isString)(J)&&(J=J.charCodeAt(0)),(0,k.isString)(ot)&&(ot=ot.charCodeAt(0)),K.push(Q*(Math.abs(J-ot)*A.sortStrength)/(x[W]/d))}else K.push(Q*j/(x[W]/d));else{var vt=(j+d)/2;K.push(Q*vt)}}),it.push(K)}),it},I.prototype.handleInfinity=function(A,O,U){for(var j=A.length,x=0;x<j;x++)if(A[O][x]===1/0){A[O][x]=U,A[x][O]=U;for(var d=0;d<j;d++)A[x][d]!==1/0&&A[O][d]===1/0&&(A[O][d]=U+A[x][d],A[d][O]=U+A[x][d])}for(var x=0;x<j;x++)if(x!==O){for(var d=0;d<j;d++)if(A[x][d]===1/0){var it=Math.abs(A[O][x]-A[O][d]);it=it===0?1:it,A[x][d]=it}}},I.prototype.maxToFocus=function(A,O){for(var U=0,j=0;j<A[O].length;j++)A[O][j]!==1/0&&(U=A[O][j]>U?A[O][j]:U);return U},I.prototype.getType=function(){return"radial"},I}(P.Base);R.RadialLayout=_},706290:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var z=800,B=function(){function X(k){this.disp=[],this.positions=k.positions,this.adjMatrix=k.adjMatrix,this.focusID=k.focusID,this.radii=k.radii,this.iterations=k.iterations||10,this.height=k.height||10,this.width=k.width||10,this.speed=k.speed||100,this.gravity=k.gravity||10,this.nodeSizeFunc=k.nodeSizeFunc,this.k=k.k||5,this.strictRadial=k.strictRadial,this.nodes=k.nodes}return X.prototype.layout=function(){var k=this,P=k.positions,N=[],D=k.iterations,E=k.width/10;k.maxDisplace=E,k.disp=N;for(var y=0;y<D;y++)P.forEach(function(M,_){N[_]={x:0,y:0}}),k.getRepulsion(),k.updatePositions();return P},X.prototype.getRepulsion=function(){var k=this,P=k.positions,N=k.nodes,D=k.disp,E=k.k,y=k.radii||[];P.forEach(function(M,_){D[_]={x:0,y:0},P.forEach(function(m,I){if(_!==I&&y[_]===y[I]){var A=M[0]-m[0],O=M[1]-m[1],U=Math.sqrt(A*A+O*O);if(U===0){U=1;var j=_>I?1:-1;A=.01*j,O=.01*j}if(U<k.nodeSizeFunc(N[_])/2+k.nodeSizeFunc(N[I])/2){var x=E*E/U;D[_].x+=A/U*x,D[_].y+=O/U*x}}})})},X.prototype.updatePositions=function(){var k=this,P=k.positions,N=k.disp,D=k.speed,E=k.strictRadial,y=k.focusID,M=k.maxDisplace||k.width/10;E&&N.forEach(function(m,I){var A=P[I][0]-P[y][0],O=P[I][1]-P[y][1],U=Math.sqrt(A*A+O*O),j=O/U,x=-A/U,d=Math.sqrt(m.x*m.x+m.y*m.y),it=Math.acos((j*m.x+x*m.y)/d);it>Math.PI/2&&(it-=Math.PI/2,j*=-1,x*=-1);var Y=Math.cos(it)*d;m.x=j*Y,m.y=x*Y});var _=k.radii;P.forEach(function(m,I){if(I!==y){var A=Math.sqrt(N[I].x*N[I].x+N[I].y*N[I].y);if(A>0&&I!==y){var O=Math.min(M*(D/z),A);if(m[0]+=N[I].x/A*O,m[1]+=N[I].y/A*O,E){var U=m[0]-P[y][0],j=m[1]-P[y][1],x=Math.sqrt(U*U+j*j);U=U/x*_[I],j=j/x*_[I],m[0]=P[y][0]+U,m[1]=P[y][1]+j}}}})},X}();R.default=B},539711:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var P=function(N,D){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,y){E.__proto__=y}||function(E,y){for(var M in y)Object.prototype.hasOwnProperty.call(y,M)&&(E[M]=y[M])},P(N,D)};return function(N,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");P(N,D);function E(){this.constructor=N}N.prototype=D===null?Object.create(D):(E.prototype=D.prototype,new E)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.RandomLayout=void 0;var X=z(762329),k=function(P){B(N,P);function N(D){var E=P.call(this)||this;return E.center=[0,0],E.width=300,E.height=300,E.nodes=[],E.edges=[],E.onLayoutEnd=function(){},E.updateCfg(D),E}return N.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},N.prototype.execute=function(){var D=this,E=D.nodes,y=.9,M=D.center;return!D.width&&typeof window!="undefined"&&(D.width=window.innerWidth),!D.height&&typeof window!="undefined"&&(D.height=window.innerHeight),E&&E.forEach(function(_){_.x=(Math.random()-.5)*y*D.width+M[0],_.y=(Math.random()-.5)*y*D.height+M[1]}),D.onLayoutEnd&&D.onLayoutEnd(),{nodes:E,edges:this.edges}},N.prototype.getType=function(){return"random"},N}(X.Base);R.RandomLayout=k},932867:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0})},695326:function(dr,R,z){"use strict";var B=this&&this.__extends||function(){var y=function(M,_){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,I){m.__proto__=I}||function(m,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(m[A]=I[A])},y(M,_)};return function(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");y(M,_);function m(){this.constructor=M}M.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.getLayoutByName=R.unRegisterLayout=R.registerLayout=void 0;var X=z(762329),k=z(449784),P=new Map,N=function(y,M){if(P.get(y)&&console.warn("The layout with the name ".concat(y," exists already, it will be overridden")),(0,k.isObject)(M)){var _=function(m){B(I,m);function I(A){var O=this,U;O=m.call(this)||this;var j=O,x={},d=Object.assign({},j.getDefaultCfg(),((U=M.getDefaultCfg)===null||U===void 0?void 0:U.call(M))||{});return Object.assign(x,d,M,A),Object.keys(x).forEach(function(it){var Y=x[it];j[it]=Y}),O}return I}(X.Base);P.set(y,_)}else P.set(y,M);return P.get(y)};R.registerLayout=N;var D=function(y){P.has(y)&&P.delete(y)};R.unRegisterLayout=D;var E=function(y){return P.has(y)?P.get(y):null};R.getLayoutByName=E},185087:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.isArray=void 0,R.isArray=Array.isArray},578732:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getFuncByUnknownType=R.getFunc=R.isFunction=void 0;var B=z(449784),X=z(330627),k=function(D){return typeof D=="function"};R.isFunction=k;var P=function(D,E,y){var M;return y?M=y:(0,X.isNumber)(D)?M=function(){return D}:M=function(){return E},M};R.getFunc=P;var N=function(D,E,y){return y===void 0&&(y=!0),!E&&E!==0?function(M){return M.size?(0,B.isArray)(M.size)?M.size[0]>M.size[1]?M.size[0]:M.size[1]:(0,B.isObject)(M.size)?M.size.width>M.size.height?M.size.width:M.size.height:M.size:D}:(0,R.isFunction)(E)?E:(0,X.isNumber)(E)?function(){return E}:(0,B.isArray)(E)?function(){if(y){var M=Math.max.apply(Math,E);return isNaN(M)?D:M}return E}:(0,B.isObject)(E)?function(){if(y){var M=Math.max(E.width,E.height);return isNaN(M)?D:M}return[E.width,E.height]}:function(){return D}};R.getFuncByUnknownType=N},248835:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.arrayToTextureData=R.attributesToTextureData=R.buildTextureDataWithTwoEdgeAttr=R.buildTextureData=R.proccessToFunc=void 0;var B=z(449784),X=z(280628),k=function(y,M){var _;return y?(0,B.isNumber)(y)?_=function(){return y}:_=y:_=function(){return M||1},_};R.proccessToFunc=k;var P=function(y,M){var _=[],m=[],I={},A=0;for(A=0;A<y.length;A++){var O=y[A];I[O.id]=A,_.push(O.x),_.push(O.y),_.push(0),_.push(0),m.push([])}for(A=0;A<M.length;A++){var U=M[A],j=(0,X.getEdgeTerminal)(U,"source"),x=(0,X.getEdgeTerminal)(U,"target");!isNaN(I[j])&&!isNaN(I[x])&&(m[I[j]].push(I[x]),m[I[x]].push(I[j]))}var d=0;for(A=0;A<y.length;A++){var it=_.length,Y=m[A],W=Y.length;_[A*4+2]=it,_[A*4+3]=W,d=Math.max(d,W);for(var K=0;K<W;++K){var Q=Y[K];_.push(+Q)}}for(;_.length%4!==0;)_.push(0);return{maxEdgePerVetex:d,array:new Float32Array(_)}};R.buildTextureData=P;var N=function(y,M,_,m){var I=[],A=[],O={},U=0;for(U=0;U<y.length;U++){var j=y[U];O[j.id]=U,I.push(j.x),I.push(j.y),I.push(0),I.push(0),A.push([])}for(U=0;U<M.length;U++){var x=M[U],d=(0,X.getEdgeTerminal)(x,"source"),it=(0,X.getEdgeTerminal)(x,"target");A[O[d]].push(O[it]),A[O[d]].push(_(x)),A[O[d]].push(m(x)),A[O[d]].push(0),A[O[it]].push(O[d]),A[O[it]].push(_(x)),A[O[it]].push(m(x)),A[O[it]].push(0)}var Y=0;for(U=0;U<y.length;U++){var W=I.length,K=A[U],Q=K.length;I[U*4+2]=W+1048576*Q/4,I[U*4+3]=0,Y=Math.max(Y,Q/4);for(var rt=0;rt<Q;++rt){var J=K[rt];I.push(+J)}}for(;I.length%4!==0;)I.push(0);return{maxEdgePerVetex:Y,array:new Float32Array(I)}};R.buildTextureDataWithTwoEdgeAttr=N;var D=function(y,M){var _=[],m=y.length,I={};return M.forEach(function(A){y.forEach(function(O,U){if(I[A[O]]===void 0&&(I[A[O]]=Object.keys(I).length),_.push(I[A[O]]),U===m-1)for(;_.length%4!==0;)_.push(0)})}),{array:new Float32Array(_),count:Object.keys(I).length}};R.attributesToTextureData=D;var E=function(y){for(var M=[],_=y.length,m=y[0].length,I=function(O){y.forEach(function(U,j){if(M.push(U[O]),j===_-1)for(;M.length%4!==0;)M.push(0)})},A=0;A<m;A++)I(A);return new Float32Array(M)};R.arrayToTextureData=E},449784:function(dr,R,z){"use strict";var B=this&&this.__createBinding||(Object.create?function(k,P,N,D){D===void 0&&(D=N);var E=Object.getOwnPropertyDescriptor(P,N);(!E||("get"in E?!P.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return P[N]}}),Object.defineProperty(k,D,E)}:function(k,P,N,D){D===void 0&&(D=N),k[D]=P[N]}),X=this&&this.__exportStar||function(k,P){for(var N in k)N!=="default"&&!Object.prototype.hasOwnProperty.call(P,N)&&B(P,k,N)};Object.defineProperty(R,"__esModule",{value:!0}),X(z(708055),R),X(z(185087),R),X(z(330627),R),X(z(280628),R),X(z(898130),R),X(z(578732),R)},280628:function(dr,R,z){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getCoreNodeAndRelativeLeafNodes=R.getAvgNodePosition=R.getLayoutBBox=R.traverseTreeUp=R.scaleMatrix=R.getAdjMatrix=R.floydWarshall=R.getDegreeMap=R.getDegree=R.getEdgeTerminal=void 0;var B=z(185087),X=z(330627),k=z(898130),P=function(d,it){var Y=d[it];return(0,k.isObject)(Y)?Y.cell:Y};R.getEdgeTerminal=P;var N=function(d,it,Y){for(var W=[],K=0;K<d;K++)W[K]={in:0,out:0,all:0};return Y&&Y.forEach(function(Q){var rt=(0,R.getEdgeTerminal)(Q,"source"),J=(0,R.getEdgeTerminal)(Q,"target");rt&&W[it[rt]]&&(W[it[rt]].out+=1,W[it[rt]].all+=1),J&&W[it[J]]&&(W[it[J]].in+=1,W[it[J]].all+=1)}),W};R.getDegree=N;var D=function(d,it){var Y={};return d.forEach(function(W){Y[W.id]={in:0,out:0,all:0}}),it&&it.forEach(function(W){var K=(0,R.getEdgeTerminal)(W,"source"),Q=(0,R.getEdgeTerminal)(W,"target");K&&(Y[K].out+=1,Y[K].all+=1),Q&&(Y[Q].in+=1,Y[Q].all+=1)}),Y};R.getDegreeMap=D;var E=function(d){for(var it=[],Y=d.length,W=0;W<Y;W+=1){it[W]=[];for(var K=0;K<Y;K+=1)W===K?it[W][K]=0:d[W][K]===0||!d[W][K]?it[W][K]=1/0:it[W][K]=d[W][K]}for(var Q=0;Q<Y;Q+=1)for(var W=0;W<Y;W+=1)for(var K=0;K<Y;K+=1)it[W][K]>it[W][Q]+it[Q][K]&&(it[W][K]=it[W][Q]+it[Q][K]);return it};R.floydWarshall=E;var y=function(d,it){var Y=d.nodes,W=d.edges,K=[],Q={};if(!Y)throw new Error("invalid nodes data!");return Y&&Y.forEach(function(rt,J){Q[rt.id]=J;var ot=[];K.push(ot)}),W==null||W.forEach(function(rt){var J=(0,R.getEdgeTerminal)(rt,"source"),ot=(0,R.getEdgeTerminal)(rt,"target"),vt=Q[J],gt=Q[ot];vt===void 0||gt===void 0||(K[vt][gt]=1,it||(K[gt][vt]=1))}),K};R.getAdjMatrix=y;var M=function(d,it){var Y=[];return d.forEach(function(W){var K=[];W.forEach(function(Q){K.push(Q*it)}),Y.push(K)}),Y};R.scaleMatrix=M;var _=function(d,it){if(d&&d.children){for(var Y=d.children.length-1;Y>=0;Y--)if(!_(d.children[Y],it))return}return!!it(d)},m=function(d,it){typeof it=="function"&&_(d,it)};R.traverseTreeUp=m;var I=function(d){var it=1/0,Y=1/0,W=-1/0,K=-1/0;return d.forEach(function(Q){var rt=Q.size;(0,B.isArray)(rt)?rt.length===1&&(rt=[rt[0],rt[0]]):(0,X.isNumber)(rt)?rt=[rt,rt]:(rt===void 0||isNaN(rt))&&(rt=[30,30]);var J=[rt[0]/2,rt[1]/2],ot=Q.x-J[0],vt=Q.x+J[0],gt=Q.y-J[1],Pt=Q.y+J[1];it>ot&&(it=ot),Y>gt&&(Y=gt),W<vt&&(W=vt),K<Pt&&(K=Pt)}),{minX:it,minY:Y,maxX:W,maxY:K}};R.getLayoutBBox=I;var A=function(d){var it={x:0,y:0};d.forEach(function(W){it.x+=W.x||0,it.y+=W.y||0});var Y=d.length||1;return{x:it.x/Y,y:it.y/Y}};R.getAvgNodePosition=A;var O=function(d,it,Y){var W,K;return d==="source"?((W=Y==null?void 0:Y.find(function(Q){return Q.target===it.id}))===null||W===void 0?void 0:W.source)||{}:((K=Y==null?void 0:Y.find(function(Q){return Q.source===it.id}))===null||K===void 0?void 0:K.target)||{}},U=function(d,it,Y){var W=[];switch(d){case"source":W=Y==null?void 0:Y.filter(function(Q){return Q.source===it.id}).map(function(Q){return Q.target});break;case"target":W=Y==null?void 0:Y.filter(function(Q){return Q.target===it.id}).map(function(Q){return Q.source});break;case"both":W=Y==null?void 0:Y.filter(function(Q){return Q.source===it.id}).map(function(Q){return Q.target}).concat(Y==null?void 0:Y.filter(function(Q){return Q.target===it.id}).map(function(Q){return Q.source}));break;default:break}var K=new Set(W);return Array.from(K)},j=function(d,it,Y,W,K){var Q=Y[it]||"",rt=(W==null?void 0:W.filter(function(J){return J[it]===Q}))||[];return d==="leaf"&&(rt=rt.filter(function(J){var ot,vt;return((ot=K[J.id])===null||ot===void 0?void 0:ot.in)===0||((vt=K[J.id])===null||vt===void 0?void 0:vt.out)===0})),rt},x=function(d,it,Y,W,K,Q){var rt=K[it.id],J=rt.in,ot=rt.out,vt=it,gt=[];J===0?(vt=O("source",it,Y),gt=U("both",vt,Y).map(function(It){return Q[It]})):ot===0&&(vt=O("target",it,Y),gt=U("both",vt,Y).map(function(It){return Q[It]})),gt=gt.filter(function(It){return K[It.id]&&(K[It.id].in===0||K[It.id].out===0)});var Pt=j(d,W,it,gt,K);return{coreNode:vt,relativeLeafNodes:gt,sameTypeLeafNodes:Pt}};R.getCoreNodeAndRelativeLeafNodes=x},330627:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.toNumber=R.isNaN=R.isNumber=void 0;var z=function(k){return typeof k=="number"};R.isNumber=z;var B=function(k){return Number.isNaN(Number(k))};R.isNaN=B;var X=function(k){var P=parseFloat(k);return(0,R.isNaN)(P)?k:P};R.toNumber=X},898130:function(dr,R){"use strict";var z=this&&this.__assign||function(){return z=Object.assign||function(k){for(var P,N=1,D=arguments.length;N<D;N++){P=arguments[N];for(var E in P)Object.prototype.hasOwnProperty.call(P,E)&&(k[E]=P[E])}return k},z.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.clone=R.isObject=void 0;var B=function(k){return k!==null&&typeof k=="object"};R.isObject=B;var X=function(k){if(k===null)return k;if(k instanceof Date)return new Date(k.getTime());if(k instanceof Array){var P=[];return k.forEach(function(D){P.push(D)}),P.map(function(D){return(0,R.clone)(D)})}if(typeof k=="object"&&Object.keys(k).length){var N=z({},k);return Object.keys(N).forEach(function(D){N[D]=(0,R.clone)(N[D])}),N}return k};R.clone=X},708055:function(dr,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.camelize=R.isString=void 0;var z=function(k){return typeof k=="string"};R.isString=z;var B=function(k){var P=Object.create(null);return function(N){var D=P[N];return D||(P[N]=k(N))}},X=/-(\w)/g;R.camelize=B(function(k){return k.replace(X,function(P,N){return N?N.toUpperCase():""})})},772549:function(dr,R,z){"use strict";z.r(R),z.d(R,{Cache:function(){return lf},angleTo:function(){return gt},arcToCubic:function(){return Vt},assign:function(){return lr},augment:function(){return Vr},clamp:function(){return wo},clearAnimationFrame:function(){return hr},clone:function(){return ln},clonePath:function(){return ea},contains:function(){return Rt},createDOM:function(){return zu},debounce:function(){return pa},deepMix:function(){return Ci},difference:function(){return yr},direction:function(){return vt},distanceSquareRoot:function(){return Zn},each:function(){return va},endsWith:function(){return Po},equalizeSegments:function(){return V},every:function(){return Vo},extend:function(){return Ti},filter:function(){return me},find:function(){return fe},findIndex:function(){return Me},firstValue:function(){return nr},fixedBase:function(){return vo},flatten:function(){return jr},flattenDeep:function(){return An},forIn:function(){return Tt},get:function(){return _c},getDrawDirection:function(){return Ca},getPathArea:function(){return In},getPathBBox:function(){return ba},getPathBBoxTotalLength:function(){return Pa},getPointAtLength:function(){return q},getRange:function(){return hi},getRotatedCurve:function(){return na},getTotalLength:function(){return ma},getType:function(){return Ks},getWrapBehavior:function(){return Ro},gradient:function(){return O},group:function(){return ko},groupBy:function(){return ni},groupToMap:function(){return ho},has:function(){return qt},hasKey:function(){return Fe},hasValue:function(){return Jr},head:function(){return Pn},identity:function(){return cn},includes:function(){return Rt},indexOf:function(){return Bi},isArguments:function(){return Ls},isArray:function(){return mr},isArrayLike:function(){return Ct},isBoolean:function(){return ds},isDate:function(){return sf},isDecimal:function(){return oo},isElement:function(){return Ie},isEmpty:function(){return ii},isEqual:function(){return Es},isEqualWith:function(){return Fo},isError:function(){return Nf},isEven:function(){return $i},isFinite:function(){return Ds},isFunction:function(){return N},isInteger:function(){return So},isMatch:function(){return Fa},isNegative:function(){return go},isNil:function(){return gr},isNull:function(){return h},isNumber:function(){return Va},isNumberEqual:function(){return ru},isObject:function(){return $r},isObjectLike:function(){return Kr},isOdd:function(){return ci},isPlainObject:function(){return _e},isPointInPolygon:function(){return su},isPointInStroke:function(){return L},isPolygonsIntersect:function(){return bi},isPositive:function(){return Fu},isPrototype:function(){return Et},isRegExp:function(){return Zt},isString:function(){return Ui},isType:function(){return or},isUndefined:function(){return ue},keys:function(){return Mn},last:function(){return Co},lowerCase:function(){return ai},lowerFirst:function(){return so},map:function(){return kf},mapValues:function(){return Sc},max:function(){return Fn},maxBy:function(){return po},memoize:function(){return D},min:function(){return da},minBy:function(){return Bs},mix:function(){return lr},mod:function(){return $o},modifyCSS:function(){return Ss},noop:function(){return Cc},normalizePath:function(){return We},number2color:function(){return Ts},omit:function(){return uf},parseRadius:function(){return Xi},path2Absolute:function(){return Kt},path2Curve:function(){return Yn},path2String:function(){return Jt},pick:function(){return Mc},pull:function(){return xi},pullAt:function(){return Eo},reduce:function(){return Zi},remove:function(){return zi},requestAnimationFrame:function(){return Xe},reverseCurve:function(){return Nn},rgb2arr:function(){return B},set:function(){return Rf},size:function(){return wu},some:function(){return bs},sortBy:function(){return Cs},startsWith:function(){return Wi},substitute:function(){return xu},throttle:function(){return ff},toArray:function(){return Ac},toCSSGradient:function(){return it},toDegree:function(){return qo},toInteger:function(){return hs},toRGB:function(){return m},toRadian:function(){return vs},toString:function(){return nn},transform:function(){return J},union:function(){return Do},uniq:function(){return Yo},uniqueId:function(){return ou},upperCase:function(){return yo},upperFirst:function(){return Gu},values:function(){return Sr},valuesOfKey:function(){return js},vertical:function(){return Pt},wrapBehavior:function(){return Ko}});function B(et){return[parseInt(et.substr(1,2),16),parseInt(et.substr(3,2),16),parseInt(et.substr(5,2),16)]}function X(et){var pt=Math.round(et).toString(16);return pt.length===1?"0"+pt:pt}function k(et){return"#"+X(et[0])+X(et[1])+X(et[2])}function P(et){var pt,Mt,jt,ie=et||1;function Re(ar,Lr){++pt>ie&&(jt=Mt,Ge(1),++pt),Mt[ar]=Lr}function Ge(ar){pt=0,Mt=Object.create(null),ar||(jt=Object.create(null))}return Ge(),{clear:Ge,has:function(ar){return Mt[ar]!==void 0||jt[ar]!==void 0},get:function(ar){var Lr=Mt[ar];if(Lr!==void 0)return Lr;if((Lr=jt[ar])!==void 0)return Re(ar,Lr),Lr},set:function(ar,Lr){Mt[ar]!==void 0?Mt[ar]=Lr:Re(ar,Lr)}}}var N=function(et){return typeof et=="function"},D=function(et,pt,Mt){if(Mt===void 0&&(Mt=128),!N(et))throw new TypeError("Expected a function");var jt=function(){for(var ie=[],Re=0;Re<arguments.length;Re++)ie[Re]=arguments[Re];var Ge=pt?pt.apply(this,ie):ie[0],ar=jt.cache;if(ar.has(Ge))return ar.get(Ge);var Lr=et.apply(this,ie);return ar.set(Ge,Lr),Lr};return jt.cache=P(Mt),jt},E=/rgba?\(([\s.,0-9]+)\)/;function y(){var et=document.createElement("i");return et.title="Web Colour Picker",et.style.display="none",document.body.appendChild(et),et}var M;function _(et){if(et[0]==="#"&&et.length===7)return et;M||(M=y()),M.style.color=et;var pt=document.defaultView.getComputedStyle(M,"").getPropertyValue("color"),Mt=E.exec(pt),jt=Mt[1].split(/\s*,\s*/).map(function(ie){return Number(ie)});return pt=k(jt),pt}var m=D(_,function(et){return et},256);function I(et,pt,Mt,jt){return et[jt]+(pt[jt]-et[jt])*Mt}function A(et,pt){var Mt=isNaN(Number(pt))||pt<0?0:pt>1?1:Number(pt),jt=et.length-1,ie=Math.floor(jt*Mt),Re=jt*Mt-ie,Ge=et[ie],ar=ie===jt?Ge:et[ie+1];return k([I(Ge,ar,Re,0),I(Ge,ar,Re,1),I(Ge,ar,Re,2)])}function O(et){var pt=typeof et=="string"?et.split("-"):et,Mt=pt.map(function(jt){return B(jt.indexOf("#")===-1?m(jt):jt)});return function(jt){return A(Mt,jt)}}var U=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,j=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,x=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function d(et){return/^[r,R,L,l]{1}[\s]*\(/.test(et)}function it(et){if(d(et)){var pt,Mt=void 0;if(et[0]==="l"){var jt=U.exec(et),ie=+jt[1]+90;Mt=jt[2],pt="linear-gradient("+ie+"deg, "}else if(et[0]==="r"){pt="radial-gradient(";var jt=j.exec(et);Mt=jt[4]}var Re=Mt.match(x);return Re.forEach(function(Ge,ar){var Lr=Ge.split(":");pt+=Lr[1]+" "+Number(Lr[0])*100+"%",ar!==Re.length-1&&(pt+=", ")}),pt+=")",pt}return et}var Y=z(935600);function W(et,pt,Mt){var jt=[0,0,0,0,0,0,0,0,0];return Y.fromTranslation(jt,Mt),Y.multiply(et,jt,pt)}function K(et,pt,Mt){var jt=[0,0,0,0,0,0,0,0,0];return Y.fromRotation(jt,Mt),Y.multiply(et,jt,pt)}function Q(et,pt,Mt){var jt=[0,0,0,0,0,0,0,0,0];return Y.fromScaling(jt,Mt),Y.multiply(et,jt,pt)}function rt(et,pt,Mt){return Y.multiply(et,Mt,pt)}function J(et,pt){for(var Mt=et?[].concat(et):[1,0,0,0,1,0,0,0,1],jt=0,ie=pt.length;jt<ie;jt++){var Re=pt[jt];switch(Re[0]){case"t":W(Mt,Mt,[Re[1],Re[2]]);break;case"s":Q(Mt,Mt,[Re[1],Re[2]]);break;case"r":K(Mt,Mt,Re[1]);break;case"m":rt(Mt,Mt,Re[1]);break;default:break}}return Mt}var ot=z(631437);function vt(et,pt){return et[0]*pt[1]-pt[0]*et[1]}function gt(et,pt,Mt){var jt=ot.angle(et,pt),ie=vt(et,pt)>=0;return Mt?ie?Math.PI*2-jt:jt:ie?jt:Math.PI*2-jt}function Pt(et,pt,Mt){return Mt?(et[0]=pt[1],et[1]=-1*pt[0]):(et[0]=-1*pt[1],et[1]=pt[0]),et}function It(et,pt){if(pt==="off")return[].concat(et);var Mt=typeof pt=="number"&&pt>=1?Math.pow(10,pt):1;return et.map(function(jt){var ie=jt.slice(1).map(Number).map(function(Re){return pt?Math.round(Re*Mt)/Mt:Math.round(Re)});return[jt[0]].concat(ie)})}function Jt(et,pt){return pt===void 0&&(pt="off"),It(et,pt).map(function(Mt){return Mt[0]+Mt.slice(1).join(" ")}).join("")}var zt=z(197582),kt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function $(et,pt,Mt){if(et[Mt].length>7){et[Mt].shift();for(var jt=et[Mt],ie=Mt;jt.length;)pt[Mt]="A",et.splice(ie+=1,0,["C"].concat(jt.splice(0,6)));et.splice(Mt,1)}}var lt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function St(et){return Array.isArray(et)&&et.every(function(pt){var Mt=pt[0].toLowerCase();return lt[Mt]===pt.length-1&&"achlmqstvz".includes(Mt)})}function Ut(et){return St(et)&&et.every(function(pt){var Mt=pt[0];return Mt===Mt.toUpperCase()})}function Ft(et){return Ut(et)&&et.every(function(pt){var Mt=pt[0];return"ACLMQZ".includes(Mt)})}function ee(et){for(var pt=et.pathValue[et.segmentStart],Mt=pt.toLowerCase(),jt=et.data;jt.length>=lt[Mt]&&(Mt==="m"&&jt.length>2?(et.segments.push([pt].concat(jt.splice(0,2))),Mt="l",pt=pt==="m"?"l":"L"):et.segments.push([pt].concat(jt.splice(0,lt[Mt]))),!!lt[Mt]););}function ve(et){var pt=et.index,Mt=et.pathValue,jt=Mt.charCodeAt(pt);if(jt===48){et.param=0,et.index+=1;return}if(jt===49){et.param=1,et.index+=1;return}et.err='[path-util]: invalid Arc flag "'+Mt[pt]+'", expecting 0 or 1 at index '+pt}function be(et){return et>=48&&et<=57||et===43||et===45||et===46}function Ht(et){return et>=48&&et<=57}function Yt(et){var pt=et.max,Mt=et.pathValue,jt=et.index,ie=jt,Re=!1,Ge=!1,ar=!1,Lr=!1,Gr;if(ie>=pt){et.err="[path-util]: Invalid path value at index "+ie+', "pathValue" is missing param';return}if(Gr=Mt.charCodeAt(ie),(Gr===43||Gr===45)&&(ie+=1,Gr=Mt.charCodeAt(ie)),!Ht(Gr)&&Gr!==46){et.err="[path-util]: Invalid path value at index "+ie+', "'+Mt[ie]+'" is not a number';return}if(Gr!==46){if(Re=Gr===48,ie+=1,Gr=Mt.charCodeAt(ie),Re&&ie<pt&&Gr&&Ht(Gr)){et.err="[path-util]: Invalid path value at index "+jt+', "'+Mt[jt]+'" illegal number';return}for(;ie<pt&&Ht(Mt.charCodeAt(ie));)ie+=1,Ge=!0;Gr=Mt.charCodeAt(ie)}if(Gr===46){for(Lr=!0,ie+=1;Ht(Mt.charCodeAt(ie));)ie+=1,ar=!0;Gr=Mt.charCodeAt(ie)}if(Gr===101||Gr===69){if(Lr&&!Ge&&!ar){et.err="[path-util]: Invalid path value at index "+ie+', "'+Mt[ie]+'" invalid float exponent';return}if(ie+=1,Gr=Mt.charCodeAt(ie),(Gr===43||Gr===45)&&(ie+=1),ie<pt&&Ht(Mt.charCodeAt(ie)))for(;ie<pt&&Ht(Mt.charCodeAt(ie));)ie+=1;else{et.err="[path-util]: Invalid path value at index "+ie+', "'+Mt[ie]+'" invalid integer exponent';return}}et.index=ie,et.param=+et.pathValue.slice(jt,ie)}function de(et){var pt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return et===10||et===13||et===8232||et===8233||et===32||et===9||et===11||et===12||et===160||et>=5760&&pt.includes(et)}function Ee(et){for(var pt=et.pathValue,Mt=et.max;et.index<Mt&&de(pt.charCodeAt(et.index));)et.index+=1}function ge(et){switch(et|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Ot(et){return(et|32)===97}function Xt(et){var pt=et.max,Mt=et.pathValue,jt=et.index,ie=Mt.charCodeAt(jt),Re=lt[Mt[jt].toLowerCase()];if(et.segmentStart=jt,!ge(ie)){et.err='[path-util]: Invalid path value "'+Mt[jt]+'" is not a path command';return}if(et.index+=1,Ee(et),et.data=[],!Re){ee(et);return}for(;;){for(var Ge=Re;Ge>0;Ge-=1){if(Ot(ie)&&(Ge===3||Ge===4)?ve(et):Yt(et),et.err.length)return;et.data.push(et.param),Ee(et),et.index<pt&&Mt.charCodeAt(et.index)===44&&(et.index+=1,Ee(et))}if(et.index>=et.max||!be(Mt.charCodeAt(et.index)))break}ee(et)}var ce=function(){function et(pt){this.pathValue=pt,this.segments=[],this.max=pt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return et}();function Lt(et){if(St(et))return[].concat(et);var pt=new ce(et);for(Ee(pt);pt.index<pt.max&&!pt.err.length;)Xt(pt);return pt.err?pt.err:pt.segments}function Kt(et){if(Ut(et))return[].concat(et);var pt=Lt(et),Mt=0,jt=0,ie=0,Re=0;return pt.map(function(Ge){var ar=Ge.slice(1).map(Number),Lr=Ge[0],Gr=Lr.toUpperCase();if(Lr==="M")return Mt=ar[0],jt=ar[1],ie=Mt,Re=jt,["M",Mt,jt];var an;if(Lr!==Gr)switch(Gr){case"A":an=[Gr,ar[0],ar[1],ar[2],ar[3],ar[4],ar[5]+Mt,ar[6]+jt];break;case"V":an=[Gr,ar[0]+jt];break;case"H":an=[Gr,ar[0]+Mt];break;default:{var mn=ar.map(function(ra,oa){return ra+(oa%2?jt:Mt)});an=[Gr].concat(mn)}}else an=[Gr].concat(ar);var tn=an.length;switch(Gr){case"Z":Mt=ie,jt=Re;break;case"H":Mt=an[1];break;case"V":jt=an[1];break;default:Mt=an[tn-2],jt=an[tn-1],Gr==="M"&&(ie=Mt,Re=jt)}return an})}function pe(et,pt){var Mt=et[0],jt=pt.x1,ie=pt.y1,Re=pt.x2,Ge=pt.y2,ar=et.slice(1).map(Number),Lr=et;if("TQ".includes(Mt)||(pt.qx=null,pt.qy=null),Mt==="H")Lr=["L",et[1],ie];else if(Mt==="V")Lr=["L",jt,et[1]];else if(Mt==="S"){var Gr=jt*2-Re,an=ie*2-Ge;pt.x1=Gr,pt.y1=an,Lr=["C",Gr,an].concat(ar)}else if(Mt==="T"){var mn=jt*2-pt.qx,tn=ie*2-pt.qy;pt.qx=mn,pt.qy=tn,Lr=["Q",mn,tn].concat(ar)}else if(Mt==="Q"){var ra=ar[0],oa=ar[1];pt.qx=ra,pt.qy=oa}return Lr}function We(et){if(Ft(et))return[].concat(et);for(var pt=Kt(et),Mt=(0,zt.__assign)({},kt),jt=0;jt<pt.length;jt+=1){pt[jt]=pe(pt[jt],Mt);var ie=pt[jt],Re=ie.length;Mt.x1=+ie[Re-2],Mt.y1=+ie[Re-1],Mt.x2=+ie[Re-4]||Mt.x1,Mt.y2=+ie[Re-3]||Mt.y1}return pt}function Je(et){return Ft(et)&&et.every(function(pt){var Mt=pt[0];return"MC".includes(Mt)})}function Mr(et,pt,Mt){var jt=et*Math.cos(Mt)-pt*Math.sin(Mt),ie=et*Math.sin(Mt)+pt*Math.cos(Mt);return{x:jt,y:ie}}function Vt(et,pt,Mt,jt,ie,Re,Ge,ar,Lr,Gr){var an=et,mn=pt,tn=Mt,ra=jt,oa=ar,la=Lr,Hn=Math.PI*120/180,Na=Math.PI/180*(+ie||0),Cn=[],_a,sa,Dn,Ma,$a;if(Gr)sa=Gr[0],Dn=Gr[1],Ma=Gr[2],$a=Gr[3];else{_a=Mr(an,mn,-Na),an=_a.x,mn=_a.y,_a=Mr(oa,la,-Na),oa=_a.x,la=_a.y;var Qa=(an-oa)/2,ka=(mn-la)/2,Ra=Qa*Qa/(tn*tn)+ka*ka/(ra*ra);Ra>1&&(Ra=Math.sqrt(Ra),tn*=Ra,ra*=Ra);var li=tn*tn,Mi=ra*ra,oi=(Re===Ge?-1:1)*Math.sqrt(Math.abs((li*Mi-li*ka*ka-Mi*Qa*Qa)/(li*ka*ka+Mi*Qa*Qa)));Ma=oi*tn*ka/ra+(an+oa)/2,$a=oi*-ra*Qa/tn+(mn+la)/2,sa=Math.asin(((mn-$a)/ra*Math.pow(10,9)>>0)/Math.pow(10,9)),Dn=Math.asin(((la-$a)/ra*Math.pow(10,9)>>0)/Math.pow(10,9)),sa=an<Ma?Math.PI-sa:sa,Dn=oa<Ma?Math.PI-Dn:Dn,sa<0&&(sa=Math.PI*2+sa),Dn<0&&(Dn=Math.PI*2+Dn),Ge&&sa>Dn&&(sa-=Math.PI*2),!Ge&&Dn>sa&&(Dn-=Math.PI*2)}var Ns=Dn-sa;if(Math.abs(Ns)>Hn){var Vf=Dn,$s=oa,uu=la;Dn=sa+Hn*(Ge&&Dn>sa?1:-1),oa=Ma+tn*Math.cos(Dn),la=$a+ra*Math.sin(Dn),Cn=Vt(oa,la,tn,ra,ie,0,Ge,$s,uu,[Dn,Vf,Ma,$a])}Ns=Dn-sa;var Su=Math.cos(sa),hf=Math.sin(sa),_u=Math.cos(Dn),Tc=Math.sin(Dn),jf=Math.tan(Ns/4),Hf=4/3*tn*jf,Ic=4/3*ra*jf,Kf=[an,mn],Qo=[an+Hf*hf,mn-Ic*Su],Uu=[oa+Hf*Tc,la-Ic*_u],qs=[oa,la];if(Qo[0]=2*Kf[0]-Qo[0],Qo[1]=2*Kf[1]-Qo[1],Gr)return Qo.concat(Uu,qs,Cn);Cn=Qo.concat(Uu,qs,Cn);for(var Oc=[],Io=0,uo=Cn.length;Io<uo;Io+=1)Oc[Io]=Io%2?Mr(Cn[Io-1],Cn[Io],Na).y:Mr(Cn[Io],Cn[Io+1],Na).x;return Oc}function on(et,pt,Mt,jt,ie,Re){var Ge=.3333333333333333,ar=2/3;return[Ge*et+ar*Mt,Ge*pt+ar*jt,Ge*ie+ar*Mt,Ge*Re+ar*jt,ie,Re]}function sn(et,pt,Mt){var jt=et[0],ie=et[1],Re=pt[0],Ge=pt[1];return[jt+(Re-jt)*Mt,ie+(Ge-ie)*Mt]}var pn=function(et,pt,Mt,jt){var ie=.5,Re=sn([et,pt],[Mt,jt],ie);return(0,zt.__spreadArray)((0,zt.__spreadArray)([],Re,!0),[Mt,jt,Mt,jt],!1)};function En(et,pt){var Mt=et[0],jt=et.slice(1).map(Number),ie=jt[0],Re=jt[1],Ge,ar=pt.x1,Lr=pt.y1,Gr=pt.x,an=pt.y;switch("TQ".includes(Mt)||(pt.qx=null,pt.qy=null),Mt){case"M":return pt.x=ie,pt.y=Re,et;case"A":return Ge=[ar,Lr].concat(jt),["C"].concat(Vt(Ge[0],Ge[1],Ge[2],Ge[3],Ge[4],Ge[5],Ge[6],Ge[7],Ge[8],Ge[9]));case"Q":return pt.qx=ie,pt.qy=Re,Ge=[ar,Lr].concat(jt),["C"].concat(on(Ge[0],Ge[1],Ge[2],Ge[3],Ge[4],Ge[5]));case"L":return["C"].concat(pn(ar,Lr,ie,Re));case"Z":return ar===Gr&&Lr===an?["C",ar,Lr,Gr,an,Gr,an]:["C"].concat(pn(ar,Lr,Gr,an));default:}return et}function Yn(et,pt){if(pt===void 0&&(pt=!1),Je(et)){var Mt=[].concat(et);return pt?[Mt,[]]:Mt}for(var jt=We(et),ie=(0,zt.__assign)({},kt),Re=[],Ge="",ar=jt.length,Lr,Gr,an=[],mn=0;mn<ar;mn+=1){jt[mn]&&(Ge=jt[mn][0]),Re[mn]=Ge;var tn=En(jt[mn],ie);jt[mn]=tn,$(jt,Re,mn),ar=jt.length,Ge==="Z"&&an.push(mn),Lr=jt[mn],Gr=Lr.length,ie.x1=+Lr[Gr-2],ie.y1=+Lr[Gr-1],ie.x2=+Lr[Gr-4]||ie.x1,ie.y2=+Lr[Gr-3]||ie.y1}return pt?[jt,an]:jt}function ea(et){return et.map(function(pt){return Array.isArray(pt)?[].concat(pt):pt})}function Nn(et){var pt=et.slice(1).map(function(Mt,jt,ie){return jt?ie[jt-1].slice(-2).concat(Mt.slice(1)):et[0].slice(1).concat(Mt.slice(1))}).map(function(Mt){return Mt.map(function(jt,ie){return Mt[Mt.length-ie-2*(1-ie%2)]})}).reverse();return[["M"].concat(pt[0].slice(0,2))].concat(pt.map(function(Mt){return["C"].concat(Mt.slice(2))}))}function Zn(et,pt){return Math.sqrt((et[0]-pt[0])*(et[0]-pt[0])+(et[1]-pt[1])*(et[1]-pt[1]))}function La(et,pt,Mt,jt,ie){var Re=Zn([et,pt],[Mt,jt]),Ge={x:0,y:0};if(typeof ie=="number")if(ie<=0)Ge={x:et,y:pt};else if(ie>=Re)Ge={x:Mt,y:jt};else{var ar=sn([et,pt],[Mt,jt],ie/Re),Lr=ar[0],Gr=ar[1];Ge={x:Lr,y:Gr}}return{length:Re,point:Ge,min:{x:Math.min(et,Mt),y:Math.min(pt,jt)},max:{x:Math.max(et,Mt),y:Math.max(pt,jt)}}}function Aa(et,pt){var Mt=et.x,jt=et.y,ie=pt.x,Re=pt.y,Ge=Mt*ie+jt*Re,ar=Math.sqrt((Math.pow(Mt,2)+Math.pow(jt,2))*(Math.pow(ie,2)+Math.pow(Re,2))),Lr=Mt*Re-jt*ie<0?-1:1,Gr=Lr*Math.acos(Ge/ar);return Gr}function fr(et,pt,Mt,jt,ie,Re,Ge,ar,Lr,Gr){var an=Math.abs,mn=Math.sin,tn=Math.cos,ra=Math.sqrt,oa=Math.PI,la=an(Mt),Hn=an(jt),Na=(ie%360+360)%360,Cn=Na*(oa/180);if(et===ar&&pt===Lr)return{x:et,y:pt};if(la===0||Hn===0)return La(et,pt,ar,Lr,Gr).point;var _a=(et-ar)/2,sa=(pt-Lr)/2,Dn={x:tn(Cn)*_a+mn(Cn)*sa,y:-mn(Cn)*_a+tn(Cn)*sa},Ma=Math.pow(Dn.x,2)/Math.pow(la,2)+Math.pow(Dn.y,2)/Math.pow(Hn,2);Ma>1&&(la*=ra(Ma),Hn*=ra(Ma));var $a=Math.pow(la,2)*Math.pow(Hn,2)-Math.pow(la,2)*Math.pow(Dn.y,2)-Math.pow(Hn,2)*Math.pow(Dn.x,2),Qa=Math.pow(la,2)*Math.pow(Dn.y,2)+Math.pow(Hn,2)*Math.pow(Dn.x,2),ka=$a/Qa;ka=ka<0?0:ka;var Ra=(Re!==Ge?1:-1)*ra(ka),li={x:Ra*(la*Dn.y/Hn),y:Ra*(-(Hn*Dn.x)/la)},Mi={x:tn(Cn)*li.x-mn(Cn)*li.y+(et+ar)/2,y:mn(Cn)*li.x+tn(Cn)*li.y+(pt+Lr)/2},oi={x:(Dn.x-li.x)/la,y:(Dn.y-li.y)/Hn},Ns=Aa({x:1,y:0},oi),Vf={x:(-Dn.x-li.x)/la,y:(-Dn.y-li.y)/Hn},$s=Aa(oi,Vf);!Ge&&$s>0?$s-=2*oa:Ge&&$s<0&&($s+=2*oa),$s%=2*oa;var uu=Ns+$s*Gr,Su=la*tn(uu),hf=Hn*mn(uu),_u={x:tn(Cn)*Su-mn(Cn)*hf+Mi.x,y:mn(Cn)*Su+tn(Cn)*hf+Mi.y};return _u}function Or(et,pt,Mt,jt,ie,Re,Ge,ar,Lr,Gr,an){var mn,tn=an.bbox,ra=tn===void 0?!0:tn,oa=an.length,la=oa===void 0?!0:oa,Hn=an.sampleSize,Na=Hn===void 0?30:Hn,Cn=typeof Gr=="number",_a=et,sa=pt,Dn=0,Ma=[_a,sa,Dn],$a=[_a,sa],Qa=0,ka={x:0,y:0},Ra=[{x:_a,y:sa}];Cn&&Gr<=0&&(ka={x:_a,y:sa});for(var li=0;li<=Na;li+=1){if(Qa=li/Na,mn=fr(et,pt,Mt,jt,ie,Re,Ge,ar,Lr,Qa),_a=mn.x,sa=mn.y,ra&&Ra.push({x:_a,y:sa}),la&&(Dn+=Zn($a,[_a,sa])),$a=[_a,sa],Cn&&Dn>=Gr&&Gr>Ma[2]){var Mi=(Dn-Gr)/(Dn-Ma[2]);ka={x:$a[0]*(1-Mi)+Ma[0]*Mi,y:$a[1]*(1-Mi)+Ma[1]*Mi}}Ma=[_a,sa,Dn]}return Cn&&Gr>=Dn&&(ka={x:ar,y:Lr}),{length:Dn,point:ka,min:{x:Math.min.apply(null,Ra.map(function(oi){return oi.x})),y:Math.min.apply(null,Ra.map(function(oi){return oi.y}))},max:{x:Math.max.apply(null,Ra.map(function(oi){return oi.x})),y:Math.max.apply(null,Ra.map(function(oi){return oi.y}))}}}function vn(et,pt,Mt,jt,ie,Re,Ge,ar,Lr){var Gr=1-Lr;return{x:Math.pow(Gr,3)*et+3*Math.pow(Gr,2)*Lr*Mt+3*Gr*Math.pow(Lr,2)*ie+Math.pow(Lr,3)*Ge,y:Math.pow(Gr,3)*pt+3*Math.pow(Gr,2)*Lr*jt+3*Gr*Math.pow(Lr,2)*Re+Math.pow(Lr,3)*ar}}function yn(et,pt,Mt,jt,ie,Re,Ge,ar,Lr,Gr){var an,mn=Gr.bbox,tn=mn===void 0?!0:mn,ra=Gr.length,oa=ra===void 0?!0:ra,la=Gr.sampleSize,Hn=la===void 0?10:la,Na=typeof Lr=="number",Cn=et,_a=pt,sa=0,Dn=[Cn,_a,sa],Ma=[Cn,_a],$a=0,Qa={x:0,y:0},ka=[{x:Cn,y:_a}];Na&&Lr<=0&&(Qa={x:Cn,y:_a});for(var Ra=0;Ra<=Hn;Ra+=1){if($a=Ra/Hn,an=vn(et,pt,Mt,jt,ie,Re,Ge,ar,$a),Cn=an.x,_a=an.y,tn&&ka.push({x:Cn,y:_a}),oa&&(sa+=Zn(Ma,[Cn,_a])),Ma=[Cn,_a],Na&&sa>=Lr&&Lr>Dn[2]){var li=(sa-Lr)/(sa-Dn[2]);Qa={x:Ma[0]*(1-li)+Dn[0]*li,y:Ma[1]*(1-li)+Dn[1]*li}}Dn=[Cn,_a,sa]}return Na&&Lr>=sa&&(Qa={x:Ge,y:ar}),{length:sa,point:Qa,min:{x:Math.min.apply(null,ka.map(function(Mi){return Mi.x})),y:Math.min.apply(null,ka.map(function(Mi){return Mi.y}))},max:{x:Math.max.apply(null,ka.map(function(Mi){return Mi.x})),y:Math.max.apply(null,ka.map(function(Mi){return Mi.y}))}}}function qn(et,pt,Mt,jt,ie,Re,Ge){var ar=1-Ge;return{x:Math.pow(ar,2)*et+2*ar*Ge*Mt+Math.pow(Ge,2)*ie,y:Math.pow(ar,2)*pt+2*ar*Ge*jt+Math.pow(Ge,2)*Re}}function Vn(et,pt,Mt,jt,ie,Re,Ge,ar){var Lr,Gr=ar.bbox,an=Gr===void 0?!0:Gr,mn=ar.length,tn=mn===void 0?!0:mn,ra=ar.sampleSize,oa=ra===void 0?10:ra,la=typeof Ge=="number",Hn=et,Na=pt,Cn=0,_a=[Hn,Na,Cn],sa=[Hn,Na],Dn=0,Ma={x:0,y:0},$a=[{x:Hn,y:Na}];la&&Ge<=0&&(Ma={x:Hn,y:Na});for(var Qa=0;Qa<=oa;Qa+=1){if(Dn=Qa/oa,Lr=qn(et,pt,Mt,jt,ie,Re,Dn),Hn=Lr.x,Na=Lr.y,an&&$a.push({x:Hn,y:Na}),tn&&(Cn+=Zn(sa,[Hn,Na])),sa=[Hn,Na],la&&Cn>=Ge&&Ge>_a[2]){var ka=(Cn-Ge)/(Cn-_a[2]);Ma={x:sa[0]*(1-ka)+_a[0]*ka,y:sa[1]*(1-ka)+_a[1]*ka}}_a=[Hn,Na,Cn]}return la&&Ge>=Cn&&(Ma={x:ie,y:Re}),{length:Cn,point:Ma,min:{x:Math.min.apply(null,$a.map(function(Ra){return Ra.x})),y:Math.min.apply(null,$a.map(function(Ra){return Ra.y}))},max:{x:Math.max.apply(null,$a.map(function(Ra){return Ra.x})),y:Math.max.apply(null,$a.map(function(Ra){return Ra.y}))}}}function jn(et,pt,Mt){for(var jt,ie,Re,Ge,ar,Lr,Gr=We(et),an=typeof pt=="number",mn,tn=[],ra,oa=0,la=0,Hn=0,Na=0,Cn,_a=[],sa=[],Dn=0,Ma={x:0,y:0},$a=Ma,Qa=Ma,ka=Ma,Ra=0,li=0,Mi=Gr.length;li<Mi;li+=1)Cn=Gr[li],ra=Cn[0],mn=ra==="M",tn=mn?tn:[oa,la].concat(Cn.slice(1)),mn?(Hn=Cn[1],Na=Cn[2],Ma={x:Hn,y:Na},$a=Ma,Dn=0,an&&pt<.001&&(ka=Ma)):ra==="L"?(jt=La(tn[0],tn[1],tn[2],tn[3],(pt||0)-Ra),Dn=jt.length,Ma=jt.min,$a=jt.max,Qa=jt.point):ra==="A"?(ie=Or(tn[0],tn[1],tn[2],tn[3],tn[4],tn[5],tn[6],tn[7],tn[8],(pt||0)-Ra,Mt||{}),Dn=ie.length,Ma=ie.min,$a=ie.max,Qa=ie.point):ra==="C"?(Re=yn(tn[0],tn[1],tn[2],tn[3],tn[4],tn[5],tn[6],tn[7],(pt||0)-Ra,Mt||{}),Dn=Re.length,Ma=Re.min,$a=Re.max,Qa=Re.point):ra==="Q"?(Ge=Vn(tn[0],tn[1],tn[2],tn[3],tn[4],tn[5],(pt||0)-Ra,Mt||{}),Dn=Ge.length,Ma=Ge.min,$a=Ge.max,Qa=Ge.point):ra==="Z"&&(tn=[oa,la,Hn,Na],ar=La(tn[0],tn[1],tn[2],tn[3],(pt||0)-Ra),Dn=ar.length,Ma=ar.min,$a=ar.max,Qa=ar.point),an&&Ra<pt&&Ra+Dn>=pt&&(ka=Qa),sa.push($a),_a.push(Ma),Ra+=Dn,Lr=ra!=="Z"?Cn.slice(-2):[Hn,Na],oa=Lr[0],la=Lr[1];return an&&pt>=Ra&&(ka={x:oa,y:la}),{length:Ra,point:ka,min:{x:Math.min.apply(null,_a.map(function(oi){return oi.x})),y:Math.min.apply(null,_a.map(function(oi){return oi.y}))},max:{x:Math.max.apply(null,sa.map(function(oi){return oi.x})),y:Math.max.apply(null,sa.map(function(oi){return oi.y}))}}}function ba(et,pt){if(!et)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Mt=jn(et,void 0,(0,zt.__assign)((0,zt.__assign)({},pt),{length:!1})),jt=Mt.min,ie=jt.x,Re=jt.y,Ge=Mt.max,ar=Ge.x,Lr=Ge.y,Gr=ar-ie,an=Lr-Re;return{width:Gr,height:an,x:ie,y:Re,x2:ar,y2:Lr,cx:ie+Gr/2,cy:Re+an/2,cz:Math.max(Gr,an)+Math.min(Gr,an)/2}}function ma(et,pt){return jn(et,void 0,(0,zt.__assign)((0,zt.__assign)({},pt),{bbox:!1,length:!0})).length}function Pa(et,pt){if(!et)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Mt=jn(et,void 0,(0,zt.__assign)((0,zt.__assign)({},pt),{bbox:!0,length:!0})),jt=Mt.length,ie=Mt.min,Re=ie.x,Ge=ie.y,ar=Mt.max,Lr=ar.x,Gr=ar.y,an=Lr-Re,mn=Gr-Ge;return{length:jt,width:an,height:mn,x:Re,y:Ge,x2:Lr,y2:Gr,cx:Re+an/2,cy:Ge+mn/2,cz:Math.max(an,mn)+Math.min(an,mn)/2}}function wn(et){var pt=et.length,Mt=pt-1;return et.map(function(jt,ie){return et.map(function(Re,Ge){var ar=ie+Ge,Lr;return Ge===0||et[ar]&&et[ar][0]==="M"?(Lr=et[ar],["M"].concat(Lr.slice(-2))):(ar>=pt&&(ar-=Mt),et[ar])})})}function na(et,pt){var Mt=et.length-1,jt=[],ie=0,Re=0,Ge=wn(et);return Ge.forEach(function(ar,Lr){et.slice(1).forEach(function(Gr,an){Re+=Zn(et[(Lr+an)%Mt].slice(-2),pt[an%Mt].slice(-2))}),jt[Lr]=Re,Re=0}),ie=jt.indexOf(Math.min.apply(null,jt)),Ge[ie]}function Qn(et,pt,Mt,jt,ie,Re,Ge,ar){return 3*((ar-pt)*(Mt+ie)-(Ge-et)*(jt+Re)+jt*(et-ie)-Mt*(pt-Re)+ar*(ie+et/3)-Ge*(Re+pt/3))/20}function In(et){var pt=0,Mt=0,jt=0;return Yn(et).map(function(ie){var Re;switch(ie[0]){case"M":return pt=ie[1],Mt=ie[2],0;default:var Ge=ie.slice(1),ar=Ge[0],Lr=Ge[1],Gr=Ge[2],an=Ge[3],mn=Ge[4],tn=Ge[5];return jt=Qn(pt,Mt,ar,Lr,Gr,an,mn,tn),Re=ie.slice(-2),pt=Re[0],Mt=Re[1],jt}}).reduce(function(ie,Re){return ie+Re},0)}function Ca(et){return In(et)>=0}function q(et,pt,Mt){return jn(et,pt,(0,zt.__assign)((0,zt.__assign)({},Mt),{bbox:!1,length:!0})).point}function ft(et,pt){var Mt=Lt(et);if(typeof Mt=="string")throw TypeError(Mt);var jt=Mt.slice(),ie=ma(jt),Re=jt.length-1,Ge=0,ar=0,Lr=Mt[0],Gr=Lr.slice(-2),an=Gr[0],mn=Gr[1],tn={x:an,y:mn};if(Re<=0||!pt||!Number.isFinite(pt))return{segment:Lr,index:0,length:ar,point:tn,lengthAtSegment:Ge};if(pt>=ie)return jt=Mt.slice(0,-1),Ge=ma(jt),ar=ie-Ge,{segment:Mt[Re],index:Re,length:ar,lengthAtSegment:Ge};for(var ra=[];Re>0;)Lr=jt[Re],jt=jt.slice(0,-1),Ge=ma(jt),ar=ie-Ge,ie=Ge,ra.push({segment:Lr,index:Re,length:ar,lengthAtSegment:Ge}),Re-=1;return ra.find(function(oa){var la=oa.lengthAtSegment;return la<=pt})}function nt(et,pt){for(var Mt=Lt(et),jt=We(Mt),ie=ma(Mt),Re=function(Dn){var Ma=Dn.x-pt.x,$a=Dn.y-pt.y;return Ma*Ma+$a*$a},Ge=8,ar,Lr=0,Gr,an=0,mn=1/0,tn=0;tn<=ie;tn+=Ge)ar=q(jt,tn),Lr=Re(ar),Lr<mn&&(Gr=ar,an=tn,mn=Lr);Ge/=2;for(var ra,oa,la=0,Hn=0,Na=0,Cn=0;Ge>.5;)la=an-Ge,ra=q(jt,la),Na=Re(ra),Hn=an+Ge,oa=q(jt,Hn),Cn=Re(oa),la>=0&&Na<mn?(Gr=ra,an=la,mn=Na):Hn<=ie&&Cn<mn?(Gr=oa,an=Hn,mn=Cn):Ge/=2;var _a=ft(Mt,an),sa=Math.sqrt(mn);return{closest:Gr,distance:sa,segment:_a}}function L(et,pt){var Mt=nt(et,pt).distance;return Math.abs(Mt)<.001}function b(et,pt){pt===void 0&&(pt=.5);var Mt=et.slice(0,2),jt=et.slice(2,4),ie=et.slice(4,6),Re=et.slice(6,8),Ge=sn(Mt,jt,pt),ar=sn(jt,ie,pt),Lr=sn(ie,Re,pt),Gr=sn(Ge,ar,pt),an=sn(ar,Lr,pt),mn=sn(Gr,an,pt);return[["C"].concat(Ge,Gr,mn),["C"].concat(an,Lr,Re)]}function w(et){return et.map(function(pt,Mt,jt){var ie=Mt&&jt[Mt-1].slice(-2).concat(pt.slice(1)),Re=Mt?yn(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5],ie[6],ie[7],ie[8],{bbox:!1}).length:0,Ge;return Mt?Ge=Re?b(ie):[pt,pt]:Ge=[pt],{s:pt,ss:Ge,l:Re}})}function V(et,pt,Mt){var jt=w(et),ie=w(pt),Re=jt.length,Ge=ie.length,ar=jt.filter(function(Hn){return Hn.l}).length,Lr=ie.filter(function(Hn){return Hn.l}).length,Gr=jt.filter(function(Hn){return Hn.l}).reduce(function(Hn,Na){var Cn=Na.l;return Hn+Cn},0)/ar||0,an=ie.filter(function(Hn){return Hn.l}).reduce(function(Hn,Na){var Cn=Na.l;return Hn+Cn},0)/Lr||0,mn=Mt||Math.max(Re,Ge),tn=[Gr,an],ra=[mn-Re,mn-Ge],oa=0,la=[jt,ie].map(function(Hn,Na){return Hn.l===mn?Hn.map(function(Cn){return Cn.s}):Hn.map(function(Cn,_a){return oa=_a&&ra[Na]&&Cn.l>=tn[Na],ra[Na]-=oa?1:0,oa?Cn.ss:[Cn.s]}).flat()});return la[0].length===la[1].length?la:V(la[0],la[1],mn)}var xt=function(et){return et!==null&&typeof et!="function"&&isFinite(et.length)},Ct=xt,wt=function(et,pt){return Ct(et)?et.indexOf(pt)>-1:!1},Rt=wt,Ce=function(et,pt){if(!Ct(et))return et;for(var Mt=[],jt=0;jt<et.length;jt++){var ie=et[jt];pt(ie,jt)&&Mt.push(ie)}return Mt},me=Ce,Ke=function(et,pt){return pt===void 0&&(pt=[]),me(et,function(Mt){return!Rt(pt,Mt)})},yr=Ke,er=function(et){return et==null},gr=er,dn={}.toString,Ue=function(et,pt){return dn.call(et)==="[object "+pt+"]"},or=Ue,mr=function(et){return Array.isArray?Array.isArray(et):or(et,"Array")},$r=function(et){var pt=typeof et;return et!==null&&pt==="object"||pt==="function"};function Pr(et,pt){if(et){var Mt;if(mr(et))for(var jt=0,ie=et.length;jt<ie&&(Mt=pt(et[jt],jt),Mt!==!1);jt++);else if($r(et)){for(var Re in et)if(et.hasOwnProperty(Re)&&(Mt=pt(et[Re],Re),Mt===!1))break}}}var va=Pr,Sa=Object.keys?function(et){return Object.keys(et)}:function(et){var pt=[];return va(et,function(Mt,jt){N(et)&&jt==="prototype"||pt.push(jt)}),pt},Mn=Sa;function Un(et,pt){var Mt=Mn(pt),jt=Mt.length;if(gr(et))return!jt;for(var ie=0;ie<jt;ie+=1){var Re=Mt[ie];if(pt[Re]!==et[Re]||!(Re in et))return!1}return!0}var Fa=Un,Ea=function(et){return typeof et=="object"&&et!==null},Kr=Ea,kn=function(et){if(!Kr(et)||!or(et,"Object"))return!1;if(Object.getPrototypeOf(et)===null)return!0;for(var pt=et;Object.getPrototypeOf(pt)!==null;)pt=Object.getPrototypeOf(pt);return Object.getPrototypeOf(et)===pt},_e=kn;function Nt(et,pt){if(!mr(et))return null;var Mt;if(N(pt)&&(Mt=pt),_e(pt)&&(Mt=function(ie){return Fa(ie,pt)}),Mt){for(var jt=0;jt<et.length;jt+=1)if(Mt(et[jt]))return et[jt]}return null}var fe=Nt;function Te(et,pt,Mt){Mt===void 0&&(Mt=0);for(var jt=Mt;jt<et.length;jt++)if(pt(et[jt],jt))return jt;return-1}var Me=Te,Le=function(et,pt){for(var Mt=null,jt=0;jt<et.length;jt++){var ie=et[jt],Re=ie[pt];if(!gr(Re)){mr(Re)?Mt=Re[0]:Mt=Re;break}}return Mt},nr=Le,Dr=function(et){if(!mr(et))return[];for(var pt=[],Mt=0;Mt<et.length;Mt++)pt=pt.concat(et[Mt]);return pt},jr=Dr,Sn=function(et,pt){if(pt===void 0&&(pt=[]),!mr(et))pt.push(et);else for(var Mt=0;Mt<et.length;Mt+=1)Sn(et[Mt],pt);return pt},An=Sn,Fn=function(et){if(mr(et))return et.reduce(function(pt,Mt){return Math.max(pt,Mt)},et[0])},da=function(et){if(mr(et))return et.reduce(function(pt,Mt){return Math.min(pt,Mt)},et[0])},wa=function(et){var pt=et.filter(function(Ge){return!isNaN(Ge)});if(!pt.length)return{min:0,max:0};if(mr(et[0])){for(var Mt=[],jt=0;jt<et.length;jt++)Mt=Mt.concat(et[jt]);pt=Mt}var ie=Fn(pt),Re=da(pt);return{min:Re,max:ie}},hi=wa,Wn=Array.prototype,fi=Wn.splice,Oo=Wn.indexOf,Da=function(et){for(var pt=[],Mt=1;Mt<arguments.length;Mt++)pt[Mt-1]=arguments[Mt];for(var jt=0;jt<pt.length;jt++)for(var ie=pt[jt],Re=-1;(Re=Oo.call(et,ie))>-1;)fi.call(et,Re,1);return et},xi=Da,co=Array.prototype.splice,Lo=function(pt,Mt){if(!Ct(pt))return[];for(var jt=pt?Mt.length:0,ie=jt-1;jt--;){var Re=void 0,Ge=Mt[jt];(jt===ie||Ge!==Re)&&(Re=Ge,co.call(pt,Ge,1))}return pt},Eo=Lo,lo=function(et,pt,Mt){if(!mr(et)&&!_e(et))return et;var jt=Mt;return va(et,function(ie,Re){jt=pt(jt,ie,Re)}),jt},Zi=lo,ms=function(et,pt){var Mt=[];if(!Ct(et))return Mt;for(var jt=-1,ie=[],Re=et.length;++jt<Re;){var Ge=et[jt];pt(Ge,jt,et)&&(Mt.push(Ge),ie.push(jt))}return Eo(et,ie),Mt},zi=ms,Ui=function(et){return or(et,"String")};function xs(et,pt){var Mt;if(N(pt))Mt=function(ie,Re){return pt(ie)-pt(Re)};else{var jt=[];Ui(pt)?jt.push(pt):mr(pt)&&(jt=pt),Mt=function(ie,Re){for(var Ge=0;Ge<jt.length;Ge+=1){var ar=jt[Ge];if(ie[ar]>Re[ar])return 1;if(ie[ar]<Re[ar])return-1}return 0}}return et.sort(Mt),et}var Cs=xs;function Yo(et,pt){pt===void 0&&(pt=new Map);var Mt=[];if(Array.isArray(et))for(var jt=0,ie=et.length;jt<ie;jt++){var Re=et[jt];pt.has(Re)||(Mt.push(Re),pt.set(Re,!0))}return Mt}var Ao=function(){for(var et=[],pt=0;pt<arguments.length;pt++)et[pt]=arguments[pt];return Yo([].concat.apply([],et))},Do=Ao,js=function(et,pt){for(var Mt=[],jt={},ie=0;ie<et.length;ie++){var Re=et[ie],Ge=Re[pt];if(!gr(Ge)){mr(Ge)||(Ge=[Ge]);for(var ar=0;ar<Ge.length;ar++){var Lr=Ge[ar];jt[Lr]||(Mt.push(Lr),jt[Lr]=!0)}}}return Mt};function Pn(et){if(Ct(et))return et[0]}function Co(et){if(Ct(et)){var pt=et;return pt[pt.length-1]}}function No(et,pt){return mr(et)||Ui(et)?et[0]===pt:!1}var Wi=No;function On(et,pt){return mr(et)||Ui(et)?et[et.length-1]===pt:!1}var Po=On,Ai=function(et,pt){for(var Mt=0;Mt<et.length;Mt++)if(!pt(et[Mt],Mt))return!1;return!0},Vo=Ai,jo=function(et,pt){for(var Mt=0;Mt<et.length;Mt++)if(pt(et[Mt],Mt))return!0;return!1},bs=jo,ao=Object.prototype.hasOwnProperty;function io(et,pt){if(!pt||!mr(et))return{};for(var Mt={},jt=N(pt)?pt:function(ar){return ar[pt]},ie,Re=0;Re<et.length;Re++){var Ge=et[Re];ie=jt(Ge),ao.call(Mt,ie)?Mt[ie].push(Ge):Mt[ie]=[Ge]}return Mt}var ni=io;function ho(et,pt){if(!pt)return{0:et};if(!N(pt)){var Mt=mr(pt)?pt:pt.replace(/\s+/g,"").split("*");pt=function(jt){for(var ie="_",Re=0,Ge=Mt.length;Re<Ge;Re++)ie+=jt[Mt[Re]]&&jt[Mt[Re]].toString();return ie}}return ni(et,pt)}var ko=function(et,pt){if(!pt)return[et];var Mt=ho(et,pt),jt=[];for(var ie in Mt)jt.push(Mt[ie]);return jt};function Ho(et,pt){return et["_wrap_"+pt]}var Ro=Ho;function fs(et,pt){if(et["_wrap_"+pt])return et["_wrap_"+pt];var Mt=function(jt){et[pt](jt)};return et["_wrap_"+pt]=Mt,Mt}var Ko=fs,is={};function Wa(et){var pt=is[et];if(!pt){for(var Mt=et.toString(16),jt=Mt.length;jt<6;jt++)Mt="0"+Mt;pt="#"+Mt,is[et]=pt}return pt}var Ts=Wa;function eu(et){var pt=0,Mt=0,jt=0,ie=0;return mr(et)?et.length===1?pt=Mt=jt=ie=et[0]:et.length===2?(pt=jt=et[0],Mt=ie=et[1]):et.length===3?(pt=et[0],Mt=ie=et[1],jt=et[2]):(pt=et[0],Mt=et[1],jt=et[2],ie=et[3]):pt=Mt=jt=ie=et,{r1:pt,r2:Mt,r3:jt,r4:ie}}var Xi=eu,cs=function(et,pt,Mt){return et<pt?pt:et>Mt?Mt:et},wo=cs,Yi=function(et,pt){var Mt=pt.toString(),jt=Mt.indexOf(".");if(jt===-1)return Math.round(et);var ie=Mt.substr(jt+1).length;return ie>20&&(ie=20),parseFloat(et.toFixed(ie))},vo=Yi,ca=function(et){return or(et,"Number")},Va=ca,mi=function(et){return Va(et)&&et%1!==0},oo=mi,ki=function(et){return Va(et)&&et%2===0},$i=ki,Zo=Number.isInteger?Number.isInteger:function(et){return Va(et)&&et%1===0},So=Zo,os=function(et){return Va(et)&&et<0},go=os,Rs=1e-5;function ru(et,pt,Mt){return Mt===void 0&&(Mt=Rs),Math.abs(et-pt)<Mt}var Is=function(et){return Va(et)&&et%2!==0},ci=Is,Bo=function(et){return Va(et)&&et>0},Fu=Bo,po=function(et,pt){if(mr(et)){for(var Mt,jt=-1/0,ie=0;ie<et.length;ie++){var Re=et[ie],Ge=N(pt)?pt(Re):Re[pt];Ge>jt&&(Mt=Re,jt=Ge)}return Mt}},Bs=function(et,pt){if(mr(et)){for(var Mt,jt=1/0,ie=0;ie<et.length;ie++){var Re=et[ie],Ge=N(pt)?pt(Re):Re[pt];Ge<jt&&(Mt=Re,jt=Ge)}return Mt}},Os=function(et,pt){return(et%pt+pt)%pt},$o=Os,Fs=180/Math.PI,ls=function(et){return Fs*et},qo=ls,hs=parseInt,nu=Math.PI/180,Gs=function(et){return nu*et},vs=Gs,Tt=va,qt=function(et,pt){return et.hasOwnProperty(pt)},Fe=qt,Ze=Object.values?function(et){return Object.values(et)}:function(et){var pt=[];return va(et,function(Mt,jt){N(et)&&jt==="prototype"||pt.push(Mt)}),pt},Sr=Ze,Jr=function(et,pt){return Rt(Sr(et),pt)},nn=function(et){return gr(et)?"":et.toString()},$n=function(et){return nn(et).toLowerCase()},ai=$n,qi=function(et){var pt=nn(et);return pt.charAt(0).toLowerCase()+pt.substring(1)},so=qi;function zs(et,pt){return!et||!pt?et:et.replace(/\\?\{([^{}]+)\}/g,function(Mt,jt){return Mt.charAt(0)==="\\"?Mt.slice(1):pt[jt]===void 0?"":pt[jt]})}var xu=zs,Ri=function(et){return nn(et).toUpperCase()},yo=Ri,Hs=function(et){var pt=nn(et);return pt.charAt(0).toUpperCase()+pt.substring(1)},Gu=Hs,bu={}.toString,au=function(et){return bu.call(et).replace(/^\[object /,"").replace(/]$/,"")},Ks=au,iu=function(et){return or(et,"Arguments")},Ls=iu,Zs=function(et){return or(et,"Boolean")},ds=Zs,To=function(et){return or(et,"Date")},sf=To,Df=function(et){return or(et,"Error")},Nf=Df;function Ds(et){return Va(et)&&isFinite(et)}var Pf=function(et){return et===null},h=Pf,T=Object.prototype,dt=function(et){var pt=et&&et.constructor,Mt=typeof pt=="function"&&pt.prototype||T;return et===Mt},Et=dt,Dt=function(et){return or(et,"RegExp")},Zt=Dt,$t=function(et){return et===void 0},ue=$t,ye=function(et){return et instanceof Element||et instanceof Document},Ie=ye;function Xe(et){var pt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Mt){return setTimeout(Mt,16)};return pt(et)}function hr(et){var pt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;pt(et)}function pr(et,pt){for(var Mt in pt)pt.hasOwnProperty(Mt)&&Mt!=="constructor"&&pt[Mt]!==void 0&&(et[Mt]=pt[Mt])}function lr(et,pt,Mt,jt){return pt&&pr(et,pt),Mt&&pr(et,Mt),jt&&pr(et,jt),et}var Xr=function(){for(var et=[],pt=0;pt<arguments.length;pt++)et[pt]=arguments[pt];for(var Mt=et[0],jt=1;jt<et.length;jt++){var ie=et[jt];N(ie)&&(ie=ie.prototype),lr(Mt.prototype,ie)}},Vr=Xr,_r=function(et){if(typeof et!="object"||et===null)return et;var pt;if(mr(et)){pt=[];for(var Mt=0,jt=et.length;Mt<jt;Mt++)typeof et[Mt]=="object"&&et[Mt]!=null?pt[Mt]=_r(et[Mt]):pt[Mt]=et[Mt]}else{pt={};for(var ie in et)typeof et[ie]=="object"&&et[ie]!=null?pt[ie]=_r(et[ie]):pt[ie]=et[ie]}return pt},ln=_r;function ga(et,pt,Mt){var jt;return function(){var ie=this,Re=arguments,Ge=function(){jt=null,Mt||et.apply(ie,Re)},ar=Mt&&!jt;clearTimeout(jt),jt=setTimeout(Ge,pt),ar&&et.apply(ie,Re)}}var pa=ga,aa=5;function Gn(et,pt){if(Object.hasOwn)return Object.hasOwn(et,pt);if(et==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(et),pt)}function Jn(et,pt,Mt,jt){Mt=Mt||0,jt=jt||aa;for(var ie in pt)if(Gn(pt,ie)){var Re=pt[ie];Re!==null&&_e(Re)?(_e(et[ie])||(et[ie]={}),Mt<jt?Jn(et[ie],Re,Mt+1,jt):et[ie]=pt[ie]):mr(Re)?(et[ie]=[],et[ie]=et[ie].concat(Re)):Re!==void 0&&(et[ie]=Re)}}var Di=function(et){for(var pt=[],Mt=1;Mt<arguments.length;Mt++)pt[Mt-1]=arguments[Mt];for(var jt=0;jt<pt.length;jt+=1)Jn(et,pt[jt]);return et},Ci=Di,_i=function(et,pt,Mt,jt){N(pt)||(Mt=pt,pt=et,et=function(){});var ie=Object.create?function(Ge,ar){return Object.create(Ge,{constructor:{value:ar}})}:function(Ge,ar){function Lr(){}Lr.prototype=Ge;var Gr=new Lr;return Gr.constructor=ar,Gr},Re=ie(pt.prototype,et);return et.prototype=lr(Re,et.prototype),et.superclass=ie(pt.prototype,pt),lr(Re,Mt),lr(et,jt),et},Ti=_i,Ii=function(et,pt){if(!Ct(et))return-1;var Mt=Array.prototype.indexOf;if(Mt)return Mt.call(et,pt);for(var jt=-1,ie=0;ie<et.length;ie++)if(et[ie]===pt){jt=ie;break}return jt},Bi=Ii,Qi=Object.prototype.hasOwnProperty;function Ga(et){if(gr(et))return!0;if(Ct(et))return!et.length;var pt=Ks(et);if(pt==="Map"||pt==="Set")return!et.size;if(Et(et))return!Object.keys(et).length;for(var Mt in et)if(Qi.call(et,Mt))return!1;return!0}var ii=Ga,gs=function(et,pt){if(et===pt)return!0;if(!et||!pt||Ui(et)||Ui(pt))return!1;if(Ct(et)||Ct(pt)){if(et.length!==pt.length)return!1;for(var Mt=!0,jt=0;jt<et.length&&(Mt=gs(et[jt],pt[jt]),!!Mt);jt++);return Mt}if(Kr(et)||Kr(pt)){var ie=Object.keys(et),Re=Object.keys(pt);if(ie.length!==Re.length)return!1;for(var Mt=!0,jt=0;jt<ie.length&&(Mt=gs(et[ie[jt]],pt[ie[jt]]),!!Mt);jt++);return Mt}return!1},Es=gs,Fo=function(et,pt,Mt){return N(Mt)?!!Mt(et,pt):Es(et,pt)},Eu=function(et,pt){if(!Ct(et))return et;for(var Mt=[],jt=0;jt<et.length;jt++){var ie=et[jt];Mt.push(pt(ie,jt))}return Mt},kf=Eu,wc=function(et){return et},Sc=function(et,pt){pt===void 0&&(pt=wc);var Mt={};return $r(et)&&!gr(et)&&Object.keys(et).forEach(function(jt){Mt[jt]=pt(et[jt],jt)}),Mt},_c=function(et,pt,Mt){for(var jt=0,ie=Ui(pt)?pt.split("."):pt;et&&jt<ie.length;)et=et[ie[jt++]];return et===void 0||jt<ie.length?Mt:et},Rf=function(et,pt,Mt){var jt=et,ie=Ui(pt)?pt.split("."):pt;return ie.forEach(function(Re,Ge){Ge<ie.length-1?($r(jt[Re])||(jt[Re]=Va(ie[Ge+1])?[]:{}),jt=jt[Re]):jt[Re]=Mt}),et},Bf=Object.prototype.hasOwnProperty,Mc=function(et,pt){if(et===null||!_e(et))return{};var Mt={};return va(pt,function(jt){Bf.call(et,jt)&&(Mt[jt]=et[jt])}),Mt},uf=function(et,pt){return Zi(et,function(Mt,jt,ie){return pt.includes(ie)||(Mt[ie]=jt),Mt},{})},ff=function(et,pt,Mt){var jt,ie,Re,Ge,ar=0;Mt||(Mt={});var Lr=function(){ar=Mt.leading===!1?0:Date.now(),jt=null,Ge=et.apply(ie,Re),jt||(ie=Re=null)},Gr=function(){var an=Date.now();!ar&&Mt.leading===!1&&(ar=an);var mn=pt-(an-ar);return ie=this,Re=arguments,mn<=0||mn>pt?(jt&&(clearTimeout(jt),jt=null),ar=an,Ge=et.apply(ie,Re),jt||(ie=Re=null)):!jt&&Mt.trailing!==!1&&(jt=setTimeout(Lr,mn)),Ge};return Gr.cancel=function(){clearTimeout(jt),ar=0,jt=ie=Re=null},Gr},Ac=function(et){return Ct(et)?Array.prototype.slice.call(et):[]},cf={},ou=function(et){return et=et||"g",cf[et]?cf[et]+=1:cf[et]=1,et+cf[et]},Cc=function(){},cn=function(et){return et};function wu(et){return gr(et)?0:Ct(et)?et.length:Object.keys(et).length}var za=function(){function et(){this.map={}}return et.prototype.has=function(pt){return this.map[pt]!==void 0},et.prototype.get=function(pt,Mt){var jt=this.map[pt];return jt===void 0?Mt:jt},et.prototype.set=function(pt,Mt){this.map[pt]=Mt},et.prototype.clear=function(){this.map={}},et.prototype.delete=function(pt){delete this.map[pt]},et.prototype.size=function(){return Object.keys(this.map).length},et}(),lf=za,Ff=1e-6;function Us(et){return Math.abs(et)<Ff?0:et<0?-1:1}function Gf(et,pt,Mt){return(Mt[0]-et[0])*(pt[1]-et[1])===(pt[0]-et[0])*(Mt[1]-et[1])&&Math.min(et[0],pt[0])<=Mt[0]&&Mt[0]<=Math.max(et[0],pt[0])&&Math.min(et[1],pt[1])<=Mt[1]&&Mt[1]<=Math.max(et[1],pt[1])}function su(et,pt,Mt){var jt=!1,ie=et.length;if(ie<=2)return!1;for(var Re=0;Re<ie;Re++){var Ge=et[Re],ar=et[(Re+1)%ie];if(Gf(Ge,ar,[pt,Mt]))return!0;Us(Ge[1]-Mt)>0!=Us(ar[1]-Mt)>0&&Us(pt-(Mt-Ge[1])*(Ge[0]-ar[0])/(Ge[1]-ar[1])-Ge[0])<0&&(jt=!jt)}return jt}var zf=function(et,pt,Mt){return et>=pt&&et<=Mt};function Uf(et,pt,Mt,jt){var ie=.001,Re={x:Mt.x-et.x,y:Mt.y-et.y},Ge={x:pt.x-et.x,y:pt.y-et.y},ar={x:jt.x-Mt.x,y:jt.y-Mt.y},Lr=Ge.x*ar.y-Ge.y*ar.x,Gr=Lr*Lr,an=Ge.x*Ge.x+Ge.y*Ge.y,mn=ar.x*ar.x+ar.y*ar.y,tn=null;if(Gr>ie*an*mn){var ra=(Re.x*ar.y-Re.y*ar.x)/Lr,oa=(Re.x*Ge.y-Re.y*Ge.x)/Lr;zf(ra,0,1)&&zf(oa,0,1)&&(tn={x:et.x+ra*Ge.x,y:et.y+ra*Ge.y})}return tn}function Wf(et){for(var pt=[],Mt=et.length,jt=0;jt<Mt-1;jt++){var ie=et[jt],Re=et[jt+1];pt.push({from:{x:ie[0],y:ie[1]},to:{x:Re[0],y:Re[1]}})}if(pt.length>1){var Ge=et[0],ar=et[Mt-1];pt.push({from:{x:ar[0],y:ar[1]},to:{x:Ge[0],y:Ge[1]}})}return pt}function ws(et,pt){var Mt=!1;return et.forEach(function(jt){if(Uf(jt.from,jt.to,pt.from,pt.to))return Mt=!0,!1}),Mt}function Xf(et){var pt=et.map(function(jt){return jt[0]}),Mt=et.map(function(jt){return jt[1]});return{minX:Math.min.apply(null,pt),maxX:Math.max.apply(null,pt),minY:Math.min.apply(null,Mt),maxY:Math.max.apply(null,Mt)}}function Yf(et,pt){return!(pt.minX>et.maxX||pt.maxX<et.minX||pt.minY>et.maxY||pt.maxY<et.minY)}function bi(et,pt){if(et.length<2||pt.length<2)return!1;var Mt=Xf(et),jt=Xf(pt);if(!Yf(Mt,jt))return!1;var ie=!1;if(pt.forEach(function(Lr){if(su(et,Lr[0],Lr[1]))return ie=!0,!1}),ie||(et.forEach(function(Lr){if(su(pt,Lr[0],Lr[1]))return ie=!0,!1}),ie))return!0;var Re=Wf(et),Ge=Wf(pt),ar=!1;return Ge.forEach(function(Lr){if(ws(Re,Lr))return ar=!0,!1}),ar}function zu(et){var pt=document.createElement("div");pt.innerHTML=et;var Mt=pt.childNodes[0];return Mt&&pt.contains(Mt)&&pt.removeChild(Mt),Mt}function Ss(et,pt){if(et)return Object.keys(pt).forEach(function(Mt){et.style[Mt]=pt[Mt]}),et}},731278:function(dr,R,z){"use strict";var B;B={value:!0};var X=z(858204);function k(m,I,A){var O=[0,0,0,0,0,0,0,0,0];return X.mat3.fromTranslation(O,A),X.mat3.multiply(m,O,I)}B=k;function P(m,I,A){var O=[0,0,0,0,0,0,0,0,0];return X.mat3.fromRotation(O,A),X.mat3.multiply(m,O,I)}B=P;function N(m,I,A){var O=[0,0,0,0,0,0,0,0,0];return X.mat3.fromScaling(O,A),X.mat3.multiply(m,O,I)}B=N;function D(m,I,A){return X.mat3.multiply(m,A,I)}function E(m,I){for(var A=m?[].concat(m):[1,0,0,0,1,0,0,0,1],O=0,U=I.length;O<U;O++){var j=I[O];switch(j[0]){case"t":k(A,A,[j[1],j[2]]);break;case"s":N(A,A,[j[1],j[2]]);break;case"r":P(A,A,j[1]);break;case"m":D(A,A,j[1]);break;default:break}}return A}R.vs=E;function y(m,I){return m[0]*I[1]-I[0]*m[1]}B=y;function M(m,I,A){var O=X.vec2.angle(m,I),U=y(m,I)>=0;return A?U?Math.PI*2-O:O:U?O:Math.PI*2-O}B=M;function _(m,I,A){return A?(m[0]=I[1],m[1]=-1*I[0]):(m[0]=-1*I[1],m[1]=I[0]),m}B=_},413810:function(dr,R,z){"use strict";z.r(R),z.d(R,{Cache:function(){return vs},assign:function(){return io},augment:function(){return ho},clamp:function(){return L},clearAnimationFrame:function(){return bs},clone:function(){return Ho},contains:function(){return P},debounce:function(){return fs},deepMix:function(){return eu},difference:function(){return y},each:function(){return d},endsWith:function(){return La},every:function(){return fr},extend:function(){return cs},filter:function(){return D},find:function(){return gt},findIndex:function(){return It},firstValue:function(){return zt},fixedBase:function(){return w},flatten:function(){return $},flattenDeep:function(){return St},forIn:function(){return fe},get:function(){return go},getEllipsisText:function(){return nu},getRange:function(){return ve},getType:function(){return Lo},getWrapBehavior:function(){return Pa},group:function(){return ba},groupBy:function(){return Vn},groupToMap:function(){return jn},has:function(){return Te},hasKey:function(){return Me},hasValue:function(){return Dr},head:function(){return En},identity:function(){return $o},includes:function(){return P},indexOf:function(){return Yi},isArguments:function(){return lo},isArray:function(){return U},isArrayLike:function(){return X},isBoolean:function(){return ms},isDate:function(){return Ui},isDecimal:function(){return wt},isElement:function(){return Vo},isEmpty:function(){return Va},isEqual:function(){return oo},isEqualWith:function(){return ki},isError:function(){return Cs},isEven:function(){return Ce},isFinite:function(){return Yo},isFunction:function(){return I},isInteger:function(){return Ke},isMatch:function(){return K},isNegative:function(){return er},isNil:function(){return O},isNull:function(){return Do},isNumber:function(){return xt},isNumberEqual:function(){return dn},isObject:function(){return j},isObjectLike:function(){return rt},isOdd:function(){return or},isPlainObject:function(){return ot},isPositive:function(){return $r},isPrototype:function(){return Co},isRegExp:function(){return Wi},isString:function(){return We},isType:function(){return m},isUndefined:function(){return Po},keys:function(){return Y},last:function(){return Yn},lowerCase:function(){return An},lowerFirst:function(){return da},map:function(){return Zo},mapValues:function(){return os},max:function(){return Ut},maxBy:function(){return Pr},measureTextWidth:function(){return hs},memoize:function(){return Ko},min:function(){return Ft},minBy:function(){return va},mix:function(){return io},mod:function(){return Mn},noop:function(){return Os},number2color:function(){return Ca},omit:function(){return ci},parseRadius:function(){return ft},pick:function(){return Is},pull:function(){return Ee},pullAt:function(){return Xt},reduce:function(){return Lt},remove:function(){return pe},requestAnimationFrame:function(){return jo},set:function(){return Rs},size:function(){return Fs},some:function(){return vn},sortBy:function(){return Mr},startsWith:function(){return Nn},substitute:function(){return hi},throttle:function(){return Bo},toArray:function(){return Fu},toDegree:function(){return Ea},toInteger:function(){return Kr},toRadian:function(){return Nt},toString:function(){return jr},union:function(){return sn},uniq:function(){return Vt},uniqueId:function(){return Bs},upperCase:function(){return fi},upperFirst:function(){return Da},values:function(){return nr},valuesOfKey:function(){return pn},wrapBehavior:function(){return na}});var B=function(Tt){return Tt!==null&&typeof Tt!="function"&&isFinite(Tt.length)},X=B,k=function(Tt,qt){return X(Tt)?Tt.indexOf(qt)>-1:!1},P=k,N=function(Tt,qt){if(!X(Tt))return Tt;for(var Fe=[],Ze=0;Ze<Tt.length;Ze++){var Sr=Tt[Ze];qt(Sr,Ze)&&Fe.push(Sr)}return Fe},D=N,E=function(Tt,qt){return qt===void 0&&(qt=[]),D(Tt,function(Fe){return!P(qt,Fe)})},y=E,M={}.toString,_=function(Tt,qt){return M.call(Tt)==="[object "+qt+"]"},m=_,I=function(Tt){return m(Tt,"Function")},A=function(Tt){return Tt==null},O=A,U=function(Tt){return Array.isArray?Array.isArray(Tt):m(Tt,"Array")},j=function(Tt){var qt=typeof Tt;return Tt!==null&&qt==="object"||qt==="function"};function x(Tt,qt){if(Tt){var Fe;if(U(Tt))for(var Ze=0,Sr=Tt.length;Ze<Sr&&(Fe=qt(Tt[Ze],Ze),Fe!==!1);Ze++);else if(j(Tt)){for(var Jr in Tt)if(Tt.hasOwnProperty(Jr)&&(Fe=qt(Tt[Jr],Jr),Fe===!1))break}}}var d=x,it=Object.keys?function(Tt){return Object.keys(Tt)}:function(Tt){var qt=[];return d(Tt,function(Fe,Ze){I(Tt)&&Ze==="prototype"||qt.push(Ze)}),qt},Y=it;function W(Tt,qt){var Fe=Y(qt),Ze=Fe.length;if(O(Tt))return!Ze;for(var Sr=0;Sr<Ze;Sr+=1){var Jr=Fe[Sr];if(qt[Jr]!==Tt[Jr]||!(Jr in Tt))return!1}return!0}var K=W,Q=function(Tt){return typeof Tt=="object"&&Tt!==null},rt=Q,J=function(Tt){if(!rt(Tt)||!m(Tt,"Object"))return!1;if(Object.getPrototypeOf(Tt)===null)return!0;for(var qt=Tt;Object.getPrototypeOf(qt)!==null;)qt=Object.getPrototypeOf(qt);return Object.getPrototypeOf(Tt)===qt},ot=J;function vt(Tt,qt){if(!U(Tt))return null;var Fe;if(I(qt)&&(Fe=qt),ot(qt)&&(Fe=function(Sr){return K(Sr,qt)}),Fe){for(var Ze=0;Ze<Tt.length;Ze+=1)if(Fe(Tt[Ze]))return Tt[Ze]}return null}var gt=vt;function Pt(Tt,qt,Fe){Fe===void 0&&(Fe=0);for(var Ze=Fe;Ze<Tt.length;Ze++)if(qt(Tt[Ze],Ze))return Ze;return-1}var It=Pt,Jt=function(Tt,qt){for(var Fe=null,Ze=0;Ze<Tt.length;Ze++){var Sr=Tt[Ze],Jr=Sr[qt];if(!O(Jr)){U(Jr)?Fe=Jr[0]:Fe=Jr;break}}return Fe},zt=Jt,kt=function(Tt){if(!U(Tt))return[];for(var qt=[],Fe=0;Fe<Tt.length;Fe++)qt=qt.concat(Tt[Fe]);return qt},$=kt,lt=function(Tt,qt){if(qt===void 0&&(qt=[]),!U(Tt))qt.push(Tt);else for(var Fe=0;Fe<Tt.length;Fe+=1)lt(Tt[Fe],qt);return qt},St=lt,Ut=function(Tt){if(U(Tt))return Tt.reduce(function(qt,Fe){return Math.max(qt,Fe)},Tt[0])},Ft=function(Tt){if(U(Tt))return Tt.reduce(function(qt,Fe){return Math.min(qt,Fe)},Tt[0])},ee=function(Tt){var qt=Tt.filter(function(nn){return!isNaN(nn)});if(!qt.length)return{min:0,max:0};if(U(Tt[0])){for(var Fe=[],Ze=0;Ze<Tt.length;Ze++)Fe=Fe.concat(Tt[Ze]);qt=Fe}var Sr=Ut(qt),Jr=Ft(qt);return{min:Jr,max:Sr}},ve=ee,be=Array.prototype,Ht=be.splice,Yt=be.indexOf,de=function(Tt){for(var qt=[],Fe=1;Fe<arguments.length;Fe++)qt[Fe-1]=arguments[Fe];for(var Ze=0;Ze<qt.length;Ze++)for(var Sr=qt[Ze],Jr=-1;(Jr=Yt.call(Tt,Sr))>-1;)Ht.call(Tt,Jr,1);return Tt},Ee=de,ge=Array.prototype.splice,Ot=function(qt,Fe){if(!X(qt))return[];for(var Ze=qt?Fe.length:0,Sr=Ze-1;Ze--;){var Jr=void 0,nn=Fe[Ze];(Ze===Sr||nn!==Jr)&&(Jr=nn,ge.call(qt,nn,1))}return qt},Xt=Ot,ce=function(Tt,qt,Fe){if(!U(Tt)&&!ot(Tt))return Tt;var Ze=Fe;return d(Tt,function(Sr,Jr){Ze=qt(Ze,Sr,Jr)}),Ze},Lt=ce,Kt=function(Tt,qt){var Fe=[];if(!X(Tt))return Fe;for(var Ze=-1,Sr=[],Jr=Tt.length;++Ze<Jr;){var nn=Tt[Ze];qt(nn,Ze,Tt)&&(Fe.push(nn),Sr.push(Ze))}return Xt(Tt,Sr),Fe},pe=Kt,We=function(Tt){return m(Tt,"String")};function Je(Tt,qt){var Fe;if(I(qt))Fe=function(Sr,Jr){return qt(Sr)-qt(Jr)};else{var Ze=[];We(qt)?Ze.push(qt):U(qt)&&(Ze=qt),Fe=function(Sr,Jr){for(var nn=0;nn<Ze.length;nn+=1){var $n=Ze[nn];if(Sr[$n]>Jr[$n])return 1;if(Sr[$n]<Jr[$n])return-1}return 0}}return Tt.sort(Fe),Tt}var Mr=Je;function Vt(Tt,qt){qt===void 0&&(qt=new Map);var Fe=[];if(Array.isArray(Tt))for(var Ze=0,Sr=Tt.length;Ze<Sr;Ze++){var Jr=Tt[Ze];qt.has(Jr)||(Fe.push(Jr),qt.set(Jr,!0))}return Fe}var on=function(){for(var Tt=[],qt=0;qt<arguments.length;qt++)Tt[qt]=arguments[qt];return Vt([].concat.apply([],Tt))},sn=on,pn=function(Tt,qt){for(var Fe=[],Ze={},Sr=0;Sr<Tt.length;Sr++){var Jr=Tt[Sr],nn=Jr[qt];if(!O(nn)){U(nn)||(nn=[nn]);for(var $n=0;$n<nn.length;$n++){var ai=nn[$n];Ze[ai]||(Fe.push(ai),Ze[ai]=!0)}}}return Fe};function En(Tt){if(X(Tt))return Tt[0]}function Yn(Tt){if(X(Tt)){var qt=Tt;return qt[qt.length-1]}}function ea(Tt,qt){return U(Tt)||We(Tt)?Tt[0]===qt:!1}var Nn=ea;function Zn(Tt,qt){return U(Tt)||We(Tt)?Tt[Tt.length-1]===qt:!1}var La=Zn,Aa=function(Tt,qt){for(var Fe=0;Fe<Tt.length;Fe++)if(!qt(Tt[Fe],Fe))return!1;return!0},fr=Aa,Or=function(Tt,qt){for(var Fe=0;Fe<Tt.length;Fe++)if(qt(Tt[Fe],Fe))return!0;return!1},vn=Or,yn=Object.prototype.hasOwnProperty;function qn(Tt,qt){if(!qt||!U(Tt))return{};for(var Fe={},Ze=I(qt)?qt:function($n){return $n[qt]},Sr,Jr=0;Jr<Tt.length;Jr++){var nn=Tt[Jr];Sr=Ze(nn),yn.call(Fe,Sr)?Fe[Sr].push(nn):Fe[Sr]=[nn]}return Fe}var Vn=qn;function jn(Tt,qt){if(!qt)return{0:Tt};if(!I(qt)){var Fe=U(qt)?qt:qt.replace(/\s+/g,"").split("*");qt=function(Ze){for(var Sr="_",Jr=0,nn=Fe.length;Jr<nn;Jr++)Sr+=Ze[Fe[Jr]]&&Ze[Fe[Jr]].toString();return Sr}}return Vn(Tt,qt)}var ba=function(Tt,qt){if(!qt)return[Tt];var Fe=jn(Tt,qt),Ze=[];for(var Sr in Fe)Ze.push(Fe[Sr]);return Ze};function ma(Tt,qt){return Tt["_wrap_"+qt]}var Pa=ma;function wn(Tt,qt){if(Tt["_wrap_"+qt])return Tt["_wrap_"+qt];var Fe=function(Ze){Tt[qt](Ze)};return Tt["_wrap_"+qt]=Fe,Fe}var na=wn,Qn={};function In(Tt){var qt=Qn[Tt];if(!qt){for(var Fe=Tt.toString(16),Ze=Fe.length;Ze<6;Ze++)Fe="0"+Fe;qt="#"+Fe,Qn[Tt]=qt}return qt}var Ca=In;function q(Tt){var qt=0,Fe=0,Ze=0,Sr=0;return U(Tt)?Tt.length===1?qt=Fe=Ze=Sr=Tt[0]:Tt.length===2?(qt=Ze=Tt[0],Fe=Sr=Tt[1]):Tt.length===3?(qt=Tt[0],Fe=Sr=Tt[1],Ze=Tt[2]):(qt=Tt[0],Fe=Tt[1],Ze=Tt[2],Sr=Tt[3]):qt=Fe=Ze=Sr=Tt,{r1:qt,r2:Fe,r3:Ze,r4:Sr}}var ft=q,nt=function(Tt,qt,Fe){return Tt<qt?qt:Tt>Fe?Fe:Tt},L=nt,b=function(Tt,qt){var Fe=qt.toString(),Ze=Fe.indexOf(".");if(Ze===-1)return Math.round(Tt);var Sr=Fe.substr(Ze+1).length;return Sr>20&&(Sr=20),parseFloat(Tt.toFixed(Sr))},w=b,V=function(Tt){return m(Tt,"Number")},xt=V,Ct=function(Tt){return xt(Tt)&&Tt%1!==0},wt=Ct,Rt=function(Tt){return xt(Tt)&&Tt%2===0},Ce=Rt,me=Number.isInteger?Number.isInteger:function(Tt){return xt(Tt)&&Tt%1===0},Ke=me,yr=function(Tt){return xt(Tt)&&Tt<0},er=yr,gr=1e-5;function dn(Tt,qt,Fe){return Fe===void 0&&(Fe=gr),Math.abs(Tt-qt)<Fe}var Ue=function(Tt){return xt(Tt)&&Tt%2!==0},or=Ue,mr=function(Tt){return xt(Tt)&&Tt>0},$r=mr,Pr=function(Tt,qt){if(U(Tt)){for(var Fe,Ze=-1/0,Sr=0;Sr<Tt.length;Sr++){var Jr=Tt[Sr],nn=I(qt)?qt(Jr):Jr[qt];nn>Ze&&(Fe=Jr,Ze=nn)}return Fe}},va=function(Tt,qt){if(U(Tt)){for(var Fe,Ze=1/0,Sr=0;Sr<Tt.length;Sr++){var Jr=Tt[Sr],nn=I(qt)?qt(Jr):Jr[qt];nn<Ze&&(Fe=Jr,Ze=nn)}return Fe}},Sa=function(Tt,qt){return(Tt%qt+qt)%qt},Mn=Sa,Un=180/Math.PI,Fa=function(Tt){return Un*Tt},Ea=Fa,Kr=parseInt,kn=Math.PI/180,_e=function(Tt){return kn*Tt},Nt=_e,fe=d,Te=function(Tt,qt){return Tt.hasOwnProperty(qt)},Me=Te,Le=Object.values?function(Tt){return Object.values(Tt)}:function(Tt){var qt=[];return d(Tt,function(Fe,Ze){I(Tt)&&Ze==="prototype"||qt.push(Fe)}),qt},nr=Le,Dr=function(Tt,qt){return P(nr(Tt),qt)},jr=function(Tt){return O(Tt)?"":Tt.toString()},Sn=function(Tt){return jr(Tt).toLowerCase()},An=Sn,Fn=function(Tt){var qt=jr(Tt);return qt.charAt(0).toLowerCase()+qt.substring(1)},da=Fn;function wa(Tt,qt){return!Tt||!qt?Tt:Tt.replace(/\\?\{([^{}]+)\}/g,function(Fe,Ze){return Fe.charAt(0)==="\\"?Fe.slice(1):qt[Ze]===void 0?"":qt[Ze]})}var hi=wa,Wn=function(Tt){return jr(Tt).toUpperCase()},fi=Wn,Oo=function(Tt){var qt=jr(Tt);return qt.charAt(0).toUpperCase()+qt.substring(1)},Da=Oo,xi={}.toString,co=function(Tt){return xi.call(Tt).replace(/^\[object /,"").replace(/]$/,"")},Lo=co,Eo=function(Tt){return m(Tt,"Arguments")},lo=Eo,Zi=function(Tt){return m(Tt,"Boolean")},ms=Zi,zi=function(Tt){return m(Tt,"Date")},Ui=zi,xs=function(Tt){return m(Tt,"Error")},Cs=xs;function Yo(Tt){return xt(Tt)&&isFinite(Tt)}var Ao=function(Tt){return Tt===null},Do=Ao,js=Object.prototype,Pn=function(Tt){var qt=Tt&&Tt.constructor,Fe=typeof qt=="function"&&qt.prototype||js;return Tt===Fe},Co=Pn,No=function(Tt){return m(Tt,"RegExp")},Wi=No,On=function(Tt){return Tt===void 0},Po=On,Ai=function(Tt){return Tt instanceof Element||Tt instanceof HTMLDocument},Vo=Ai;function jo(Tt){var qt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Fe){return setTimeout(Fe,16)};return qt(Tt)}function bs(Tt){var qt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;qt(Tt)}function ao(Tt,qt){for(var Fe in qt)qt.hasOwnProperty(Fe)&&Fe!=="constructor"&&qt[Fe]!==void 0&&(Tt[Fe]=qt[Fe])}function io(Tt,qt,Fe,Ze){return qt&&ao(Tt,qt),Fe&&ao(Tt,Fe),Ze&&ao(Tt,Ze),Tt}var ni=function(){for(var Tt=[],qt=0;qt<arguments.length;qt++)Tt[qt]=arguments[qt];for(var Fe=Tt[0],Ze=1;Ze<Tt.length;Ze++){var Sr=Tt[Ze];I(Sr)&&(Sr=Sr.prototype),io(Fe.prototype,Sr)}},ho=ni,ko=function(Tt){if(typeof Tt!="object"||Tt===null)return Tt;var qt;if(U(Tt)){qt=[];for(var Fe=0,Ze=Tt.length;Fe<Ze;Fe++)typeof Tt[Fe]=="object"&&Tt[Fe]!=null?qt[Fe]=ko(Tt[Fe]):qt[Fe]=Tt[Fe]}else{qt={};for(var Sr in Tt)typeof Tt[Sr]=="object"&&Tt[Sr]!=null?qt[Sr]=ko(Tt[Sr]):qt[Sr]=Tt[Sr]}return qt},Ho=ko;function Ro(Tt,qt,Fe){var Ze;return function(){var Sr=this,Jr=arguments,nn=function(){Ze=null,Fe||Tt.apply(Sr,Jr)},$n=Fe&&!Ze;clearTimeout(Ze),Ze=setTimeout(nn,qt),$n&&Tt.apply(Sr,Jr)}}var fs=Ro,Ko=function(Tt,qt){if(!I(Tt))throw new TypeError("Expected a function");var Fe=function(){for(var Ze=[],Sr=0;Sr<arguments.length;Sr++)Ze[Sr]=arguments[Sr];var Jr=qt?qt.apply(this,Ze):Ze[0],nn=Fe.cache;if(nn.has(Jr))return nn.get(Jr);var $n=Tt.apply(this,Ze);return nn.set(Jr,$n),$n};return Fe.cache=new Map,Fe},is=5;function Wa(Tt,qt,Fe,Ze){Fe=Fe||0,Ze=Ze||is;for(var Sr in qt)if(qt.hasOwnProperty(Sr)){var Jr=qt[Sr];Jr!==null&&ot(Jr)?(ot(Tt[Sr])||(Tt[Sr]={}),Fe<Ze?Wa(Tt[Sr],Jr,Fe+1,Ze):Tt[Sr]=qt[Sr]):U(Jr)?(Tt[Sr]=[],Tt[Sr]=Tt[Sr].concat(Jr)):Jr!==void 0&&(Tt[Sr]=Jr)}}var Ts=function(Tt){for(var qt=[],Fe=1;Fe<arguments.length;Fe++)qt[Fe-1]=arguments[Fe];for(var Ze=0;Ze<qt.length;Ze+=1)Wa(Tt,qt[Ze]);return Tt},eu=Ts,Xi=function(Tt,qt,Fe,Ze){I(qt)||(Fe=qt,qt=Tt,Tt=function(){});var Sr=Object.create?function(nn,$n){return Object.create(nn,{constructor:{value:$n}})}:function(nn,$n){function ai(){}ai.prototype=nn;var qi=new ai;return qi.constructor=$n,qi},Jr=Sr(qt.prototype,Tt);return Tt.prototype=io(Jr,Tt.prototype),Tt.superclass=Sr(qt.prototype,qt),io(Jr,Fe),io(Tt,Ze),Tt},cs=Xi,wo=function(Tt,qt){if(!X(Tt))return-1;var Fe=Array.prototype.indexOf;if(Fe)return Fe.call(Tt,qt);for(var Ze=-1,Sr=0;Sr<Tt.length;Sr++)if(Tt[Sr]===qt){Ze=Sr;break}return Ze},Yi=wo,vo=Object.prototype.hasOwnProperty;function ca(Tt){if(O(Tt))return!0;if(X(Tt))return!Tt.length;var qt=Lo(Tt);if(qt==="Map"||qt==="Set")return!Tt.size;if(Co(Tt))return!Object.keys(Tt).length;for(var Fe in Tt)if(vo.call(Tt,Fe))return!1;return!0}var Va=ca,mi=function(Tt,qt){if(Tt===qt)return!0;if(!Tt||!qt||We(Tt)||We(qt))return!1;if(X(Tt)||X(qt)){if(Tt.length!==qt.length)return!1;for(var Fe=!0,Ze=0;Ze<Tt.length&&(Fe=mi(Tt[Ze],qt[Ze]),!!Fe);Ze++);return Fe}if(rt(Tt)||rt(qt)){var Sr=Object.keys(Tt),Jr=Object.keys(qt);if(Sr.length!==Jr.length)return!1;for(var Fe=!0,Ze=0;Ze<Sr.length&&(Fe=mi(Tt[Sr[Ze]],qt[Sr[Ze]]),!!Fe);Ze++);return Fe}return!1},oo=mi,ki=function(Tt,qt,Fe){return I(Fe)?!!Fe(Tt,qt):oo(Tt,qt)},$i=function(Tt,qt){if(!X(Tt))return Tt;for(var Fe=[],Ze=0;Ze<Tt.length;Ze++){var Sr=Tt[Ze];Fe.push(qt(Sr,Ze))}return Fe},Zo=$i,So=function(Tt){return Tt},os=function(Tt,qt){qt===void 0&&(qt=So);var Fe={};return j(Tt)&&!O(Tt)&&Object.keys(Tt).forEach(function(Ze){Fe[Ze]=qt(Tt[Ze],Ze)}),Fe},go=function(Tt,qt,Fe){for(var Ze=0,Sr=We(qt)?qt.split("."):qt;Tt&&Ze<Sr.length;)Tt=Tt[Sr[Ze++]];return Tt===void 0||Ze<Sr.length?Fe:Tt},Rs=function(Tt,qt,Fe){var Ze=Tt,Sr=We(qt)?qt.split("."):qt;return Sr.forEach(function(Jr,nn){nn<Sr.length-1?(j(Ze[Jr])||(Ze[Jr]=xt(Sr[nn+1])?[]:{}),Ze=Ze[Jr]):Ze[Jr]=Fe}),Tt},ru=Object.prototype.hasOwnProperty,Is=function(Tt,qt){if(Tt===null||!ot(Tt))return{};var Fe={};return d(qt,function(Ze){ru.call(Tt,Ze)&&(Fe[Ze]=Tt[Ze])}),Fe},ci=function(Tt,qt){return Lt(Tt,function(Fe,Ze,Sr){return qt.includes(Sr)||(Fe[Sr]=Ze),Fe},{})},Bo=function(Tt,qt,Fe){var Ze,Sr,Jr,nn,$n=0;Fe||(Fe={});var ai=function(){$n=Fe.leading===!1?0:Date.now(),Ze=null,nn=Tt.apply(Sr,Jr),Ze||(Sr=Jr=null)},qi=function(){var so=Date.now();!$n&&Fe.leading===!1&&($n=so);var zs=qt-(so-$n);return Sr=this,Jr=arguments,zs<=0||zs>qt?(Ze&&(clearTimeout(Ze),Ze=null),$n=so,nn=Tt.apply(Sr,Jr),Ze||(Sr=Jr=null)):!Ze&&Fe.trailing!==!1&&(Ze=setTimeout(ai,zs)),nn};return qi.cancel=function(){clearTimeout(Ze),$n=0,Ze=Sr=Jr=null},qi},Fu=function(Tt){return X(Tt)?Array.prototype.slice.call(Tt):[]},po={},Bs=function(Tt){return Tt=Tt||"g",po[Tt]?po[Tt]+=1:po[Tt]=1,Tt+po[Tt]},Os=function(){},$o=function(Tt){return Tt};function Fs(Tt){return O(Tt)?0:X(Tt)?Tt.length:Object.keys(Tt).length}var ls=z(197582),qo,hs=Ko(function(Tt,qt){qt===void 0&&(qt={});var Fe=qt.fontSize,Ze=qt.fontFamily,Sr=qt.fontWeight,Jr=qt.fontStyle,nn=qt.fontVariant;return qo||(qo=document.createElement("canvas").getContext("2d")),qo.font=[Jr,nn,Sr,Fe+"px",Ze].join(" "),qo.measureText(We(Tt)?Tt:"").width},function(Tt,qt){return qt===void 0&&(qt={}),(0,ls.__spreadArrays)([Tt],nr(qt)).join("")}),nu=function(Tt,qt,Fe,Ze){Ze===void 0&&(Ze="...");var Sr=16,Jr=hs(Ze,Fe),nn=We(Tt)?Tt:jr(Tt),$n=qt,ai=[],qi,so;if(hs(Tt,Fe)<=qt)return Tt;for(;qi=nn.substr(0,Sr),so=hs(qi,Fe),!(so+Jr>$n&&so>$n);)if(ai.push(qi),$n-=so,nn=nn.substr(Sr),!nn)return ai.join("");for(;qi=nn.substr(0,1),so=hs(qi,Fe),!(so+Jr>$n);)if(ai.push(qi),$n-=so,nn=nn.substr(1),!nn)return ai.join("");return""+ai.join("")+Ze},Gs=function(){function Tt(){this.map={}}return Tt.prototype.has=function(qt){return this.map[qt]!==void 0},Tt.prototype.get=function(qt,Fe){var Ze=this.map[qt];return Ze===void 0?Fe:Ze},Tt.prototype.set=function(qt,Fe){this.map[qt]=Fe},Tt.prototype.clear=function(){this.map={}},Tt.prototype.delete=function(qt){delete this.map[qt]},Tt.prototype.size=function(){return Object.keys(this.map).length},Tt}(),vs=Gs},971497:function(dr,R,z){"use strict";z.r(R),z.d(R,{forceCenter:function(){return B},forceCollide:function(){return E},forceLink:function(){return I},forceManyBody:function(){return It},forceRadial:function(){return Jt},forceSimulation:function(){return Pt},forceX:function(){return zt},forceY:function(){return kt}});function B($,lt){var St,Ut=1;$==null&&($=0),lt==null&&(lt=0);function Ft(){var ee,ve=St.length,be,Ht=0,Yt=0;for(ee=0;ee<ve;++ee)be=St[ee],Ht+=be.x,Yt+=be.y;for(Ht=(Ht/ve-$)*Ut,Yt=(Yt/ve-lt)*Ut,ee=0;ee<ve;++ee)be=St[ee],be.x-=Ht,be.y-=Yt}return Ft.initialize=function(ee){St=ee},Ft.x=function(ee){return arguments.length?($=+ee,Ft):$},Ft.y=function(ee){return arguments.length?(lt=+ee,Ft):lt},Ft.strength=function(ee){return arguments.length?(Ut=+ee,Ft):Ut},Ft}var X=z(547148);function k($){return function(){return $}}function P($){return($()-.5)*1e-6}function N($){return $.x+$.vx}function D($){return $.y+$.vy}function E($){var lt,St,Ut,Ft=1,ee=1;typeof $!="function"&&($=k($==null?1:+$));function ve(){for(var Yt,de=lt.length,Ee,ge,Ot,Xt,ce,Lt,Kt=0;Kt<ee;++Kt)for(Ee=(0,X.Z)(lt,N,D).visitAfter(be),Yt=0;Yt<de;++Yt)ge=lt[Yt],ce=St[ge.index],Lt=ce*ce,Ot=ge.x+ge.vx,Xt=ge.y+ge.vy,Ee.visit(pe);function pe(We,Je,Mr,Vt,on){var sn=We.data,pn=We.r,En=ce+pn;if(sn){if(sn.index>ge.index){var Yn=Ot-sn.x-sn.vx,ea=Xt-sn.y-sn.vy,Nn=Yn*Yn+ea*ea;Nn<En*En&&(Yn===0&&(Yn=P(Ut),Nn+=Yn*Yn),ea===0&&(ea=P(Ut),Nn+=ea*ea),Nn=(En-(Nn=Math.sqrt(Nn)))/Nn*Ft,ge.vx+=(Yn*=Nn)*(En=(pn*=pn)/(Lt+pn)),ge.vy+=(ea*=Nn)*En,sn.vx-=Yn*(En=1-En),sn.vy-=ea*En)}return}return Je>Ot+En||Vt<Ot-En||Mr>Xt+En||on<Xt-En}}function be(Yt){if(Yt.data)return Yt.r=St[Yt.data.index];for(var de=Yt.r=0;de<4;++de)Yt[de]&&Yt[de].r>Yt.r&&(Yt.r=Yt[de].r)}function Ht(){if(lt){var Yt,de=lt.length,Ee;for(St=new Array(de),Yt=0;Yt<de;++Yt)Ee=lt[Yt],St[Ee.index]=+$(Ee,Yt,lt)}}return ve.initialize=function(Yt,de){lt=Yt,Ut=de,Ht()},ve.iterations=function(Yt){return arguments.length?(ee=+Yt,ve):ee},ve.strength=function(Yt){return arguments.length?(Ft=+Yt,ve):Ft},ve.radius=function(Yt){return arguments.length?($=typeof Yt=="function"?Yt:k(+Yt),Ht(),ve):$},ve}var y=z(918698),M=z.n(y);function _($){return $.index}function m($,lt){var St=$.get(lt);if(!St)throw new Error("node not found: "+lt);return St}function I($){var lt=_,St=Ee,Ut,Ft=k(30),ee,ve,be,Ht,Yt,de=1;$==null&&($=[]);function Ee(Lt){return 1/Math.min(be[Lt.source.index],be[Lt.target.index])}function ge(Lt){for(var Kt=0,pe=$.length;Kt<de;++Kt)for(var We=0,Je,Mr,Vt,on,sn,pn,En;We<pe;++We)Je=$[We],Mr=Je.source,Vt=Je.target,on=Vt.x+Vt.vx-Mr.x-Mr.vx||P(Yt),sn=Vt.y+Vt.vy-Mr.y-Mr.vy||P(Yt),pn=Math.sqrt(on*on+sn*sn),pn=(pn-ee[We])/pn*Lt*Ut[We],on*=pn,sn*=pn,Vt.vx-=on*(En=Ht[We]),Vt.vy-=sn*En,Mr.vx+=on*(En=1-En),Mr.vy+=sn*En}function Ot(){if(ve){var Lt,Kt=ve.length,pe=$.length,We=new Map(ve.map(function(Mr,Vt){return[lt(Mr,Vt,ve),Mr]})),Je;for(Lt=0,be=new Array(Kt);Lt<pe;++Lt)Je=$[Lt],Je.index=Lt,M()(Je.source)!=="object"&&(Je.source=m(We,Je.source)),M()(Je.target)!=="object"&&(Je.target=m(We,Je.target)),be[Je.source.index]=(be[Je.source.index]||0)+1,be[Je.target.index]=(be[Je.target.index]||0)+1;for(Lt=0,Ht=new Array(pe);Lt<pe;++Lt)Je=$[Lt],Ht[Lt]=be[Je.source.index]/(be[Je.source.index]+be[Je.target.index]);Ut=new Array(pe),Xt(),ee=new Array(pe),ce()}}function Xt(){if(ve)for(var Lt=0,Kt=$.length;Lt<Kt;++Lt)Ut[Lt]=+St($[Lt],Lt,$)}function ce(){if(ve)for(var Lt=0,Kt=$.length;Lt<Kt;++Lt)ee[Lt]=+Ft($[Lt],Lt,$)}return ge.initialize=function(Lt,Kt){ve=Lt,Yt=Kt,Ot()},ge.links=function(Lt){return arguments.length?($=Lt,Ot(),ge):$},ge.id=function(Lt){return arguments.length?(lt=Lt,ge):lt},ge.iterations=function(Lt){return arguments.length?(de=+Lt,ge):de},ge.strength=function(Lt){return arguments.length?(St=typeof Lt=="function"?Lt:k(+Lt),Xt(),ge):St},ge.distance=function(Lt){return arguments.length?(Ft=typeof Lt=="function"?Lt:k(+Lt),ce(),ge):Ft},ge}var A={value:function(){}};function O(){for(var $=0,lt=arguments.length,St={},Ut;$<lt;++$){if(!(Ut=arguments[$]+"")||Ut in St||/[\s.]/.test(Ut))throw new Error("illegal type: "+Ut);St[Ut]=[]}return new U(St)}function U($){this._=$}function j($,lt){return $.trim().split(/^|\s+/).map(function(St){var Ut="",Ft=St.indexOf(".");if(Ft>=0&&(Ut=St.slice(Ft+1),St=St.slice(0,Ft)),St&&!lt.hasOwnProperty(St))throw new Error("unknown type: "+St);return{type:St,name:Ut}})}U.prototype=O.prototype={constructor:U,on:function(lt,St){var Ut=this._,Ft=j(lt+"",Ut),ee,ve=-1,be=Ft.length;if(arguments.length<2){for(;++ve<be;)if((ee=(lt=Ft[ve]).type)&&(ee=x(Ut[ee],lt.name)))return ee;return}if(St!=null&&typeof St!="function")throw new Error("invalid callback: "+St);for(;++ve<be;)if(ee=(lt=Ft[ve]).type)Ut[ee]=d(Ut[ee],lt.name,St);else if(St==null)for(ee in Ut)Ut[ee]=d(Ut[ee],lt.name,null);return this},copy:function(){var lt={},St=this._;for(var Ut in St)lt[Ut]=St[Ut].slice();return new U(lt)},call:function(lt,St){if((ee=arguments.length-2)>0)for(var Ut=new Array(ee),Ft=0,ee,ve;Ft<ee;++Ft)Ut[Ft]=arguments[Ft+2];if(!this._.hasOwnProperty(lt))throw new Error("unknown type: "+lt);for(ve=this._[lt],Ft=0,ee=ve.length;Ft<ee;++Ft)ve[Ft].value.apply(St,Ut)},apply:function(lt,St,Ut){if(!this._.hasOwnProperty(lt))throw new Error("unknown type: "+lt);for(var Ft=this._[lt],ee=0,ve=Ft.length;ee<ve;++ee)Ft[ee].value.apply(St,Ut)}};function x($,lt){for(var St=0,Ut=$.length,Ft;St<Ut;++St)if((Ft=$[St]).name===lt)return Ft.value}function d($,lt,St){for(var Ut=0,Ft=$.length;Ut<Ft;++Ut)if($[Ut].name===lt){$[Ut]=A,$=$.slice(0,Ut).concat($.slice(Ut+1));break}return St!=null&&$.push({name:lt,value:St}),$}var it=O,Y=z(235374),W=1664525,K=1013904223,Q=4294967296;function rt(){var $=1;return function(){return($=(W*$+K)%Q)/Q}}function J($){return $.x}function ot($){return $.y}var vt=10,gt=Math.PI*(3-Math.sqrt(5));function Pt($){var lt,St=1,Ut=.001,Ft=1-Math.pow(Ut,1/300),ee=0,ve=.6,be=new Map,Ht=(0,Y.HT)(Ee),Yt=it("tick","end"),de=rt();$==null&&($=[]);function Ee(){ge(),Yt.call("tick",lt),St<Ut&&(Ht.stop(),Yt.call("end",lt))}function ge(ce){var Lt,Kt=$.length,pe;ce===void 0&&(ce=1);for(var We=0;We<ce;++We)for(St+=(ee-St)*Ft,be.forEach(function(Je){Je(St)}),Lt=0;Lt<Kt;++Lt)pe=$[Lt],pe.fx==null?pe.x+=pe.vx*=ve:(pe.x=pe.fx,pe.vx=0),pe.fy==null?pe.y+=pe.vy*=ve:(pe.y=pe.fy,pe.vy=0);return lt}function Ot(){for(var ce=0,Lt=$.length,Kt;ce<Lt;++ce){if(Kt=$[ce],Kt.index=ce,Kt.fx!=null&&(Kt.x=Kt.fx),Kt.fy!=null&&(Kt.y=Kt.fy),isNaN(Kt.x)||isNaN(Kt.y)){var pe=vt*Math.sqrt(.5+ce),We=ce*gt;Kt.x=pe*Math.cos(We),Kt.y=pe*Math.sin(We)}(isNaN(Kt.vx)||isNaN(Kt.vy))&&(Kt.vx=Kt.vy=0)}}function Xt(ce){return ce.initialize&&ce.initialize($,de),ce}return Ot(),lt={tick:ge,restart:function(){return Ht.restart(Ee),lt},stop:function(){return Ht.stop(),lt},nodes:function(Lt){return arguments.length?($=Lt,Ot(),be.forEach(Xt),lt):$},alpha:function(Lt){return arguments.length?(St=+Lt,lt):St},alphaMin:function(Lt){return arguments.length?(Ut=+Lt,lt):Ut},alphaDecay:function(Lt){return arguments.length?(Ft=+Lt,lt):+Ft},alphaTarget:function(Lt){return arguments.length?(ee=+Lt,lt):ee},velocityDecay:function(Lt){return arguments.length?(ve=1-Lt,lt):1-ve},randomSource:function(Lt){return arguments.length?(de=Lt,be.forEach(Xt),lt):de},force:function(Lt,Kt){return arguments.length>1?(Kt==null?be.delete(Lt):be.set(Lt,Xt(Kt)),lt):be.get(Lt)},find:function(Lt,Kt,pe){var We=0,Je=$.length,Mr,Vt,on,sn,pn;for(pe==null?pe=1/0:pe*=pe,We=0;We<Je;++We)sn=$[We],Mr=Lt-sn.x,Vt=Kt-sn.y,on=Mr*Mr+Vt*Vt,on<pe&&(pn=sn,pe=on);return pn},on:function(Lt,Kt){return arguments.length>1?(Yt.on(Lt,Kt),lt):Yt.on(Lt)}}}function It(){var $,lt,St,Ut,Ft=k(-30),ee,ve=1,be=1/0,Ht=.81;function Yt(Ot){var Xt,ce=$.length,Lt=(0,X.Z)($,J,ot).visitAfter(Ee);for(Ut=Ot,Xt=0;Xt<ce;++Xt)lt=$[Xt],Lt.visit(ge)}function de(){if($){var Ot,Xt=$.length,ce;for(ee=new Array(Xt),Ot=0;Ot<Xt;++Ot)ce=$[Ot],ee[ce.index]=+Ft(ce,Ot,$)}}function Ee(Ot){var Xt=0,ce,Lt,Kt=0,pe,We,Je;if(Ot.length){for(pe=We=Je=0;Je<4;++Je)(ce=Ot[Je])&&(Lt=Math.abs(ce.value))&&(Xt+=ce.value,Kt+=Lt,pe+=Lt*ce.x,We+=Lt*ce.y);Ot.x=pe/Kt,Ot.y=We/Kt}else{ce=Ot,ce.x=ce.data.x,ce.y=ce.data.y;do Xt+=ee[ce.data.index];while(ce=ce.next)}Ot.value=Xt}function ge(Ot,Xt,ce,Lt){if(!Ot.value)return!0;var Kt=Ot.x-lt.x,pe=Ot.y-lt.y,We=Lt-Xt,Je=Kt*Kt+pe*pe;if(We*We/Ht<Je)return Je<be&&(Kt===0&&(Kt=P(St),Je+=Kt*Kt),pe===0&&(pe=P(St),Je+=pe*pe),Je<ve&&(Je=Math.sqrt(ve*Je)),lt.vx+=Kt*Ot.value*Ut/Je,lt.vy+=pe*Ot.value*Ut/Je),!0;if(Ot.length||Je>=be)return;(Ot.data!==lt||Ot.next)&&(Kt===0&&(Kt=P(St),Je+=Kt*Kt),pe===0&&(pe=P(St),Je+=pe*pe),Je<ve&&(Je=Math.sqrt(ve*Je)));do Ot.data!==lt&&(We=ee[Ot.data.index]*Ut/Je,lt.vx+=Kt*We,lt.vy+=pe*We);while(Ot=Ot.next)}return Yt.initialize=function(Ot,Xt){$=Ot,St=Xt,de()},Yt.strength=function(Ot){return arguments.length?(Ft=typeof Ot=="function"?Ot:k(+Ot),de(),Yt):Ft},Yt.distanceMin=function(Ot){return arguments.length?(ve=Ot*Ot,Yt):Math.sqrt(ve)},Yt.distanceMax=function(Ot){return arguments.length?(be=Ot*Ot,Yt):Math.sqrt(be)},Yt.theta=function(Ot){return arguments.length?(Ht=Ot*Ot,Yt):Math.sqrt(Ht)},Yt}function Jt($,lt,St){var Ut,Ft=k(.1),ee,ve;typeof $!="function"&&($=k(+$)),lt==null&&(lt=0),St==null&&(St=0);function be(Yt){for(var de=0,Ee=Ut.length;de<Ee;++de){var ge=Ut[de],Ot=ge.x-lt||1e-6,Xt=ge.y-St||1e-6,ce=Math.sqrt(Ot*Ot+Xt*Xt),Lt=(ve[de]-ce)*ee[de]*Yt/ce;ge.vx+=Ot*Lt,ge.vy+=Xt*Lt}}function Ht(){if(Ut){var Yt,de=Ut.length;for(ee=new Array(de),ve=new Array(de),Yt=0;Yt<de;++Yt)ve[Yt]=+$(Ut[Yt],Yt,Ut),ee[Yt]=isNaN(ve[Yt])?0:+Ft(Ut[Yt],Yt,Ut)}}return be.initialize=function(Yt){Ut=Yt,Ht()},be.strength=function(Yt){return arguments.length?(Ft=typeof Yt=="function"?Yt:k(+Yt),Ht(),be):Ft},be.radius=function(Yt){return arguments.length?($=typeof Yt=="function"?Yt:k(+Yt),Ht(),be):$},be.x=function(Yt){return arguments.length?(lt=+Yt,be):lt},be.y=function(Yt){return arguments.length?(St=+Yt,be):St},be}function zt($){var lt=k(.1),St,Ut,Ft;typeof $!="function"&&($=k($==null?0:+$));function ee(be){for(var Ht=0,Yt=St.length,de;Ht<Yt;++Ht)de=St[Ht],de.vx+=(Ft[Ht]-de.x)*Ut[Ht]*be}function ve(){if(St){var be,Ht=St.length;for(Ut=new Array(Ht),Ft=new Array(Ht),be=0;be<Ht;++be)Ut[be]=isNaN(Ft[be]=+$(St[be],be,St))?0:+lt(St[be],be,St)}}return ee.initialize=function(be){St=be,ve()},ee.strength=function(be){return arguments.length?(lt=typeof be=="function"?be:k(+be),ve(),ee):lt},ee.x=function(be){return arguments.length?($=typeof be=="function"?be:k(+be),ve(),ee):$},ee}function kt($){var lt=k(.1),St,Ut,Ft;typeof $!="function"&&($=k($==null?0:+$));function ee(be){for(var Ht=0,Yt=St.length,de;Ht<Yt;++Ht)de=St[Ht],de.vy+=(Ft[Ht]-de.y)*Ut[Ht]*be}function ve(){if(St){var be,Ht=St.length;for(Ut=new Array(Ht),Ft=new Array(Ht),be=0;be<Ht;++be)Ut[be]=isNaN(Ft[be]=+$(St[be],be,St))?0:+lt(St[be],be,St)}}return ee.initialize=function(be){St=be,ve()},ee.strength=function(be){return arguments.length?(lt=typeof be=="function"?be:k(+be),ve(),ee):lt},ee.y=function(be){return arguments.length?($=typeof be=="function"?be:k(+be),ve(),ee):$},ee}},249612:function(dr,R,z){"use strict";var B=z(994993).default,X=z(861655).default,k=z(226389).default,P=z(918698).default,N=z(856690).default,D=z(689728).default,E=z(744091),y=z(975823),M=" ".repeat(2),_=" ".repeat(4);function m(){return I(this)}function I(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L=nt.maxRows,b=L===void 0?15:L,w=nt.maxColumns,V=w===void 0?10:w,xt=nt.maxNumSize,Ct=xt===void 0?8:xt,wt=nt.padMinus,Rt=wt===void 0?"auto":wt;return"".concat(ft.constructor.name,` {
`).concat(M,`[
`).concat(_).concat(A(ft,b,V,Ct,Rt),`
`).concat(M,`]
`).concat(M,"rows: ").concat(ft.rows,`
`).concat(M,"columns: ").concat(ft.columns,`
}`)}function A(ft,nt,L,b,w){var V=ft.rows,xt=ft.columns,Ct=Math.min(V,nt),wt=Math.min(xt,L),Rt=[];if(w==="auto"){w=!1;t:for(var Ce=0;Ce<Ct;Ce++)for(var me=0;me<wt;me++)if(ft.get(Ce,me)<0){w=!0;break t}}for(var Ke=0;Ke<Ct;Ke++){for(var yr=[],er=0;er<wt;er++)yr.push(O(ft.get(Ke,er),b,w));Rt.push("".concat(yr.join(" ")))}return wt!==xt&&(Rt[Rt.length-1]+=" ... ".concat(xt-L," more columns")),Ct!==V&&Rt.push("... ".concat(V-nt," more rows")),Rt.join(`
`.concat(_))}function O(ft,nt,L){return(ft>=0&&L?" ".concat(U(ft,nt-1)):U(ft,nt)).padEnd(nt)}function U(ft,nt){var L=ft.toString();if(L.length<=nt)return L;var b=ft.toFixed(nt);if(b.length>nt&&(b=ft.toFixed(Math.max(0,nt-(b.length-nt)))),b.length<=nt&&!b.startsWith("0.000")&&!b.startsWith("-0.000"))return b;var w=ft.toExponential(nt);return w.length>nt&&(w=ft.toExponential(Math.max(0,nt-(w.length-nt)))),w.slice(0)}function j(ft,nt){ft.prototype.add=function(b){return typeof b=="number"?this.addS(b):this.addM(b)},ft.prototype.addS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)+b);return this},ft.prototype.addM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)+b.get(w,V));return this},ft.add=function(b,w){var V=new nt(b);return V.add(w)},ft.prototype.sub=function(b){return typeof b=="number"?this.subS(b):this.subM(b)},ft.prototype.subS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)-b);return this},ft.prototype.subM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)-b.get(w,V));return this},ft.sub=function(b,w){var V=new nt(b);return V.sub(w)},ft.prototype.subtract=ft.prototype.sub,ft.prototype.subtractS=ft.prototype.subS,ft.prototype.subtractM=ft.prototype.subM,ft.subtract=ft.sub,ft.prototype.mul=function(b){return typeof b=="number"?this.mulS(b):this.mulM(b)},ft.prototype.mulS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)*b);return this},ft.prototype.mulM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)*b.get(w,V));return this},ft.mul=function(b,w){var V=new nt(b);return V.mul(w)},ft.prototype.multiply=ft.prototype.mul,ft.prototype.multiplyS=ft.prototype.mulS,ft.prototype.multiplyM=ft.prototype.mulM,ft.multiply=ft.mul,ft.prototype.div=function(b){return typeof b=="number"?this.divS(b):this.divM(b)},ft.prototype.divS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)/b);return this},ft.prototype.divM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)/b.get(w,V));return this},ft.div=function(b,w){var V=new nt(b);return V.div(w)},ft.prototype.divide=ft.prototype.div,ft.prototype.divideS=ft.prototype.divS,ft.prototype.divideM=ft.prototype.divM,ft.divide=ft.div,ft.prototype.mod=function(b){return typeof b=="number"?this.modS(b):this.modM(b)},ft.prototype.modS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)%b);return this},ft.prototype.modM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)%b.get(w,V));return this},ft.mod=function(b,w){var V=new nt(b);return V.mod(w)},ft.prototype.modulus=ft.prototype.mod,ft.prototype.modulusS=ft.prototype.modS,ft.prototype.modulusM=ft.prototype.modM,ft.modulus=ft.mod,ft.prototype.and=function(b){return typeof b=="number"?this.andS(b):this.andM(b)},ft.prototype.andS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)&b);return this},ft.prototype.andM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)&b.get(w,V));return this},ft.and=function(b,w){var V=new nt(b);return V.and(w)},ft.prototype.or=function(b){return typeof b=="number"?this.orS(b):this.orM(b)},ft.prototype.orS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)|b);return this},ft.prototype.orM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)|b.get(w,V));return this},ft.or=function(b,w){var V=new nt(b);return V.or(w)},ft.prototype.xor=function(b){return typeof b=="number"?this.xorS(b):this.xorM(b)},ft.prototype.xorS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)^b);return this},ft.prototype.xorM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)^b.get(w,V));return this},ft.xor=function(b,w){var V=new nt(b);return V.xor(w)},ft.prototype.leftShift=function(b){return typeof b=="number"?this.leftShiftS(b):this.leftShiftM(b)},ft.prototype.leftShiftS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)<<b);return this},ft.prototype.leftShiftM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)<<b.get(w,V));return this},ft.leftShift=function(b,w){var V=new nt(b);return V.leftShift(w)},ft.prototype.signPropagatingRightShift=function(b){return typeof b=="number"?this.signPropagatingRightShiftS(b):this.signPropagatingRightShiftM(b)},ft.prototype.signPropagatingRightShiftS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)>>b);return this},ft.prototype.signPropagatingRightShiftM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)>>b.get(w,V));return this},ft.signPropagatingRightShift=function(b,w){var V=new nt(b);return V.signPropagatingRightShift(w)},ft.prototype.rightShift=function(b){return typeof b=="number"?this.rightShiftS(b):this.rightShiftM(b)},ft.prototype.rightShiftS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)>>>b);return this},ft.prototype.rightShiftM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,this.get(w,V)>>>b.get(w,V));return this},ft.rightShift=function(b,w){var V=new nt(b);return V.rightShift(w)},ft.prototype.zeroFillRightShift=ft.prototype.rightShift,ft.prototype.zeroFillRightShiftS=ft.prototype.rightShiftS,ft.prototype.zeroFillRightShiftM=ft.prototype.rightShiftM,ft.zeroFillRightShift=ft.rightShift,ft.prototype.not=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,~this.get(b,w));return this},ft.not=function(b){var w=new nt(b);return w.not()},ft.prototype.abs=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.abs(this.get(b,w)));return this},ft.abs=function(b){var w=new nt(b);return w.abs()},ft.prototype.acos=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.acos(this.get(b,w)));return this},ft.acos=function(b){var w=new nt(b);return w.acos()},ft.prototype.acosh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.acosh(this.get(b,w)));return this},ft.acosh=function(b){var w=new nt(b);return w.acosh()},ft.prototype.asin=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.asin(this.get(b,w)));return this},ft.asin=function(b){var w=new nt(b);return w.asin()},ft.prototype.asinh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.asinh(this.get(b,w)));return this},ft.asinh=function(b){var w=new nt(b);return w.asinh()},ft.prototype.atan=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.atan(this.get(b,w)));return this},ft.atan=function(b){var w=new nt(b);return w.atan()},ft.prototype.atanh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.atanh(this.get(b,w)));return this},ft.atanh=function(b){var w=new nt(b);return w.atanh()},ft.prototype.cbrt=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.cbrt(this.get(b,w)));return this},ft.cbrt=function(b){var w=new nt(b);return w.cbrt()},ft.prototype.ceil=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.ceil(this.get(b,w)));return this},ft.ceil=function(b){var w=new nt(b);return w.ceil()},ft.prototype.clz32=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.clz32(this.get(b,w)));return this},ft.clz32=function(b){var w=new nt(b);return w.clz32()},ft.prototype.cos=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.cos(this.get(b,w)));return this},ft.cos=function(b){var w=new nt(b);return w.cos()},ft.prototype.cosh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.cosh(this.get(b,w)));return this},ft.cosh=function(b){var w=new nt(b);return w.cosh()},ft.prototype.exp=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.exp(this.get(b,w)));return this},ft.exp=function(b){var w=new nt(b);return w.exp()},ft.prototype.expm1=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.expm1(this.get(b,w)));return this},ft.expm1=function(b){var w=new nt(b);return w.expm1()},ft.prototype.floor=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.floor(this.get(b,w)));return this},ft.floor=function(b){var w=new nt(b);return w.floor()},ft.prototype.fround=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.fround(this.get(b,w)));return this},ft.fround=function(b){var w=new nt(b);return w.fround()},ft.prototype.log=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.log(this.get(b,w)));return this},ft.log=function(b){var w=new nt(b);return w.log()},ft.prototype.log1p=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.log1p(this.get(b,w)));return this},ft.log1p=function(b){var w=new nt(b);return w.log1p()},ft.prototype.log10=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.log10(this.get(b,w)));return this},ft.log10=function(b){var w=new nt(b);return w.log10()},ft.prototype.log2=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.log2(this.get(b,w)));return this},ft.log2=function(b){var w=new nt(b);return w.log2()},ft.prototype.round=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.round(this.get(b,w)));return this},ft.round=function(b){var w=new nt(b);return w.round()},ft.prototype.sign=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.sign(this.get(b,w)));return this},ft.sign=function(b){var w=new nt(b);return w.sign()},ft.prototype.sin=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.sin(this.get(b,w)));return this},ft.sin=function(b){var w=new nt(b);return w.sin()},ft.prototype.sinh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.sinh(this.get(b,w)));return this},ft.sinh=function(b){var w=new nt(b);return w.sinh()},ft.prototype.sqrt=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.sqrt(this.get(b,w)));return this},ft.sqrt=function(b){var w=new nt(b);return w.sqrt()},ft.prototype.tan=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.tan(this.get(b,w)));return this},ft.tan=function(b){var w=new nt(b);return w.tan()},ft.prototype.tanh=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.tanh(this.get(b,w)));return this},ft.tanh=function(b){var w=new nt(b);return w.tanh()},ft.prototype.trunc=function(){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,Math.trunc(this.get(b,w)));return this},ft.trunc=function(b){var w=new nt(b);return w.trunc()},ft.pow=function(b,w){var V=new nt(b);return V.pow(w)},ft.prototype.pow=function(b){return typeof b=="number"?this.powS(b):this.powM(b)},ft.prototype.powS=function(b){for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,Math.pow(this.get(w,V),b));return this},ft.prototype.powM=function(b){if(b=nt.checkMatrix(b),this.rows!==b.rows||this.columns!==b.columns)throw new RangeError("Matrices dimensions must be equal");for(var w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.set(w,V,Math.pow(this.get(w,V),b.get(w,V)));return this}}function x(ft,nt,L){var b=L?ft.rows:ft.rows-1;if(nt<0||nt>b)throw new RangeError("Row index out of range")}function d(ft,nt,L){var b=L?ft.columns:ft.columns-1;if(nt<0||nt>b)throw new RangeError("Column index out of range")}function it(ft,nt){if(nt.to1DArray&&(nt=nt.to1DArray()),nt.length!==ft.columns)throw new RangeError("vector size must be the same as the number of columns");return nt}function Y(ft,nt){if(nt.to1DArray&&(nt=nt.to1DArray()),nt.length!==ft.rows)throw new RangeError("vector size must be the same as the number of rows");return nt}function W(ft,nt){if(!E.isAnyArray(nt))throw new TypeError("row indices must be an array");for(var L=0;L<nt.length;L++)if(nt[L]<0||nt[L]>=ft.rows)throw new RangeError("row indices are out of range")}function K(ft,nt){if(!E.isAnyArray(nt))throw new TypeError("column indices must be an array");for(var L=0;L<nt.length;L++)if(nt[L]<0||nt[L]>=ft.columns)throw new RangeError("column indices are out of range")}function Q(ft,nt,L,b,w){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(J("startRow",nt),J("endRow",L),J("startColumn",b),J("endColumn",w),nt>L||b>w||nt<0||nt>=ft.rows||L<0||L>=ft.rows||b<0||b>=ft.columns||w<0||w>=ft.columns)throw new RangeError("Submatrix indices are out of range")}function rt(ft){for(var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,L=[],b=0;b<ft;b++)L.push(nt);return L}function J(ft,nt){if(typeof nt!="number")throw new TypeError("".concat(ft," must be a number"))}function ot(ft){if(ft.isEmpty())throw new Error("Empty matrix has no elements to index")}function vt(ft){for(var nt=rt(ft.rows),L=0;L<ft.rows;++L)for(var b=0;b<ft.columns;++b)nt[L]+=ft.get(L,b);return nt}function gt(ft){for(var nt=rt(ft.columns),L=0;L<ft.rows;++L)for(var b=0;b<ft.columns;++b)nt[b]+=ft.get(L,b);return nt}function Pt(ft){for(var nt=0,L=0;L<ft.rows;L++)for(var b=0;b<ft.columns;b++)nt+=ft.get(L,b);return nt}function It(ft){for(var nt=rt(ft.rows,1),L=0;L<ft.rows;++L)for(var b=0;b<ft.columns;++b)nt[L]*=ft.get(L,b);return nt}function Jt(ft){for(var nt=rt(ft.columns,1),L=0;L<ft.rows;++L)for(var b=0;b<ft.columns;++b)nt[b]*=ft.get(L,b);return nt}function zt(ft){for(var nt=1,L=0;L<ft.rows;L++)for(var b=0;b<ft.columns;b++)nt*=ft.get(L,b);return nt}function kt(ft,nt,L){for(var b=ft.rows,w=ft.columns,V=[],xt=0;xt<b;xt++){for(var Ct=0,wt=0,Rt=0,Ce=0;Ce<w;Ce++)Rt=ft.get(xt,Ce)-L[xt],Ct+=Rt,wt+=Rt*Rt;nt?V.push((wt-Ct*Ct/w)/(w-1)):V.push((wt-Ct*Ct/w)/w)}return V}function $(ft,nt,L){for(var b=ft.rows,w=ft.columns,V=[],xt=0;xt<w;xt++){for(var Ct=0,wt=0,Rt=0,Ce=0;Ce<b;Ce++)Rt=ft.get(Ce,xt)-L[xt],Ct+=Rt,wt+=Rt*Rt;nt?V.push((wt-Ct*Ct/b)/(b-1)):V.push((wt-Ct*Ct/b)/b)}return V}function lt(ft,nt,L){for(var b=ft.rows,w=ft.columns,V=b*w,xt=0,Ct=0,wt=0,Rt=0;Rt<b;Rt++)for(var Ce=0;Ce<w;Ce++)wt=ft.get(Rt,Ce)-L,xt+=wt,Ct+=wt*wt;return nt?(Ct-xt*xt/V)/(V-1):(Ct-xt*xt/V)/V}function St(ft,nt){for(var L=0;L<ft.rows;L++)for(var b=0;b<ft.columns;b++)ft.set(L,b,ft.get(L,b)-nt[L])}function Ut(ft,nt){for(var L=0;L<ft.rows;L++)for(var b=0;b<ft.columns;b++)ft.set(L,b,ft.get(L,b)-nt[b])}function Ft(ft,nt){for(var L=0;L<ft.rows;L++)for(var b=0;b<ft.columns;b++)ft.set(L,b,ft.get(L,b)-nt)}function ee(ft){for(var nt=[],L=0;L<ft.rows;L++){for(var b=0,w=0;w<ft.columns;w++)b+=Math.pow(ft.get(L,w),2)/(ft.columns-1);nt.push(Math.sqrt(b))}return nt}function ve(ft,nt){for(var L=0;L<ft.rows;L++)for(var b=0;b<ft.columns;b++)ft.set(L,b,ft.get(L,b)/nt[L])}function be(ft){for(var nt=[],L=0;L<ft.columns;L++){for(var b=0,w=0;w<ft.rows;w++)b+=Math.pow(ft.get(w,L),2)/(ft.rows-1);nt.push(Math.sqrt(b))}return nt}function Ht(ft,nt){for(var L=0;L<ft.rows;L++)for(var b=0;b<ft.columns;b++)ft.set(L,b,ft.get(L,b)/nt[b])}function Yt(ft){for(var nt=ft.size-1,L=0,b=0;b<ft.columns;b++)for(var w=0;w<ft.rows;w++)L+=Math.pow(ft.get(w,b),2)/nt;return Math.sqrt(L)}function de(ft,nt){for(var L=0;L<ft.rows;L++)for(var b=0;b<ft.columns;b++)ft.set(L,b,ft.get(L,b)/nt)}var Ee=function(){function ft(){N(this,ft)}return D(ft,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(L){if(typeof L!="function")throw new TypeError("callback must be a function");for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)L.call(this,b,w);return this}},{key:"to1DArray",value:function(){for(var L=[],b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)L.push(this.get(b,w));return L}},{key:"to2DArray",value:function(){for(var L=[],b=0;b<this.rows;b++){L.push([]);for(var w=0;w<this.columns;w++)L[b].push(this.get(b,w))}return L}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var L=0;L<this.rows;L++)for(var b=0;b<=L;b++)if(this.get(L,b)!==this.get(b,L))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var L=0,b=0,w=-1,V=!0,xt=!1;L<this.rows&&V;){for(b=0,xt=!1;b<this.columns&&xt===!1;)this.get(L,b)===0?b++:this.get(L,b)===1&&b>w?(xt=!0,w=b):(V=!1,xt=!0);L++}return V}},{key:"isReducedEchelonForm",value:function(){for(var L=0,b=0,w=-1,V=!0,xt=!1;L<this.rows&&V;){for(b=0,xt=!1;b<this.columns&&xt===!1;)this.get(L,b)===0?b++:this.get(L,b)===1&&b>w?(xt=!0,w=b):(V=!1,xt=!0);for(var Ct=b+1;Ct<this.rows;Ct++)this.get(L,Ct)!==0&&(V=!1);L++}return V}},{key:"echelonForm",value:function(){for(var L=this.clone(),b=0,w=0;b<L.rows&&w<L.columns;){for(var V=b,xt=b;xt<L.rows;xt++)L.get(xt,w)>L.get(V,w)&&(V=xt);if(L.get(V,w)===0)w++;else{L.swapRows(b,V);for(var Ct=L.get(b,w),wt=w;wt<L.columns;wt++)L.set(b,wt,L.get(b,wt)/Ct);for(var Rt=b+1;Rt<L.rows;Rt++){var Ce=L.get(Rt,w)/L.get(b,w);L.set(Rt,w,0);for(var me=w+1;me<L.columns;me++)L.set(Rt,me,L.get(Rt,me)-L.get(b,me)*Ce)}b++,w++}}return L}},{key:"reducedEchelonForm",value:function(){for(var L=this.echelonForm(),b=L.columns,w=L.rows,V=w-1;V>=0;)if(L.maxRow(V)===0)V--;else{for(var xt=0,Ct=!1;xt<w&&Ct===!1;)L.get(V,xt)===1?Ct=!0:xt++;for(var wt=0;wt<V;wt++)for(var Rt=L.get(wt,xt),Ce=xt;Ce<b;Ce++){var me=L.get(wt,Ce)-Rt*L.get(V,Ce);L.set(wt,Ce,me)}V--}return L}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(P(L)!=="object")throw new TypeError("options must be an object");var b=L.rows,w=b===void 0?1:b,V=L.columns,xt=V===void 0?1:V;if(!Number.isInteger(w)||w<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(xt)||xt<=0)throw new TypeError("columns must be a positive integer");for(var Ct=new Xt(this.rows*w,this.columns*xt),wt=0;wt<w;wt++)for(var Rt=0;Rt<xt;Rt++)Ct.setSubMatrix(this,this.rows*wt,this.columns*Rt);return Ct}},{key:"fill",value:function(L){for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,L);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(L){x(this,L);for(var b=[],w=0;w<this.columns;w++)b.push(this.get(L,w));return b}},{key:"getRowVector",value:function(L){return Xt.rowVector(this.getRow(L))}},{key:"setRow",value:function(L,b){x(this,L),b=it(this,b);for(var w=0;w<this.columns;w++)this.set(L,w,b[w]);return this}},{key:"swapRows",value:function(L,b){x(this,L),x(this,b);for(var w=0;w<this.columns;w++){var V=this.get(L,w);this.set(L,w,this.get(b,w)),this.set(b,w,V)}return this}},{key:"getColumn",value:function(L){d(this,L);for(var b=[],w=0;w<this.rows;w++)b.push(this.get(w,L));return b}},{key:"getColumnVector",value:function(L){return Xt.columnVector(this.getColumn(L))}},{key:"setColumn",value:function(L,b){d(this,L),b=Y(this,b);for(var w=0;w<this.rows;w++)this.set(w,L,b[w]);return this}},{key:"swapColumns",value:function(L,b){d(this,L),d(this,b);for(var w=0;w<this.rows;w++){var V=this.get(w,L);this.set(w,L,this.get(w,b)),this.set(w,b,V)}return this}},{key:"addRowVector",value:function(L){L=it(this,L);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)+L[w]);return this}},{key:"subRowVector",value:function(L){L=it(this,L);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)-L[w]);return this}},{key:"mulRowVector",value:function(L){L=it(this,L);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)*L[w]);return this}},{key:"divRowVector",value:function(L){L=it(this,L);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)/L[w]);return this}},{key:"addColumnVector",value:function(L){L=Y(this,L);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)+L[b]);return this}},{key:"subColumnVector",value:function(L){L=Y(this,L);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)-L[b]);return this}},{key:"mulColumnVector",value:function(L){L=Y(this,L);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)*L[b]);return this}},{key:"divColumnVector",value:function(L){L=Y(this,L);for(var b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)this.set(b,w,this.get(b,w)/L[b]);return this}},{key:"mulRow",value:function(L,b){x(this,L);for(var w=0;w<this.columns;w++)this.set(L,w,this.get(L,w)*b);return this}},{key:"mulColumn",value:function(L,b){d(this,L);for(var w=0;w<this.rows;w++)this.set(w,L,this.get(w,L)*b);return this}},{key:"max",value:function(L){if(this.isEmpty())return NaN;switch(L){case"row":{for(var b=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.get(w,V)>b[w]&&(b[w]=this.get(w,V));return b}case"column":{for(var xt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),Ct=0;Ct<this.rows;Ct++)for(var wt=0;wt<this.columns;wt++)this.get(Ct,wt)>xt[wt]&&(xt[wt]=this.get(Ct,wt));return xt}case void 0:{for(var Rt=this.get(0,0),Ce=0;Ce<this.rows;Ce++)for(var me=0;me<this.columns;me++)this.get(Ce,me)>Rt&&(Rt=this.get(Ce,me));return Rt}default:throw new Error("invalid option: ".concat(L))}}},{key:"maxIndex",value:function(){ot(this);for(var L=this.get(0,0),b=[0,0],w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.get(w,V)>L&&(L=this.get(w,V),b[0]=w,b[1]=V);return b}},{key:"min",value:function(L){if(this.isEmpty())return NaN;switch(L){case"row":{for(var b=new Array(this.rows).fill(Number.POSITIVE_INFINITY),w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.get(w,V)<b[w]&&(b[w]=this.get(w,V));return b}case"column":{for(var xt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),Ct=0;Ct<this.rows;Ct++)for(var wt=0;wt<this.columns;wt++)this.get(Ct,wt)<xt[wt]&&(xt[wt]=this.get(Ct,wt));return xt}case void 0:{for(var Rt=this.get(0,0),Ce=0;Ce<this.rows;Ce++)for(var me=0;me<this.columns;me++)this.get(Ce,me)<Rt&&(Rt=this.get(Ce,me));return Rt}default:throw new Error("invalid option: ".concat(L))}}},{key:"minIndex",value:function(){ot(this);for(var L=this.get(0,0),b=[0,0],w=0;w<this.rows;w++)for(var V=0;V<this.columns;V++)this.get(w,V)<L&&(L=this.get(w,V),b[0]=w,b[1]=V);return b}},{key:"maxRow",value:function(L){if(x(this,L),this.isEmpty())return NaN;for(var b=this.get(L,0),w=1;w<this.columns;w++)this.get(L,w)>b&&(b=this.get(L,w));return b}},{key:"maxRowIndex",value:function(L){x(this,L),ot(this);for(var b=this.get(L,0),w=[L,0],V=1;V<this.columns;V++)this.get(L,V)>b&&(b=this.get(L,V),w[1]=V);return w}},{key:"minRow",value:function(L){if(x(this,L),this.isEmpty())return NaN;for(var b=this.get(L,0),w=1;w<this.columns;w++)this.get(L,w)<b&&(b=this.get(L,w));return b}},{key:"minRowIndex",value:function(L){x(this,L),ot(this);for(var b=this.get(L,0),w=[L,0],V=1;V<this.columns;V++)this.get(L,V)<b&&(b=this.get(L,V),w[1]=V);return w}},{key:"maxColumn",value:function(L){if(d(this,L),this.isEmpty())return NaN;for(var b=this.get(0,L),w=1;w<this.rows;w++)this.get(w,L)>b&&(b=this.get(w,L));return b}},{key:"maxColumnIndex",value:function(L){d(this,L),ot(this);for(var b=this.get(0,L),w=[0,L],V=1;V<this.rows;V++)this.get(V,L)>b&&(b=this.get(V,L),w[0]=V);return w}},{key:"minColumn",value:function(L){if(d(this,L),this.isEmpty())return NaN;for(var b=this.get(0,L),w=1;w<this.rows;w++)this.get(w,L)<b&&(b=this.get(w,L));return b}},{key:"minColumnIndex",value:function(L){d(this,L),ot(this);for(var b=this.get(0,L),w=[0,L],V=1;V<this.rows;V++)this.get(V,L)<b&&(b=this.get(V,L),w[0]=V);return w}},{key:"diag",value:function(){for(var L=Math.min(this.rows,this.columns),b=[],w=0;w<L;w++)b.push(this.get(w,w));return b}},{key:"norm",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius";switch(L){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(L))}}},{key:"cumulativeSum",value:function(){for(var L=0,b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)L+=this.get(b,w),this.set(b,w,L);return this}},{key:"dot",value:function(L){ft.isMatrix(L)&&(L=L.to1DArray());var b=this.to1DArray();if(b.length!==L.length)throw new RangeError("vectors do not have the same size");for(var w=0,V=0;V<b.length;V++)w+=b[V]*L[V];return w}},{key:"mmul",value:function(L){L=Xt.checkMatrix(L);for(var b=this.rows,w=this.columns,V=L.columns,xt=new Xt(b,V),Ct=new Float64Array(w),wt=0;wt<V;wt++){for(var Rt=0;Rt<w;Rt++)Ct[Rt]=L.get(Rt,wt);for(var Ce=0;Ce<b;Ce++){for(var me=0,Ke=0;Ke<w;Ke++)me+=this.get(Ce,Ke)*Ct[Ke];xt.set(Ce,wt,me)}}return xt}},{key:"strassen2x2",value:function(L){L=Xt.checkMatrix(L);var b=new Xt(2,2),w=this.get(0,0),V=L.get(0,0),xt=this.get(0,1),Ct=L.get(0,1),wt=this.get(1,0),Rt=L.get(1,0),Ce=this.get(1,1),me=L.get(1,1),Ke=(w+Ce)*(V+me),yr=(wt+Ce)*V,er=w*(Ct-me),gr=Ce*(Rt-V),dn=(w+xt)*me,Ue=(wt-w)*(V+Ct),or=(xt-Ce)*(Rt+me),mr=Ke+gr-dn+or,$r=er+dn,Pr=yr+gr,va=Ke-yr+er+Ue;return b.set(0,0,mr),b.set(0,1,$r),b.set(1,0,Pr),b.set(1,1,va),b}},{key:"strassen3x3",value:function(L){L=Xt.checkMatrix(L);var b=new Xt(3,3),w=this.get(0,0),V=this.get(0,1),xt=this.get(0,2),Ct=this.get(1,0),wt=this.get(1,1),Rt=this.get(1,2),Ce=this.get(2,0),me=this.get(2,1),Ke=this.get(2,2),yr=L.get(0,0),er=L.get(0,1),gr=L.get(0,2),dn=L.get(1,0),Ue=L.get(1,1),or=L.get(1,2),mr=L.get(2,0),$r=L.get(2,1),Pr=L.get(2,2),va=(w+V+xt-Ct-wt-me-Ke)*Ue,Sa=(w-Ct)*(-er+Ue),Mn=wt*(-yr+er+dn-Ue-or-mr+Pr),Un=(-w+Ct+wt)*(yr-er+Ue),Fa=(Ct+wt)*(-yr+er),Ea=w*yr,Kr=(-w+Ce+me)*(yr-gr+or),kn=(-w+Ce)*(gr-or),_e=(Ce+me)*(-yr+gr),Nt=(w+V+xt-wt-Rt-Ce-me)*or,fe=me*(-yr+gr+dn-Ue-or-mr+$r),Te=(-xt+me+Ke)*(Ue+mr-$r),Me=(xt-Ke)*(Ue-$r),Le=xt*mr,nr=(me+Ke)*(-mr+$r),Dr=(-xt+wt+Rt)*(or+mr-Pr),jr=(xt-Rt)*(or-Pr),Sn=(wt+Rt)*(-mr+Pr),An=V*dn,Fn=Rt*$r,da=Ct*gr,wa=Ce*er,hi=Ke*Pr,Wn=Ea+Le+An,fi=va+Un+Fa+Ea+Te+Le+nr,Oo=Ea+Kr+_e+Nt+Le+Dr+Sn,Da=Sa+Mn+Un+Ea+Le+Dr+jr,xi=Sa+Un+Fa+Ea+Fn,co=Le+Dr+jr+Sn+da,Lo=Ea+Kr+kn+fe+Te+Me+Le,Eo=Te+Me+Le+nr+wa,lo=Ea+Kr+kn+_e+hi;return b.set(0,0,Wn),b.set(0,1,fi),b.set(0,2,Oo),b.set(1,0,Da),b.set(1,1,xi),b.set(1,2,co),b.set(2,0,Lo),b.set(2,1,Eo),b.set(2,2,lo),b}},{key:"mmulStrassen",value:function(L){L=Xt.checkMatrix(L);var b=this.clone(),w=b.rows,V=b.columns,xt=L.rows,Ct=L.columns;V!==xt&&console.warn("Multiplying ".concat(w," x ").concat(V," and ").concat(xt," x ").concat(Ct," matrix: dimensions do not match."));function wt(Ke,yr,er){var gr=Ke.rows,dn=Ke.columns;if(gr===yr&&dn===er)return Ke;var Ue=ft.zeros(yr,er);return Ue=Ue.setSubMatrix(Ke,0,0),Ue}var Rt=Math.max(w,xt),Ce=Math.max(V,Ct);b=wt(b,Rt,Ce),L=wt(L,Rt,Ce);function me(Ke,yr,er,gr){if(er<=512||gr<=512)return Ke.mmul(yr);er%2===1&&gr%2===1?(Ke=wt(Ke,er+1,gr+1),yr=wt(yr,er+1,gr+1)):er%2===1?(Ke=wt(Ke,er+1,gr),yr=wt(yr,er+1,gr)):gr%2===1&&(Ke=wt(Ke,er,gr+1),yr=wt(yr,er,gr+1));var dn=parseInt(Ke.rows/2,10),Ue=parseInt(Ke.columns/2,10),or=Ke.subMatrix(0,dn-1,0,Ue-1),mr=yr.subMatrix(0,dn-1,0,Ue-1),$r=Ke.subMatrix(0,dn-1,Ue,Ke.columns-1),Pr=yr.subMatrix(0,dn-1,Ue,yr.columns-1),va=Ke.subMatrix(dn,Ke.rows-1,0,Ue-1),Sa=yr.subMatrix(dn,yr.rows-1,0,Ue-1),Mn=Ke.subMatrix(dn,Ke.rows-1,Ue,Ke.columns-1),Un=yr.subMatrix(dn,yr.rows-1,Ue,yr.columns-1),Fa=me(ft.add(or,Mn),ft.add(mr,Un),dn,Ue),Ea=me(ft.add(va,Mn),mr,dn,Ue),Kr=me(or,ft.sub(Pr,Un),dn,Ue),kn=me(Mn,ft.sub(Sa,mr),dn,Ue),_e=me(ft.add(or,$r),Un,dn,Ue),Nt=me(ft.sub(va,or),ft.add(mr,Pr),dn,Ue),fe=me(ft.sub($r,Mn),ft.add(Sa,Un),dn,Ue),Te=ft.add(Fa,kn);Te.sub(_e),Te.add(fe);var Me=ft.add(Kr,_e),Le=ft.add(Ea,kn),nr=ft.sub(Fa,Ea);nr.add(Kr),nr.add(Nt);var Dr=ft.zeros(2*Te.rows,2*Te.columns);return Dr=Dr.setSubMatrix(Te,0,0),Dr=Dr.setSubMatrix(Me,Te.rows,0),Dr=Dr.setSubMatrix(Le,0,Te.columns),Dr=Dr.setSubMatrix(nr,Te.rows,Te.columns),Dr.subMatrix(0,er-1,0,gr-1)}return me(b,L,Rt,Ce)}},{key:"scaleRows",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(P(L)!=="object")throw new TypeError("options must be an object");var b=L.min,w=b===void 0?0:b,V=L.max,xt=V===void 0?1:V;if(!Number.isFinite(w))throw new TypeError("min must be a number");if(!Number.isFinite(xt))throw new TypeError("max must be a number");if(w>=xt)throw new RangeError("min must be smaller than max");for(var Ct=new Xt(this.rows,this.columns),wt=0;wt<this.rows;wt++){var Rt=this.getRow(wt);Rt.length>0&&y(Rt,{min:w,max:xt,output:Rt}),Ct.setRow(wt,Rt)}return Ct}},{key:"scaleColumns",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(P(L)!=="object")throw new TypeError("options must be an object");var b=L.min,w=b===void 0?0:b,V=L.max,xt=V===void 0?1:V;if(!Number.isFinite(w))throw new TypeError("min must be a number");if(!Number.isFinite(xt))throw new TypeError("max must be a number");if(w>=xt)throw new RangeError("min must be smaller than max");for(var Ct=new Xt(this.rows,this.columns),wt=0;wt<this.columns;wt++){var Rt=this.getColumn(wt);Rt.length&&y(Rt,{min:w,max:xt,output:Rt}),Ct.setColumn(wt,Rt)}return Ct}},{key:"flipRows",value:function(){for(var L=Math.ceil(this.columns/2),b=0;b<this.rows;b++)for(var w=0;w<L;w++){var V=this.get(b,w),xt=this.get(b,this.columns-1-w);this.set(b,w,xt),this.set(b,this.columns-1-w,V)}return this}},{key:"flipColumns",value:function(){for(var L=Math.ceil(this.rows/2),b=0;b<this.columns;b++)for(var w=0;w<L;w++){var V=this.get(w,b),xt=this.get(this.rows-1-w,b);this.set(w,b,xt),this.set(this.rows-1-w,b,V)}return this}},{key:"kroneckerProduct",value:function(L){L=Xt.checkMatrix(L);for(var b=this.rows,w=this.columns,V=L.rows,xt=L.columns,Ct=new Xt(b*V,w*xt),wt=0;wt<b;wt++)for(var Rt=0;Rt<w;Rt++)for(var Ce=0;Ce<V;Ce++)for(var me=0;me<xt;me++)Ct.set(V*wt+Ce,xt*Rt+me,this.get(wt,Rt)*L.get(Ce,me));return Ct}},{key:"kroneckerSum",value:function(L){if(L=Xt.checkMatrix(L),!this.isSquare()||!L.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var b=this.rows,w=L.rows,V=this.kroneckerProduct(Xt.eye(w,w)),xt=Xt.eye(b,b).kroneckerProduct(L);return V.add(xt)}},{key:"transpose",value:function(){for(var L=new Xt(this.columns,this.rows),b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)L.set(w,b,this.get(b,w));return L}},{key:"sortRows",value:function(){for(var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ge,b=0;b<this.rows;b++)this.setRow(b,this.getRow(b).sort(L));return this}},{key:"sortColumns",value:function(){for(var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ge,b=0;b<this.columns;b++)this.setColumn(b,this.getColumn(b).sort(L));return this}},{key:"subMatrix",value:function(L,b,w,V){Q(this,L,b,w,V);for(var xt=new Xt(b-L+1,V-w+1),Ct=L;Ct<=b;Ct++)for(var wt=w;wt<=V;wt++)xt.set(Ct-L,wt-w,this.get(Ct,wt));return xt}},{key:"subMatrixRow",value:function(L,b,w){if(b===void 0&&(b=0),w===void 0&&(w=this.columns-1),b>w||b<0||b>=this.columns||w<0||w>=this.columns)throw new RangeError("Argument out of range");for(var V=new Xt(L.length,w-b+1),xt=0;xt<L.length;xt++)for(var Ct=b;Ct<=w;Ct++){if(L[xt]<0||L[xt]>=this.rows)throw new RangeError("Row index out of range: ".concat(L[xt]));V.set(xt,Ct-b,this.get(L[xt],Ct))}return V}},{key:"subMatrixColumn",value:function(L,b,w){if(b===void 0&&(b=0),w===void 0&&(w=this.rows-1),b>w||b<0||b>=this.rows||w<0||w>=this.rows)throw new RangeError("Argument out of range");for(var V=new Xt(w-b+1,L.length),xt=0;xt<L.length;xt++)for(var Ct=b;Ct<=w;Ct++){if(L[xt]<0||L[xt]>=this.columns)throw new RangeError("Column index out of range: ".concat(L[xt]));V.set(Ct-b,xt,this.get(Ct,L[xt]))}return V}},{key:"setSubMatrix",value:function(L,b,w){if(L=Xt.checkMatrix(L),L.isEmpty())return this;var V=b+L.rows-1,xt=w+L.columns-1;Q(this,b,V,w,xt);for(var Ct=0;Ct<L.rows;Ct++)for(var wt=0;wt<L.columns;wt++)this.set(b+Ct,w+wt,L.get(Ct,wt));return this}},{key:"selection",value:function(L,b){W(this,L),K(this,b);for(var w=new Xt(L.length,b.length),V=0;V<L.length;V++)for(var xt=L[V],Ct=0;Ct<b.length;Ct++){var wt=b[Ct];w.set(V,Ct,this.get(xt,wt))}return w}},{key:"trace",value:function(){for(var L=Math.min(this.rows,this.columns),b=0,w=0;w<L;w++)b+=this.get(w,w);return b}},{key:"clone",value:function(){for(var L=new Xt(this.rows,this.columns),b=0;b<this.rows;b++)for(var w=0;w<this.columns;w++)L.set(b,w,this.get(b,w));return L}},{key:"sum",value:function(L){switch(L){case"row":return vt(this);case"column":return gt(this);case void 0:return Pt(this);default:throw new Error("invalid option: ".concat(L))}}},{key:"product",value:function(L){switch(L){case"row":return It(this);case"column":return Jt(this);case void 0:return zt(this);default:throw new Error("invalid option: ".concat(L))}}},{key:"mean",value:function(L){var b=this.sum(L);switch(L){case"row":{for(var w=0;w<this.rows;w++)b[w]/=this.columns;return b}case"column":{for(var V=0;V<this.columns;V++)b[V]/=this.rows;return b}case void 0:return b/this.size;default:throw new Error("invalid option: ".concat(L))}}},{key:"variance",value:function(L){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(L)==="object"&&(b=L,L=void 0),P(b)!=="object")throw new TypeError("options must be an object");var w=b,V=w.unbiased,xt=V===void 0?!0:V,Ct=w.mean,wt=Ct===void 0?this.mean(L):Ct;if(typeof xt!="boolean")throw new TypeError("unbiased must be a boolean");switch(L){case"row":{if(!E.isAnyArray(wt))throw new TypeError("mean must be an array");return kt(this,xt,wt)}case"column":{if(!E.isAnyArray(wt))throw new TypeError("mean must be an array");return $(this,xt,wt)}case void 0:{if(typeof wt!="number")throw new TypeError("mean must be a number");return lt(this,xt,wt)}default:throw new Error("invalid option: ".concat(L))}}},{key:"standardDeviation",value:function(L,b){P(L)==="object"&&(b=L,L=void 0);var w=this.variance(L,b);if(L===void 0)return Math.sqrt(w);for(var V=0;V<w.length;V++)w[V]=Math.sqrt(w[V]);return w}},{key:"center",value:function(L){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(L)==="object"&&(b=L,L=void 0),P(b)!=="object")throw new TypeError("options must be an object");var w=b,V=w.center,xt=V===void 0?this.mean(L):V;switch(L){case"row":{if(!E.isAnyArray(xt))throw new TypeError("center must be an array");return St(this,xt),this}case"column":{if(!E.isAnyArray(xt))throw new TypeError("center must be an array");return Ut(this,xt),this}case void 0:{if(typeof xt!="number")throw new TypeError("center must be a number");return Ft(this,xt),this}default:throw new Error("invalid option: ".concat(L))}}},{key:"scale",value:function(L){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(P(L)==="object"&&(b=L,L=void 0),P(b)!=="object")throw new TypeError("options must be an object");var w=b.scale;switch(L){case"row":{if(w===void 0)w=ee(this);else if(!E.isAnyArray(w))throw new TypeError("scale must be an array");return ve(this,w),this}case"column":{if(w===void 0)w=be(this);else if(!E.isAnyArray(w))throw new TypeError("scale must be an array");return Ht(this,w),this}case void 0:{if(w===void 0)w=Yt(this);else if(typeof w!="number")throw new TypeError("scale must be a number");return de(this,w),this}default:throw new Error("invalid option: ".concat(L))}}},{key:"toString",value:function(L){return I(this,L)}}],[{key:"from1DArray",value:function(L,b,w){var V=L*b;if(V!==w.length)throw new RangeError("data length does not match given dimensions");for(var xt=new Xt(L,b),Ct=0;Ct<L;Ct++)for(var wt=0;wt<b;wt++)xt.set(Ct,wt,w[Ct*b+wt]);return xt}},{key:"rowVector",value:function(L){for(var b=new Xt(1,L.length),w=0;w<L.length;w++)b.set(0,w,L[w]);return b}},{key:"columnVector",value:function(L){for(var b=new Xt(L.length,1),w=0;w<L.length;w++)b.set(w,0,L[w]);return b}},{key:"zeros",value:function(L,b){return new Xt(L,b)}},{key:"ones",value:function(L,b){return new Xt(L,b).fill(1)}},{key:"rand",value:function(L,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(P(w)!=="object")throw new TypeError("options must be an object");for(var V=w.random,xt=V===void 0?Math.random:V,Ct=new Xt(L,b),wt=0;wt<L;wt++)for(var Rt=0;Rt<b;Rt++)Ct.set(wt,Rt,xt());return Ct}},{key:"randInt",value:function(L,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(P(w)!=="object")throw new TypeError("options must be an object");var V=w.min,xt=V===void 0?0:V,Ct=w.max,wt=Ct===void 0?1e3:Ct,Rt=w.random,Ce=Rt===void 0?Math.random:Rt;if(!Number.isInteger(xt))throw new TypeError("min must be an integer");if(!Number.isInteger(wt))throw new TypeError("max must be an integer");if(xt>=wt)throw new RangeError("min must be smaller than max");for(var me=wt-xt,Ke=new Xt(L,b),yr=0;yr<L;yr++)for(var er=0;er<b;er++){var gr=xt+Math.round(Ce()*me);Ke.set(yr,er,gr)}return Ke}},{key:"eye",value:function(L,b,w){b===void 0&&(b=L),w===void 0&&(w=1);for(var V=Math.min(L,b),xt=this.zeros(L,b),Ct=0;Ct<V;Ct++)xt.set(Ct,Ct,w);return xt}},{key:"diag",value:function(L,b,w){var V=L.length;b===void 0&&(b=V),w===void 0&&(w=b);for(var xt=Math.min(V,b,w),Ct=this.zeros(b,w),wt=0;wt<xt;wt++)Ct.set(wt,wt,L[wt]);return Ct}},{key:"min",value:function(L,b){L=this.checkMatrix(L),b=this.checkMatrix(b);for(var w=L.rows,V=L.columns,xt=new Xt(w,V),Ct=0;Ct<w;Ct++)for(var wt=0;wt<V;wt++)xt.set(Ct,wt,Math.min(L.get(Ct,wt),b.get(Ct,wt)));return xt}},{key:"max",value:function(L,b){L=this.checkMatrix(L),b=this.checkMatrix(b);for(var w=L.rows,V=L.columns,xt=new this(w,V),Ct=0;Ct<w;Ct++)for(var wt=0;wt<V;wt++)xt.set(Ct,wt,Math.max(L.get(Ct,wt),b.get(Ct,wt)));return xt}},{key:"checkMatrix",value:function(L){return ft.isMatrix(L)?L:new Xt(L)}},{key:"isMatrix",value:function(L){return L!=null&&L.klass==="Matrix"}}]),ft}();Ee.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Ee.prototype[Symbol.for("nodejs.util.inspect.custom")]=m);function ge(ft,nt){return ft-nt}function Ot(ft){return ft.every(function(nt){return typeof nt=="number"})}Ee.random=Ee.rand,Ee.randomInt=Ee.randInt,Ee.diagonal=Ee.diag,Ee.prototype.diagonal=Ee.prototype.diag,Ee.identity=Ee.eye,Ee.prototype.negate=Ee.prototype.neg,Ee.prototype.tensorProduct=Ee.prototype.kroneckerProduct;var Xt=function(ft){X(L,ft);var nt=k(L);function L(b,w){var V;if(N(this,L),V=nt.call(this),L.isMatrix(b))return B(V,b.clone());if(Number.isInteger(b)&&b>=0)if(V.data=[],Number.isInteger(w)&&w>=0)for(var xt=0;xt<b;xt++)V.data.push(new Float64Array(w));else throw new TypeError("nColumns must be a positive integer");else if(E.isAnyArray(b)){var Ct=b;if(b=Ct.length,w=b?Ct[0].length:0,typeof w!="number")throw new TypeError("Data must be a 2D array with at least one element");V.data=[];for(var wt=0;wt<b;wt++){if(Ct[wt].length!==w)throw new RangeError("Inconsistent array dimensions");if(!Ot(Ct[wt]))throw new TypeError("Input data contains non-numeric values");V.data.push(Float64Array.from(Ct[wt]))}}else throw new TypeError("First argument must be a positive number or an array");return V.rows=b,V.columns=w,V}return D(L,[{key:"set",value:function(w,V,xt){return this.data[w][V]=xt,this}},{key:"get",value:function(w,V){return this.data[w][V]}},{key:"removeRow",value:function(w){return x(this,w),this.data.splice(w,1),this.rows-=1,this}},{key:"addRow",value:function(w,V){return V===void 0&&(V=w,w=this.rows),x(this,w,!0),V=Float64Array.from(it(this,V)),this.data.splice(w,0,V),this.rows+=1,this}},{key:"removeColumn",value:function(w){d(this,w);for(var V=0;V<this.rows;V++){for(var xt=new Float64Array(this.columns-1),Ct=0;Ct<w;Ct++)xt[Ct]=this.data[V][Ct];for(var wt=w+1;wt<this.columns;wt++)xt[wt-1]=this.data[V][wt];this.data[V]=xt}return this.columns-=1,this}},{key:"addColumn",value:function(w,V){typeof V=="undefined"&&(V=w,w=this.columns),d(this,w,!0),V=Y(this,V);for(var xt=0;xt<this.rows;xt++){for(var Ct=new Float64Array(this.columns+1),wt=0;wt<w;wt++)Ct[wt]=this.data[xt][wt];for(Ct[wt++]=V[xt];wt<this.columns+1;wt++)Ct[wt]=this.data[xt][wt-1];this.data[xt]=Ct}return this.columns+=1,this}}]),L}(Ee);j(Ee,Xt);var ce=function(ft){X(L,ft);var nt=k(L);function L(b,w,V){var xt;return N(this,L),xt=nt.call(this),xt.matrix=b,xt.rows=w,xt.columns=V,xt}return D(L)}(Ee),Lt=function(ft){X(L,ft);var nt=k(L);function L(b,w){var V;return N(this,L),d(b,w),V=nt.call(this,b,b.rows,1),V.column=w,V}return D(L,[{key:"set",value:function(w,V,xt){return this.matrix.set(w,this.column,xt),this}},{key:"get",value:function(w){return this.matrix.get(w,this.column)}}]),L}(ce),Kt=function(ft){X(L,ft);var nt=k(L);function L(b,w){var V;return N(this,L),K(b,w),V=nt.call(this,b,b.rows,w.length),V.columnIndices=w,V}return D(L,[{key:"set",value:function(w,V,xt){return this.matrix.set(w,this.columnIndices[V],xt),this}},{key:"get",value:function(w,V){return this.matrix.get(w,this.columnIndices[V])}}]),L}(ce),pe=function(ft){X(L,ft);var nt=k(L);function L(b){return N(this,L),nt.call(this,b,b.rows,b.columns)}return D(L,[{key:"set",value:function(w,V,xt){return this.matrix.set(w,this.columns-V-1,xt),this}},{key:"get",value:function(w,V){return this.matrix.get(w,this.columns-V-1)}}]),L}(ce),We=function(ft){X(L,ft);var nt=k(L);function L(b){return N(this,L),nt.call(this,b,b.rows,b.columns)}return D(L,[{key:"set",value:function(w,V,xt){return this.matrix.set(this.rows-w-1,V,xt),this}},{key:"get",value:function(w,V){return this.matrix.get(this.rows-w-1,V)}}]),L}(ce),Je=function(ft){X(L,ft);var nt=k(L);function L(b,w){var V;return N(this,L),x(b,w),V=nt.call(this,b,1,b.columns),V.row=w,V}return D(L,[{key:"set",value:function(w,V,xt){return this.matrix.set(this.row,V,xt),this}},{key:"get",value:function(w,V){return this.matrix.get(this.row,V)}}]),L}(ce),Mr=function(ft){X(L,ft);var nt=k(L);function L(b,w){var V;return N(this,L),W(b,w),V=nt.call(this,b,w.length,b.columns),V.rowIndices=w,V}return D(L,[{key:"set",value:function(w,V,xt){return this.matrix.set(this.rowIndices[w],V,xt),this}},{key:"get",value:function(w,V){return this.matrix.get(this.rowIndices[w],V)}}]),L}(ce),Vt=function(ft){X(L,ft);var nt=k(L);function L(b,w,V){var xt;return N(this,L),W(b,w),K(b,V),xt=nt.call(this,b,w.length,V.length),xt.rowIndices=w,xt.columnIndices=V,xt}return D(L,[{key:"set",value:function(w,V,xt){return this.matrix.set(this.rowIndices[w],this.columnIndices[V],xt),this}},{key:"get",value:function(w,V){return this.matrix.get(this.rowIndices[w],this.columnIndices[V])}}]),L}(ce),on=function(ft){X(L,ft);var nt=k(L);function L(b,w,V,xt,Ct){var wt;return N(this,L),Q(b,w,V,xt,Ct),wt=nt.call(this,b,V-w+1,Ct-xt+1),wt.startRow=w,wt.startColumn=xt,wt}return D(L,[{key:"set",value:function(w,V,xt){return this.matrix.set(this.startRow+w,this.startColumn+V,xt),this}},{key:"get",value:function(w,V){return this.matrix.get(this.startRow+w,this.startColumn+V)}}]),L}(ce),sn=function(ft){X(L,ft);var nt=k(L);function L(b){return N(this,L),nt.call(this,b,b.columns,b.rows)}return D(L,[{key:"set",value:function(w,V,xt){return this.matrix.set(V,w,xt),this}},{key:"get",value:function(w,V){return this.matrix.get(V,w)}}]),L}(ce),pn=function(ft){X(L,ft);var nt=k(L);function L(b){var w,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N(this,L);var xt=V.rows,Ct=xt===void 0?1:xt;if(b.length%Ct!==0)throw new Error("the data length is not divisible by the number of rows");return w=nt.call(this),w.rows=Ct,w.columns=b.length/Ct,w.data=b,w}return D(L,[{key:"set",value:function(w,V,xt){var Ct=this._calculateIndex(w,V);return this.data[Ct]=xt,this}},{key:"get",value:function(w,V){var xt=this._calculateIndex(w,V);return this.data[xt]}},{key:"_calculateIndex",value:function(w,V){return w*this.columns+V}}]),L}(Ee),En=function(ft){X(L,ft);var nt=k(L);function L(b){var w;return N(this,L),w=nt.call(this),w.data=b,w.rows=b.length,w.columns=b[0].length,w}return D(L,[{key:"set",value:function(w,V,xt){return this.data[w][V]=xt,this}},{key:"get",value:function(w,V){return this.data[w][V]}}]),L}(Ee);function Yn(ft,nt){if(E.isAnyArray(ft))return ft[0]&&E.isAnyArray(ft[0])?new En(ft):new pn(ft,nt);throw new Error("the argument is not an array")}var ea=function(){function ft(nt){N(this,ft),nt=En.checkMatrix(nt);var L=nt.clone(),b=L.rows,w=L.columns,V=new Float64Array(b),xt=1,Ct,wt,Rt,Ce,me,Ke,yr,er,gr;for(Ct=0;Ct<b;Ct++)V[Ct]=Ct;for(er=new Float64Array(b),wt=0;wt<w;wt++){for(Ct=0;Ct<b;Ct++)er[Ct]=L.get(Ct,wt);for(Ct=0;Ct<b;Ct++){for(gr=Math.min(Ct,wt),me=0,Rt=0;Rt<gr;Rt++)me+=L.get(Ct,Rt)*er[Rt];er[Ct]-=me,L.set(Ct,wt,er[Ct])}for(Ce=wt,Ct=wt+1;Ct<b;Ct++)Math.abs(er[Ct])>Math.abs(er[Ce])&&(Ce=Ct);if(Ce!==wt){for(Rt=0;Rt<w;Rt++)Ke=L.get(Ce,Rt),L.set(Ce,Rt,L.get(wt,Rt)),L.set(wt,Rt,Ke);yr=V[Ce],V[Ce]=V[wt],V[wt]=yr,xt=-xt}if(wt<b&&L.get(wt,wt)!==0)for(Ct=wt+1;Ct<b;Ct++)L.set(Ct,wt,L.get(Ct,wt)/L.get(wt,wt))}this.LU=L,this.pivotVector=V,this.pivotSign=xt}return D(ft,[{key:"isSingular",value:function(){for(var L=this.LU,b=L.columns,w=0;w<b;w++)if(L.get(w,w)===0)return!0;return!1}},{key:"solve",value:function(L){L=Xt.checkMatrix(L);var b=this.LU,w=b.rows;if(w!==L.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var V=L.columns,xt=L.subMatrixRow(this.pivotVector,0,V-1),Ct=b.columns,wt,Rt,Ce;for(Ce=0;Ce<Ct;Ce++)for(wt=Ce+1;wt<Ct;wt++)for(Rt=0;Rt<V;Rt++)xt.set(wt,Rt,xt.get(wt,Rt)-xt.get(Ce,Rt)*b.get(wt,Ce));for(Ce=Ct-1;Ce>=0;Ce--){for(Rt=0;Rt<V;Rt++)xt.set(Ce,Rt,xt.get(Ce,Rt)/b.get(Ce,Ce));for(wt=0;wt<Ce;wt++)for(Rt=0;Rt<V;Rt++)xt.set(wt,Rt,xt.get(wt,Rt)-xt.get(Ce,Rt)*b.get(wt,Ce))}return xt}},{key:"determinant",get:function(){var L=this.LU;if(!L.isSquare())throw new Error("Matrix must be square");for(var b=this.pivotSign,w=L.columns,V=0;V<w;V++)b*=L.get(V,V);return b}},{key:"lowerTriangularMatrix",get:function(){for(var L=this.LU,b=L.rows,w=L.columns,V=new Xt(b,w),xt=0;xt<b;xt++)for(var Ct=0;Ct<w;Ct++)xt>Ct?V.set(xt,Ct,L.get(xt,Ct)):xt===Ct?V.set(xt,Ct,1):V.set(xt,Ct,0);return V}},{key:"upperTriangularMatrix",get:function(){for(var L=this.LU,b=L.rows,w=L.columns,V=new Xt(b,w),xt=0;xt<b;xt++)for(var Ct=0;Ct<w;Ct++)xt<=Ct?V.set(xt,Ct,L.get(xt,Ct)):V.set(xt,Ct,0);return V}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),ft}();function Nn(ft,nt){var L=0;return Math.abs(ft)>Math.abs(nt)?(L=nt/ft,Math.abs(ft)*Math.sqrt(1+L*L)):nt!==0?(L=ft/nt,Math.abs(nt)*Math.sqrt(1+L*L)):0}var Zn=function(){function ft(nt){N(this,ft),nt=En.checkMatrix(nt);var L=nt.clone(),b=nt.rows,w=nt.columns,V=new Float64Array(w),xt,Ct,wt,Rt;for(wt=0;wt<w;wt++){var Ce=0;for(xt=wt;xt<b;xt++)Ce=Nn(Ce,L.get(xt,wt));if(Ce!==0){for(L.get(wt,wt)<0&&(Ce=-Ce),xt=wt;xt<b;xt++)L.set(xt,wt,L.get(xt,wt)/Ce);for(L.set(wt,wt,L.get(wt,wt)+1),Ct=wt+1;Ct<w;Ct++){for(Rt=0,xt=wt;xt<b;xt++)Rt+=L.get(xt,wt)*L.get(xt,Ct);for(Rt=-Rt/L.get(wt,wt),xt=wt;xt<b;xt++)L.set(xt,Ct,L.get(xt,Ct)+Rt*L.get(xt,wt))}}V[wt]=-Ce}this.QR=L,this.Rdiag=V}return D(ft,[{key:"solve",value:function(L){L=Xt.checkMatrix(L);var b=this.QR,w=b.rows;if(L.rows!==w)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var V=L.columns,xt=L.clone(),Ct=b.columns,wt,Rt,Ce,me;for(Ce=0;Ce<Ct;Ce++)for(Rt=0;Rt<V;Rt++){for(me=0,wt=Ce;wt<w;wt++)me+=b.get(wt,Ce)*xt.get(wt,Rt);for(me=-me/b.get(Ce,Ce),wt=Ce;wt<w;wt++)xt.set(wt,Rt,xt.get(wt,Rt)+me*b.get(wt,Ce))}for(Ce=Ct-1;Ce>=0;Ce--){for(Rt=0;Rt<V;Rt++)xt.set(Ce,Rt,xt.get(Ce,Rt)/this.Rdiag[Ce]);for(wt=0;wt<Ce;wt++)for(Rt=0;Rt<V;Rt++)xt.set(wt,Rt,xt.get(wt,Rt)-xt.get(Ce,Rt)*b.get(wt,Ce))}return xt.subMatrix(0,Ct-1,0,V-1)}},{key:"isFullRank",value:function(){for(var L=this.QR.columns,b=0;b<L;b++)if(this.Rdiag[b]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var L=this.QR,b=L.columns,w=new Xt(b,b),V,xt;for(V=0;V<b;V++)for(xt=0;xt<b;xt++)V<xt?w.set(V,xt,L.get(V,xt)):V===xt?w.set(V,xt,this.Rdiag[V]):w.set(V,xt,0);return w}},{key:"orthogonalMatrix",get:function(){var L=this.QR,b=L.rows,w=L.columns,V=new Xt(b,w),xt,Ct,wt,Rt;for(wt=w-1;wt>=0;wt--){for(xt=0;xt<b;xt++)V.set(xt,wt,0);for(V.set(wt,wt,1),Ct=wt;Ct<w;Ct++)if(L.get(wt,wt)!==0){for(Rt=0,xt=wt;xt<b;xt++)Rt+=L.get(xt,wt)*V.get(xt,Ct);for(Rt=-Rt/L.get(wt,wt),xt=wt;xt<b;xt++)V.set(xt,Ct,V.get(xt,Ct)+Rt*L.get(xt,wt))}}return V}}]),ft}(),La=function(){function ft(nt){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(N(this,ft),nt=En.checkMatrix(nt),nt.isEmpty())throw new Error("Matrix must be non-empty");var b=nt.rows,w=nt.columns,V=L.computeLeftSingularVectors,xt=V===void 0?!0:V,Ct=L.computeRightSingularVectors,wt=Ct===void 0?!0:Ct,Rt=L.autoTranspose,Ce=Rt===void 0?!1:Rt,me=!!xt,Ke=!!wt,yr=!1,er;if(b<w)if(!Ce)er=nt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{er=nt.transpose(),b=er.rows,w=er.columns,yr=!0;var gr=me;me=Ke,Ke=gr}else er=nt.clone();for(var dn=Math.min(b,w),Ue=Math.min(b+1,w),or=new Float64Array(Ue),mr=new Xt(b,dn),$r=new Xt(w,w),Pr=new Float64Array(w),va=new Float64Array(b),Sa=new Float64Array(Ue),Mn=0;Mn<Ue;Mn++)Sa[Mn]=Mn;for(var Un=Math.min(b-1,w),Fa=Math.max(0,Math.min(w-2,b)),Ea=Math.max(Un,Fa),Kr=0;Kr<Ea;Kr++){if(Kr<Un){or[Kr]=0;for(var kn=Kr;kn<b;kn++)or[Kr]=Nn(or[Kr],er.get(kn,Kr));if(or[Kr]!==0){er.get(Kr,Kr)<0&&(or[Kr]=-or[Kr]);for(var _e=Kr;_e<b;_e++)er.set(_e,Kr,er.get(_e,Kr)/or[Kr]);er.set(Kr,Kr,er.get(Kr,Kr)+1)}or[Kr]=-or[Kr]}for(var Nt=Kr+1;Nt<w;Nt++){if(Kr<Un&&or[Kr]!==0){for(var fe=0,Te=Kr;Te<b;Te++)fe+=er.get(Te,Kr)*er.get(Te,Nt);fe=-fe/er.get(Kr,Kr);for(var Me=Kr;Me<b;Me++)er.set(Me,Nt,er.get(Me,Nt)+fe*er.get(Me,Kr))}Pr[Nt]=er.get(Kr,Nt)}if(me&&Kr<Un)for(var Le=Kr;Le<b;Le++)mr.set(Le,Kr,er.get(Le,Kr));if(Kr<Fa){Pr[Kr]=0;for(var nr=Kr+1;nr<w;nr++)Pr[Kr]=Nn(Pr[Kr],Pr[nr]);if(Pr[Kr]!==0){Pr[Kr+1]<0&&(Pr[Kr]=0-Pr[Kr]);for(var Dr=Kr+1;Dr<w;Dr++)Pr[Dr]/=Pr[Kr];Pr[Kr+1]+=1}if(Pr[Kr]=-Pr[Kr],Kr+1<b&&Pr[Kr]!==0){for(var jr=Kr+1;jr<b;jr++)va[jr]=0;for(var Sn=Kr+1;Sn<b;Sn++)for(var An=Kr+1;An<w;An++)va[Sn]+=Pr[An]*er.get(Sn,An);for(var Fn=Kr+1;Fn<w;Fn++)for(var da=-Pr[Fn]/Pr[Kr+1],wa=Kr+1;wa<b;wa++)er.set(wa,Fn,er.get(wa,Fn)+da*va[wa])}if(Ke)for(var hi=Kr+1;hi<w;hi++)$r.set(hi,Kr,Pr[hi])}}var Wn=Math.min(w,b+1);if(Un<w&&(or[Un]=er.get(Un,Un)),b<Wn&&(or[Wn-1]=0),Fa+1<Wn&&(Pr[Fa]=er.get(Fa,Wn-1)),Pr[Wn-1]=0,me){for(var fi=Un;fi<dn;fi++){for(var Oo=0;Oo<b;Oo++)mr.set(Oo,fi,0);mr.set(fi,fi,1)}for(var Da=Un-1;Da>=0;Da--)if(or[Da]!==0){for(var xi=Da+1;xi<dn;xi++){for(var co=0,Lo=Da;Lo<b;Lo++)co+=mr.get(Lo,Da)*mr.get(Lo,xi);co=-co/mr.get(Da,Da);for(var Eo=Da;Eo<b;Eo++)mr.set(Eo,xi,mr.get(Eo,xi)+co*mr.get(Eo,Da))}for(var lo=Da;lo<b;lo++)mr.set(lo,Da,-mr.get(lo,Da));mr.set(Da,Da,1+mr.get(Da,Da));for(var Zi=0;Zi<Da-1;Zi++)mr.set(Zi,Da,0)}else{for(var ms=0;ms<b;ms++)mr.set(ms,Da,0);mr.set(Da,Da,1)}}if(Ke)for(var zi=w-1;zi>=0;zi--){if(zi<Fa&&Pr[zi]!==0)for(var Ui=zi+1;Ui<w;Ui++){for(var xs=0,Cs=zi+1;Cs<w;Cs++)xs+=$r.get(Cs,zi)*$r.get(Cs,Ui);xs=-xs/$r.get(zi+1,zi);for(var Yo=zi+1;Yo<w;Yo++)$r.set(Yo,Ui,$r.get(Yo,Ui)+xs*$r.get(Yo,zi))}for(var Ao=0;Ao<w;Ao++)$r.set(Ao,zi,0);$r.set(zi,zi,1)}for(var Do=Wn-1,js=Number.EPSILON;Wn>0;){var Pn=void 0,Co=void 0;for(Pn=Wn-2;Pn>=-1&&Pn!==-1;Pn--){var No=Number.MIN_VALUE+js*Math.abs(or[Pn]+Math.abs(or[Pn+1]));if(Math.abs(Pr[Pn])<=No||Number.isNaN(Pr[Pn])){Pr[Pn]=0;break}}if(Pn===Wn-2)Co=4;else{var Wi=void 0;for(Wi=Wn-1;Wi>=Pn&&Wi!==Pn;Wi--){var On=(Wi!==Wn?Math.abs(Pr[Wi]):0)+(Wi!==Pn+1?Math.abs(Pr[Wi-1]):0);if(Math.abs(or[Wi])<=js*On){or[Wi]=0;break}}Wi===Pn?Co=3:Wi===Wn-1?Co=1:(Co=2,Pn=Wi)}switch(Pn++,Co){case 1:{var Po=Pr[Wn-2];Pr[Wn-2]=0;for(var Ai=Wn-2;Ai>=Pn;Ai--){var Vo=Nn(or[Ai],Po),jo=or[Ai]/Vo,bs=Po/Vo;if(or[Ai]=Vo,Ai!==Pn&&(Po=-bs*Pr[Ai-1],Pr[Ai-1]=jo*Pr[Ai-1]),Ke)for(var ao=0;ao<w;ao++)Vo=jo*$r.get(ao,Ai)+bs*$r.get(ao,Wn-1),$r.set(ao,Wn-1,-bs*$r.get(ao,Ai)+jo*$r.get(ao,Wn-1)),$r.set(ao,Ai,Vo)}break}case 2:{var io=Pr[Pn-1];Pr[Pn-1]=0;for(var ni=Pn;ni<Wn;ni++){var ho=Nn(or[ni],io),ko=or[ni]/ho,Ho=io/ho;if(or[ni]=ho,io=-Ho*Pr[ni],Pr[ni]=ko*Pr[ni],me)for(var Ro=0;Ro<b;Ro++)ho=ko*mr.get(Ro,ni)+Ho*mr.get(Ro,Pn-1),mr.set(Ro,Pn-1,-Ho*mr.get(Ro,ni)+ko*mr.get(Ro,Pn-1)),mr.set(Ro,ni,ho)}break}case 3:{var fs=Math.max(Math.abs(or[Wn-1]),Math.abs(or[Wn-2]),Math.abs(Pr[Wn-2]),Math.abs(or[Pn]),Math.abs(Pr[Pn])),Ko=or[Wn-1]/fs,is=or[Wn-2]/fs,Wa=Pr[Wn-2]/fs,Ts=or[Pn]/fs,eu=Pr[Pn]/fs,Xi=((is+Ko)*(is-Ko)+Wa*Wa)/2,cs=Ko*Wa*(Ko*Wa),wo=0;(Xi!==0||cs!==0)&&(Xi<0?wo=0-Math.sqrt(Xi*Xi+cs):wo=Math.sqrt(Xi*Xi+cs),wo=cs/(Xi+wo));for(var Yi=(Ts+Ko)*(Ts-Ko)+wo,vo=Ts*eu,ca=Pn;ca<Wn-1;ca++){var Va=Nn(Yi,vo);Va===0&&(Va=Number.MIN_VALUE);var mi=Yi/Va,oo=vo/Va;if(ca!==Pn&&(Pr[ca-1]=Va),Yi=mi*or[ca]+oo*Pr[ca],Pr[ca]=mi*Pr[ca]-oo*or[ca],vo=oo*or[ca+1],or[ca+1]=mi*or[ca+1],Ke)for(var ki=0;ki<w;ki++)Va=mi*$r.get(ki,ca)+oo*$r.get(ki,ca+1),$r.set(ki,ca+1,-oo*$r.get(ki,ca)+mi*$r.get(ki,ca+1)),$r.set(ki,ca,Va);if(Va=Nn(Yi,vo),Va===0&&(Va=Number.MIN_VALUE),mi=Yi/Va,oo=vo/Va,or[ca]=Va,Yi=mi*Pr[ca]+oo*or[ca+1],or[ca+1]=-oo*Pr[ca]+mi*or[ca+1],vo=oo*Pr[ca+1],Pr[ca+1]=mi*Pr[ca+1],me&&ca<b-1)for(var $i=0;$i<b;$i++)Va=mi*mr.get($i,ca)+oo*mr.get($i,ca+1),mr.set($i,ca+1,-oo*mr.get($i,ca)+mi*mr.get($i,ca+1)),mr.set($i,ca,Va)}Pr[Wn-2]=Yi;break}case 4:{if(or[Pn]<=0&&(or[Pn]=or[Pn]<0?-or[Pn]:0,Ke))for(var Zo=0;Zo<=Do;Zo++)$r.set(Zo,Pn,-$r.get(Zo,Pn));for(;Pn<Do&&!(or[Pn]>=or[Pn+1]);){var So=or[Pn];if(or[Pn]=or[Pn+1],or[Pn+1]=So,Ke&&Pn<w-1)for(var os=0;os<w;os++)So=$r.get(os,Pn+1),$r.set(os,Pn+1,$r.get(os,Pn)),$r.set(os,Pn,So);if(me&&Pn<b-1)for(var go=0;go<b;go++)So=mr.get(go,Pn+1),mr.set(go,Pn+1,mr.get(go,Pn)),mr.set(go,Pn,So);Pn++}Wn--;break}}}if(yr){var Rs=$r;$r=mr,mr=Rs}this.m=b,this.n=w,this.s=or,this.U=mr,this.V=$r}return D(ft,[{key:"solve",value:function(L){for(var b=L,w=this.threshold,V=this.s.length,xt=Xt.zeros(V,V),Ct=0;Ct<V;Ct++)Math.abs(this.s[Ct])<=w?xt.set(Ct,Ct,0):xt.set(Ct,Ct,1/this.s[Ct]);for(var wt=this.U,Rt=this.rightSingularVectors,Ce=Rt.mmul(xt),me=Rt.rows,Ke=wt.rows,yr=Xt.zeros(me,Ke),er=0;er<me;er++)for(var gr=0;gr<Ke;gr++){for(var dn=0,Ue=0;Ue<V;Ue++)dn+=Ce.get(er,Ue)*wt.get(gr,Ue);yr.set(er,gr,dn)}return yr.mmul(b)}},{key:"solveForDiagonal",value:function(L){return this.solve(Xt.diag(L))}},{key:"inverse",value:function(){for(var L=this.V,b=this.threshold,w=L.rows,V=L.columns,xt=new Xt(w,this.s.length),Ct=0;Ct<w;Ct++)for(var wt=0;wt<V;wt++)Math.abs(this.s[wt])>b&&xt.set(Ct,wt,L.get(Ct,wt)/this.s[wt]);for(var Rt=this.U,Ce=Rt.rows,me=Rt.columns,Ke=new Xt(w,Ce),yr=0;yr<w;yr++)for(var er=0;er<Ce;er++){for(var gr=0,dn=0;dn<me;dn++)gr+=xt.get(yr,dn)*Rt.get(er,dn);Ke.set(yr,er,gr)}return Ke}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var L=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,b=0,w=this.s,V=0,xt=w.length;V<xt;V++)w[V]>L&&b++;return b}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Xt.diag(this.s)}}]),ft}();function Aa(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ft=En.checkMatrix(ft),nt?new La(ft).inverse():fr(ft,Xt.eye(ft.rows))}function fr(ft,nt){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return ft=En.checkMatrix(ft),nt=En.checkMatrix(nt),L?new La(ft).solve(nt):ft.isSquare()?new ea(ft).solve(nt):new Zn(ft).solve(nt)}function Or(ft){if(ft=Xt.checkMatrix(ft),ft.isSquare()){if(ft.columns===0)return 1;var nt,L,b,w;if(ft.columns===2)return nt=ft.get(0,0),L=ft.get(0,1),b=ft.get(1,0),w=ft.get(1,1),nt*w-L*b;if(ft.columns===3){var V,xt,Ct;return V=new Vt(ft,[1,2],[1,2]),xt=new Vt(ft,[1,2],[0,2]),Ct=new Vt(ft,[1,2],[0,1]),nt=ft.get(0,0),L=ft.get(0,1),b=ft.get(0,2),nt*Or(V)-L*Or(xt)+b*Or(Ct)}else return new ea(ft).determinant}else throw Error("determinant can only be calculated for a square matrix")}function vn(ft,nt){for(var L=[],b=0;b<ft;b++)b!==nt&&L.push(b);return L}function yn(ft,nt,L){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(ft>w)return new Array(nt.rows+1).fill(0);for(var V=nt.addRow(L,[0]),xt=0;xt<V.rows;xt++)Math.abs(V.get(xt,0))<b&&V.set(xt,0,0);return V.to1DArray()}function qn(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L=nt.thresholdValue,b=L===void 0?1e-9:L,w=nt.thresholdError,V=w===void 0?1e-9:w;ft=Xt.checkMatrix(ft);for(var xt=ft.rows,Ct=new Xt(xt,xt),wt=0;wt<xt;wt++){var Rt=Xt.columnVector(ft.getRow(wt)),Ce=ft.subMatrixRow(vn(xt,wt)).transpose(),me=new La(Ce),Ke=me.solve(Rt),yr=Xt.sub(Rt,Ce.mmul(Ke)).abs().max();Ct.setRow(wt,yn(yr,Ke,wt,b,V))}return Ct}function Vn(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(ft=Xt.checkMatrix(ft),ft.isEmpty())return ft.transpose();for(var L=new La(ft,{autoTranspose:!0}),b=L.leftSingularVectors,w=L.rightSingularVectors,V=L.diagonal,xt=0;xt<V.length;xt++)Math.abs(V[xt])>nt?V[xt]=1/V[xt]:V[xt]=0;return w.mmul(Xt.diag(V).mmul(b.transpose()))}function jn(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ft,L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ft=new Xt(ft);var b=!1;if(P(nt)==="object"&&!Xt.isMatrix(nt)&&!E.isAnyArray(nt)?(L=nt,nt=ft,b=!0):nt=new Xt(nt),ft.rows!==nt.rows)throw new TypeError("Both matrices must have the same number of rows");var w=L,V=w.center,xt=V===void 0?!0:V;xt&&(ft=ft.center("column"),b||(nt=nt.center("column")));for(var Ct=ft.transpose().mmul(nt),wt=0;wt<Ct.rows;wt++)for(var Rt=0;Rt<Ct.columns;Rt++)Ct.set(wt,Rt,Ct.get(wt,Rt)*(1/(ft.rows-1)));return Ct}function ba(ft){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ft,L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ft=new Xt(ft);var b=!1;if(P(nt)==="object"&&!Xt.isMatrix(nt)&&!E.isAnyArray(nt)?(L=nt,nt=ft,b=!0):nt=new Xt(nt),ft.rows!==nt.rows)throw new TypeError("Both matrices must have the same number of rows");var w=L,V=w.center,xt=V===void 0?!0:V,Ct=w.scale,wt=Ct===void 0?!0:Ct;xt&&(ft.center("column"),b||nt.center("column")),wt&&(ft.scale("column"),b||nt.scale("column"));for(var Rt=ft.standardDeviation("column",{unbiased:!0}),Ce=b?Rt:nt.standardDeviation("column",{unbiased:!0}),me=ft.transpose().mmul(nt),Ke=0;Ke<me.rows;Ke++)for(var yr=0;yr<me.columns;yr++)me.set(Ke,yr,me.get(Ke,yr)*(1/(Rt[Ke]*Ce[yr]))*(1/(ft.rows-1)));return me}var ma=function(){function ft(nt){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N(this,ft);var b=L.assumeSymmetric,w=b===void 0?!1:b;if(nt=En.checkMatrix(nt),!nt.isSquare())throw new Error("Matrix is not a square matrix");if(nt.isEmpty())throw new Error("Matrix must be non-empty");var V=nt.columns,xt=new Xt(V,V),Ct=new Float64Array(V),wt=new Float64Array(V),Rt=nt,Ce,me,Ke=!1;if(w?Ke=!0:Ke=nt.isSymmetric(),Ke){for(Ce=0;Ce<V;Ce++)for(me=0;me<V;me++)xt.set(Ce,me,Rt.get(Ce,me));Pa(V,wt,Ct,xt),wn(V,wt,Ct,xt)}else{var yr=new Xt(V,V),er=new Float64Array(V);for(me=0;me<V;me++)for(Ce=0;Ce<V;Ce++)yr.set(Ce,me,Rt.get(Ce,me));na(V,yr,er,xt),Qn(V,wt,Ct,xt,yr)}this.n=V,this.e=wt,this.d=Ct,this.V=xt}return D(ft,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var L=this.n,b=this.e,w=this.d,V=new Xt(L,L),xt,Ct;for(xt=0;xt<L;xt++){for(Ct=0;Ct<L;Ct++)V.set(xt,Ct,0);V.set(xt,xt,w[xt]),b[xt]>0?V.set(xt,xt+1,b[xt]):b[xt]<0&&V.set(xt,xt-1,b[xt])}return V}}]),ft}();function Pa(ft,nt,L,b){var w,V,xt,Ct,wt,Rt,Ce,me;for(wt=0;wt<ft;wt++)L[wt]=b.get(ft-1,wt);for(Ct=ft-1;Ct>0;Ct--){for(me=0,xt=0,Rt=0;Rt<Ct;Rt++)me=me+Math.abs(L[Rt]);if(me===0)for(nt[Ct]=L[Ct-1],wt=0;wt<Ct;wt++)L[wt]=b.get(Ct-1,wt),b.set(Ct,wt,0),b.set(wt,Ct,0);else{for(Rt=0;Rt<Ct;Rt++)L[Rt]/=me,xt+=L[Rt]*L[Rt];for(w=L[Ct-1],V=Math.sqrt(xt),w>0&&(V=-V),nt[Ct]=me*V,xt=xt-w*V,L[Ct-1]=w-V,wt=0;wt<Ct;wt++)nt[wt]=0;for(wt=0;wt<Ct;wt++){for(w=L[wt],b.set(wt,Ct,w),V=nt[wt]+b.get(wt,wt)*w,Rt=wt+1;Rt<=Ct-1;Rt++)V+=b.get(Rt,wt)*L[Rt],nt[Rt]+=b.get(Rt,wt)*w;nt[wt]=V}for(w=0,wt=0;wt<Ct;wt++)nt[wt]/=xt,w+=nt[wt]*L[wt];for(Ce=w/(xt+xt),wt=0;wt<Ct;wt++)nt[wt]-=Ce*L[wt];for(wt=0;wt<Ct;wt++){for(w=L[wt],V=nt[wt],Rt=wt;Rt<=Ct-1;Rt++)b.set(Rt,wt,b.get(Rt,wt)-(w*nt[Rt]+V*L[Rt]));L[wt]=b.get(Ct-1,wt),b.set(Ct,wt,0)}}L[Ct]=xt}for(Ct=0;Ct<ft-1;Ct++){if(b.set(ft-1,Ct,b.get(Ct,Ct)),b.set(Ct,Ct,1),xt=L[Ct+1],xt!==0){for(Rt=0;Rt<=Ct;Rt++)L[Rt]=b.get(Rt,Ct+1)/xt;for(wt=0;wt<=Ct;wt++){for(V=0,Rt=0;Rt<=Ct;Rt++)V+=b.get(Rt,Ct+1)*b.get(Rt,wt);for(Rt=0;Rt<=Ct;Rt++)b.set(Rt,wt,b.get(Rt,wt)-V*L[Rt])}}for(Rt=0;Rt<=Ct;Rt++)b.set(Rt,Ct+1,0)}for(wt=0;wt<ft;wt++)L[wt]=b.get(ft-1,wt),b.set(ft-1,wt,0);b.set(ft-1,ft-1,1),nt[0]=0}function wn(ft,nt,L,b){var w,V,xt,Ct,wt,Rt,Ce,me,Ke,yr,er,gr,dn,Ue,or,mr;for(xt=1;xt<ft;xt++)nt[xt-1]=nt[xt];nt[ft-1]=0;var $r=0,Pr=0,va=Number.EPSILON;for(Rt=0;Rt<ft;Rt++){for(Pr=Math.max(Pr,Math.abs(L[Rt])+Math.abs(nt[Rt])),Ce=Rt;Ce<ft&&!(Math.abs(nt[Ce])<=va*Pr);)Ce++;if(Ce>Rt)do{for(w=L[Rt],me=(L[Rt+1]-w)/(2*nt[Rt]),Ke=Nn(me,1),me<0&&(Ke=-Ke),L[Rt]=nt[Rt]/(me+Ke),L[Rt+1]=nt[Rt]*(me+Ke),yr=L[Rt+1],V=w-L[Rt],xt=Rt+2;xt<ft;xt++)L[xt]-=V;for($r=$r+V,me=L[Ce],er=1,gr=er,dn=er,Ue=nt[Rt+1],or=0,mr=0,xt=Ce-1;xt>=Rt;xt--)for(dn=gr,gr=er,mr=or,w=er*nt[xt],V=er*me,Ke=Nn(me,nt[xt]),nt[xt+1]=or*Ke,or=nt[xt]/Ke,er=me/Ke,me=er*L[xt]-or*w,L[xt+1]=V+or*(er*w+or*L[xt]),wt=0;wt<ft;wt++)V=b.get(wt,xt+1),b.set(wt,xt+1,or*b.get(wt,xt)+er*V),b.set(wt,xt,er*b.get(wt,xt)-or*V);me=-or*mr*dn*Ue*nt[Rt]/yr,nt[Rt]=or*me,L[Rt]=er*me}while(Math.abs(nt[Rt])>va*Pr);L[Rt]=L[Rt]+$r,nt[Rt]=0}for(xt=0;xt<ft-1;xt++){for(wt=xt,me=L[xt],Ct=xt+1;Ct<ft;Ct++)L[Ct]<me&&(wt=Ct,me=L[Ct]);if(wt!==xt)for(L[wt]=L[xt],L[xt]=me,Ct=0;Ct<ft;Ct++)me=b.get(Ct,xt),b.set(Ct,xt,b.get(Ct,wt)),b.set(Ct,wt,me)}}function na(ft,nt,L,b){var w=0,V=ft-1,xt,Ct,wt,Rt,Ce,me,Ke;for(me=w+1;me<=V-1;me++){for(Ke=0,Rt=me;Rt<=V;Rt++)Ke=Ke+Math.abs(nt.get(Rt,me-1));if(Ke!==0){for(wt=0,Rt=V;Rt>=me;Rt--)L[Rt]=nt.get(Rt,me-1)/Ke,wt+=L[Rt]*L[Rt];for(Ct=Math.sqrt(wt),L[me]>0&&(Ct=-Ct),wt=wt-L[me]*Ct,L[me]=L[me]-Ct,Ce=me;Ce<ft;Ce++){for(xt=0,Rt=V;Rt>=me;Rt--)xt+=L[Rt]*nt.get(Rt,Ce);for(xt=xt/wt,Rt=me;Rt<=V;Rt++)nt.set(Rt,Ce,nt.get(Rt,Ce)-xt*L[Rt])}for(Rt=0;Rt<=V;Rt++){for(xt=0,Ce=V;Ce>=me;Ce--)xt+=L[Ce]*nt.get(Rt,Ce);for(xt=xt/wt,Ce=me;Ce<=V;Ce++)nt.set(Rt,Ce,nt.get(Rt,Ce)-xt*L[Ce])}L[me]=Ke*L[me],nt.set(me,me-1,Ke*Ct)}}for(Rt=0;Rt<ft;Rt++)for(Ce=0;Ce<ft;Ce++)b.set(Rt,Ce,Rt===Ce?1:0);for(me=V-1;me>=w+1;me--)if(nt.get(me,me-1)!==0){for(Rt=me+1;Rt<=V;Rt++)L[Rt]=nt.get(Rt,me-1);for(Ce=me;Ce<=V;Ce++){for(Ct=0,Rt=me;Rt<=V;Rt++)Ct+=L[Rt]*b.get(Rt,Ce);for(Ct=Ct/L[me]/nt.get(me,me-1),Rt=me;Rt<=V;Rt++)b.set(Rt,Ce,b.get(Rt,Ce)+Ct*L[Rt])}}}function Qn(ft,nt,L,b,w){var V=ft-1,xt=0,Ct=ft-1,wt=Number.EPSILON,Rt=0,Ce=0,me=0,Ke=0,yr=0,er=0,gr=0,dn=0,Ue,or,mr,$r,Pr,va,Sa,Mn,Un,Fa,Ea,Kr,kn,_e,Nt;for(Ue=0;Ue<ft;Ue++)for((Ue<xt||Ue>Ct)&&(L[Ue]=w.get(Ue,Ue),nt[Ue]=0),or=Math.max(Ue-1,0);or<ft;or++)Ce=Ce+Math.abs(w.get(Ue,or));for(;V>=xt;){for($r=V;$r>xt&&(er=Math.abs(w.get($r-1,$r-1))+Math.abs(w.get($r,$r)),er===0&&(er=Ce),!(Math.abs(w.get($r,$r-1))<wt*er));)$r--;if($r===V)w.set(V,V,w.get(V,V)+Rt),L[V]=w.get(V,V),nt[V]=0,V--,dn=0;else if($r===V-1){if(Sa=w.get(V,V-1)*w.get(V-1,V),me=(w.get(V-1,V-1)-w.get(V,V))/2,Ke=me*me+Sa,gr=Math.sqrt(Math.abs(Ke)),w.set(V,V,w.get(V,V)+Rt),w.set(V-1,V-1,w.get(V-1,V-1)+Rt),Mn=w.get(V,V),Ke>=0){for(gr=me>=0?me+gr:me-gr,L[V-1]=Mn+gr,L[V]=L[V-1],gr!==0&&(L[V]=Mn-Sa/gr),nt[V-1]=0,nt[V]=0,Mn=w.get(V,V-1),er=Math.abs(Mn)+Math.abs(gr),me=Mn/er,Ke=gr/er,yr=Math.sqrt(me*me+Ke*Ke),me=me/yr,Ke=Ke/yr,or=V-1;or<ft;or++)gr=w.get(V-1,or),w.set(V-1,or,Ke*gr+me*w.get(V,or)),w.set(V,or,Ke*w.get(V,or)-me*gr);for(Ue=0;Ue<=V;Ue++)gr=w.get(Ue,V-1),w.set(Ue,V-1,Ke*gr+me*w.get(Ue,V)),w.set(Ue,V,Ke*w.get(Ue,V)-me*gr);for(Ue=xt;Ue<=Ct;Ue++)gr=b.get(Ue,V-1),b.set(Ue,V-1,Ke*gr+me*b.get(Ue,V)),b.set(Ue,V,Ke*b.get(Ue,V)-me*gr)}else L[V-1]=Mn+me,L[V]=Mn+me,nt[V-1]=gr,nt[V]=-gr;V=V-2,dn=0}else{if(Mn=w.get(V,V),Un=0,Sa=0,$r<V&&(Un=w.get(V-1,V-1),Sa=w.get(V,V-1)*w.get(V-1,V)),dn===10){for(Rt+=Mn,Ue=xt;Ue<=V;Ue++)w.set(Ue,Ue,w.get(Ue,Ue)-Mn);er=Math.abs(w.get(V,V-1))+Math.abs(w.get(V-1,V-2)),Mn=Un=.75*er,Sa=-.4375*er*er}if(dn===30&&(er=(Un-Mn)/2,er=er*er+Sa,er>0)){for(er=Math.sqrt(er),Un<Mn&&(er=-er),er=Mn-Sa/((Un-Mn)/2+er),Ue=xt;Ue<=V;Ue++)w.set(Ue,Ue,w.get(Ue,Ue)-er);Rt+=er,Mn=Un=Sa=.964}for(dn=dn+1,Pr=V-2;Pr>=$r&&(gr=w.get(Pr,Pr),yr=Mn-gr,er=Un-gr,me=(yr*er-Sa)/w.get(Pr+1,Pr)+w.get(Pr,Pr+1),Ke=w.get(Pr+1,Pr+1)-gr-yr-er,yr=w.get(Pr+2,Pr+1),er=Math.abs(me)+Math.abs(Ke)+Math.abs(yr),me=me/er,Ke=Ke/er,yr=yr/er,!(Pr===$r||Math.abs(w.get(Pr,Pr-1))*(Math.abs(Ke)+Math.abs(yr))<wt*(Math.abs(me)*(Math.abs(w.get(Pr-1,Pr-1))+Math.abs(gr)+Math.abs(w.get(Pr+1,Pr+1))))));)Pr--;for(Ue=Pr+2;Ue<=V;Ue++)w.set(Ue,Ue-2,0),Ue>Pr+2&&w.set(Ue,Ue-3,0);for(mr=Pr;mr<=V-1&&(_e=mr!==V-1,mr!==Pr&&(me=w.get(mr,mr-1),Ke=w.get(mr+1,mr-1),yr=_e?w.get(mr+2,mr-1):0,Mn=Math.abs(me)+Math.abs(Ke)+Math.abs(yr),Mn!==0&&(me=me/Mn,Ke=Ke/Mn,yr=yr/Mn)),Mn!==0);mr++)if(er=Math.sqrt(me*me+Ke*Ke+yr*yr),me<0&&(er=-er),er!==0){for(mr!==Pr?w.set(mr,mr-1,-er*Mn):$r!==Pr&&w.set(mr,mr-1,-w.get(mr,mr-1)),me=me+er,Mn=me/er,Un=Ke/er,gr=yr/er,Ke=Ke/me,yr=yr/me,or=mr;or<ft;or++)me=w.get(mr,or)+Ke*w.get(mr+1,or),_e&&(me=me+yr*w.get(mr+2,or),w.set(mr+2,or,w.get(mr+2,or)-me*gr)),w.set(mr,or,w.get(mr,or)-me*Mn),w.set(mr+1,or,w.get(mr+1,or)-me*Un);for(Ue=0;Ue<=Math.min(V,mr+3);Ue++)me=Mn*w.get(Ue,mr)+Un*w.get(Ue,mr+1),_e&&(me=me+gr*w.get(Ue,mr+2),w.set(Ue,mr+2,w.get(Ue,mr+2)-me*yr)),w.set(Ue,mr,w.get(Ue,mr)-me),w.set(Ue,mr+1,w.get(Ue,mr+1)-me*Ke);for(Ue=xt;Ue<=Ct;Ue++)me=Mn*b.get(Ue,mr)+Un*b.get(Ue,mr+1),_e&&(me=me+gr*b.get(Ue,mr+2),b.set(Ue,mr+2,b.get(Ue,mr+2)-me*yr)),b.set(Ue,mr,b.get(Ue,mr)-me),b.set(Ue,mr+1,b.get(Ue,mr+1)-me*Ke)}}}if(Ce!==0){for(V=ft-1;V>=0;V--)if(me=L[V],Ke=nt[V],Ke===0)for($r=V,w.set(V,V,1),Ue=V-1;Ue>=0;Ue--){for(Sa=w.get(Ue,Ue)-me,yr=0,or=$r;or<=V;or++)yr=yr+w.get(Ue,or)*w.get(or,V);if(nt[Ue]<0)gr=Sa,er=yr;else if($r=Ue,nt[Ue]===0?w.set(Ue,V,Sa!==0?-yr/Sa:-yr/(wt*Ce)):(Mn=w.get(Ue,Ue+1),Un=w.get(Ue+1,Ue),Ke=(L[Ue]-me)*(L[Ue]-me)+nt[Ue]*nt[Ue],va=(Mn*er-gr*yr)/Ke,w.set(Ue,V,va),w.set(Ue+1,V,Math.abs(Mn)>Math.abs(gr)?(-yr-Sa*va)/Mn:(-er-Un*va)/gr)),va=Math.abs(w.get(Ue,V)),wt*va*va>1)for(or=Ue;or<=V;or++)w.set(or,V,w.get(or,V)/va)}else if(Ke<0)for($r=V-1,Math.abs(w.get(V,V-1))>Math.abs(w.get(V-1,V))?(w.set(V-1,V-1,Ke/w.get(V,V-1)),w.set(V-1,V,-(w.get(V,V)-me)/w.get(V,V-1))):(Nt=In(0,-w.get(V-1,V),w.get(V-1,V-1)-me,Ke),w.set(V-1,V-1,Nt[0]),w.set(V-1,V,Nt[1])),w.set(V,V-1,0),w.set(V,V,1),Ue=V-2;Ue>=0;Ue--){for(Fa=0,Ea=0,or=$r;or<=V;or++)Fa=Fa+w.get(Ue,or)*w.get(or,V-1),Ea=Ea+w.get(Ue,or)*w.get(or,V);if(Sa=w.get(Ue,Ue)-me,nt[Ue]<0)gr=Sa,yr=Fa,er=Ea;else if($r=Ue,nt[Ue]===0?(Nt=In(-Fa,-Ea,Sa,Ke),w.set(Ue,V-1,Nt[0]),w.set(Ue,V,Nt[1])):(Mn=w.get(Ue,Ue+1),Un=w.get(Ue+1,Ue),Kr=(L[Ue]-me)*(L[Ue]-me)+nt[Ue]*nt[Ue]-Ke*Ke,kn=(L[Ue]-me)*2*Ke,Kr===0&&kn===0&&(Kr=wt*Ce*(Math.abs(Sa)+Math.abs(Ke)+Math.abs(Mn)+Math.abs(Un)+Math.abs(gr))),Nt=In(Mn*yr-gr*Fa+Ke*Ea,Mn*er-gr*Ea-Ke*Fa,Kr,kn),w.set(Ue,V-1,Nt[0]),w.set(Ue,V,Nt[1]),Math.abs(Mn)>Math.abs(gr)+Math.abs(Ke)?(w.set(Ue+1,V-1,(-Fa-Sa*w.get(Ue,V-1)+Ke*w.get(Ue,V))/Mn),w.set(Ue+1,V,(-Ea-Sa*w.get(Ue,V)-Ke*w.get(Ue,V-1))/Mn)):(Nt=In(-yr-Un*w.get(Ue,V-1),-er-Un*w.get(Ue,V),gr,Ke),w.set(Ue+1,V-1,Nt[0]),w.set(Ue+1,V,Nt[1]))),va=Math.max(Math.abs(w.get(Ue,V-1)),Math.abs(w.get(Ue,V))),wt*va*va>1)for(or=Ue;or<=V;or++)w.set(or,V-1,w.get(or,V-1)/va),w.set(or,V,w.get(or,V)/va)}for(Ue=0;Ue<ft;Ue++)if(Ue<xt||Ue>Ct)for(or=Ue;or<ft;or++)b.set(Ue,or,w.get(Ue,or));for(or=ft-1;or>=xt;or--)for(Ue=xt;Ue<=Ct;Ue++){for(gr=0,mr=xt;mr<=Math.min(or,Ct);mr++)gr=gr+b.get(Ue,mr)*w.get(mr,or);b.set(Ue,or,gr)}}}function In(ft,nt,L,b){var w,V;return Math.abs(L)>Math.abs(b)?(w=b/L,V=L+w*b,[(ft+w*nt)/V,(nt-w*ft)/V]):(w=L/b,V=b+w*L,[(w*ft+nt)/V,(w*nt-ft)/V])}var Ca=function(){function ft(nt){if(N(this,ft),nt=En.checkMatrix(nt),!nt.isSymmetric())throw new Error("Matrix is not symmetric");var L=nt,b=L.rows,w=new Xt(b,b),V=!0,xt,Ct,wt;for(Ct=0;Ct<b;Ct++){var Rt=0;for(wt=0;wt<Ct;wt++){var Ce=0;for(xt=0;xt<wt;xt++)Ce+=w.get(wt,xt)*w.get(Ct,xt);Ce=(L.get(Ct,wt)-Ce)/w.get(wt,wt),w.set(Ct,wt,Ce),Rt=Rt+Ce*Ce}for(Rt=L.get(Ct,Ct)-Rt,V&=Rt>0,w.set(Ct,Ct,Math.sqrt(Math.max(Rt,0))),wt=Ct+1;wt<b;wt++)w.set(Ct,wt,0)}this.L=w,this.positiveDefinite=!!V}return D(ft,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(L){L=En.checkMatrix(L);var b=this.L,w=b.rows;if(L.rows!==w)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var V=L.columns,xt=L.clone(),Ct,wt,Rt;for(Rt=0;Rt<w;Rt++)for(wt=0;wt<V;wt++){for(Ct=0;Ct<Rt;Ct++)xt.set(Rt,wt,xt.get(Rt,wt)-xt.get(Ct,wt)*b.get(Rt,Ct));xt.set(Rt,wt,xt.get(Rt,wt)/b.get(Rt,Rt))}for(Rt=w-1;Rt>=0;Rt--)for(wt=0;wt<V;wt++){for(Ct=Rt+1;Ct<w;Ct++)xt.set(Rt,wt,xt.get(Rt,wt)-xt.get(Ct,wt)*b.get(Ct,Rt));xt.set(Rt,wt,xt.get(Rt,wt)/b.get(Rt,Rt))}return xt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),ft}(),q=D(function ft(nt){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};N(this,ft),nt=En.checkMatrix(nt);var b=L.Y,w=L.scaleScores,V=w===void 0?!1:w,xt=L.maxIterations,Ct=xt===void 0?1e3:xt,wt=L.terminationCriteria,Rt=wt===void 0?1e-10:wt,Ce;if(b){if(E.isAnyArray(b)&&typeof b[0]=="number"?b=Xt.columnVector(b):b=En.checkMatrix(b),b.rows!==nt.rows)throw new Error("Y should have the same number of rows as X");Ce=b.getColumnVector(0)}else Ce=nt.getColumnVector(0);for(var me=1,Ke,yr,er,gr,dn=0;dn<Ct&&me>Rt;dn++)er=nt.transpose().mmul(Ce).div(Ce.transpose().mmul(Ce).get(0,0)),er=er.div(er.norm()),Ke=nt.mmul(er).div(er.transpose().mmul(er).get(0,0)),dn>0&&(me=Ke.clone().sub(gr).pow(2).sum()),gr=Ke.clone(),b?(yr=b.transpose().mmul(Ke).div(Ke.transpose().mmul(Ke).get(0,0)),yr=yr.div(yr.norm()),Ce=b.mmul(yr).div(yr.transpose().mmul(yr).get(0,0))):Ce=Ke;if(b){var Ue=nt.transpose().mmul(Ke).div(Ke.transpose().mmul(Ke).get(0,0));Ue=Ue.div(Ue.norm());var or=nt.clone().sub(Ke.clone().mmul(Ue.transpose())),mr=Ce.transpose().mmul(Ke).div(Ke.transpose().mmul(Ke).get(0,0)),$r=b.clone().sub(Ke.clone().mulS(mr.get(0,0)).mmul(yr.transpose()));this.t=Ke,this.p=Ue.transpose(),this.w=er.transpose(),this.q=yr,this.u=Ce,this.s=Ke.transpose().mmul(Ke),this.xResidual=or,this.yResidual=$r,this.betas=mr}else this.w=er.transpose(),this.s=Ke.transpose().mmul(Ke).sqrt(),V?this.t=Ke.clone().div(this.s.get(0,0)):this.t=Ke,this.xResidual=nt.sub(Ke.mmul(er.transpose()))});R.AbstractMatrix=Ee,R.CHO=Ca,R.CholeskyDecomposition=Ca,R.EVD=ma,R.EigenvalueDecomposition=ma,R.LU=ea,R.LuDecomposition=ea,R.Matrix=Xt,R.MatrixColumnSelectionView=Kt,R.MatrixColumnView=Lt,R.MatrixFlipColumnView=pe,R.MatrixFlipRowView=We,R.MatrixRowSelectionView=Mr,R.MatrixRowView=Je,R.MatrixSelectionView=Vt,R.MatrixSubView=on,R.MatrixTransposeView=sn,R.NIPALS=q,R.Nipals=q,R.QR=Zn,R.QrDecomposition=Zn,R.SVD=La,R.SingularValueDecomposition=La,R.WrapperMatrix1D=pn,R.WrapperMatrix2D=En,R.correlation=ba,R.covariance=jn,R.default=Xt,R.determinant=Or,R.inverse=Aa,R.linearDependencies=qn,R.pseudoInverse=Vn,R.solve=fr,R.wrap=Yn},971829:function(dr,R,z){"use strict";z.r(R),z.d(R,{quadtree:function(){return B.Z}});var B=z(547148)},547148:function(dr,R,z){"use strict";z.d(R,{Z:function(){return it}});function B(Q){const rt=+this._x.call(null,Q),J=+this._y.call(null,Q);return X(this.cover(rt,J),rt,J,Q)}function X(Q,rt,J,ot){if(isNaN(rt)||isNaN(J))return Q;var vt,gt=Q._root,Pt={data:ot},It=Q._x0,Jt=Q._y0,zt=Q._x1,kt=Q._y1,$,lt,St,Ut,Ft,ee,ve,be;if(!gt)return Q._root=Pt,Q;for(;gt.length;)if((Ft=rt>=($=(It+zt)/2))?It=$:zt=$,(ee=J>=(lt=(Jt+kt)/2))?Jt=lt:kt=lt,vt=gt,!(gt=gt[ve=ee<<1|Ft]))return vt[ve]=Pt,Q;if(St=+Q._x.call(null,gt.data),Ut=+Q._y.call(null,gt.data),rt===St&&J===Ut)return Pt.next=gt,vt?vt[ve]=Pt:Q._root=Pt,Q;do vt=vt?vt[ve]=new Array(4):Q._root=new Array(4),(Ft=rt>=($=(It+zt)/2))?It=$:zt=$,(ee=J>=(lt=(Jt+kt)/2))?Jt=lt:kt=lt;while((ve=ee<<1|Ft)===(be=(Ut>=lt)<<1|St>=$));return vt[be]=gt,vt[ve]=Pt,Q}function k(Q){var rt,J,ot=Q.length,vt,gt,Pt=new Array(ot),It=new Array(ot),Jt=1/0,zt=1/0,kt=-1/0,$=-1/0;for(J=0;J<ot;++J)isNaN(vt=+this._x.call(null,rt=Q[J]))||isNaN(gt=+this._y.call(null,rt))||(Pt[J]=vt,It[J]=gt,vt<Jt&&(Jt=vt),vt>kt&&(kt=vt),gt<zt&&(zt=gt),gt>$&&($=gt));if(Jt>kt||zt>$)return this;for(this.cover(Jt,zt).cover(kt,$),J=0;J<ot;++J)X(this,Pt[J],It[J],Q[J]);return this}function P(Q,rt){if(isNaN(Q=+Q)||isNaN(rt=+rt))return this;var J=this._x0,ot=this._y0,vt=this._x1,gt=this._y1;if(isNaN(J))vt=(J=Math.floor(Q))+1,gt=(ot=Math.floor(rt))+1;else{for(var Pt=vt-J||1,It=this._root,Jt,zt;J>Q||Q>=vt||ot>rt||rt>=gt;)switch(zt=(rt<ot)<<1|Q<J,Jt=new Array(4),Jt[zt]=It,It=Jt,Pt*=2,zt){case 0:vt=J+Pt,gt=ot+Pt;break;case 1:J=vt-Pt,gt=ot+Pt;break;case 2:vt=J+Pt,ot=gt-Pt;break;case 3:J=vt-Pt,ot=gt-Pt;break}this._root&&this._root.length&&(this._root=It)}return this._x0=J,this._y0=ot,this._x1=vt,this._y1=gt,this}function N(){var Q=[];return this.visit(function(rt){if(!rt.length)do Q.push(rt.data);while(rt=rt.next)}),Q}function D(Q){return arguments.length?this.cover(+Q[0][0],+Q[0][1]).cover(+Q[1][0],+Q[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function E(Q,rt,J,ot,vt){this.node=Q,this.x0=rt,this.y0=J,this.x1=ot,this.y1=vt}function y(Q,rt,J){var ot,vt=this._x0,gt=this._y0,Pt,It,Jt,zt,kt=this._x1,$=this._y1,lt=[],St=this._root,Ut,Ft;for(St&&lt.push(new E(St,vt,gt,kt,$)),J==null?J=1/0:(vt=Q-J,gt=rt-J,kt=Q+J,$=rt+J,J*=J);Ut=lt.pop();)if(!(!(St=Ut.node)||(Pt=Ut.x0)>kt||(It=Ut.y0)>$||(Jt=Ut.x1)<vt||(zt=Ut.y1)<gt))if(St.length){var ee=(Pt+Jt)/2,ve=(It+zt)/2;lt.push(new E(St[3],ee,ve,Jt,zt),new E(St[2],Pt,ve,ee,zt),new E(St[1],ee,It,Jt,ve),new E(St[0],Pt,It,ee,ve)),(Ft=(rt>=ve)<<1|Q>=ee)&&(Ut=lt[lt.length-1],lt[lt.length-1]=lt[lt.length-1-Ft],lt[lt.length-1-Ft]=Ut)}else{var be=Q-+this._x.call(null,St.data),Ht=rt-+this._y.call(null,St.data),Yt=be*be+Ht*Ht;if(Yt<J){var de=Math.sqrt(J=Yt);vt=Q-de,gt=rt-de,kt=Q+de,$=rt+de,ot=St.data}}return ot}function M(Q){if(isNaN(kt=+this._x.call(null,Q))||isNaN($=+this._y.call(null,Q)))return this;var rt,J=this._root,ot,vt,gt,Pt=this._x0,It=this._y0,Jt=this._x1,zt=this._y1,kt,$,lt,St,Ut,Ft,ee,ve;if(!J)return this;if(J.length)for(;;){if((Ut=kt>=(lt=(Pt+Jt)/2))?Pt=lt:Jt=lt,(Ft=$>=(St=(It+zt)/2))?It=St:zt=St,rt=J,!(J=J[ee=Ft<<1|Ut]))return this;if(!J.length)break;(rt[ee+1&3]||rt[ee+2&3]||rt[ee+3&3])&&(ot=rt,ve=ee)}for(;J.data!==Q;)if(vt=J,!(J=J.next))return this;return(gt=J.next)&&delete J.next,vt?(gt?vt.next=gt:delete vt.next,this):rt?(gt?rt[ee]=gt:delete rt[ee],(J=rt[0]||rt[1]||rt[2]||rt[3])&&J===(rt[3]||rt[2]||rt[1]||rt[0])&&!J.length&&(ot?ot[ve]=J:this._root=J),this):(this._root=gt,this)}function _(Q){for(var rt=0,J=Q.length;rt<J;++rt)this.remove(Q[rt]);return this}function m(){return this._root}function I(){var Q=0;return this.visit(function(rt){if(!rt.length)do++Q;while(rt=rt.next)}),Q}function A(Q){var rt=[],J,ot=this._root,vt,gt,Pt,It,Jt;for(ot&&rt.push(new E(ot,this._x0,this._y0,this._x1,this._y1));J=rt.pop();)if(!Q(ot=J.node,gt=J.x0,Pt=J.y0,It=J.x1,Jt=J.y1)&&ot.length){var zt=(gt+It)/2,kt=(Pt+Jt)/2;(vt=ot[3])&&rt.push(new E(vt,zt,kt,It,Jt)),(vt=ot[2])&&rt.push(new E(vt,gt,kt,zt,Jt)),(vt=ot[1])&&rt.push(new E(vt,zt,Pt,It,kt)),(vt=ot[0])&&rt.push(new E(vt,gt,Pt,zt,kt))}return this}function O(Q){var rt=[],J=[],ot;for(this._root&&rt.push(new E(this._root,this._x0,this._y0,this._x1,this._y1));ot=rt.pop();){var vt=ot.node;if(vt.length){var gt,Pt=ot.x0,It=ot.y0,Jt=ot.x1,zt=ot.y1,kt=(Pt+Jt)/2,$=(It+zt)/2;(gt=vt[0])&&rt.push(new E(gt,Pt,It,kt,$)),(gt=vt[1])&&rt.push(new E(gt,kt,It,Jt,$)),(gt=vt[2])&&rt.push(new E(gt,Pt,$,kt,zt)),(gt=vt[3])&&rt.push(new E(gt,kt,$,Jt,zt))}J.push(ot)}for(;ot=J.pop();)Q(ot.node,ot.x0,ot.y0,ot.x1,ot.y1);return this}function U(Q){return Q[0]}function j(Q){return arguments.length?(this._x=Q,this):this._x}function x(Q){return Q[1]}function d(Q){return arguments.length?(this._y=Q,this):this._y}function it(Q,rt,J){var ot=new Y(rt==null?U:rt,J==null?x:J,NaN,NaN,NaN,NaN);return Q==null?ot:ot.addAll(Q)}function Y(Q,rt,J,ot,vt,gt){this._x=Q,this._y=rt,this._x0=J,this._y0=ot,this._x1=vt,this._y1=gt,this._root=void 0}function W(Q){for(var rt={data:Q.data},J=rt;Q=Q.next;)J=J.next={data:Q.data};return rt}var K=it.prototype=Y.prototype;K.copy=function(){var Q=new Y(this._x,this._y,this._x0,this._y0,this._x1,this._y1),rt=this._root,J,ot;if(!rt)return Q;if(!rt.length)return Q._root=W(rt),Q;for(J=[{source:rt,target:Q._root=new Array(4)}];rt=J.pop();)for(var vt=0;vt<4;++vt)(ot=rt.source[vt])&&(ot.length?J.push({source:ot,target:rt.target[vt]=new Array(4)}):rt.target[vt]=W(ot));return Q},K.add=B,K.addAll=k,K.cover=P,K.data=N,K.extent=D,K.find=y,K.remove=M,K.removeAll=_,K.root=m,K.size=I,K.visit=A,K.visitAfter=O,K.x=j,K.y=d},235374:function(dr,R,z){"use strict";z.d(R,{HT:function(){return U}});var B=0,X=0,k=0,P=1e3,N,D,E=0,y=0,M=0,_=typeof performance=="object"&&performance.now?performance:Date,m=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(W){setTimeout(W,17)};function I(){return y||(m(A),y=_.now()+M)}function A(){y=0}function O(){this._call=this._time=this._next=null}O.prototype=U.prototype={constructor:O,restart:function(W,K,Q){if(typeof W!="function")throw new TypeError("callback is not a function");Q=(Q==null?I():+Q)+(K==null?0:+K),!this._next&&D!==this&&(D?D._next=this:N=this,D=this),this._call=W,this._time=Q,Y()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y())}};function U(W,K,Q){var rt=new O;return rt.restart(W,K,Q),rt}function j(){I(),++B;for(var W=N,K;W;)(K=y-W._time)>=0&&W._call.call(null,K),W=W._next;--B}function x(){y=(E=_.now())+M,B=X=0;try{j()}finally{B=0,it(),y=0}}function d(){var W=_.now(),K=W-E;K>P&&(M-=K,E=W)}function it(){for(var W,K=N,Q,rt=1/0;K;)K._call?(rt>K._time&&(rt=K._time),W=K,K=K._next):(Q=K._next,K._next=null,K=W?W._next=Q:N=Q);D=W,Y(rt)}function Y(W){if(!B){X&&(X=clearTimeout(X));var K=W-y;K>24?(W<1/0&&(X=setTimeout(x,W-_.now()-M)),k&&(k=clearInterval(k))):(k||(E=_.now(),k=setInterval(d,P)),B=1,m(x))}}},631969:function(dr,R,z){"use strict";z.r(R),z.d(R,{BRIDGE_GRAPH_NAME:function(){return N},GraphType:function(){return y},HierarchyNodeType:function(){return M},InclusionType:function(){return E},LAYOUT_CONFIG:function(){return B},NodeType:function(){return D},ROOT_NAME:function(){return P},buildGraph:function(){return vr},flatGraph:function(){return Rr},getEdges:function(){return zr},mergeConfig:function(){return X}});const B={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function X(v={},S=B){var G,Z,st,ct;const yt=JSON.parse(JSON.stringify(S)),bt=((G=v==null?void 0:v.graph)===null||G===void 0?void 0:G.meta)||{},At=((Z=v==null?void 0:v.subScene)===null||Z===void 0?void 0:Z.meta)||{},Wt=((st=v==null?void 0:v.nodeSize)===null||st===void 0?void 0:st.meta)||{},ne=((ct=v==null?void 0:v.nodeSize)===null||ct===void 0?void 0:ct.node)||{},Qt=yt.nodeSize.bridge;return{graph:{meta:Object.assign(yt.graph.meta,bt)},subScene:{meta:Object.assign(yt.subScene.meta,At)},nodeSize:{meta:Object.assign(yt.nodeSize.meta,Wt),node:Object.assign(yt.nodeSize.node,ne),bridge:Qt}}}function k(v){return`\u25EC${v}\u25EC`}const P=k("ROOT"),N=k("BRIDGE_GRAPH");var D,E,y,M;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(D||(D={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(E||(E={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(y||(y={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(M||(M={}));var _=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof z.g!="undefined"?z.g:typeof self!="undefined"?self:{};function m(v,S){return v(S={exports:{}},S.exports),S.exports}var I=function(){this.__data__=[],this.size=0},A=function(v,S){return v===S||v!=v&&S!=S},O=function(v,S){for(var G=v.length;G--;)if(A(v[G][0],S))return G;return-1},U=Array.prototype.splice,j=function(v){var S=this.__data__,G=O(S,v);return!(G<0)&&(G==S.length-1?S.pop():U.call(S,G,1),--this.size,!0)},x=function(v){var S=this.__data__,G=O(S,v);return G<0?void 0:S[G][1]},d=function(v){return O(this.__data__,v)>-1},it=function(v,S){var G=this.__data__,Z=O(G,v);return Z<0?(++this.size,G.push([v,S])):G[Z][1]=S,this};function Y(v){var S=-1,G=v==null?0:v.length;for(this.clear();++S<G;){var Z=v[S];this.set(Z[0],Z[1])}}Y.prototype.clear=I,Y.prototype.delete=j,Y.prototype.get=x,Y.prototype.has=d,Y.prototype.set=it;var W=Y,K=function(){this.__data__=new W,this.size=0},Q=function(v){var S=this.__data__,G=S.delete(v);return this.size=S.size,G},rt=function(v){return this.__data__.get(v)},J=function(v){return this.__data__.has(v)},ot=typeof _=="object"&&_&&_.Object===Object&&_,vt=typeof self=="object"&&self&&self.Object===Object&&self,gt=ot||vt||Function("return this")(),Pt=gt.Symbol,It=Object.prototype,Jt=It.hasOwnProperty,zt=It.toString,kt=Pt?Pt.toStringTag:void 0,$=function(v){var S=Jt.call(v,kt),G=v[kt];try{v[kt]=void 0;var Z=!0}catch(ct){}var st=zt.call(v);return Z&&(S?v[kt]=G:delete v[kt]),st},lt=Object.prototype.toString,St=function(v){return lt.call(v)},Ut=Pt?Pt.toStringTag:void 0,Ft=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":Ut&&Ut in Object(v)?$(v):St(v)},ee=function(v){var S=typeof v;return v!=null&&(S=="object"||S=="function")},ve,be=function(v){if(!ee(v))return!1;var S=Ft(v);return S=="[object Function]"||S=="[object GeneratorFunction]"||S=="[object AsyncFunction]"||S=="[object Proxy]"},Ht=gt["__core-js_shared__"],Yt=(ve=/[^.]+$/.exec(Ht&&Ht.keys&&Ht.keys.IE_PROTO||""))?"Symbol(src)_1."+ve:"",de=function(v){return!!Yt&&Yt in v},Ee=Function.prototype.toString,ge=function(v){if(v!=null){try{return Ee.call(v)}catch(S){}try{return v+""}catch(S){}}return""},Ot=/^\[object .+?Constructor\]$/,Xt=Function.prototype,ce=Object.prototype,Lt=Xt.toString,Kt=ce.hasOwnProperty,pe=RegExp("^"+Lt.call(Kt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=function(v){return!(!ee(v)||de(v))&&(be(v)?pe:Ot).test(ge(v))},Je=function(v,S){return v==null?void 0:v[S]},Mr=function(v,S){var G=Je(v,S);return We(G)?G:void 0},Vt=Mr(gt,"Map"),on=Mr(Object,"create"),sn=function(){this.__data__=on?on(null):{},this.size=0},pn=function(v){var S=this.has(v)&&delete this.__data__[v];return this.size-=S?1:0,S},En=Object.prototype.hasOwnProperty,Yn=function(v){var S=this.__data__;if(on){var G=S[v];return G==="__lodash_hash_undefined__"?void 0:G}return En.call(S,v)?S[v]:void 0},ea=Object.prototype.hasOwnProperty,Nn=function(v){var S=this.__data__;return on?S[v]!==void 0:ea.call(S,v)},Zn=function(v,S){var G=this.__data__;return this.size+=this.has(v)?0:1,G[v]=on&&S===void 0?"__lodash_hash_undefined__":S,this};function La(v){var S=-1,G=v==null?0:v.length;for(this.clear();++S<G;){var Z=v[S];this.set(Z[0],Z[1])}}La.prototype.clear=sn,La.prototype.delete=pn,La.prototype.get=Yn,La.prototype.has=Nn,La.prototype.set=Zn;var Aa=La,fr=function(){this.size=0,this.__data__={hash:new Aa,map:new(Vt||W),string:new Aa}},Or=function(v){var S=typeof v;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?v!=="__proto__":v===null},vn=function(v,S){var G=v.__data__;return Or(S)?G[typeof S=="string"?"string":"hash"]:G.map},yn=function(v){var S=vn(this,v).delete(v);return this.size-=S?1:0,S},qn=function(v){return vn(this,v).get(v)},Vn=function(v){return vn(this,v).has(v)},jn=function(v,S){var G=vn(this,v),Z=G.size;return G.set(v,S),this.size+=G.size==Z?0:1,this};function ba(v){var S=-1,G=v==null?0:v.length;for(this.clear();++S<G;){var Z=v[S];this.set(Z[0],Z[1])}}ba.prototype.clear=fr,ba.prototype.delete=yn,ba.prototype.get=qn,ba.prototype.has=Vn,ba.prototype.set=jn;var ma=ba,Pa=function(v,S){var G=this.__data__;if(G instanceof W){var Z=G.__data__;if(!Vt||Z.length<199)return Z.push([v,S]),this.size=++G.size,this;G=this.__data__=new ma(Z)}return G.set(v,S),this.size=G.size,this};function wn(v){var S=this.__data__=new W(v);this.size=S.size}wn.prototype.clear=K,wn.prototype.delete=Q,wn.prototype.get=rt,wn.prototype.has=J,wn.prototype.set=Pa;var na=wn,Qn=function(v,S){for(var G=-1,Z=v==null?0:v.length;++G<Z&&S(v[G],G,v)!==!1;);return v},In=function(){try{var v=Mr(Object,"defineProperty");return v({},"",{}),v}catch(S){}}(),Ca=function(v,S,G){S=="__proto__"&&In?In(v,S,{configurable:!0,enumerable:!0,value:G,writable:!0}):v[S]=G},q=Object.prototype.hasOwnProperty,ft=function(v,S,G){var Z=v[S];q.call(v,S)&&A(Z,G)&&(G!==void 0||S in v)||Ca(v,S,G)},nt=function(v,S,G,Z){var st=!G;G||(G={});for(var ct=-1,yt=S.length;++ct<yt;){var bt=S[ct],At=Z?Z(G[bt],v[bt],bt,G,v):void 0;At===void 0&&(At=v[bt]),st?Ca(G,bt,At):ft(G,bt,At)}return G},L=function(v,S){for(var G=-1,Z=Array(v);++G<v;)Z[G]=S(G);return Z},b=function(v){return v!=null&&typeof v=="object"},w=function(v){return b(v)&&Ft(v)=="[object Arguments]"},V=Object.prototype,xt=V.hasOwnProperty,Ct=V.propertyIsEnumerable,wt=w(function(){return arguments}())?w:function(v){return b(v)&&xt.call(v,"callee")&&!Ct.call(v,"callee")},Rt=Array.isArray,Ce=function(){return!1},me=m(function(v,S){var G=S&&!S.nodeType&&S,Z=G&&v&&!v.nodeType&&v,st=Z&&Z.exports===G?gt.Buffer:void 0,ct=(st?st.isBuffer:void 0)||Ce;v.exports=ct}),Ke=/^(?:0|[1-9]\d*)$/,yr=function(v,S){var G=typeof v;return!!(S=S==null?9007199254740991:S)&&(G=="number"||G!="symbol"&&Ke.test(v))&&v>-1&&v%1==0&&v<S},er=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},gr={};gr["[object Float32Array]"]=gr["[object Float64Array]"]=gr["[object Int8Array]"]=gr["[object Int16Array]"]=gr["[object Int32Array]"]=gr["[object Uint8Array]"]=gr["[object Uint8ClampedArray]"]=gr["[object Uint16Array]"]=gr["[object Uint32Array]"]=!0,gr["[object Arguments]"]=gr["[object Array]"]=gr["[object ArrayBuffer]"]=gr["[object Boolean]"]=gr["[object DataView]"]=gr["[object Date]"]=gr["[object Error]"]=gr["[object Function]"]=gr["[object Map]"]=gr["[object Number]"]=gr["[object Object]"]=gr["[object RegExp]"]=gr["[object Set]"]=gr["[object String]"]=gr["[object WeakMap]"]=!1;var dn=function(v){return b(v)&&er(v.length)&&!!gr[Ft(v)]},Ue=function(v){return function(S){return v(S)}},or=m(function(v,S){var G=S&&!S.nodeType&&S,Z=G&&v&&!v.nodeType&&v,st=Z&&Z.exports===G&&ot.process,ct=function(){try{var yt=Z&&Z.require&&Z.require("util").types;return yt||st&&st.binding&&st.binding("util")}catch(bt){}}();v.exports=ct}),mr=or&&or.isTypedArray,$r=mr?Ue(mr):dn,Pr=Object.prototype.hasOwnProperty,va=function(v,S){var G=Rt(v),Z=!G&&wt(v),st=!G&&!Z&&me(v),ct=!G&&!Z&&!st&&$r(v),yt=G||Z||st||ct,bt=yt?L(v.length,String):[],At=bt.length;for(var Wt in v)!S&&!Pr.call(v,Wt)||yt&&(Wt=="length"||st&&(Wt=="offset"||Wt=="parent")||ct&&(Wt=="buffer"||Wt=="byteLength"||Wt=="byteOffset")||yr(Wt,At))||bt.push(Wt);return bt},Sa=Object.prototype,Mn=function(v){var S=v&&v.constructor;return v===(typeof S=="function"&&S.prototype||Sa)},Un=function(v,S){return function(G){return v(S(G))}},Fa=Un(Object.keys,Object),Ea=Object.prototype.hasOwnProperty,Kr=function(v){if(!Mn(v))return Fa(v);var S=[];for(var G in Object(v))Ea.call(v,G)&&G!="constructor"&&S.push(G);return S},kn=function(v){return v!=null&&er(v.length)&&!be(v)},_e=function(v){return kn(v)?va(v):Kr(v)},Nt=function(v,S){return v&&nt(S,_e(S),v)},fe=function(v){var S=[];if(v!=null)for(var G in Object(v))S.push(G);return S},Te=Object.prototype.hasOwnProperty,Me=function(v){if(!ee(v))return fe(v);var S=Mn(v),G=[];for(var Z in v)(Z!="constructor"||!S&&Te.call(v,Z))&&G.push(Z);return G},Le=function(v){return kn(v)?va(v,!0):Me(v)},nr=function(v,S){return v&&nt(S,Le(S),v)},Dr=m(function(v,S){var G=S&&!S.nodeType&&S,Z=G&&v&&!v.nodeType&&v,st=Z&&Z.exports===G?gt.Buffer:void 0,ct=st?st.allocUnsafe:void 0;v.exports=function(yt,bt){if(bt)return yt.slice();var At=yt.length,Wt=ct?ct(At):new yt.constructor(At);return yt.copy(Wt),Wt}}),jr=function(v,S){var G=-1,Z=v.length;for(S||(S=Array(Z));++G<Z;)S[G]=v[G];return S},Sn=function(v,S){for(var G=-1,Z=v==null?0:v.length,st=0,ct=[];++G<Z;){var yt=v[G];S(yt,G,v)&&(ct[st++]=yt)}return ct},An=function(){return[]},Fn=Object.prototype.propertyIsEnumerable,da=Object.getOwnPropertySymbols,wa=da?function(v){return v==null?[]:(v=Object(v),Sn(da(v),function(S){return Fn.call(v,S)}))}:An,hi=function(v,S){return nt(v,wa(v),S)},Wn=function(v,S){for(var G=-1,Z=S.length,st=v.length;++G<Z;)v[st+G]=S[G];return v},fi=Un(Object.getPrototypeOf,Object),Oo=Object.getOwnPropertySymbols?function(v){for(var S=[];v;)Wn(S,wa(v)),v=fi(v);return S}:An,Da=function(v,S){return nt(v,Oo(v),S)},xi=function(v,S,G){var Z=S(v);return Rt(v)?Z:Wn(Z,G(v))},co=function(v){return xi(v,_e,wa)},Lo=function(v){return xi(v,Le,Oo)},Eo=Mr(gt,"DataView"),lo=Mr(gt,"Promise"),Zi=Mr(gt,"Set"),ms=Mr(gt,"WeakMap"),zi=ge(Eo),Ui=ge(Vt),xs=ge(lo),Cs=ge(Zi),Yo=ge(ms),Ao=Ft;(Eo&&Ao(new Eo(new ArrayBuffer(1)))!="[object DataView]"||Vt&&Ao(new Vt)!="[object Map]"||lo&&Ao(lo.resolve())!="[object Promise]"||Zi&&Ao(new Zi)!="[object Set]"||ms&&Ao(new ms)!="[object WeakMap]")&&(Ao=function(v){var S=Ft(v),G=S=="[object Object]"?v.constructor:void 0,Z=G?ge(G):"";if(Z)switch(Z){case zi:return"[object DataView]";case Ui:return"[object Map]";case xs:return"[object Promise]";case Cs:return"[object Set]";case Yo:return"[object WeakMap]"}return S});var Do=Ao,js=Object.prototype.hasOwnProperty,Pn=function(v){var S=v.length,G=new v.constructor(S);return S&&typeof v[0]=="string"&&js.call(v,"index")&&(G.index=v.index,G.input=v.input),G},Co=gt.Uint8Array,No=function(v){var S=new v.constructor(v.byteLength);return new Co(S).set(new Co(v)),S},Wi=function(v,S){var G=S?No(v.buffer):v.buffer;return new v.constructor(G,v.byteOffset,v.byteLength)},On=/\w*$/,Po=function(v){var S=new v.constructor(v.source,On.exec(v));return S.lastIndex=v.lastIndex,S},Ai=Pt?Pt.prototype:void 0,Vo=Ai?Ai.valueOf:void 0,jo=function(v){return Vo?Object(Vo.call(v)):{}},bs=function(v,S){var G=S?No(v.buffer):v.buffer;return new v.constructor(G,v.byteOffset,v.length)},ao=function(v,S,G){var Z=v.constructor;switch(S){case"[object ArrayBuffer]":return No(v);case"[object Boolean]":case"[object Date]":return new Z(+v);case"[object DataView]":return Wi(v,G);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return bs(v,G);case"[object Map]":return new Z;case"[object Number]":case"[object String]":return new Z(v);case"[object RegExp]":return Po(v);case"[object Set]":return new Z;case"[object Symbol]":return jo(v)}},io=Object.create,ni=function(){function v(){}return function(S){if(!ee(S))return{};if(io)return io(S);v.prototype=S;var G=new v;return v.prototype=void 0,G}}(),ho=function(v){return typeof v.constructor!="function"||Mn(v)?{}:ni(fi(v))},ko=function(v){return b(v)&&Do(v)=="[object Map]"},Ho=or&&or.isMap,Ro=Ho?Ue(Ho):ko,fs=function(v){return b(v)&&Do(v)=="[object Set]"},Ko=or&&or.isSet,is=Ko?Ue(Ko):fs,Wa={};Wa["[object Arguments]"]=Wa["[object Array]"]=Wa["[object ArrayBuffer]"]=Wa["[object DataView]"]=Wa["[object Boolean]"]=Wa["[object Date]"]=Wa["[object Float32Array]"]=Wa["[object Float64Array]"]=Wa["[object Int8Array]"]=Wa["[object Int16Array]"]=Wa["[object Int32Array]"]=Wa["[object Map]"]=Wa["[object Number]"]=Wa["[object Object]"]=Wa["[object RegExp]"]=Wa["[object Set]"]=Wa["[object String]"]=Wa["[object Symbol]"]=Wa["[object Uint8Array]"]=Wa["[object Uint8ClampedArray]"]=Wa["[object Uint16Array]"]=Wa["[object Uint32Array]"]=!0,Wa["[object Error]"]=Wa["[object Function]"]=Wa["[object WeakMap]"]=!1;var Ts=function v(S,G,Z,st,ct,yt){var bt,At=1&G,Wt=2&G,ne=4&G;if(Z&&(bt=ct?Z(S,st,ct,yt):Z(S)),bt!==void 0)return bt;if(!ee(S))return S;var Qt=Rt(S);if(Qt){if(bt=Pn(S),!At)return jr(S,bt)}else{var we=Do(S),ze=we=="[object Function]"||we=="[object GeneratorFunction]";if(me(S))return Dr(S,At);if(we=="[object Object]"||we=="[object Arguments]"||ze&&!ct){if(bt=Wt||ze?{}:ho(S),!At)return Wt?Da(S,nr(bt,S)):hi(S,Nt(bt,S))}else{if(!Wa[we])return ct?S:{};bt=ao(S,we,At)}}yt||(yt=new na);var xr=yt.get(S);if(xr)return xr;yt.set(S,bt),is(S)?S.forEach(function(Qe){bt.add(v(Qe,G,Z,Qe,S,yt))}):Ro(S)&&S.forEach(function(Qe,qe){bt.set(qe,v(Qe,G,Z,qe,S,yt))});var je=Qt?void 0:(ne?Wt?Lo:co:Wt?Le:_e)(S);return Qn(je||S,function(Qe,qe){je&&(Qe=S[qe=Qe]),ft(bt,qe,v(Qe,G,Z,qe,S,yt))}),bt},eu=function(v){return Ts(v,4)},Xi=function(v){return function(){return v}},cs=function(v){return function(S,G,Z){for(var st=-1,ct=Object(S),yt=Z(S),bt=yt.length;bt--;){var At=yt[v?bt:++st];if(G(ct[At],At,ct)===!1)break}return S}}(),wo=function(v,S){return v&&cs(v,S,_e)},Yi=function(v,S){return function(G,Z){if(G==null)return G;if(!kn(G))return v(G,Z);for(var st=G.length,ct=S?st:-1,yt=Object(G);(S?ct--:++ct<st)&&Z(yt[ct],ct,yt)!==!1;);return G}}(wo),vo=function(v){return v},ca=function(v){return typeof v=="function"?v:vo},Va=function(v,S){return(Rt(v)?Qn:Yi)(v,ca(S))},mi=Va,oo=function(v,S){var G=[];return Yi(v,function(Z,st,ct){S(Z,st,ct)&&G.push(Z)}),G},ki=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},$i=function(v){return this.__data__.has(v)};function Zo(v){var S=-1,G=v==null?0:v.length;for(this.__data__=new ma;++S<G;)this.add(v[S])}Zo.prototype.add=Zo.prototype.push=ki,Zo.prototype.has=$i;var So=Zo,os=function(v,S){for(var G=-1,Z=v==null?0:v.length;++G<Z;)if(S(v[G],G,v))return!0;return!1},go=function(v,S){return v.has(S)},Rs=function(v,S,G,Z,st,ct){var yt=1&G,bt=v.length,At=S.length;if(bt!=At&&!(yt&&At>bt))return!1;var Wt=ct.get(v),ne=ct.get(S);if(Wt&&ne)return Wt==S&&ne==v;var Qt=-1,we=!0,ze=2&G?new So:void 0;for(ct.set(v,S),ct.set(S,v);++Qt<bt;){var xr=v[Qt],je=S[Qt];if(Z)var Qe=yt?Z(je,xr,Qt,S,v,ct):Z(xr,je,Qt,v,S,ct);if(Qe!==void 0){if(Qe)continue;we=!1;break}if(ze){if(!os(S,function(qe,Fr){if(!go(ze,Fr)&&(xr===qe||st(xr,qe,G,Z,ct)))return ze.push(Fr)})){we=!1;break}}else if(xr!==je&&!st(xr,je,G,Z,ct)){we=!1;break}}return ct.delete(v),ct.delete(S),we},ru=function(v){var S=-1,G=Array(v.size);return v.forEach(function(Z,st){G[++S]=[st,Z]}),G},Is=function(v){var S=-1,G=Array(v.size);return v.forEach(function(Z){G[++S]=Z}),G},ci=Pt?Pt.prototype:void 0,Bo=ci?ci.valueOf:void 0,Fu=function(v,S,G,Z,st,ct,yt){switch(G){case"[object DataView]":if(v.byteLength!=S.byteLength||v.byteOffset!=S.byteOffset)return!1;v=v.buffer,S=S.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=S.byteLength||!ct(new Co(v),new Co(S)));case"[object Boolean]":case"[object Date]":case"[object Number]":return A(+v,+S);case"[object Error]":return v.name==S.name&&v.message==S.message;case"[object RegExp]":case"[object String]":return v==S+"";case"[object Map]":var bt=ru;case"[object Set]":var At=1&Z;if(bt||(bt=Is),v.size!=S.size&&!At)return!1;var Wt=yt.get(v);if(Wt)return Wt==S;Z|=2,yt.set(v,S);var ne=Rs(bt(v),bt(S),Z,st,ct,yt);return yt.delete(v),ne;case"[object Symbol]":if(Bo)return Bo.call(v)==Bo.call(S)}return!1},po=Object.prototype.hasOwnProperty,Bs=function(v,S,G,Z,st,ct){var yt=1&G,bt=co(v),At=bt.length;if(At!=co(S).length&&!yt)return!1;for(var Wt=At;Wt--;){var ne=bt[Wt];if(!(yt?ne in S:po.call(S,ne)))return!1}var Qt=ct.get(v),we=ct.get(S);if(Qt&&we)return Qt==S&&we==v;var ze=!0;ct.set(v,S),ct.set(S,v);for(var xr=yt;++Wt<At;){var je=v[ne=bt[Wt]],Qe=S[ne];if(Z)var qe=yt?Z(Qe,je,ne,S,v,ct):Z(je,Qe,ne,v,S,ct);if(!(qe===void 0?je===Qe||st(je,Qe,G,Z,ct):qe)){ze=!1;break}xr||(xr=ne=="constructor")}if(ze&&!xr){var Fr=v.constructor,en=S.constructor;Fr==en||!("constructor"in v)||!("constructor"in S)||typeof Fr=="function"&&Fr instanceof Fr&&typeof en=="function"&&en instanceof en||(ze=!1)}return ct.delete(v),ct.delete(S),ze},Os=Object.prototype.hasOwnProperty,$o=function(v,S,G,Z,st,ct){var yt=Rt(v),bt=Rt(S),At=yt?"[object Array]":Do(v),Wt=bt?"[object Array]":Do(S),ne=(At=At=="[object Arguments]"?"[object Object]":At)=="[object Object]",Qt=(Wt=Wt=="[object Arguments]"?"[object Object]":Wt)=="[object Object]",we=At==Wt;if(we&&me(v)){if(!me(S))return!1;yt=!0,ne=!1}if(we&&!ne)return ct||(ct=new na),yt||$r(v)?Rs(v,S,G,Z,st,ct):Fu(v,S,At,G,Z,st,ct);if(!(1&G)){var ze=ne&&Os.call(v,"__wrapped__"),xr=Qt&&Os.call(S,"__wrapped__");if(ze||xr){var je=ze?v.value():v,Qe=xr?S.value():S;return ct||(ct=new na),st(je,Qe,G,Z,ct)}}return!!we&&(ct||(ct=new na),Bs(v,S,G,Z,st,ct))},Fs=function v(S,G,Z,st,ct){return S===G||(S==null||G==null||!b(S)&&!b(G)?S!=S&&G!=G:$o(S,G,Z,st,v,ct))},ls=function(v,S,G,Z){var st=G.length,ct=st,yt=!Z;if(v==null)return!ct;for(v=Object(v);st--;){var bt=G[st];if(yt&&bt[2]?bt[1]!==v[bt[0]]:!(bt[0]in v))return!1}for(;++st<ct;){var At=(bt=G[st])[0],Wt=v[At],ne=bt[1];if(yt&&bt[2]){if(Wt===void 0&&!(At in v))return!1}else{var Qt=new na;if(Z)var we=Z(Wt,ne,At,v,S,Qt);if(!(we===void 0?Fs(ne,Wt,3,Z,Qt):we))return!1}}return!0},qo=function(v){return v==v&&!ee(v)},hs=function(v){for(var S=_e(v),G=S.length;G--;){var Z=S[G],st=v[Z];S[G]=[Z,st,qo(st)]}return S},nu=function(v,S){return function(G){return G!=null&&G[v]===S&&(S!==void 0||v in Object(G))}},Gs=function(v){var S=hs(v);return S.length==1&&S[0][2]?nu(S[0][0],S[0][1]):function(G){return G===v||ls(G,v,S)}},vs=function(v){return typeof v=="symbol"||b(v)&&Ft(v)=="[object Symbol]"},Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qt=/^\w*$/,Fe=function(v,S){if(Rt(v))return!1;var G=typeof v;return!(G!="number"&&G!="symbol"&&G!="boolean"&&v!=null&&!vs(v))||qt.test(v)||!Tt.test(v)||S!=null&&v in Object(S)};function Ze(v,S){if(typeof v!="function"||S!=null&&typeof S!="function")throw new TypeError("Expected a function");var G=function(){var Z=arguments,st=S?S.apply(this,Z):Z[0],ct=G.cache;if(ct.has(st))return ct.get(st);var yt=v.apply(this,Z);return G.cache=ct.set(st,yt)||ct,yt};return G.cache=new(Ze.Cache||ma),G}Ze.Cache=ma;var Sr=Ze,Jr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nn=/\\(\\)?/g,$n=function(v){var S=Sr(v,function(Z){return G.size===500&&G.clear(),Z}),G=S.cache;return S}(function(v){var S=[];return v.charCodeAt(0)===46&&S.push(""),v.replace(Jr,function(G,Z,st,ct){S.push(st?ct.replace(nn,"$1"):Z||G)}),S}),ai=function(v,S){for(var G=-1,Z=v==null?0:v.length,st=Array(Z);++G<Z;)st[G]=S(v[G],G,v);return st},qi=Pt?Pt.prototype:void 0,so=qi?qi.toString:void 0,zs=function v(S){if(typeof S=="string")return S;if(Rt(S))return ai(S,v)+"";if(vs(S))return so?so.call(S):"";var G=S+"";return G=="0"&&1/S==-1/0?"-0":G},xu=function(v){return v==null?"":zs(v)},Ri=function(v,S){return Rt(v)?v:Fe(v,S)?[v]:$n(xu(v))},yo=function(v){if(typeof v=="string"||vs(v))return v;var S=v+"";return S=="0"&&1/v==-1/0?"-0":S},Hs=function(v,S){for(var G=0,Z=(S=Ri(S,v)).length;v!=null&&G<Z;)v=v[yo(S[G++])];return G&&G==Z?v:void 0},Gu=function(v,S,G){var Z=v==null?void 0:Hs(v,S);return Z===void 0?G:Z},bu=function(v,S){return v!=null&&S in Object(v)},au=function(v,S,G){for(var Z=-1,st=(S=Ri(S,v)).length,ct=!1;++Z<st;){var yt=yo(S[Z]);if(!(ct=v!=null&&G(v,yt)))break;v=v[yt]}return ct||++Z!=st?ct:!!(st=v==null?0:v.length)&&er(st)&&yr(yt,st)&&(Rt(v)||wt(v))},Ks=function(v,S){return v!=null&&au(v,S,bu)},iu=function(v,S){return Fe(v)&&qo(S)?nu(yo(v),S):function(G){var Z=Gu(G,v);return Z===void 0&&Z===S?Ks(G,v):Fs(S,Z,3)}},Ls=function(v){return function(S){return S==null?void 0:S[v]}},Zs=function(v){return function(S){return Hs(S,v)}},ds=function(v){return Fe(v)?Ls(yo(v)):Zs(v)},To=function(v){return typeof v=="function"?v:v==null?vo:typeof v=="object"?Rt(v)?iu(v[0],v[1]):Gs(v):ds(v)},sf=function(v,S){return(Rt(v)?Sn:oo)(v,To(S))},Df=Object.prototype.hasOwnProperty,Nf=function(v,S){return v!=null&&Df.call(v,S)},Ds=function(v,S){return v!=null&&au(v,S,Nf)},Pf=Object.prototype.hasOwnProperty,h=function(v){if(v==null)return!0;if(kn(v)&&(Rt(v)||typeof v=="string"||typeof v.splice=="function"||me(v)||$r(v)||wt(v)))return!v.length;var S=Do(v);if(S=="[object Map]"||S=="[object Set]")return!v.size;if(Mn(v))return!Kr(v).length;for(var G in v)if(Pf.call(v,G))return!1;return!0},T=function(v){return v===void 0},dt=function(v,S){var G=-1,Z=kn(v)?Array(v.length):[];return Yi(v,function(st,ct,yt){Z[++G]=S(st,ct,yt)}),Z},Et=function(v,S){return(Rt(v)?ai:dt)(v,To(S))},Dt=function(v,S,G,Z){var st=-1,ct=v==null?0:v.length;for(Z&&ct&&(G=v[++st]);++st<ct;)G=S(G,v[st],st,v);return G},Zt=function(v,S,G,Z,st){return st(v,function(ct,yt,bt){G=Z?(Z=!1,ct):S(G,ct,yt,bt)}),G},$t=function(v,S,G){var Z=Rt(v)?Dt:Zt,st=arguments.length<3;return Z(v,To(S),G,st,Yi)},ue=function(v){return typeof v=="string"||!Rt(v)&&b(v)&&Ft(v)=="[object String]"},ye=Ls("length"),Ie=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Xe=function(v){return Ie.test(v)},hr="[\\ud800-\\udfff]",pr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",lr="\\ud83c[\\udffb-\\udfff]",Xr="[^\\ud800-\\udfff]",Vr="(?:\\ud83c[\\udde6-\\uddff]){2}",_r="[\\ud800-\\udbff][\\udc00-\\udfff]",ln="(?:"+pr+"|"+lr+")?",ga="[\\ufe0e\\ufe0f]?"+ln+("(?:\\u200d(?:"+[Xr,Vr,_r].join("|")+")[\\ufe0e\\ufe0f]?"+ln+")*"),pa="(?:"+[Xr+pr+"?",pr,Vr,_r,hr].join("|")+")",aa=RegExp(lr+"(?="+lr+")|"+pa+ga,"g"),Gn=function(v){for(var S=aa.lastIndex=0;aa.test(v);)++S;return S},Jn=function(v){return Xe(v)?Gn(v):ye(v)},Di=function(v){if(v==null)return 0;if(kn(v))return ue(v)?Jn(v):v.length;var S=Do(v);return S=="[object Map]"||S=="[object Set]"?v.size:Kr(v).length},Ci=function(v,S,G){var Z=Rt(v),st=Z||me(v)||$r(v);if(S=To(S),G==null){var ct=v&&v.constructor;G=st?Z?new ct:[]:ee(v)&&be(ct)?ni(fi(v)):{}}return(st?Qn:wo)(v,function(yt,bt,At){return S(G,yt,bt,At)}),G},_i=Pt?Pt.isConcatSpreadable:void 0,Ti=function(v){return Rt(v)||wt(v)||!!(_i&&v&&v[_i])},Ii=function v(S,G,Z,st,ct){var yt=-1,bt=S.length;for(Z||(Z=Ti),ct||(ct=[]);++yt<bt;){var At=S[yt];G>0&&Z(At)?G>1?v(At,G-1,Z,st,ct):Wn(ct,At):st||(ct[ct.length]=At)}return ct},Bi=function(v,S,G){switch(G.length){case 0:return v.call(S);case 1:return v.call(S,G[0]);case 2:return v.call(S,G[0],G[1]);case 3:return v.call(S,G[0],G[1],G[2])}return v.apply(S,G)},Qi=Math.max,Ga=function(v,S,G){return S=Qi(S===void 0?v.length-1:S,0),function(){for(var Z=arguments,st=-1,ct=Qi(Z.length-S,0),yt=Array(ct);++st<ct;)yt[st]=Z[S+st];st=-1;for(var bt=Array(S+1);++st<S;)bt[st]=Z[st];return bt[S]=G(yt),Bi(v,this,bt)}},ii=In?function(v,S){return In(v,"toString",{configurable:!0,enumerable:!1,value:Xi(S),writable:!0})}:vo,gs=Date.now,Es=function(v){var S=0,G=0;return function(){var Z=gs(),st=16-(Z-G);if(G=Z,st>0){if(++S>=800)return arguments[0]}else S=0;return v.apply(void 0,arguments)}}(ii),Fo=function(v,S){return Es(Ga(v,S,vo),v+"")},Eu=function(v,S,G,Z){for(var st=v.length,ct=G+(Z?1:-1);Z?ct--:++ct<st;)if(S(v[ct],ct,v))return ct;return-1},kf=function(v){return v!=v},wc=function(v,S,G){for(var Z=G-1,st=v.length;++Z<st;)if(v[Z]===S)return Z;return-1},Sc=function(v,S,G){return S==S?wc(v,S,G):Eu(v,kf,G)},_c=function(v,S){return!!(v!=null&&v.length)&&Sc(v,S,0)>-1},Rf=function(v,S,G){for(var Z=-1,st=v==null?0:v.length;++Z<st;)if(G(S,v[Z]))return!0;return!1},Bf=function(){},Mc=Zi&&1/Is(new Zi([,-0]))[1]==1/0?function(v){return new Zi(v)}:Bf,uf=function(v,S,G){var Z=-1,st=_c,ct=v.length,yt=!0,bt=[],At=bt;if(G)yt=!1,st=Rf;else if(ct>=200){var Wt=S?null:Mc(v);if(Wt)return Is(Wt);yt=!1,st=go,At=new So}else At=S?[]:bt;t:for(;++Z<ct;){var ne=v[Z],Qt=S?S(ne):ne;if(ne=G||ne!==0?ne:0,yt&&Qt==Qt){for(var we=At.length;we--;)if(At[we]===Qt)continue t;S&&At.push(Qt),bt.push(ne)}else st(At,Qt,G)||(At!==bt&&At.push(Qt),bt.push(ne))}return bt},ff=function(v){return b(v)&&kn(v)},Ac=Fo(function(v){return uf(Ii(v,1,ff,!0))}),cf=function(v,S){return ai(S,function(G){return v[G]})},ou,Cc=function(v){return v==null?[]:cf(v,_e(v))};try{ou={clone:eu,constant:Xi,each:mi,filter:sf,has:Ds,isArray:Rt,isEmpty:h,isFunction:be,isUndefined:T,keys:_e,map:Et,reduce:$t,size:Di,transform:Ci,union:Ac,values:Cc}}catch(v){}ou||(ou=window._);var cn=ou,wu=za;function za(v){this._isDirected=!cn.has(v,"directed")||v.directed,this._isMultigraph=!!cn.has(v,"multigraph")&&v.multigraph,this._isCompound=!!cn.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=cn.constant(void 0),this._defaultEdgeLabelFn=cn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function lf(v,S){v[S]?v[S]++:v[S]=1}function Ff(v,S){--v[S]||delete v[S]}function Us(v,S,G,Z){var st=""+S,ct=""+G;if(!v&&st>ct){var yt=st;st=ct,ct=yt}return st+""+ct+""+(cn.isUndefined(Z)?"\0":Z)}function Gf(v,S,G,Z){var st=""+S,ct=""+G;if(!v&&st>ct){var yt=st;st=ct,ct=yt}var bt={v:st,w:ct};return Z&&(bt.name=Z),bt}function su(v,S){return Us(v,S.v,S.w,S.name)}za.prototype._nodeCount=0,za.prototype._edgeCount=0,za.prototype.isDirected=function(){return this._isDirected},za.prototype.isMultigraph=function(){return this._isMultigraph},za.prototype.isCompound=function(){return this._isCompound},za.prototype.setGraph=function(v){return this._label=v,this},za.prototype.graph=function(){return this._label},za.prototype.setDefaultNodeLabel=function(v){return cn.isFunction(v)||(v=cn.constant(v)),this._defaultNodeLabelFn=v,this},za.prototype.nodeCount=function(){return this._nodeCount},za.prototype.nodes=function(){return cn.keys(this._nodes)},za.prototype.sources=function(){var v=this;return cn.filter(this.nodes(),function(S){return cn.isEmpty(v._in[S])})},za.prototype.sinks=function(){var v=this;return cn.filter(this.nodes(),function(S){return cn.isEmpty(v._out[S])})},za.prototype.setNodes=function(v,S){var G=arguments,Z=this;return cn.each(v,function(st){G.length>1?Z.setNode(st,S):Z.setNode(st)}),this},za.prototype.setNode=function(v,S){return cn.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=S),this):(this._nodes[v]=arguments.length>1?S:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},za.prototype.node=function(v){return this._nodes[v]},za.prototype.hasNode=function(v){return cn.has(this._nodes,v)},za.prototype.removeNode=function(v){var S=this;if(cn.has(this._nodes,v)){var G=function(Z){S.removeEdge(S._edgeObjs[Z])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],cn.each(this.children(v),function(Z){S.setParent(Z)}),delete this._children[v]),cn.each(cn.keys(this._in[v]),G),delete this._in[v],delete this._preds[v],cn.each(cn.keys(this._out[v]),G),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},za.prototype.setParent=function(v,S){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(cn.isUndefined(S))S="\0";else{for(var G=S+="";!cn.isUndefined(G);G=this.parent(G))if(G===v)throw new Error("Setting "+S+" as parent of "+v+" would create a cycle");this.setNode(S)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=S,this._children[S][v]=!0,this},za.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},za.prototype.parent=function(v){if(this._isCompound){var S=this._parent[v];if(S!=="\0")return S}},za.prototype.children=function(v){if(cn.isUndefined(v)&&(v="\0"),this._isCompound){var S=this._children[v];if(S)return cn.keys(S)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},za.prototype.predecessors=function(v){var S=this._preds[v];if(S)return cn.keys(S)},za.prototype.successors=function(v){var S=this._sucs[v];if(S)return cn.keys(S)},za.prototype.neighbors=function(v){var S=this.predecessors(v);if(S)return cn.union(S,this.successors(v))},za.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},za.prototype.filterNodes=function(v){var S=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});S.setGraph(this.graph());var G=this;cn.each(this._nodes,function(ct,yt){v(yt)&&S.setNode(yt,ct)}),cn.each(this._edgeObjs,function(ct){S.hasNode(ct.v)&&S.hasNode(ct.w)&&S.setEdge(ct,G.edge(ct))});var Z={};function st(ct){var yt=G.parent(ct);return yt===void 0||S.hasNode(yt)?(Z[ct]=yt,yt):yt in Z?Z[yt]:st(yt)}return this._isCompound&&cn.each(S.nodes(),function(ct){S.setParent(ct,st(ct))}),S},za.prototype.setDefaultEdgeLabel=function(v){return cn.isFunction(v)||(v=cn.constant(v)),this._defaultEdgeLabelFn=v,this},za.prototype.edgeCount=function(){return this._edgeCount},za.prototype.edges=function(){return cn.values(this._edgeObjs)},za.prototype.setPath=function(v,S){var G=this,Z=arguments;return cn.reduce(v,function(st,ct){return Z.length>1?G.setEdge(st,ct,S):G.setEdge(st,ct),ct}),this},za.prototype.setEdge=function(){var v,S,G,Z,st=!1,ct=arguments[0];typeof ct=="object"&&ct!==null&&"v"in ct?(v=ct.v,S=ct.w,G=ct.name,arguments.length===2&&(Z=arguments[1],st=!0)):(v=ct,S=arguments[1],G=arguments[3],arguments.length>2&&(Z=arguments[2],st=!0)),v=""+v,S=""+S,cn.isUndefined(G)||(G=""+G);var yt=Us(this._isDirected,v,S,G);if(cn.has(this._edgeLabels,yt))return st&&(this._edgeLabels[yt]=Z),this;if(!cn.isUndefined(G)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(S),this._edgeLabels[yt]=st?Z:this._defaultEdgeLabelFn(v,S,G);var bt=Gf(this._isDirected,v,S,G);return v=bt.v,S=bt.w,Object.freeze(bt),this._edgeObjs[yt]=bt,lf(this._preds[S],v),lf(this._sucs[v],S),this._in[S][yt]=bt,this._out[v][yt]=bt,this._edgeCount++,this},za.prototype.edge=function(v,S,G){var Z=arguments.length===1?su(this._isDirected,arguments[0]):Us(this._isDirected,v,S,G);return this._edgeLabels[Z]},za.prototype.hasEdge=function(v,S,G){var Z=arguments.length===1?su(this._isDirected,arguments[0]):Us(this._isDirected,v,S,G);return cn.has(this._edgeLabels,Z)},za.prototype.removeEdge=function(v,S,G){var Z=arguments.length===1?su(this._isDirected,arguments[0]):Us(this._isDirected,v,S,G),st=this._edgeObjs[Z];return st&&(v=st.v,S=st.w,delete this._edgeLabels[Z],delete this._edgeObjs[Z],Ff(this._preds[S],v),Ff(this._sucs[v],S),delete this._in[S][Z],delete this._out[v][Z],this._edgeCount--),this},za.prototype.inEdges=function(v,S){var G=this._in[v];if(G){var Z=cn.values(G);return S?cn.filter(Z,function(st){return st.v===S}):Z}},za.prototype.outEdges=function(v,S){var G=this._out[v];if(G){var Z=cn.values(G);return S?cn.filter(Z,function(st){return st.w===S}):Z}},za.prototype.nodeEdges=function(v,S){var G=this.inEdges(v,S);if(G)return G.concat(this.outEdges(v,S))};var zf={Graph:wu,version:"2.1.8"},Uf={write:function(v){var S={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:Wf(v),edges:ws(v)};return cn.isUndefined(v.graph())||(S.value=cn.clone(v.graph())),S},read:function(v){var S=new wu(v.options).setGraph(v.value);return cn.each(v.nodes,function(G){S.setNode(G.v,G.value),G.parent&&S.setParent(G.v,G.parent)}),cn.each(v.edges,function(G){S.setEdge({v:G.v,w:G.w,name:G.name},G.value)}),S}};function Wf(v){return cn.map(v.nodes(),function(S){var G=v.node(S),Z=v.parent(S),st={v:S};return cn.isUndefined(G)||(st.value=G),cn.isUndefined(Z)||(st.parent=Z),st})}function ws(v){return cn.map(v.edges(),function(S){var G=v.edge(S),Z={v:S.v,w:S.w};return cn.isUndefined(S.name)||(Z.name=S.name),cn.isUndefined(G)||(Z.value=G),Z})}var Xf=function(v){var S,G={},Z=[];function st(ct){cn.has(G,ct)||(G[ct]=!0,S.push(ct),cn.each(v.successors(ct),st),cn.each(v.predecessors(ct),st))}return cn.each(v.nodes(),function(ct){S=[],st(ct),S.length&&Z.push(S)}),Z},Yf=bi;function bi(){this._arr=[],this._keyIndices={}}bi.prototype.size=function(){return this._arr.length},bi.prototype.keys=function(){return this._arr.map(function(v){return v.key})},bi.prototype.has=function(v){return cn.has(this._keyIndices,v)},bi.prototype.priority=function(v){var S=this._keyIndices[v];if(S!==void 0)return this._arr[S].priority},bi.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},bi.prototype.add=function(v,S){var G=this._keyIndices;if(v=String(v),!cn.has(G,v)){var Z=this._arr,st=Z.length;return G[v]=st,Z.push({key:v,priority:S}),this._decrease(st),!0}return!1},bi.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},bi.prototype.decrease=function(v,S){var G=this._keyIndices[v];if(S>this._arr[G].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[G].priority+" New: "+S);this._arr[G].priority=S,this._decrease(G)},bi.prototype._heapify=function(v){var S=this._arr,G=2*v,Z=G+1,st=v;G<S.length&&(st=S[G].priority<S[st].priority?G:st,Z<S.length&&(st=S[Z].priority<S[st].priority?Z:st),st!==v&&(this._swap(v,st),this._heapify(st)))},bi.prototype._decrease=function(v){for(var S,G=this._arr,Z=G[v].priority;v!==0&&!(G[S=v>>1].priority<Z);)this._swap(v,S),v=S},bi.prototype._swap=function(v,S){var G=this._arr,Z=this._keyIndices,st=G[v],ct=G[S];G[v]=ct,G[S]=st,Z[ct.key]=v,Z[st.key]=S};var zu=function(v,S,G,Z){return function(st,ct,yt,bt){var At,Wt,ne={},Qt=new Yf,we=function(ze){var xr=ze.v!==At?ze.v:ze.w,je=ne[xr],Qe=yt(ze),qe=Wt.distance+Qe;if(Qe<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ze+" Weight: "+Qe);qe<je.distance&&(je.distance=qe,je.predecessor=At,Qt.decrease(xr,qe))};for(st.nodes().forEach(function(ze){var xr=ze===ct?0:Number.POSITIVE_INFINITY;ne[ze]={distance:xr},Qt.add(ze,xr)});Qt.size()>0&&(At=Qt.removeMin(),(Wt=ne[At]).distance!==Number.POSITIVE_INFINITY);)bt(At).forEach(we);return ne}(v,String(S),G||Ss,Z||function(st){return v.outEdges(st)})},Ss=cn.constant(1),et=function(v,S,G){return cn.transform(v.nodes(),function(Z,st){Z[st]=zu(v,st,S,G)},{})},pt=function(v){var S=0,G=[],Z={},st=[];function ct(yt){var bt=Z[yt]={onStack:!0,lowlink:S,index:S++};if(G.push(yt),v.successors(yt).forEach(function(ne){cn.has(Z,ne)?Z[ne].onStack&&(bt.lowlink=Math.min(bt.lowlink,Z[ne].index)):(ct(ne),bt.lowlink=Math.min(bt.lowlink,Z[ne].lowlink))}),bt.lowlink===bt.index){var At,Wt=[];do At=G.pop(),Z[At].onStack=!1,Wt.push(At);while(yt!==At);st.push(Wt)}}return v.nodes().forEach(function(yt){cn.has(Z,yt)||ct(yt)}),st},Mt=function(v){return cn.filter(pt(v),function(S){return S.length>1||S.length===1&&v.hasEdge(S[0],S[0])})},jt=function(v,S,G){return function(Z,st,ct){var yt={},bt=Z.nodes();return bt.forEach(function(At){yt[At]={},yt[At][At]={distance:0},bt.forEach(function(Wt){At!==Wt&&(yt[At][Wt]={distance:Number.POSITIVE_INFINITY})}),ct(At).forEach(function(Wt){var ne=Wt.v===At?Wt.w:Wt.v,Qt=st(Wt);yt[At][ne]={distance:Qt,predecessor:At}})}),bt.forEach(function(At){var Wt=yt[At];bt.forEach(function(ne){var Qt=yt[ne];bt.forEach(function(we){var ze=Qt[At],xr=Wt[we],je=Qt[we],Qe=ze.distance+xr.distance;Qe<je.distance&&(je.distance=Qe,je.predecessor=xr.predecessor)})})}),yt}(v,S||ie,G||function(Z){return v.outEdges(Z)})},ie=cn.constant(1),Re=Ge;function Ge(v){var S={},G={},Z=[];if(cn.each(v.sinks(),function st(ct){if(cn.has(G,ct))throw new ar;cn.has(S,ct)||(G[ct]=!0,S[ct]=!0,cn.each(v.predecessors(ct),st),delete G[ct],Z.push(ct))}),cn.size(S)!==v.nodeCount())throw new ar;return Z}function ar(){}Ge.CycleException=ar,ar.prototype=new Error;var Lr=function(v,S,G){cn.isArray(S)||(S=[S]);var Z=(v.isDirected()?v.successors:v.neighbors).bind(v),st=[],ct={};return cn.each(S,function(yt){if(!v.hasNode(yt))throw new Error("Graph does not have node: "+yt);Gr(v,yt,G==="post",ct,Z,st)}),st};function Gr(v,S,G,Z,st,ct){cn.has(Z,S)||(Z[S]=!0,G||ct.push(S),cn.each(st(S),function(yt){Gr(v,yt,G,Z,st,ct)}),G&&ct.push(S))}var an,mn={Graph:zf.Graph,json:Uf,alg:{components:Xf,dijkstra:zu,dijkstraAll:et,findCycles:Mt,floydWarshall:jt,isAcyclic:function(v){try{Re(v)}catch(S){if(S instanceof Re.CycleException)return!1;throw S}return!0},postorder:function(v,S){return Lr(v,S,"post")},preorder:function(v,S){return Lr(v,S,"pre")},prim:function(v,S){var G,Z=new wu,st={},ct=new Yf;function yt(At){var Wt=At.v===G?At.w:At.v,ne=ct.priority(Wt);if(ne!==void 0){var Qt=S(At);Qt<ne&&(st[Wt]=G,ct.decrease(Wt,Qt))}}if(v.nodeCount()===0)return Z;cn.each(v.nodes(),function(At){ct.add(At,Number.POSITIVE_INFINITY),Z.setNode(At)}),ct.decrease(v.nodes()[0],0);for(var bt=!1;ct.size()>0;){if(G=ct.removeMin(),cn.has(st,G))Z.setEdge(G,st[G]);else{if(bt)throw new Error("Input graph is not connected: "+v);bt=!0}v.nodeEdges(G).forEach(yt)}return Z},tarjan:pt,topsort:Re},version:zf.version};try{an=mn}catch(v){}an||(an=window.graphlib);var tn=an,ra=function(v){return Ts(v,5)},oa=function(v,S,G){if(!ee(G))return!1;var Z=typeof S;return!!(Z=="number"?kn(G)&&yr(S,G.length):Z=="string"&&S in G)&&A(G[S],v)},la=Object.prototype,Hn=la.hasOwnProperty,Na=Fo(function(v,S){v=Object(v);var G=-1,Z=S.length,st=Z>2?S[2]:void 0;for(st&&oa(S[0],S[1],st)&&(Z=1);++G<Z;)for(var ct=S[G],yt=Le(ct),bt=-1,At=yt.length;++bt<At;){var Wt=yt[bt],ne=v[Wt];(ne===void 0||A(ne,la[Wt])&&!Hn.call(v,Wt))&&(v[Wt]=ct[Wt])}return v}),Cn=function(v){return function(S,G,Z){var st=Object(S);if(!kn(S)){var ct=To(G);S=_e(S),G=function(bt){return ct(st[bt],bt,st)}}var yt=v(S,G,Z);return yt>-1?st[ct?S[yt]:yt]:void 0}},_a=/^\s+|\s+$/g,sa=/^[-+]0x[0-9a-f]+$/i,Dn=/^0b[01]+$/i,Ma=/^0o[0-7]+$/i,$a=parseInt,Qa=function(v){if(typeof v=="number")return v;if(vs(v))return NaN;if(ee(v)){var S=typeof v.valueOf=="function"?v.valueOf():v;v=ee(S)?S+"":S}if(typeof v!="string")return v===0?v:+v;v=v.replace(_a,"");var G=Dn.test(v);return G||Ma.test(v)?$a(v.slice(2),G?2:8):sa.test(v)?NaN:+v},ka=function(v){return v?(v=Qa(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},Ra=function(v){var S=ka(v),G=S%1;return S==S?G?S-G:S:0},li=Math.max,Mi=Cn(function(v,S,G){var Z=v==null?0:v.length;if(!Z)return-1;var st=G==null?0:Ra(G);return st<0&&(st=li(Z+st,0)),Eu(v,To(S),st)}),oi=function(v){return v!=null&&v.length?Ii(v,1):[]},Ns=function(v,S){return v==null?v:cs(v,ca(S),Le)},Vf=function(v){var S=v==null?0:v.length;return S?v[S-1]:void 0},$s=function(v,S){var G={};return S=To(S),wo(v,function(Z,st,ct){Ca(G,st,S(Z,st,ct))}),G},uu=function(v,S,G){for(var Z=-1,st=v.length;++Z<st;){var ct=v[Z],yt=S(ct);if(yt!=null&&(bt===void 0?yt==yt&&!vs(yt):G(yt,bt)))var bt=yt,At=ct}return At},Su=function(v,S){return v>S},hf=function(v){return v&&v.length?uu(v,vo,Su):void 0},_u=function(v,S,G){(G!==void 0&&!A(v[S],G)||G===void 0&&!(S in v))&&Ca(v,S,G)},Tc=Function.prototype,jf=Object.prototype,Hf=Tc.toString,Ic=jf.hasOwnProperty,Kf=Hf.call(Object),Qo=function(v){if(!b(v)||Ft(v)!="[object Object]")return!1;var S=fi(v);if(S===null)return!0;var G=Ic.call(S,"constructor")&&S.constructor;return typeof G=="function"&&G instanceof G&&Hf.call(G)==Kf},Uu=function(v,S){if((S!=="constructor"||typeof v[S]!="function")&&S!="__proto__")return v[S]},qs=function(v){return nt(v,Le(v))},Oc=function(v,S,G,Z,st,ct,yt){var bt=Uu(v,G),At=Uu(S,G),Wt=yt.get(At);if(Wt)_u(v,G,Wt);else{var ne=ct?ct(bt,At,G+"",v,S,yt):void 0,Qt=ne===void 0;if(Qt){var we=Rt(At),ze=!we&&me(At),xr=!we&&!ze&&$r(At);ne=At,we||ze||xr?Rt(bt)?ne=bt:ff(bt)?ne=jr(bt):ze?(Qt=!1,ne=Dr(At,!0)):xr?(Qt=!1,ne=bs(At,!0)):ne=[]:Qo(At)||wt(At)?(ne=bt,wt(bt)?ne=qs(bt):ee(bt)&&!be(bt)||(ne=ho(At))):Qt=!1}Qt&&(yt.set(At,ne),st(ne,At,Z,ct,yt),yt.delete(At)),_u(v,G,ne)}},Io=function v(S,G,Z,st,ct){S!==G&&cs(G,function(yt,bt){if(ct||(ct=new na),ee(yt))Oc(S,G,bt,Z,v,st,ct);else{var At=st?st(Uu(S,bt),yt,bt+"",S,G,ct):void 0;At===void 0&&(At=yt),_u(S,bt,At)}},Le)},uo=function(v){return Fo(function(S,G){var Z=-1,st=G.length,ct=st>1?G[st-1]:void 0,yt=st>2?G[2]:void 0;for(ct=v.length>3&&typeof ct=="function"?(st--,ct):void 0,yt&&oa(G[0],G[1],yt)&&(ct=st<3?void 0:ct,st=1),S=Object(S);++Z<st;){var bt=G[Z];bt&&v(S,bt,Z,ct)}return S})}(function(v,S,G){Io(v,S,G)}),al=function(v,S){return v<S},vf=function(v){return v&&v.length?uu(v,vo,al):void 0},il=function(v,S){return v&&v.length?uu(v,To(S),al):void 0},fu=function(){return gt.Date.now()},cu=function(v,S,G,Z){if(!ee(v))return v;for(var st=-1,ct=(S=Ri(S,v)).length,yt=ct-1,bt=v;bt!=null&&++st<ct;){var At=yo(S[st]),Wt=G;if(At==="__proto__"||At==="constructor"||At==="prototype")return v;if(st!=yt){var ne=bt[At];(Wt=Z?Z(ne,At,bt):void 0)===void 0&&(Wt=ee(ne)?ne:yr(S[st+1])?[]:{})}ft(bt,At,Wt),bt=bt[At]}return v},lu=function(v,S,G){for(var Z=-1,st=S.length,ct={};++Z<st;){var yt=S[Z],bt=Hs(v,yt);G(bt,yt)&&cu(ct,Ri(yt,v),bt)}return ct},Lc=function(v,S){return lu(v,S,function(G,Z){return Ks(v,Z)})},Dc=function(v){return Es(Ga(v,void 0,oi),v+"")}(function(v,S){return v==null?{}:Lc(v,S)}),ol=Math.ceil,ps=Math.max,sl=function(v,S,G,Z){for(var st=-1,ct=ps(ol((S-v)/(G||1)),0),yt=Array(ct);ct--;)yt[Z?ct:++st]=v,v+=G;return yt},Zf=function(v){return function(S,G,Z){return Z&&typeof Z!="number"&&oa(S,G,Z)&&(G=Z=void 0),S=ka(S),G===void 0?(G=S,S=0):G=ka(G),Z=Z===void 0?S<G?1:-1:ka(Z),sl(S,G,Z,v)}}(),Nc=function(v,S){var G=v.length;for(v.sort(S);G--;)v[G]=v[G].value;return v},ul=function(v,S){if(v!==S){var G=v!==void 0,Z=v===null,st=v==v,ct=vs(v),yt=S!==void 0,bt=S===null,At=S==S,Wt=vs(S);if(!bt&&!Wt&&!ct&&v>S||ct&&yt&&At&&!bt&&!Wt||Z&&yt&&At||!G&&At||!st)return 1;if(!Z&&!ct&&!Wt&&v<S||Wt&&G&&st&&!Z&&!ct||bt&&G&&st||!yt&&st||!At)return-1}return 0},Wl=function(v,S,G){for(var Z=-1,st=v.criteria,ct=S.criteria,yt=st.length,bt=G.length;++Z<yt;){var At=ul(st[Z],ct[Z]);if(At)return Z>=bt?At:At*(G[Z]=="desc"?-1:1)}return v.index-S.index},fl=function(v,S,G){S=S.length?ai(S,function(ct){return Rt(ct)?function(yt){return Hs(yt,ct.length===1?ct[0]:ct)}:ct}):[vo];var Z=-1;S=ai(S,Ue(To));var st=dt(v,function(ct,yt,bt){return{criteria:ai(S,function(At){return At(ct)}),index:++Z,value:ct}});return Nc(st,function(ct,yt){return Wl(ct,yt,G)})},$f=Fo(function(v,S){if(v==null)return[];var G=S.length;return G>1&&oa(v,S[0],S[1])?S=[]:G>2&&oa(S[0],S[1],S[2])&&(S=[S[0]]),fl(v,Ii(S,1),[])}),cl=0,Xl=function(v){var S=++cl;return xu(v)+S},gh=function(v,S,G){for(var Z=-1,st=v.length,ct=S.length,yt={};++Z<st;){var bt=Z<ct?S[Z]:void 0;G(yt,v[Z],bt)}return yt},qf,Pc=function(v,S){return gh(v||[],S||[],ft)};try{qf={cloneDeep:ra,constant:Xi,defaults:Na,each:mi,filter:sf,find:Mi,flatten:oi,forEach:Va,forIn:Ns,has:Ds,isUndefined:T,last:Vf,map:Et,mapValues:$s,max:hf,merge:uo,min:vf,minBy:il,now:fu,pick:Dc,range:Zf,reduce:$t,sortBy:$f,uniqueId:Xl,values:Cc,zipObject:Pc}}catch(v){}qf||(qf=window._);var Ne=qf,ll=Qf;function Qf(){var v={};v._next=v._prev=v,this._sentinel=v}function hl(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function vl(v,S){if(v!=="_next"&&v!=="_prev")return S}Qf.prototype.dequeue=function(){var v=this._sentinel,S=v._prev;if(S!==v)return hl(S),S},Qf.prototype.enqueue=function(v){var S=this._sentinel;v._prev&&v._next&&hl(v),v._next=S._next,S._next._prev=v,S._next=v,v._prev=S},Qf.prototype.toString=function(){for(var v=[],S=this._sentinel,G=S._prev;G!==S;)v.push(JSON.stringify(G,vl)),G=G._prev;return"["+v.join(", ")+"]"};var kc=tn.Graph,Yl=function(v,S){if(v.nodeCount()<=1)return[];var G=function(st,ct){var yt=new kc,bt=0,At=0;Ne.forEach(st.nodes(),function(Qt){yt.setNode(Qt,{v:Qt,in:0,out:0})}),Ne.forEach(st.edges(),function(Qt){var we=yt.edge(Qt.v,Qt.w)||0,ze=ct(Qt),xr=we+ze;yt.setEdge(Qt.v,Qt.w,xr),At=Math.max(At,yt.node(Qt.v).out+=ze),bt=Math.max(bt,yt.node(Qt.w).in+=ze)});var Wt=Ne.range(At+bt+3).map(function(){return new ll}),ne=bt+1;return Ne.forEach(yt.nodes(),function(Qt){df(Wt,ne,yt.node(Qt))}),{graph:yt,buckets:Wt,zeroIdx:ne}}(v,S||dl),Z=function(st,ct,yt){for(var bt,At=[],Wt=ct[ct.length-1],ne=ct[0];st.nodeCount();){for(;bt=ne.dequeue();)Jf(st,ct,yt,bt);for(;bt=Wt.dequeue();)Jf(st,ct,yt,bt);if(st.nodeCount()){for(var Qt=ct.length-2;Qt>0;--Qt)if(bt=ct[Qt].dequeue()){At=At.concat(Jf(st,ct,yt,bt,!0));break}}}return At}(G.graph,G.buckets,G.zeroIdx);return Ne.flatten(Ne.map(Z,function(st){return v.outEdges(st.v,st.w)}),!0)},dl=Ne.constant(1);function Jf(v,S,G,Z,st){var ct=st?[]:void 0;return Ne.forEach(v.inEdges(Z.v),function(yt){var bt=v.edge(yt),At=v.node(yt.v);st&&ct.push({v:yt.v,w:yt.w}),At.out-=bt,df(S,G,At)}),Ne.forEach(v.outEdges(Z.v),function(yt){var bt=v.edge(yt),At=yt.w,Wt=v.node(At);Wt.in-=bt,df(S,G,Wt)}),v.removeNode(Z.v),ct}function df(v,S,G){G.out?G.in?v[G.out-G.in+S].enqueue(G):v[v.length-1].enqueue(G):v[0].enqueue(G)}var gl={run:function(v){var S=v.graph().acyclicer==="greedy"?Yl(v,function(G){return function(Z){return G.edge(Z).weight}}(v)):function(G){var Z=[],st={},ct={};function yt(bt){Ne.has(ct,bt)||(ct[bt]=!0,st[bt]=!0,Ne.forEach(G.outEdges(bt),function(At){Ne.has(st,At.w)?Z.push(At):yt(At.w)}),delete st[bt])}return Ne.forEach(G.nodes(),yt),Z}(v);Ne.forEach(S,function(G){var Z=v.edge(G);v.removeEdge(G),Z.forwardName=G.name,Z.reversed=!0,v.setEdge(G.w,G.v,Z,Ne.uniqueId("rev"))})},undo:function(v){Ne.forEach(v.edges(),function(S){var G=v.edge(S);if(G.reversed){v.removeEdge(S);var Z=G.forwardName;delete G.reversed,delete G.forwardName,v.setEdge(S.w,S.v,G,Z)}})}},gf=tn.Graph,Ji={addDummyNode:pf,simplify:function(v){var S=new gf().setGraph(v.graph());return Ne.forEach(v.nodes(),function(G){S.setNode(G,v.node(G))}),Ne.forEach(v.edges(),function(G){var Z=S.edge(G.v,G.w)||{weight:0,minlen:1},st=v.edge(G);S.setEdge(G.v,G.w,{weight:Z.weight+st.weight,minlen:Math.max(Z.minlen,st.minlen)})}),S},asNonCompoundGraph:function(v){var S=new gf({multigraph:v.isMultigraph()}).setGraph(v.graph());return Ne.forEach(v.nodes(),function(G){v.children(G).length||S.setNode(G,v.node(G))}),Ne.forEach(v.edges(),function(G){S.setEdge(G,v.edge(G))}),S},successorWeights:function(v){var S=Ne.map(v.nodes(),function(G){var Z={};return Ne.forEach(v.outEdges(G),function(st){Z[st.w]=(Z[st.w]||0)+v.edge(st).weight}),Z});return Ne.zipObject(v.nodes(),S)},predecessorWeights:function(v){var S=Ne.map(v.nodes(),function(G){var Z={};return Ne.forEach(v.inEdges(G),function(st){Z[st.v]=(Z[st.v]||0)+v.edge(st).weight}),Z});return Ne.zipObject(v.nodes(),S)},intersectRect:function(v,S){var G,Z,st=v.x,ct=v.y,yt=S.x-st,bt=S.y-ct,At=v.width/2,Wt=v.height/2;if(!yt&&!bt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(bt)*At>Math.abs(yt)*Wt?(bt<0&&(Wt=-Wt),G=Wt*yt/bt,Z=Wt):(yt<0&&(At=-At),G=At,Z=At*bt/yt),{x:st+G,y:ct+Z}},buildLayerMatrix:function(v){var S=Ne.map(Ne.range(pl(v)+1),function(){return[]});return Ne.forEach(v.nodes(),function(G){var Z=v.node(G),st=Z.rank;Ne.isUndefined(st)||(S[st][Z.order]=G)}),S},normalizeRanks:function(v){var S=Ne.min(Ne.map(v.nodes(),function(G){return v.node(G).rank}));Ne.forEach(v.nodes(),function(G){var Z=v.node(G);Ne.has(Z,"rank")&&(Z.rank-=S)})},removeEmptyRanks:function(v){var S=Ne.min(Ne.map(v.nodes(),function(ct){return v.node(ct).rank})),G=[];Ne.forEach(v.nodes(),function(ct){var yt=v.node(ct).rank-S;G[yt]||(G[yt]=[]),G[yt].push(ct)});var Z=0,st=v.graph().nodeRankFactor;Ne.forEach(G,function(ct,yt){Ne.isUndefined(ct)&&yt%st!=0?--Z:Z&&Ne.forEach(ct,function(bt){v.node(bt).rank+=Z})})},addBorderNode:function(v,S,G,Z){var st={width:0,height:0};return arguments.length>=4&&(st.rank=G,st.order=Z),pf(v,"border",st,S)},maxRank:pl,partition:function(v,S){var G={lhs:[],rhs:[]};return Ne.forEach(v,function(Z){S(Z)?G.lhs.push(Z):G.rhs.push(Z)}),G},time:function(v,S){var G=Ne.now();try{return S()}finally{console.log(v+" time: "+(Ne.now()-G)+"ms")}},notime:function(v,S){return S()}};function pf(v,S,G,Z){var st;do st=Ne.uniqueId(Z);while(v.hasNode(st));return G.dummy=S,v.setNode(st,G),st}function pl(v){return Ne.max(Ne.map(v.nodes(),function(S){var G=v.node(S).rank;if(!Ne.isUndefined(G))return G}))}var tc={run:function(v){v.graph().dummyChains=[],Ne.forEach(v.edges(),function(S){(function(G,Z){var st,ct,yt,bt=Z.v,At=G.node(bt).rank,Wt=Z.w,ne=G.node(Wt).rank,Qt=Z.name,we=G.edge(Z),ze=we.labelRank;if(ne!==At+1){for(G.removeEdge(Z),yt=0,++At;At<ne;++yt,++At)we.points=[],ct={width:0,height:0,edgeLabel:we,edgeObj:Z,rank:At},st=Ji.addDummyNode(G,"edge",ct,"_d"),At===ze&&(ct.width=we.width,ct.height=we.height,ct.dummy="edge-label",ct.labelpos=we.labelpos),G.setEdge(bt,st,{weight:we.weight},Qt),yt===0&&G.graph().dummyChains.push(st),bt=st;G.setEdge(bt,Wt,{weight:we.weight},Qt)}})(v,S)})},undo:function(v){Ne.forEach(v.graph().dummyChains,function(S){var G,Z=v.node(S),st=Z.edgeLabel;for(v.setEdge(Z.edgeObj,st);Z.dummy;)G=v.successors(S)[0],v.removeNode(S),st.points.push({x:Z.x,y:Z.y}),Z.dummy==="edge-label"&&(st.x=Z.x,st.y=Z.y,st.width=Z.width,st.height=Z.height),S=G,Z=v.node(S)})}},_s=function(v){var S={};Ne.forEach(v.sources(),function G(Z){var st=v.node(Z);if(Ne.has(S,Z))return st.rank;S[Z]=!0;var ct=Ne.min(Ne.map(v.outEdges(Z),function(yt){return G(yt.w)-v.edge(yt).minlen}));return ct!==Number.POSITIVE_INFINITY&&ct!=null||(ct=0),st.rank=ct})},yf=function(v,S){return v.node(S.w).rank-v.node(S.v).rank-v.edge(S).minlen},Wu=tn.Graph,Mu=yf,Xu=function(v){var S,G,Z=new Wu({directed:!1}),st=v.nodes()[0],ct=v.nodeCount();for(Z.setNode(st,{});Yu(Z,v)<ct;)S=Vu(Z,v),G=Z.hasNode(S.v)?Mu(v,S):-Mu(v,S),Au(Z,v,G);return Z};function Yu(v,S){return Ne.forEach(v.nodes(),function G(Z){Ne.forEach(S.nodeEdges(Z),function(st){var ct=st.v,yt=Z===ct?st.w:ct;v.hasNode(yt)||Mu(S,st)||(v.setNode(yt,{}),v.setEdge(Z,yt,{}),G(yt))})}),v.nodeCount()}function Vu(v,S){return Ne.minBy(S.edges(),function(G){if(v.hasNode(G.v)!==v.hasNode(G.w))return Mu(S,G)})}function Au(v,S,G){Ne.forEach(v.nodes(),function(Z){S.node(Z).rank+=G})}var mf=yf,Rc=_s,ec=tn.alg.preorder,Bc=tn.alg.postorder,Fc=Ji.simplify,ju=Ps;function Ps(v){v=Fc(v),Rc(v);var S,G=Xu(v);for(Ws(G),yl(G,v);S=bl(G);)Hu(G,v,S,El(G,v,S))}function yl(v,S){var G=Bc(v,v.nodes());G=G.slice(0,G.length-1),Ne.forEach(G,function(Z){(function(st,ct,yt){var bt=st.node(yt).parent;st.edge(yt,bt).cutvalue=ml(st,ct,yt)})(v,S,Z)})}function ml(v,S,G){var Z=v.node(G).parent,st=!0,ct=S.edge(G,Z),yt=0;return ct||(st=!1,ct=S.edge(Z,G)),yt=ct.weight,Ne.forEach(S.nodeEdges(G),function(bt){var At,Wt,ne=bt.v===G,Qt=ne?bt.w:bt.v;if(Qt!==Z){var we=ne===st,ze=S.edge(bt).weight;if(yt+=we?ze:-ze,At=G,Wt=Qt,v.hasEdge(At,Wt)){var xr=v.edge(G,Qt).cutvalue;yt+=we?-xr:xr}}}),yt}function Ws(v,S){arguments.length<2&&(S=v.nodes()[0]),xl(v,{},1,S)}function xl(v,S,G,Z,st){var ct=G,yt=v.node(Z);return S[Z]=!0,Ne.forEach(v.neighbors(Z),function(bt){Ne.has(S,bt)||(G=xl(v,S,G,bt,Z))}),yt.low=ct,yt.lim=G++,st?yt.parent=st:delete yt.parent,G}function bl(v){return Ne.find(v.edges(),function(S){return v.edge(S).cutvalue<0})}function El(v,S,G){var Z=G.v,st=G.w;S.hasEdge(Z,st)||(Z=G.w,st=G.v);var ct=v.node(Z),yt=v.node(st),bt=ct,At=!1;ct.lim>yt.lim&&(bt=yt,At=!0);var Wt=Ne.filter(S.edges(),function(ne){return At===Vl(v,v.node(ne.v),bt)&&At!==Vl(v,v.node(ne.w),bt)});return Ne.minBy(Wt,function(ne){return mf(S,ne)})}function Hu(v,S,G,Z){var st=G.v,ct=G.w;v.removeEdge(st,ct),v.setEdge(Z.v,Z.w,{}),Ws(v),yl(v,S),function(yt,bt){var At=Ne.find(yt.nodes(),function(ne){return!bt.node(ne).parent}),Wt=ec(yt,At);Wt=Wt.slice(1),Ne.forEach(Wt,function(ne){var Qt=yt.node(ne).parent,we=bt.edge(ne,Qt),ze=!1;we||(we=bt.edge(Qt,ne),ze=!0),bt.node(ne).rank=bt.node(Qt).rank+(ze?we.minlen:-we.minlen)})}(v,S)}function Vl(v,S,G){return G.low<=S.lim&&S.lim<=G.lim}Ps.initLowLimValues=Ws,Ps.initCutValues=yl,Ps.calcCutValue=ml,Ps.leaveEdge=bl,Ps.enterEdge=El,Ps.exchangeEdges=Hu;var wl=_s,Sl=function(v){switch(v.graph().ranker){case"network-simplex":Hl(v);break;case"tight-tree":(function(S){wl(S),Xu(S)})(v);break;case"longest-path":jl(v);break;default:Hl(v)}},jl=wl;function Hl(v){ju(v)}var ph=function(v){var S=function(G){var Z={},st=0;function ct(yt){var bt=st;Ne.forEach(G.children(yt),ct),Z[yt]={low:bt,lim:st++}}return Ne.forEach(G.children(),ct),Z}(v);Ne.forEach(v.graph().dummyChains,function(G){for(var Z=v.node(G),st=Z.edgeObj,ct=function(Qt,we,ze,xr){var je,Qe,qe=[],Fr=[],en=Math.min(we[ze].low,we[xr].low),Hr=Math.max(we[ze].lim,we[xr].lim);je=ze;do je=Qt.parent(je),qe.push(je);while(je&&(we[je].low>en||Hr>we[je].lim));for(Qe=je,je=xr;(je=Qt.parent(je))!==Qe;)Fr.push(je);return{path:qe.concat(Fr.reverse()),lca:Qe}}(v,S,st.v,st.w),yt=ct.path,bt=ct.lca,At=0,Wt=yt[At],ne=!0;G!==st.w;){if(Z=v.node(G),ne){for(;(Wt=yt[At])!==bt&&v.node(Wt).maxRank<Z.rank;)At++;Wt===bt&&(ne=!1)}if(!ne){for(;At<yt.length-1&&v.node(Wt=yt[At+1]).minRank<=Z.rank;)At++;Wt=yt[At]}v.setParent(G,Wt),G=v.successors(G)[0]}})},Kl={run:function(v){var S=Ji.addDummyNode(v,"root",{},"_root"),G=function(yt){var bt={};function At(Wt,ne){var Qt=yt.children(Wt);Qt&&Qt.length&&Ne.forEach(Qt,function(we){At(we,ne+1)}),bt[Wt]=ne}return Ne.forEach(yt.children(),function(Wt){At(Wt,1)}),bt}(v),Z=Ne.max(Ne.values(G))-1,st=2*Z+1;v.graph().nestingRoot=S,Ne.forEach(v.edges(),function(yt){v.edge(yt).minlen*=st});var ct=function(yt){return Ne.reduce(yt.edges(),function(bt,At){return bt+yt.edge(At).weight},0)}(v)+1;Ne.forEach(v.children(),function(yt){Zl(v,S,st,ct,Z,G,yt)}),v.graph().nodeRankFactor=st},cleanup:function(v){var S=v.graph();v.removeNode(S.nestingRoot),delete S.nestingRoot,Ne.forEach(v.edges(),function(G){v.edge(G).nestingEdge&&v.removeEdge(G)})}};function Zl(v,S,G,Z,st,ct,yt){var bt=v.children(yt);if(bt.length){var At=Ji.addBorderNode(v,"_bt"),Wt=Ji.addBorderNode(v,"_bb"),ne=v.node(yt);v.setParent(At,yt),ne.borderTop=At,v.setParent(Wt,yt),ne.borderBottom=Wt,Ne.forEach(bt,function(Qt){Zl(v,S,G,Z,st,ct,Qt);var we=v.node(Qt),ze=we.borderTop?we.borderTop:Qt,xr=we.borderBottom?we.borderBottom:Qt,je=we.borderTop?Z:2*Z,Qe=ze!==xr?1:st-ct[yt]+1;v.setEdge(At,ze,{weight:je,minlen:Qe,nestingEdge:!0}),v.setEdge(xr,Wt,{weight:je,minlen:Qe,nestingEdge:!0})}),v.parent(yt)||v.setEdge(S,At,{weight:0,minlen:st+ct[yt]})}else yt!==S&&v.setEdge(S,yt,{weight:0,minlen:G})}var yh=function(v){Ne.forEach(v.children(),function S(G){var Z=v.children(G),st=v.node(G);if(Z.length&&Ne.forEach(Z,S),Ne.has(st,"minRank")){st.borderLeft=[],st.borderRight=[];for(var ct=st.minRank,yt=st.maxRank+1;ct<yt;++ct)$l(v,"borderLeft","_bl",G,st,ct),$l(v,"borderRight","_br",G,st,ct)}})};function $l(v,S,G,Z,st,ct){var yt={width:0,height:0,rank:ct,borderType:S},bt=st[S][ct-1],At=Ji.addDummyNode(v,"border",yt,G);st[S][ct]=At,v.setParent(At,Z),bt&&v.setEdge(bt,At,{weight:1})}var ql={adjust:function(v){var S=v.graph().rankdir.toLowerCase();S!=="lr"&&S!=="rl"||rc(v)},undo:function(v){var S=v.graph().rankdir.toLowerCase();S!=="bt"&&S!=="rl"||function(G){Ne.forEach(G.nodes(),function(Z){Ku(G.node(Z))}),Ne.forEach(G.edges(),function(Z){var st=G.edge(Z);Ne.forEach(st.points,Ku),Ne.has(st,"y")&&Ku(st)})}(v),S!=="lr"&&S!=="rl"||(function(G){Ne.forEach(G.nodes(),function(Z){nc(G.node(Z))}),Ne.forEach(G.edges(),function(Z){var st=G.edge(Z);Ne.forEach(st.points,nc),Ne.has(st,"x")&&nc(st)})}(v),rc(v))}};function rc(v){Ne.forEach(v.nodes(),function(S){Ql(v.node(S))}),Ne.forEach(v.edges(),function(S){Ql(v.edge(S))})}function Ql(v){var S=v.width;v.width=v.height,v.height=S}function Ku(v){v.y=-v.y}function nc(v){var S=v.x;v.x=v.y,v.y=S}var xf=function(v){var S={},G=Ne.filter(v.nodes(),function(bt){return!v.children(bt).length}),Z=Ne.max(Ne.map(G,function(bt){return v.node(bt).rank})),st=Ne.map(Ne.range(Z+1),function(){return[]});function ct(bt){if(!Ne.has(S,bt)){S[bt]=!0;var At=v.node(bt);st[At.rank].push(bt),Ne.forEach(v.successors(bt),ct)}}var yt=Ne.sortBy(G,function(bt){return v.node(bt).rank});return Ne.forEach(yt,ct),st},Gc=function(v,S){for(var G=0,Z=1;Z<S.length;++Z)G+=zc(v,S[Z-1],S[Z]);return G};function zc(v,S,G){for(var Z=Ne.zipObject(G,Ne.map(G,function(Wt,ne){return ne})),st=Ne.flatten(Ne.map(S,function(Wt){return Ne.sortBy(Ne.map(v.outEdges(Wt),function(ne){return{pos:Z[ne.w],weight:v.edge(ne).weight}}),"pos")}),!0),ct=1;ct<G.length;)ct<<=1;var yt=2*ct-1;ct-=1;var bt=Ne.map(new Array(yt),function(){return 0}),At=0;return Ne.forEach(st.forEach(function(Wt){var ne=Wt.pos+ct;bt[ne]+=Wt.weight;for(var Qt=0;ne>0;)ne%2&&(Qt+=bt[ne+1]),bt[ne=ne-1>>1]+=Wt.weight;At+=Wt.weight*Qt})),At}var Uc=function(v,S){return Ne.map(S,function(G){var Z=v.inEdges(G);if(Z.length){var st=Ne.reduce(Z,function(ct,yt){var bt=v.edge(yt),At=v.node(yt.v);return{sum:ct.sum+bt.weight*At.order,weight:ct.weight+bt.weight}},{sum:0,weight:0});return{v:G,barycenter:st.sum/st.weight,weight:st.weight}}return{v:G}})},hu=function(v,S){var G={};return Ne.forEach(v,function(Z,st){var ct=G[Z.v]={indegree:0,in:[],out:[],vs:[Z.v],i:st};Ne.isUndefined(Z.barycenter)||(ct.barycenter=Z.barycenter,ct.weight=Z.weight)}),Ne.forEach(S.edges(),function(Z){var st=G[Z.v],ct=G[Z.w];Ne.isUndefined(st)||Ne.isUndefined(ct)||(ct.indegree++,st.out.push(G[Z.w]))}),function(Z){var st=[];function ct(At){return function(Wt){Wt.merged||(Ne.isUndefined(Wt.barycenter)||Ne.isUndefined(At.barycenter)||Wt.barycenter>=At.barycenter)&&function(ne,Qt){var we=0,ze=0;ne.weight&&(we+=ne.barycenter*ne.weight,ze+=ne.weight),Qt.weight&&(we+=Qt.barycenter*Qt.weight,ze+=Qt.weight),ne.vs=Qt.vs.concat(ne.vs),ne.barycenter=we/ze,ne.weight=ze,ne.i=Math.min(Qt.i,ne.i),Qt.merged=!0}(At,Wt)}}function yt(At){return function(Wt){Wt.in.push(At),--Wt.indegree==0&&Z.push(Wt)}}for(;Z.length;){var bt=Z.pop();st.push(bt),Ne.forEach(bt.in.reverse(),ct(bt)),Ne.forEach(bt.out,yt(bt))}return Ne.map(Ne.filter(st,function(At){return!At.merged}),function(At){return Ne.pick(At,["vs","i","barycenter","weight"])})}(Ne.filter(G,function(Z){return!Z.indegree}))},bf=function(v,S){var G=Ji.partition(v,function(Qt){return Ne.has(Qt,"barycenter")}),Z=G.lhs,st=Ne.sortBy(G.rhs,function(Qt){return-Qt.i}),ct=[],yt=0,bt=0,At=0;Z.sort((Wt=!!S,function(Qt,we){return Qt.barycenter<we.barycenter?-1:Qt.barycenter>we.barycenter?1:Wt?we.i-Qt.i:Qt.i-we.i})),At=Zu(ct,st,At),Ne.forEach(Z,function(Qt){At+=Qt.vs.length,ct.push(Qt.vs),yt+=Qt.barycenter*Qt.weight,bt+=Qt.weight,At=Zu(ct,st,At)});var Wt,ne={vs:Ne.flatten(ct,!0)};return bt&&(ne.barycenter=yt/bt,ne.weight=bt),ne};function Zu(v,S,G){for(var Z;S.length&&(Z=Ne.last(S)).i<=G;)S.pop(),v.push(Z.vs),G++;return G}var _l=function v(S,G,Z,st){var ct=S.children(G),yt=S.node(G),bt=yt?yt.borderLeft:void 0,At=yt?yt.borderRight:void 0,Wt={};bt&&(ct=Ne.filter(ct,function(je){return je!==bt&&je!==At}));var ne=Uc(S,ct);Ne.forEach(ne,function(je){if(S.children(je.v).length){var Qe=v(S,je.v,Z,st);Wt[je.v]=Qe,Ne.has(Qe,"barycenter")&&(qe=je,Fr=Qe,Ne.isUndefined(qe.barycenter)?(qe.barycenter=Fr.barycenter,qe.weight=Fr.weight):(qe.barycenter=(qe.barycenter*qe.weight+Fr.barycenter*Fr.weight)/(qe.weight+Fr.weight),qe.weight+=Fr.weight))}var qe,Fr});var Qt=hu(ne,Z);(function(je,Qe){Ne.forEach(je,function(qe){qe.vs=Ne.flatten(qe.vs.map(function(Fr){return Qe[Fr]?Qe[Fr].vs:Fr}),!0)})})(Qt,Wt);var we=bf(Qt,st);if(bt&&(we.vs=Ne.flatten([bt,we.vs,At],!0),S.predecessors(bt).length)){var ze=S.node(S.predecessors(bt)[0]),xr=S.node(S.predecessors(At)[0]);Ne.has(we,"barycenter")||(we.barycenter=0,we.weight=0),we.barycenter=(we.barycenter*we.weight+ze.order+xr.order)/(we.weight+2),we.weight+=2}return we},ac=tn.Graph,Wc=function(v,S,G){var Z=function(ct){for(var yt;ct.hasNode(yt=Ne.uniqueId("_root")););return yt}(v),st=new ac({compound:!0}).setGraph({root:Z}).setDefaultNodeLabel(function(ct){return v.node(ct)});return Ne.forEach(v.nodes(),function(ct){var yt=v.node(ct),bt=v.parent(ct);(yt.rank===S||yt.minRank<=S&&S<=yt.maxRank)&&(st.setNode(ct),st.setParent(ct,bt||Z),Ne.forEach(v[G](ct),function(At){var Wt=At.v===ct?At.w:At.v,ne=st.edge(Wt,ct),Qt=Ne.isUndefined(ne)?0:ne.weight;st.setEdge(Wt,ct,{weight:v.edge(At).weight+Qt})}),Ne.has(yt,"minRank")&&st.setNode(ct,{borderLeft:yt.borderLeft[S],borderRight:yt.borderRight[S]}))}),st},ic=function(v,S,G){var Z,st={};Ne.forEach(G,function(ct){for(var yt,bt,At=v.parent(ct);At;){if((yt=v.parent(At))?(bt=st[yt],st[yt]=At):(bt=Z,Z=At),bt&&bt!==At)return void S.setEdge(bt,At);At=yt}})},oc=tn.Graph,Xc=function(v){var S=Ji.maxRank(v),G=Ef(v,Ne.range(1,S+1),"inEdges"),Z=Ef(v,Ne.range(S-1,-1,-1),"outEdges"),st=xf(v);$u(v,st);for(var ct,yt=Number.POSITIVE_INFINITY,bt=0,At=0;At<4;++bt,++At){sc(bt%2?G:Z,bt%4>=2),st=Ji.buildLayerMatrix(v);var Wt=Gc(v,st);Wt<yt&&(At=0,ct=Ne.cloneDeep(st),yt=Wt)}$u(v,ct)};function Ef(v,S,G){return Ne.map(S,function(Z){return Wc(v,Z,G)})}function sc(v,S){var G=new oc;Ne.forEach(v,function(Z){var st=Z.graph().root,ct=_l(Z,st,G,S);Ne.forEach(ct.vs,function(yt,bt){Z.node(yt).order=bt}),ic(Z,G,ct.vs)})}function $u(v,S){Ne.forEach(S,function(G){Ne.forEach(G,function(Z,st){v.node(Z).order=st})})}var Jl=tn.Graph,uc=function(v){var S,G=Ji.buildLayerMatrix(v),Z=Ne.merge(qu(v,G),th(v,G)),st={};Ne.forEach(["u","d"],function(yt){S=yt==="u"?G:Ne.values(G).reverse(),Ne.forEach(["l","r"],function(bt){bt==="r"&&(S=Ne.map(S,function(Qt){return Ne.values(Qt).reverse()}));var At=(yt==="u"?v.predecessors:v.successors).bind(v),Wt=mh(v,S,Z,At),ne=rh(v,S,Wt.root,Wt.align,bt==="r");bt==="r"&&(ne=Ne.mapValues(ne,function(Qt){return-Qt})),st[yt+bt]=ne})});var ct=Qu(v,st);return Ml(st,ct),nh(st,v.graph().align)};function qu(v,S){var G={};return Ne.reduce(S,function(Z,st){var ct=0,yt=0,bt=Z.length,At=Ne.last(st);return Ne.forEach(st,function(Wt,ne){var Qt=function(ze,xr){if(ze.node(xr).dummy)return Ne.find(ze.predecessors(xr),function(je){return ze.node(je).dummy})}(v,Wt),we=Qt?v.node(Qt).order:bt;(Qt||Wt===At)&&(Ne.forEach(st.slice(yt,ne+1),function(ze){Ne.forEach(v.predecessors(ze),function(xr){var je=v.node(xr),Qe=je.order;!(Qe<ct||we<Qe)||je.dummy&&v.node(ze).dummy||Yc(G,xr,ze)})}),yt=ne+1,ct=we)}),st}),G}function th(v,S){var G={};function Z(st,ct,yt,bt,At){var Wt;Ne.forEach(Ne.range(ct,yt),function(ne){Wt=st[ne],v.node(Wt).dummy&&Ne.forEach(v.predecessors(Wt),function(Qt){var we=v.node(Qt);we.dummy&&(we.order<bt||we.order>At)&&Yc(G,Qt,Wt)})})}return Ne.reduce(S,function(st,ct){var yt,bt=-1,At=0;return Ne.forEach(ct,function(Wt,ne){if(v.node(Wt).dummy==="border"){var Qt=v.predecessors(Wt);Qt.length&&(yt=v.node(Qt[0]).order,Z(ct,At,ne,bt,yt),At=ne,bt=yt)}Z(ct,At,ct.length,yt,st.length)}),ct}),G}function Yc(v,S,G){if(S>G){var Z=S;S=G,G=Z}var st=v[S];st||(v[S]=st={}),st[G]=!0}function eh(v,S,G){if(S>G){var Z=S;S=G,G=Z}return Ne.has(v[S],G)}function mh(v,S,G,Z){var st={},ct={},yt={};return Ne.forEach(S,function(bt){Ne.forEach(bt,function(At,Wt){st[At]=At,ct[At]=At,yt[At]=Wt})}),Ne.forEach(S,function(bt){var At=-1;Ne.forEach(bt,function(Wt){var ne=Z(Wt);if(ne.length)for(var Qt=((ne=Ne.sortBy(ne,function(je){return yt[je]})).length-1)/2,we=Math.floor(Qt),ze=Math.ceil(Qt);we<=ze;++we){var xr=ne[we];ct[Wt]===Wt&&At<yt[xr]&&!eh(G,Wt,xr)&&(ct[xr]=Wt,ct[Wt]=st[Wt]=st[xr],At=yt[xr])}})}),{root:st,align:ct}}function rh(v,S,G,Z,st){var ct={},yt=function(Wt,ne,Qt,we){var ze=new Jl,xr=Wt.graph(),je=function(Qe,qe,Fr){return function(en,Hr,_n){var xn,Bn=en.node(Hr),ia=en.node(_n),Kn=0;if(Kn+=Bn.width/2,Ne.has(Bn,"labelpos"))switch(Bn.labelpos.toLowerCase()){case"l":xn=-Bn.width/2;break;case"r":xn=Bn.width/2}if(xn&&(Kn+=Fr?xn:-xn),xn=0,Kn+=(Bn.dummy?qe:Qe)/2,Kn+=(ia.dummy?qe:Qe)/2,Kn+=ia.width/2,Ne.has(ia,"labelpos"))switch(ia.labelpos.toLowerCase()){case"l":xn=ia.width/2;break;case"r":xn=-ia.width/2}return xn&&(Kn+=Fr?xn:-xn),xn=0,Kn}}(xr.nodesep,xr.edgesep,we);return Ne.forEach(ne,function(Qe){var qe;Ne.forEach(Qe,function(Fr){var en=Qt[Fr];if(ze.setNode(en),qe){var Hr=Qt[qe],_n=ze.edge(Hr,en);ze.setEdge(Hr,en,Math.max(je(Wt,Fr,qe),_n||0))}qe=Fr})}),ze}(v,S,G,st),bt=st?"borderLeft":"borderRight";function At(Wt,ne){for(var Qt=yt.nodes(),we=Qt.pop(),ze={};we;)ze[we]?Wt(we):(ze[we]=!0,Qt.push(we),Qt=Qt.concat(ne(we))),we=Qt.pop()}return At(function(Wt){ct[Wt]=yt.inEdges(Wt).reduce(function(ne,Qt){return Math.max(ne,ct[Qt.v]+yt.edge(Qt))},0)},yt.predecessors.bind(yt)),At(function(Wt){var ne=yt.outEdges(Wt).reduce(function(we,ze){return Math.min(we,ct[ze.w]-yt.edge(ze))},Number.POSITIVE_INFINITY),Qt=v.node(Wt);ne!==Number.POSITIVE_INFINITY&&Qt.borderType!==bt&&(ct[Wt]=Math.max(ct[Wt],ne))},yt.successors.bind(yt)),Ne.forEach(Z,function(Wt){ct[Wt]=ct[G[Wt]]}),ct}function Qu(v,S){return Ne.minBy(Ne.values(S),function(G){var Z=Number.NEGATIVE_INFINITY,st=Number.POSITIVE_INFINITY;return Ne.forIn(G,function(ct,yt){var bt=function(At,Wt){return At.node(Wt).width}(v,yt)/2;Z=Math.max(ct+bt,Z),st=Math.min(ct-bt,st)}),Z-st})}function Ml(v,S){var G=Ne.values(S),Z=Ne.min(G),st=Ne.max(G);Ne.forEach(["u","d"],function(ct){Ne.forEach(["l","r"],function(yt){var bt,At=ct+yt,Wt=v[At];if(Wt!==S){var ne=Ne.values(Wt);(bt=yt==="l"?Z-Ne.min(ne):st-Ne.max(ne))&&(v[At]=Ne.mapValues(Wt,function(Qt){return Qt+bt}))}})})}function nh(v,S){return Ne.mapValues(v.ul,function(G,Z){if(S)return v[S.toLowerCase()][Z];var st=Ne.sortBy(Ne.map(v,Z));return(st[1]+st[2])/2})}var ah=uc,xh=function(v){(function(S){var G=Ji.buildLayerMatrix(S),Z=S.graph().ranksep,st=0;Ne.forEach(G,function(ct){var yt=Ne.max(Ne.map(ct,function(bt){return S.node(bt).height}));Ne.forEach(ct,function(bt){S.node(bt).y=st+yt/2}),st+=yt+Z})})(v=Ji.asNonCompoundGraph(v)),Ne.forEach(ah(v),function(S,G){v.node(G).x=S})},Al=Ji.normalizeRanks,ih=Ji.removeEmptyRanks,Go=Ji,oh=tn.Graph,Ju=function(v,S){var G=S&&S.debugTiming?Go.time:Go.notime;G("layout",function(){var Z=G("  buildLayoutGraph",function(){return function(st){var ct=new oh({multigraph:!0,compound:!0}),yt=_o(st.graph());return ct.setGraph(Ne.merge({},Cl,zo(yt,Cu),Ne.pick(yt,Tl))),Ne.forEach(st.nodes(),function(bt){var At=_o(st.node(bt));ct.setNode(bt,Ne.defaults(zo(At,fc),Il)),ct.setParent(bt,st.parent(bt))}),Ne.forEach(st.edges(),function(bt){var At=_o(st.edge(bt));ct.setEdge(bt,Ne.merge({},vu,zo(At,Fi),Ne.pick(At,Vi)))}),ct}(v)});G("  runLayout",function(){(function(st,ct){ct("    makeSpaceForEdgeLabels",function(){(function(yt){var bt=yt.graph();bt.ranksep/=2,Ne.forEach(yt.edges(),function(At){var Wt=yt.edge(At);Wt.minlen*=2,Wt.labelpos.toLowerCase()!=="c"&&(bt.rankdir==="TB"||bt.rankdir==="BT"?Wt.width+=Wt.labeloffset:Wt.height+=Wt.labeloffset)})})(st)}),ct("    removeSelfEdges",function(){(function(yt){Ne.forEach(yt.edges(),function(bt){if(bt.v===bt.w){var At=yt.node(bt.v);At.selfEdges||(At.selfEdges=[]),At.selfEdges.push({e:bt,label:yt.edge(bt)}),yt.removeEdge(bt)}})})(st)}),ct("    acyclic",function(){gl.run(st)}),ct("    nestingGraph.run",function(){Kl.run(st)}),ct("    rank",function(){Sl(Go.asNonCompoundGraph(st))}),ct("    injectEdgeLabelProxies",function(){(function(yt){Ne.forEach(yt.edges(),function(bt){var At=yt.edge(bt);if(At.width&&At.height){var Wt=yt.node(bt.v),ne={rank:(yt.node(bt.w).rank-Wt.rank)/2+Wt.rank,e:bt};Go.addDummyNode(yt,"edge-proxy",ne,"_ep")}})})(st)}),ct("    removeEmptyRanks",function(){ih(st)}),ct("    nestingGraph.cleanup",function(){Kl.cleanup(st)}),ct("    normalizeRanks",function(){Al(st)}),ct("    assignRankMinMax",function(){(function(yt){var bt=0;Ne.forEach(yt.nodes(),function(At){var Wt=yt.node(At);Wt.borderTop&&(Wt.minRank=yt.node(Wt.borderTop).rank,Wt.maxRank=yt.node(Wt.borderBottom).rank,bt=Ne.max(bt,Wt.maxRank))}),yt.graph().maxRank=bt})(st)}),ct("    removeEdgeLabelProxies",function(){(function(yt){Ne.forEach(yt.nodes(),function(bt){var At=yt.node(bt);At.dummy==="edge-proxy"&&(yt.edge(At.e).labelRank=At.rank,yt.removeNode(bt))})})(st)}),ct("    normalize.run",function(){tc.run(st)}),ct("    parentDummyChains",function(){ph(st)}),ct("    addBorderSegments",function(){yh(st)}),ct("    order",function(){Xc(st)}),ct("    insertSelfEdges",function(){(function(yt){var bt=Go.buildLayerMatrix(yt);Ne.forEach(bt,function(At){var Wt=0;Ne.forEach(At,function(ne,Qt){var we=yt.node(ne);we.order=Qt+Wt,Ne.forEach(we.selfEdges,function(ze){Go.addDummyNode(yt,"selfedge",{width:ze.label.width,height:ze.label.height,rank:we.rank,order:Qt+ ++Wt,e:ze.e,label:ze.label},"_se")}),delete we.selfEdges})})})(st)}),ct("    adjustCoordinateSystem",function(){ql.adjust(st)}),ct("    position",function(){xh(st)}),ct("    positionSelfEdges",function(){(function(yt){Ne.forEach(yt.nodes(),function(bt){var At=yt.node(bt);if(At.dummy==="selfedge"){var Wt=yt.node(At.e.v),ne=Wt.x+Wt.width/2,Qt=Wt.y,we=At.x-ne,ze=Wt.height/2;yt.setEdge(At.e,At.label),yt.removeNode(bt),At.label.points=[{x:ne+2*we/3,y:Qt-ze},{x:ne+5*we/6,y:Qt-ze},{x:ne+we,y:Qt},{x:ne+5*we/6,y:Qt+ze},{x:ne+2*we/3,y:Qt+ze}],At.label.x=At.x,At.label.y=At.y}})})(st)}),ct("    removeBorderNodes",function(){(function(yt){Ne.forEach(yt.nodes(),function(bt){if(yt.children(bt).length){var At=yt.node(bt),Wt=yt.node(At.borderTop),ne=yt.node(At.borderBottom),Qt=yt.node(Ne.last(At.borderLeft)),we=yt.node(Ne.last(At.borderRight));At.width=Math.abs(we.x-Qt.x),At.height=Math.abs(ne.y-Wt.y),At.x=Qt.x+At.width/2,At.y=Wt.y+At.height/2}}),Ne.forEach(yt.nodes(),function(bt){yt.node(bt).dummy==="border"&&yt.removeNode(bt)})})(st)}),ct("    normalize.undo",function(){tc.undo(st)}),ct("    fixupEdgeLabelCoords",function(){(function(yt){Ne.forEach(yt.edges(),function(bt){var At=yt.edge(bt);if(Ne.has(At,"x"))switch(At.labelpos!=="l"&&At.labelpos!=="r"||(At.width-=At.labeloffset),At.labelpos){case"l":At.x-=At.width/2+At.labeloffset;break;case"r":At.x+=At.width/2+At.labeloffset}})})(st)}),ct("    undoCoordinateSystem",function(){ql.undo(st)}),ct("    translateGraph",function(){(function(yt){var bt=Number.POSITIVE_INFINITY,At=0,Wt=Number.POSITIVE_INFINITY,ne=0,Qt=yt.graph(),we=Qt.marginx||0,ze=Qt.marginy||0;function xr(je){var Qe=je.x,qe=je.y,Fr=je.width,en=je.height;bt=Math.min(bt,Qe-Fr/2),At=Math.max(At,Qe+Fr/2),Wt=Math.min(Wt,qe-en/2),ne=Math.max(ne,qe+en/2)}Ne.forEach(yt.nodes(),function(je){xr(yt.node(je))}),Ne.forEach(yt.edges(),function(je){var Qe=yt.edge(je);Ne.has(Qe,"x")&&xr(Qe)}),bt-=we,Wt-=ze,Ne.forEach(yt.nodes(),function(je){var Qe=yt.node(je);Qe.x-=bt,Qe.y-=Wt}),Ne.forEach(yt.edges(),function(je){var Qe=yt.edge(je);Ne.forEach(Qe.points,function(qe){qe.x-=bt,qe.y-=Wt}),Ne.has(Qe,"x")&&(Qe.x-=bt),Ne.has(Qe,"y")&&(Qe.y-=Wt)}),Qt.width=At-bt+we,Qt.height=ne-Wt+ze})(st)}),ct("    assignNodeIntersects",function(){(function(yt){Ne.forEach(yt.edges(),function(bt){var At,Wt,ne=yt.edge(bt),Qt=yt.node(bt.v),we=yt.node(bt.w);ne.points?(At=ne.points[0],Wt=ne.points[ne.points.length-1]):(ne.points=[],At=we,Wt=Qt),ne.points.unshift(Go.intersectRect(Qt,At)),ne.points.push(Go.intersectRect(we,Wt))})})(st)}),ct("    reversePoints",function(){(function(yt){Ne.forEach(yt.edges(),function(bt){var At=yt.edge(bt);At.reversed&&At.points.reverse()})})(st)}),ct("    acyclic.undo",function(){gl.undo(st)})})(Z,G)}),G("  updateInputGraph",function(){(function(st,ct){Ne.forEach(st.nodes(),function(yt){var bt=st.node(yt),At=ct.node(yt);bt&&(bt.x=At.x,bt.y=At.y,ct.children(yt).length&&(bt.width=At.width,bt.height=At.height))}),Ne.forEach(st.edges(),function(yt){var bt=st.edge(yt),At=ct.edge(yt);bt.points=At.points,Ne.has(At,"x")&&(bt.x=At.x,bt.y=At.y)}),st.graph().width=ct.graph().width,st.graph().height=ct.graph().height})(v,Z)})})},Cu=["nodesep","edgesep","ranksep","marginx","marginy"],Cl={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Tl=["acyclicer","ranker","rankdir","align"],fc=["width","height"],Il={width:0,height:0},Fi=["minlen","weight","width","height","labeloffset"],vu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Vi=["labelpos"];function zo(v,S){return Ne.mapValues(Ne.pick(v,S),Number)}function _o(v){var S={};return Ne.forEach(v,function(G,Z){S[Z.toLowerCase()]=G}),S}var Vc=tn.Graph,tf={graphlib:tn,layout:Ju,debug:{debugOrdering:function(v){var S=Ji.buildLayerMatrix(v),G=new Vc({compound:!0,multigraph:!0}).setGraph({});return Ne.forEach(v.nodes(),function(Z){G.setNode(Z,{label:Z}),G.setParent(Z,"layer"+v.node(Z).rank)}),Ne.forEach(v.edges(),function(Z){G.setEdge(Z.v,Z.w,{},Z.name)}),Ne.forEach(S,function(Z,st){var ct="layer"+st;G.setNode(ct,{rank:"same"}),Ne.reduce(Z,function(yt,bt){return G.setEdge(yt,bt,{style:"invis"}),bt})}),G}},util:{time:Ji.time,notime:Ji.notime},version:"0.8.5"},Vh=tf.graphlib,jc=tf.layout;class Mo{constructor(S){this.cardinality=1,this.include=E.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=D.NODE,this.name=S.name,this.attr=S.attr||{},this.inputs=S.inputs,this.path=S.path||[],this.width=S.width,this.height=S.height}}class bh{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function sh(v){const S=new bh;return v.nodes.map(G=>new Mo(G)).forEach(G=>{S.nodes[G.name]=G,G.inputs.forEach(Z=>{(function(st,ct,yt){yt.name!==ct.name&&st.edges.push(Object.assign(Object.assign({},yt.attr),{v:yt.name,w:ct.name}))})(S,G,Z)})}),S}class Eh{constructor(S,G={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=E.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=D.META,this.path=[],this.name=S,this.metaGraph=cc(S,y.META,G)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(S=>this.metaGraph.node(S))}leaves(){let S,G=[],Z=[this];for(;Z.length;){let st=Z.shift();st.isGroupNode?(S=st.metaGraph,S.nodes().forEach(ct=>Z.push(S.node(ct)))):G.push(st.name)}return G}}class Tu{constructor(S,G){this.v=S,this.w=G,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(S,G){this.baseEdgeList.push(S)}}function Ol(v,S={}){return new Eh(v,S)}function Hc(v,S){return new Tu(v,S)}function cc(v,S,G){const Z=G||{},st=new Vh.Graph(Z);return st.setGraph({name:v,rankdir:Z.rankdir,type:S,align:Z.align}),st}class Kc{constructor(S={}){this.graphOptions=S,this.index={},this.graphOptions.compound=!0,this.root=Ol(P,this.graphOptions),this.index[P]=this.root}getNodeMap(){return this.index}node(S){return this.index[S]}setNode(S,G){this.index[S]=G}getBridgeGraph(S){const G=this.index[S];if(!G)throw Error("Could not find node in hierarchy: "+S);if(!("metaGraph"in G))return null;const Z=G;if(Z.bridgeGraph)return Z.bridgeGraph;const st=cc(N,y.BRIDGE,this.graphOptions);if(Z.bridgeGraph=st,!G.parentNode||!("metaGraph"in G.parentNode))return st;const ct=G.parentNode;return[ct.metaGraph,this.getBridgeGraph(ct.name)].forEach(yt=>{yt.edges().filter(bt=>bt.v===S||bt.w===S).forEach(bt=>{const At=bt.w===S;yt.edge(bt).baseEdgeList.forEach(Wt=>{const[ne,Qt]=At?[Wt.w,bt.v]:[Wt.v,bt.w],we=this.getChildName(S,ne),ze={v:At?Qt:we,w:At?we:Qt};let xr=st.edge(ze);xr||(xr=Hc(ze.v,ze.w),xr.inbound=At,st.setEdge(ze.v,ze.w,xr)),xr.addBaseEdge(Wt,this)})})}),st}getChildName(S,G){let Z=this.index[G];for(;Z;){if(Z.parentNode&&Z.parentNode.name===S)return Z.name;Z=Z.parentNode}throw Error("Could not find immediate child for descendant: "+G)}getPredecessors(S){const G=this.index[S];if(!G)throw Error("Could not find node with name: "+S);return this.getOneWayEdges(G,!0)}getSuccessors(S){const G=this.index[S];if(!G)throw Error("Could not find node with name: "+S);return this.getOneWayEdges(G,!1)}getOneWayEdges(S,G){const Z=[];if(!S.parentNode||!S.parentNode.isGroupNode)return Z;const st=S.parentNode,ct=st.metaGraph,yt=this.getBridgeGraph(st.name);return du(ct,S,G,Z),du(yt,S,G,Z),Z}}function uh(v,S){const{rankDirection:G,align:Z}=S,st=new Kc({rankdir:G,align:Z});return function(ct,yt){Object.keys(yt.nodes).forEach(bt=>{const At=yt.nodes[bt],Wt=At.path;let ne=ct.root;ne.depth=Math.max(Wt.length,ne.depth);for(let Qt=0;Qt<Wt.length&&(ne.depth=Math.max(ne.depth,Wt.length-Qt),ne.cardinality+=At.cardinality,Qt!==Wt.length-1);Qt++){const we=Wt[Qt];let ze=ct.node(we);ze||(ze=Ol(we,ct.graphOptions),ze.path=At.path.slice(0,Qt+1),ze.parentNode=ne,ct.setNode(we,ze),ne.metaGraph.setNode(we,ze)),ne=ze}ct.setNode(At.name,At),At.parentNode=ne,ne.metaGraph.setNode(At.name,At)})}(st,v),function(ct,yt){const bt=ct.getNodeMap();let At=[],Wt=[];const ne=(Qt,we)=>{let ze=0;for(;Qt;)we[ze++]=Qt.name,Qt=Qt.parentNode;return ze-1};yt.edges.forEach(Qt=>{At=[],Wt=[];let we=ne(yt.nodes[Qt.v],At),ze=ne(yt.nodes[Qt.w],Wt);for(;At[we]===Wt[ze];)if(we--,ze--,we<0||ze<0)throw Error("No difference found between ancestor paths.");const xr=bt[At[we+1]],je=At[we],Qe=Wt[ze];let qe=xr.metaGraph.edge(je,Qe);qe||(qe=Hc(je,Qe),xr.metaGraph.setEdge(je,Qe,qe)),qe.addBaseEdge(Qt,ct)})}(st,v),st}function du(v,S,G,Z){(G?v.inEdges(S.name):v.outEdges(S.name)).forEach(st=>{const ct=v.edge(st);Z.push(ct)})}class Ll{constructor(S){this.hierarchy=S,this.index={},this.hasSubHierarchy={},this.root=new ae(this.hierarchy.root,this.hierarchy.graphOptions),this.index[S.root.name]=this.root,this.buildSubHierarchy(S.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(S){if(S in this.hasSubHierarchy)return;this.hasSubHierarchy[S]=!0;const G=this.index[S];if(G.node.type!==D.META)return;const Z=G,st=Z.node.metaGraph,ct=Z.coreGraph;st.nodes().forEach(ne=>{const Qt=this.getOrCreateRenderNodeByName(ne);ct.setNode(ne,Qt)}),st.edges().forEach(ne=>{const Qt=st.edge(ne),we=new mt(Qt);ct.setEdge(ne.v,ne.w,we)});const yt=Z.node.parentNode;if(!yt)return;const bt=this.getRenderNodeByName(yt.name),At=(ne,...Qt)=>Qt.concat([ne?"IN":"OUT"]).join("~~"),Wt=this.hierarchy.getBridgeGraph(S);Wt.edges().forEach(ne=>{const Qt=Wt.edge(ne),we=!!st.node(ne.w),[ze,xr]=we?[ne.w,ne.v]:[ne.v,ne.w],je=_n=>{const xn=we?{v:_n,w:S}:{v:S,w:_n};return bt.coreGraph.edge(xn)};let Qe=je(xr);Qe||(Qe=je(At(we,xr,yt.name)));const qe=At(we,S),Fr=At(we,xr,S);let en=ct.node(Fr);if(!en){let _n=ct.node(qe);if(!_n){const Bn={name:qe,type:D.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:E.UNSPECIFIED,inbound:we,attr:{}};_n=new wf(Bn),this.index[qe]=_n,ct.setNode(qe,_n)}const xn={name:Fr,type:D.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:E.UNSPECIFIED,inbound:we,attr:{}};en=new wf(xn),this.index[Fr]=en,ct.setNode(Fr,en),ct.setParent(Fr,qe),_n.node.cardinality++}const Hr=new mt(Qt);Hr.adjoiningMetaEdge=Qe,we?ct.setEdge(Fr,ze,Hr):ct.setEdge(ze,Fr,Hr)})}getOrCreateRenderNodeByName(S){if(!S)return null;if(S in this.index)return this.index[S];const G=this.getNodeByName(S);return G?(this.index[S]=G.isGroupNode?new ae(G,this.hierarchy.graphOptions):new wf(G),this.index[S]):null}getRenderNodeByName(S){return this.index[S]}getNodeByName(S){return this.hierarchy.node(S)}}class wf{constructor(S){this.node=S,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=S.width||0,this.height=S.height||0,this.displayName=S.name,this.attr=S.attr}}class mt{constructor(S){this.metaEdge=S,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class ae extends wf{constructor(S,G){super(S);const Z=S.metaGraph.graph();G.compound=!0,this.coreGraph=cc(Z.name,y.CORE,G)}}function Ae(v,S){v.node.isGroupNode&&function(G,Z){const st=X(Z);G.coreGraph.nodes().map(ct=>G.coreGraph.node(ct)).forEach(ct=>{var yt,bt,At,Wt,ne,Qt;const{height:we,width:ze}=ct;switch(ct.node.type){case D.NODE:Object.assign(ct,st.nodeSize.node),ct.height=we||st.nodeSize.node.height,ct.width=ze||st.nodeSize.node.width;break;case D.BRIDGE:Object.assign(ct,st.nodeSize.bridge);break;case D.META:ct.expanded?Ae(ct,Z):(Object.assign(ct,st.nodeSize.meta),ct.height=st.nodeSize.meta.height,ct.width=st.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+ct.node.type)}if(!ct.expanded){const xr=ct.attr;(function(je,Qe=!1){if(je.coreBox.width=je.width,je.coreBox.height=je.height,!Qe){const qe=`${je.displayName}`.length,Fr=3;je.width=Math.max(je.coreBox.width,qe*Fr)}})(ct,Z&&(ct.node.type===0&&!!(!((bt=(yt=Z==null?void 0:Z.nodeSize)===null||yt===void 0?void 0:yt.meta)===null||bt===void 0)&&bt.width)||ct.node.type===1&&(!!(!((Wt=(At=Z==null?void 0:Z.nodeSize)===null||At===void 0?void 0:At.node)===null||Wt===void 0)&&Wt.width)||!!xr.width)||ct.node.type===2&&!!(!((Qt=(ne=Z==null?void 0:Z.nodeSize)===null||ne===void 0?void 0:ne.bridge)===null||Qt===void 0)&&Qt.width)))}})}(v,S),v.node.type===D.META&&function(G,Z){const st=X(Z),ct=st.subScene.meta;Object.assign(G,ct);const{nodeSep:yt,rankSep:bt,edgeSep:At,align:Wt}=st.graph.meta,ne={nodesep:yt,ranksep:bt,edgesep:At,align:Wt};Object.assign(G.coreBox,function(ze,xr){const{ranksep:je,nodesep:Qe,edgesep:qe,align:Fr}=xr;Object.assign(ze.graph(),{ranksep:je,nodesep:Qe,edgesep:qe,align:Fr});const en=[];if(ze.nodes().forEach(ia=>{ze.node(ia).node.type!==D.BRIDGE&&en.push(ia)}),!en.length)return{width:0,height:0};jc(ze);let Hr=1/0,_n=1/0,xn=-1/0,Bn=-1/0;return en.forEach(ia=>{const Kn=ze.node(ia),Ei=.5*Kn.width,ua=Kn.x-Ei,Ni=Kn.x+Ei;Hr=ua<Hr?ua:Hr,xn=Ni>xn?Ni:xn;const vi=.5*Kn.height,Ba=Kn.y-vi,Gi=Kn.y+vi;_n=Ba<_n?Ba:_n,Bn=Gi>Bn?Gi:Bn}),ze.edges().forEach(ia=>{const Kn=ze.edge(ia),Ei=ze.node(Kn.metaEdge.v),ua=ze.node(Kn.metaEdge.w);if(Kn.points.length===3&&function(Ba){let Gi=ur(Ba[0],Ba[1]);for(let wi=1;wi<Ba.length-1;wi++){const mo=ur(Ba[wi],Ba[wi+1]);if(Math.abs(mo-Gi)>1)return!1;Gi=mo}return!0}(Kn.points)){if(Ei!=null){const Ba=Ei.expanded?Ei.x:Cr(Ei);Kn.points[0].x=Ba}if(ua!=null){const Ba=ua.expanded?ua.x:Cr(ua);Kn.points[2].x=Ba}Kn.points=[Kn.points[0],Kn.points[1]]}const Ni=Kn.points[Kn.points.length-2];ua!=null&&(Kn.points[Kn.points.length-1]=sr(Ni,ua));const vi=Kn.points[1];Ei!=null&&(Kn.points[0]=sr(vi,Ei)),Kn.points.forEach(Ba=>{Hr=Ba.x<Hr?Ba.x:Hr,xn=Ba.x>xn?Ba.x:xn,_n=Ba.y<_n?Ba.y:_n,Bn=Ba.y>Bn?Ba.y:Bn})}),ze.nodes().forEach(ia=>{const Kn=ze.node(ia);Kn.x-=Hr,Kn.y-=_n}),ze.edges().forEach(ia=>{ze.edge(ia).points.forEach(Kn=>{Kn.x-=Hr,Kn.y-=_n})}),{width:xn-Hr,height:Bn-_n}}(G.coreGraph,ne));let Qt=0;G.coreGraph.nodeCount()>0&&Qt++;const we=Qt<=1?0:Qt;G.coreBox.width+=we+we,G.coreBox.height=ct.labelHeight+G.coreBox.height,G.width=G.coreBox.width+ct.paddingLeft+ct.paddingRight,G.height=G.paddingTop+G.coreBox.height+G.paddingBottom}(v,S)}function ur(v,S){const G=S.x-v.x,Z=S.y-v.y;return 180*Math.atan(Z/G)/Math.PI}function Cr(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function sr(v,S){const G=S.expanded?S.x:Cr(S),Z=S.y,st=v.x-G,ct=v.y-Z;let yt,bt,At=S.expanded?S.width:S.coreBox.width,Wt=S.expanded?S.height:S.coreBox.height;return Math.abs(ct)*At/2>Math.abs(st)*Wt/2?(ct<0&&(Wt=-Wt),yt=ct===0?0:Wt/2*st/ct,bt=Wt/2):(st<0&&(At=-At),yt=At/2,bt=st===0?0:At/2*ct/st),{x:G+yt,y:Z+bt}}function vr(v,S,G){var Z,st,ct,yt;const bt=v.nodes.filter((Qt,we,ze)=>ze.findIndex(xr=>xr.id===Qt.id)!==we).map(Qt=>Qt.id);if(bt.length)throw new Error(`Duplicated ids found: ${bt.join(", ")}`);const At=function(Qt){const we={nodes:[]},ze=Qt.compound,xr=Object.keys(ze||{}),je=new Map,Qe=(Fr,en=[])=>{if(je.has(Fr))return je.get(Fr);for(let Hr=0;Hr<xr.length;Hr++){let _n=xr[Hr];if(ze&&ze[_n].indexOf(Fr)!==-1)return en.unshift(_n),Qe(_n,en)}return en.length===0&&je.set(Fr,en),en},qe=Fr=>Qt.edges.filter(en=>en.w===Fr).map(en=>({name:en.v}));return Qt.nodes.forEach(Fr=>{const en=Fr.id,Hr=[...Qe(en),en];let _n=qe(en);we.nodes.push({name:en,path:Hr,inputs:_n,width:Fr.width,height:Fr.height,attr:Object.assign({},Fr)})}),we}(v),Wt=function(Qt,we){const ze=(je,Qe)=>{for(let qe of Qe.values())if(qe.includes(je))return!0;return!1},xr=(je,Qe=[])=>{if(Object.keys(je).length===0)return[...new Set(Qe)];const qe=new Map(Object.keys(je).map(en=>[en,je[en]])),Fr={};for(let[en,Hr]of qe)ze(en,qe)?Fr[en]=Hr:Qe=Qe.concat(en,Hr);return xr(Fr,Qe)};return xr(Qt).filter(je=>we.includes(je))}(v.compound||{},(S==null?void 0:S.expanded)||[]),ne=function(Qt,we){return function(ze){return new Ll(ze)}(uh(sh(Qt),we))}(At,{rankDirection:((st=(Z=G==null?void 0:G.graph)===null||Z===void 0?void 0:Z.meta)===null||st===void 0?void 0:st.rankDir)||(S==null?void 0:S.rankDirection)||B.graph.meta.rankDir,align:((yt=(ct=G==null?void 0:G.graph)===null||ct===void 0?void 0:ct.meta)===null||yt===void 0?void 0:yt.align)||B.graph.meta.align});return function(Qt,we){we.forEach(ze=>{const xr=Qt.getRenderInfoNodes().find(qe=>qe.displayName===ze);let je=xr&&xr.node&&xr.node.name||"";const Qe=Qt.getRenderNodeByName(je);if(!Qe)throw new Error(`No nodes found: ${je}`);Qe.expanded=!0,Qt.buildSubHierarchy(je)})}(ne,Wt),Ae(ne.root,G),Ur(ne.root)}function Rr(v,S=!1){const G=JSON.parse(JSON.stringify(v)),Z={nodes:[G],edges:[...G.edges]};return G.nodes.forEach(function st(ct){(ct.type===0||ct.type===1)&&Z.nodes.push(ct),ct.type===0&&(Z.edges=Z.edges.concat(ct.edges)),Array.isArray(ct.nodes)&&ct.nodes.forEach(st)}),S&&Z.nodes.forEach(st=>{const ct=Z.nodes.find(yt=>yt.id===st.parentNodeName);if(ct){const yt=ct.x-ct.width/2+ct.paddingLeft,bt=ct.y-ct.height/2+ct.labelHeight+ct.paddingTop;ct.id!==P&&(st.x+=yt,st.y+=bt),st.type===0&&st.edges.forEach(At=>{At.points.forEach(Wt=>{Wt.x+=st.x-st.width/2+st.paddingLeft,Wt.y+=st.y-st.height/2+st.labelHeight+st.paddingTop})})}}),Z}function zr(v,S,G,Z){var st,ct;let yt=[];const bt=((st=G.find(Qt=>Qt.id===v))===null||st===void 0?void 0:st.path)||[],At=((ct=G.find(Qt=>Qt.id===S))===null||ct===void 0?void 0:ct.path)||[],Wt=[P,...bt].slice(0,bt.length).reverse(),ne=[P,...At].slice(0,At.length);return Wt.forEach(Qt=>{const we=G.find(ze=>ze.id===Qt);yt=yt.concat(we.edges.filter(ze=>ze.baseEdgeList.some(xr=>xr.v===((Z==null?void 0:Z.v)||v)&&xr.w===((Z==null?void 0:Z.w)||S))))}),ne.filter(Qt=>!Wt.includes(Qt)).forEach(Qt=>{const we=G.find(ze=>ze.id===Qt);yt=yt.concat(we.edges.filter(ze=>ze.baseEdgeList.some(xr=>xr.v===((Z==null?void 0:Z.v)||v)&&xr.w===((Z==null?void 0:Z.w)||S))))}),yt}function Ur(v){const S=v.coreGraph.nodes().map(Z=>v.coreGraph.node(Z));return Object.assign(Object.assign({},Br(v)),{expanded:v.expanded,nodes:v.expanded?(G=S,G.map(Z=>Z.node.type===D.META?Ur(Z):Br(Z))):[],edges:v.expanded?Zr(v):[]});var G}function Br(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function Zr(v){return v.coreGraph.edges().map(S=>({renderInfoEdge:v.coreGraph.edge(S),edge:S})).filter(({renderInfoEdge:S})=>S.metaEdge).map(({edge:S,renderInfoEdge:G})=>{const Z=function(st,ct){const yt=ct.points.map(bt=>Object.assign({},bt));if(ct.adjoiningMetaEdge){const bt=ct.adjoiningMetaEdge.points,At=ct.metaEdge.inbound,Wt=At?bt[bt.length-1]:bt[0],ne=yt[At?0:yt.length-1],Qt=st.x-st.width/2,we=st.y-st.height/2,ze=Wt.x-Qt,xr=Wt.y-we,je=-st.paddingLeft,Qe=-(st.paddingTop+st.labelHeight);ne.x=ze+je,ne.y=xr+Qe}return yt}(v,G);return{adjoiningEdge:G.adjoiningMetaEdge?{w:G.adjoiningMetaEdge.metaEdge.w,v:G.adjoiningMetaEdge.metaEdge.v}:null,inbound:G.metaEdge.inbound,w:S.w,v:S.v,points:Z,weight:G.weight,baseEdgeList:G.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},73633:function(dr,R,z){"use strict";z.r(R),z.d(R,{ARRAY_TYPE:function(){return X},EPSILON:function(){return B},RANDOM:function(){return k},equals:function(){return E},setMatrixArrayType:function(){return P},toRadian:function(){return D}});var B=1e-6,X=typeof Float32Array!="undefined"?Float32Array:Array,k=Math.random;function P(y){X=y}var N=Math.PI/180;function D(y){return y*N}function E(y,M){return Math.abs(y-M)<=B*Math.max(1,Math.abs(y),Math.abs(M))}Math.hypot||(Math.hypot=function(){for(var y=0,M=arguments.length;M--;)y+=arguments[M]*arguments[M];return Math.sqrt(y)})},858204:function(dr,R,z){"use strict";z.r(R),z.d(R,{glMatrix:function(){return E},mat2:function(){return B},mat2d:function(){return X},mat3:function(){return pn},mat4:function(){return k},quat:function(){return N},quat2:function(){return D},vec2:function(){return Pf},vec3:function(){return Kr},vec4:function(){return P}});var B={};z.r(B),z.d(B,{LDU:function(){return J},add:function(){return ot},adjoint:function(){return j},clone:function(){return M},copy:function(){return _},create:function(){return y},determinant:function(){return x},equals:function(){return Pt},exactEquals:function(){return gt},frob:function(){return rt},fromRotation:function(){return W},fromScaling:function(){return K},fromValues:function(){return I},identity:function(){return m},invert:function(){return U},mul:function(){return zt},multiply:function(){return d},multiplyScalar:function(){return It},multiplyScalarAndAdd:function(){return Jt},rotate:function(){return it},scale:function(){return Y},set:function(){return A},str:function(){return Q},sub:function(){return kt},subtract:function(){return vt},transpose:function(){return O}});var X={};z.r(X),z.d(X,{add:function(){return Kt},clone:function(){return lt},copy:function(){return St},create:function(){return $},determinant:function(){return be},equals:function(){return Vt},exactEquals:function(){return Mr},frob:function(){return Lt},fromRotation:function(){return ge},fromScaling:function(){return Ot},fromTranslation:function(){return Xt},fromValues:function(){return Ft},identity:function(){return Ut},invert:function(){return ve},mul:function(){return on},multiply:function(){return Ht},multiplyScalar:function(){return We},multiplyScalarAndAdd:function(){return Je},rotate:function(){return Yt},scale:function(){return de},set:function(){return ee},str:function(){return ce},sub:function(){return sn},subtract:function(){return pe},translate:function(){return Ee}});var k={};z.r(k),z.d(k,{add:function(){return $r},adjoint:function(){return Or},clone:function(){return Yn},copy:function(){return ea},create:function(){return En},determinant:function(){return vn},equals:function(){return Un},exactEquals:function(){return Mn},frob:function(){return mr},fromQuat:function(){return Ct},fromQuat2:function(){return nt},fromRotation:function(){return Qn},fromRotationTranslation:function(){return ft},fromRotationTranslationScale:function(){return V},fromRotationTranslationScaleOrigin:function(){return xt},fromScaling:function(){return na},fromTranslation:function(){return wn},fromValues:function(){return Nn},fromXRotation:function(){return In},fromYRotation:function(){return Ca},fromZRotation:function(){return q},frustum:function(){return wt},getRotation:function(){return w},getScaling:function(){return b},getTranslation:function(){return L},identity:function(){return La},invert:function(){return fr},lookAt:function(){return dn},mul:function(){return Fa},multiply:function(){return yn},multiplyScalar:function(){return va},multiplyScalarAndAdd:function(){return Sa},ortho:function(){return er},orthoNO:function(){return yr},orthoZO:function(){return gr},perspective:function(){return Ce},perspectiveFromFieldOfView:function(){return Ke},perspectiveNO:function(){return Rt},perspectiveZO:function(){return me},rotate:function(){return jn},rotateX:function(){return ba},rotateY:function(){return ma},rotateZ:function(){return Pa},scale:function(){return Vn},set:function(){return Zn},str:function(){return or},sub:function(){return Ea},subtract:function(){return Pr},targetTo:function(){return Ue},translate:function(){return qn},transpose:function(){return Aa}});var P={};z.r(P),z.d(P,{add:function(){return Me},ceil:function(){return jr},clone:function(){return _e},copy:function(){return fe},create:function(){return kn},cross:function(){return lo},dist:function(){return Co},distance:function(){return Wn},div:function(){return Pn},divide:function(){return Dr},dot:function(){return Eo},equals:function(){return Ao},exactEquals:function(){return Yo},floor:function(){return Sn},forEach:function(){return Po},fromValues:function(){return Nt},inverse:function(){return co},len:function(){return Wi},length:function(){return Oo},lerp:function(){return Zi},max:function(){return Fn},min:function(){return An},mul:function(){return js},multiply:function(){return nr},negate:function(){return xi},normalize:function(){return Lo},random:function(){return ms},round:function(){return da},scale:function(){return wa},scaleAndAdd:function(){return hi},set:function(){return Te},sqrDist:function(){return No},sqrLen:function(){return On},squaredDistance:function(){return fi},squaredLength:function(){return Da},str:function(){return Cs},sub:function(){return Do},subtract:function(){return Le},transformMat4:function(){return zi},transformQuat:function(){return Ui},zero:function(){return xs}});var N={};z.r(N),z.d(N,{add:function(){return mi},calculateW:function(){return Ho},clone:function(){return Yi},conjugate:function(){return eu},copy:function(){return ca},create:function(){return Ai},dot:function(){return $i},equals:function(){return ci},exactEquals:function(){return Is},exp:function(){return Ro},fromEuler:function(){return cs},fromMat3:function(){return Xi},fromValues:function(){return vo},getAngle:function(){return ao},getAxisAngle:function(){return bs},identity:function(){return Vo},invert:function(){return Ts},len:function(){return os},length:function(){return So},lerp:function(){return Zo},ln:function(){return fs},mul:function(){return oo},multiply:function(){return io},normalize:function(){return ru},pow:function(){return Ko},random:function(){return Wa},rotateX:function(){return ni},rotateY:function(){return ho},rotateZ:function(){return ko},rotationTo:function(){return Bo},scale:function(){return ki},set:function(){return Va},setAxes:function(){return po},setAxisAngle:function(){return jo},slerp:function(){return is},sqlerp:function(){return Fu},sqrLen:function(){return Rs},squaredLength:function(){return go},str:function(){return wo}});var D={};z.r(D),z.d(D,{add:function(){return Ri},clone:function(){return Os},conjugate:function(){return iu},copy:function(){return Gs},create:function(){return Bs},dot:function(){return bu},equals:function(){return Ds},exactEquals:function(){return Nf},fromMat4:function(){return nu},fromRotation:function(){return hs},fromRotationTranslation:function(){return ls},fromRotationTranslationValues:function(){return Fs},fromTranslation:function(){return qo},fromValues:function(){return $o},getDual:function(){return Fe},getReal:function(){return qt},getTranslation:function(){return Jr},identity:function(){return vs},invert:function(){return Ks},len:function(){return Zs},length:function(){return Ls},lerp:function(){return au},mul:function(){return Hs},multiply:function(){return yo},normalize:function(){return sf},rotateAroundAxis:function(){return xu},rotateByQuatAppend:function(){return so},rotateByQuatPrepend:function(){return zs},rotateX:function(){return $n},rotateY:function(){return ai},rotateZ:function(){return qi},scale:function(){return Gu},set:function(){return Tt},setDual:function(){return Sr},setReal:function(){return Ze},sqrLen:function(){return To},squaredLength:function(){return ds},str:function(){return Df},translate:function(){return nn}});var E=z(73633);function y(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function M(h){var T=new E.ARRAY_TYPE(4);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T}function _(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h}function m(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function I(h,T,dt,Et){var Dt=new E.ARRAY_TYPE(4);return Dt[0]=h,Dt[1]=T,Dt[2]=dt,Dt[3]=Et,Dt}function A(h,T,dt,Et,Dt){return h[0]=T,h[1]=dt,h[2]=Et,h[3]=Dt,h}function O(h,T){if(h===T){var dt=T[1];h[1]=T[2],h[2]=dt}else h[0]=T[0],h[1]=T[2],h[2]=T[1],h[3]=T[3];return h}function U(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[3],$t=dt*Zt-Dt*Et;return $t?($t=1/$t,h[0]=Zt*$t,h[1]=-Et*$t,h[2]=-Dt*$t,h[3]=dt*$t,h):null}function j(h,T){var dt=T[0];return h[0]=T[3],h[1]=-T[1],h[2]=-T[2],h[3]=dt,h}function x(h){return h[0]*h[3]-h[2]*h[1]}function d(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=dt[0],ye=dt[1],Ie=dt[2],Xe=dt[3];return h[0]=Et*ue+Zt*ye,h[1]=Dt*ue+$t*ye,h[2]=Et*Ie+Zt*Xe,h[3]=Dt*Ie+$t*Xe,h}function it(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=Math.sin(dt),ye=Math.cos(dt);return h[0]=Et*ye+Zt*ue,h[1]=Dt*ye+$t*ue,h[2]=Et*-ue+Zt*ye,h[3]=Dt*-ue+$t*ye,h}function Y(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=dt[0],ye=dt[1];return h[0]=Et*ue,h[1]=Dt*ue,h[2]=Zt*ye,h[3]=$t*ye,h}function W(h,T){var dt=Math.sin(T),Et=Math.cos(T);return h[0]=Et,h[1]=dt,h[2]=-dt,h[3]=Et,h}function K(h,T){return h[0]=T[0],h[1]=0,h[2]=0,h[3]=T[1],h}function Q(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function rt(h){return Math.hypot(h[0],h[1],h[2],h[3])}function J(h,T,dt,Et){return h[2]=Et[2]/Et[0],dt[0]=Et[0],dt[1]=Et[1],dt[3]=Et[3]-h[2]*dt[1],[h,T,dt]}function ot(h,T,dt){return h[0]=T[0]+dt[0],h[1]=T[1]+dt[1],h[2]=T[2]+dt[2],h[3]=T[3]+dt[3],h}function vt(h,T,dt){return h[0]=T[0]-dt[0],h[1]=T[1]-dt[1],h[2]=T[2]-dt[2],h[3]=T[3]-dt[3],h}function gt(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]}function Pt(h,T){var dt=h[0],Et=h[1],Dt=h[2],Zt=h[3],$t=T[0],ue=T[1],ye=T[2],Ie=T[3];return Math.abs(dt-$t)<=E.EPSILON*Math.max(1,Math.abs(dt),Math.abs($t))&&Math.abs(Et-ue)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ue))&&Math.abs(Dt-ye)<=E.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(ye))&&Math.abs(Zt-Ie)<=E.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(Ie))}function It(h,T,dt){return h[0]=T[0]*dt,h[1]=T[1]*dt,h[2]=T[2]*dt,h[3]=T[3]*dt,h}function Jt(h,T,dt,Et){return h[0]=T[0]+dt[0]*Et,h[1]=T[1]+dt[1]*Et,h[2]=T[2]+dt[2]*Et,h[3]=T[3]+dt[3]*Et,h}var zt=d,kt=vt;function $(){var h=new E.ARRAY_TYPE(6);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function lt(h){var T=new E.ARRAY_TYPE(6);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T[4]=h[4],T[5]=h[5],T}function St(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[4]=T[4],h[5]=T[5],h}function Ut(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function Ft(h,T,dt,Et,Dt,Zt){var $t=new E.ARRAY_TYPE(6);return $t[0]=h,$t[1]=T,$t[2]=dt,$t[3]=Et,$t[4]=Dt,$t[5]=Zt,$t}function ee(h,T,dt,Et,Dt,Zt,$t){return h[0]=T,h[1]=dt,h[2]=Et,h[3]=Dt,h[4]=Zt,h[5]=$t,h}function ve(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[3],$t=T[4],ue=T[5],ye=dt*Zt-Et*Dt;return ye?(ye=1/ye,h[0]=Zt*ye,h[1]=-Et*ye,h[2]=-Dt*ye,h[3]=dt*ye,h[4]=(Dt*ue-Zt*$t)*ye,h[5]=(Et*$t-dt*ue)*ye,h):null}function be(h){return h[0]*h[3]-h[1]*h[2]}function Ht(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=T[4],ye=T[5],Ie=dt[0],Xe=dt[1],hr=dt[2],pr=dt[3],lr=dt[4],Xr=dt[5];return h[0]=Et*Ie+Zt*Xe,h[1]=Dt*Ie+$t*Xe,h[2]=Et*hr+Zt*pr,h[3]=Dt*hr+$t*pr,h[4]=Et*lr+Zt*Xr+ue,h[5]=Dt*lr+$t*Xr+ye,h}function Yt(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=T[4],ye=T[5],Ie=Math.sin(dt),Xe=Math.cos(dt);return h[0]=Et*Xe+Zt*Ie,h[1]=Dt*Xe+$t*Ie,h[2]=Et*-Ie+Zt*Xe,h[3]=Dt*-Ie+$t*Xe,h[4]=ue,h[5]=ye,h}function de(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=T[4],ye=T[5],Ie=dt[0],Xe=dt[1];return h[0]=Et*Ie,h[1]=Dt*Ie,h[2]=Zt*Xe,h[3]=$t*Xe,h[4]=ue,h[5]=ye,h}function Ee(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=T[4],ye=T[5],Ie=dt[0],Xe=dt[1];return h[0]=Et,h[1]=Dt,h[2]=Zt,h[3]=$t,h[4]=Et*Ie+Zt*Xe+ue,h[5]=Dt*Ie+$t*Xe+ye,h}function ge(h,T){var dt=Math.sin(T),Et=Math.cos(T);return h[0]=Et,h[1]=dt,h[2]=-dt,h[3]=Et,h[4]=0,h[5]=0,h}function Ot(h,T){return h[0]=T[0],h[1]=0,h[2]=0,h[3]=T[1],h[4]=0,h[5]=0,h}function Xt(h,T){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=T[0],h[5]=T[1],h}function ce(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function Lt(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function Kt(h,T,dt){return h[0]=T[0]+dt[0],h[1]=T[1]+dt[1],h[2]=T[2]+dt[2],h[3]=T[3]+dt[3],h[4]=T[4]+dt[4],h[5]=T[5]+dt[5],h}function pe(h,T,dt){return h[0]=T[0]-dt[0],h[1]=T[1]-dt[1],h[2]=T[2]-dt[2],h[3]=T[3]-dt[3],h[4]=T[4]-dt[4],h[5]=T[5]-dt[5],h}function We(h,T,dt){return h[0]=T[0]*dt,h[1]=T[1]*dt,h[2]=T[2]*dt,h[3]=T[3]*dt,h[4]=T[4]*dt,h[5]=T[5]*dt,h}function Je(h,T,dt,Et){return h[0]=T[0]+dt[0]*Et,h[1]=T[1]+dt[1]*Et,h[2]=T[2]+dt[2]*Et,h[3]=T[3]+dt[3]*Et,h[4]=T[4]+dt[4]*Et,h[5]=T[5]+dt[5]*Et,h}function Mr(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]&&h[4]===T[4]&&h[5]===T[5]}function Vt(h,T){var dt=h[0],Et=h[1],Dt=h[2],Zt=h[3],$t=h[4],ue=h[5],ye=T[0],Ie=T[1],Xe=T[2],hr=T[3],pr=T[4],lr=T[5];return Math.abs(dt-ye)<=E.EPSILON*Math.max(1,Math.abs(dt),Math.abs(ye))&&Math.abs(Et-Ie)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Ie))&&Math.abs(Dt-Xe)<=E.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(Xe))&&Math.abs(Zt-hr)<=E.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(hr))&&Math.abs($t-pr)<=E.EPSILON*Math.max(1,Math.abs($t),Math.abs(pr))&&Math.abs(ue-lr)<=E.EPSILON*Math.max(1,Math.abs(ue),Math.abs(lr))}var on=Ht,sn=pe,pn=z(935600);function En(){var h=new E.ARRAY_TYPE(16);return E.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function Yn(h){var T=new E.ARRAY_TYPE(16);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T[4]=h[4],T[5]=h[5],T[6]=h[6],T[7]=h[7],T[8]=h[8],T[9]=h[9],T[10]=h[10],T[11]=h[11],T[12]=h[12],T[13]=h[13],T[14]=h[14],T[15]=h[15],T}function ea(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[4]=T[4],h[5]=T[5],h[6]=T[6],h[7]=T[7],h[8]=T[8],h[9]=T[9],h[10]=T[10],h[11]=T[11],h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15],h}function Nn(h,T,dt,Et,Dt,Zt,$t,ue,ye,Ie,Xe,hr,pr,lr,Xr,Vr){var _r=new E.ARRAY_TYPE(16);return _r[0]=h,_r[1]=T,_r[2]=dt,_r[3]=Et,_r[4]=Dt,_r[5]=Zt,_r[6]=$t,_r[7]=ue,_r[8]=ye,_r[9]=Ie,_r[10]=Xe,_r[11]=hr,_r[12]=pr,_r[13]=lr,_r[14]=Xr,_r[15]=Vr,_r}function Zn(h,T,dt,Et,Dt,Zt,$t,ue,ye,Ie,Xe,hr,pr,lr,Xr,Vr,_r){return h[0]=T,h[1]=dt,h[2]=Et,h[3]=Dt,h[4]=Zt,h[5]=$t,h[6]=ue,h[7]=ye,h[8]=Ie,h[9]=Xe,h[10]=hr,h[11]=pr,h[12]=lr,h[13]=Xr,h[14]=Vr,h[15]=_r,h}function La(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Aa(h,T){if(h===T){var dt=T[1],Et=T[2],Dt=T[3],Zt=T[6],$t=T[7],ue=T[11];h[1]=T[4],h[2]=T[8],h[3]=T[12],h[4]=dt,h[6]=T[9],h[7]=T[13],h[8]=Et,h[9]=Zt,h[11]=T[14],h[12]=Dt,h[13]=$t,h[14]=ue}else h[0]=T[0],h[1]=T[4],h[2]=T[8],h[3]=T[12],h[4]=T[1],h[5]=T[5],h[6]=T[9],h[7]=T[13],h[8]=T[2],h[9]=T[6],h[10]=T[10],h[11]=T[14],h[12]=T[3],h[13]=T[7],h[14]=T[11],h[15]=T[15];return h}function fr(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[3],$t=T[4],ue=T[5],ye=T[6],Ie=T[7],Xe=T[8],hr=T[9],pr=T[10],lr=T[11],Xr=T[12],Vr=T[13],_r=T[14],ln=T[15],ga=dt*ue-Et*$t,pa=dt*ye-Dt*$t,aa=dt*Ie-Zt*$t,Gn=Et*ye-Dt*ue,Jn=Et*Ie-Zt*ue,Di=Dt*Ie-Zt*ye,Ci=Xe*Vr-hr*Xr,_i=Xe*_r-pr*Xr,Ti=Xe*ln-lr*Xr,Ii=hr*_r-pr*Vr,Bi=hr*ln-lr*Vr,Qi=pr*ln-lr*_r,Ga=ga*Qi-pa*Bi+aa*Ii+Gn*Ti-Jn*_i+Di*Ci;return Ga?(Ga=1/Ga,h[0]=(ue*Qi-ye*Bi+Ie*Ii)*Ga,h[1]=(Dt*Bi-Et*Qi-Zt*Ii)*Ga,h[2]=(Vr*Di-_r*Jn+ln*Gn)*Ga,h[3]=(pr*Jn-hr*Di-lr*Gn)*Ga,h[4]=(ye*Ti-$t*Qi-Ie*_i)*Ga,h[5]=(dt*Qi-Dt*Ti+Zt*_i)*Ga,h[6]=(_r*aa-Xr*Di-ln*pa)*Ga,h[7]=(Xe*Di-pr*aa+lr*pa)*Ga,h[8]=($t*Bi-ue*Ti+Ie*Ci)*Ga,h[9]=(Et*Ti-dt*Bi-Zt*Ci)*Ga,h[10]=(Xr*Jn-Vr*aa+ln*ga)*Ga,h[11]=(hr*aa-Xe*Jn-lr*ga)*Ga,h[12]=(ue*_i-$t*Ii-ye*Ci)*Ga,h[13]=(dt*Ii-Et*_i+Dt*Ci)*Ga,h[14]=(Vr*pa-Xr*Gn-_r*ga)*Ga,h[15]=(Xe*Gn-hr*pa+pr*ga)*Ga,h):null}function Or(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[3],$t=T[4],ue=T[5],ye=T[6],Ie=T[7],Xe=T[8],hr=T[9],pr=T[10],lr=T[11],Xr=T[12],Vr=T[13],_r=T[14],ln=T[15];return h[0]=ue*(pr*ln-lr*_r)-hr*(ye*ln-Ie*_r)+Vr*(ye*lr-Ie*pr),h[1]=-(Et*(pr*ln-lr*_r)-hr*(Dt*ln-Zt*_r)+Vr*(Dt*lr-Zt*pr)),h[2]=Et*(ye*ln-Ie*_r)-ue*(Dt*ln-Zt*_r)+Vr*(Dt*Ie-Zt*ye),h[3]=-(Et*(ye*lr-Ie*pr)-ue*(Dt*lr-Zt*pr)+hr*(Dt*Ie-Zt*ye)),h[4]=-($t*(pr*ln-lr*_r)-Xe*(ye*ln-Ie*_r)+Xr*(ye*lr-Ie*pr)),h[5]=dt*(pr*ln-lr*_r)-Xe*(Dt*ln-Zt*_r)+Xr*(Dt*lr-Zt*pr),h[6]=-(dt*(ye*ln-Ie*_r)-$t*(Dt*ln-Zt*_r)+Xr*(Dt*Ie-Zt*ye)),h[7]=dt*(ye*lr-Ie*pr)-$t*(Dt*lr-Zt*pr)+Xe*(Dt*Ie-Zt*ye),h[8]=$t*(hr*ln-lr*Vr)-Xe*(ue*ln-Ie*Vr)+Xr*(ue*lr-Ie*hr),h[9]=-(dt*(hr*ln-lr*Vr)-Xe*(Et*ln-Zt*Vr)+Xr*(Et*lr-Zt*hr)),h[10]=dt*(ue*ln-Ie*Vr)-$t*(Et*ln-Zt*Vr)+Xr*(Et*Ie-Zt*ue),h[11]=-(dt*(ue*lr-Ie*hr)-$t*(Et*lr-Zt*hr)+Xe*(Et*Ie-Zt*ue)),h[12]=-($t*(hr*_r-pr*Vr)-Xe*(ue*_r-ye*Vr)+Xr*(ue*pr-ye*hr)),h[13]=dt*(hr*_r-pr*Vr)-Xe*(Et*_r-Dt*Vr)+Xr*(Et*pr-Dt*hr),h[14]=-(dt*(ue*_r-ye*Vr)-$t*(Et*_r-Dt*Vr)+Xr*(Et*ye-Dt*ue)),h[15]=dt*(ue*pr-ye*hr)-$t*(Et*pr-Dt*hr)+Xe*(Et*ye-Dt*ue),h}function vn(h){var T=h[0],dt=h[1],Et=h[2],Dt=h[3],Zt=h[4],$t=h[5],ue=h[6],ye=h[7],Ie=h[8],Xe=h[9],hr=h[10],pr=h[11],lr=h[12],Xr=h[13],Vr=h[14],_r=h[15],ln=T*$t-dt*Zt,ga=T*ue-Et*Zt,pa=T*ye-Dt*Zt,aa=dt*ue-Et*$t,Gn=dt*ye-Dt*$t,Jn=Et*ye-Dt*ue,Di=Ie*Xr-Xe*lr,Ci=Ie*Vr-hr*lr,_i=Ie*_r-pr*lr,Ti=Xe*Vr-hr*Xr,Ii=Xe*_r-pr*Xr,Bi=hr*_r-pr*Vr;return ln*Bi-ga*Ii+pa*Ti+aa*_i-Gn*Ci+Jn*Di}function yn(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=T[4],ye=T[5],Ie=T[6],Xe=T[7],hr=T[8],pr=T[9],lr=T[10],Xr=T[11],Vr=T[12],_r=T[13],ln=T[14],ga=T[15],pa=dt[0],aa=dt[1],Gn=dt[2],Jn=dt[3];return h[0]=pa*Et+aa*ue+Gn*hr+Jn*Vr,h[1]=pa*Dt+aa*ye+Gn*pr+Jn*_r,h[2]=pa*Zt+aa*Ie+Gn*lr+Jn*ln,h[3]=pa*$t+aa*Xe+Gn*Xr+Jn*ga,pa=dt[4],aa=dt[5],Gn=dt[6],Jn=dt[7],h[4]=pa*Et+aa*ue+Gn*hr+Jn*Vr,h[5]=pa*Dt+aa*ye+Gn*pr+Jn*_r,h[6]=pa*Zt+aa*Ie+Gn*lr+Jn*ln,h[7]=pa*$t+aa*Xe+Gn*Xr+Jn*ga,pa=dt[8],aa=dt[9],Gn=dt[10],Jn=dt[11],h[8]=pa*Et+aa*ue+Gn*hr+Jn*Vr,h[9]=pa*Dt+aa*ye+Gn*pr+Jn*_r,h[10]=pa*Zt+aa*Ie+Gn*lr+Jn*ln,h[11]=pa*$t+aa*Xe+Gn*Xr+Jn*ga,pa=dt[12],aa=dt[13],Gn=dt[14],Jn=dt[15],h[12]=pa*Et+aa*ue+Gn*hr+Jn*Vr,h[13]=pa*Dt+aa*ye+Gn*pr+Jn*_r,h[14]=pa*Zt+aa*Ie+Gn*lr+Jn*ln,h[15]=pa*$t+aa*Xe+Gn*Xr+Jn*ga,h}function qn(h,T,dt){var Et=dt[0],Dt=dt[1],Zt=dt[2],$t,ue,ye,Ie,Xe,hr,pr,lr,Xr,Vr,_r,ln;return T===h?(h[12]=T[0]*Et+T[4]*Dt+T[8]*Zt+T[12],h[13]=T[1]*Et+T[5]*Dt+T[9]*Zt+T[13],h[14]=T[2]*Et+T[6]*Dt+T[10]*Zt+T[14],h[15]=T[3]*Et+T[7]*Dt+T[11]*Zt+T[15]):($t=T[0],ue=T[1],ye=T[2],Ie=T[3],Xe=T[4],hr=T[5],pr=T[6],lr=T[7],Xr=T[8],Vr=T[9],_r=T[10],ln=T[11],h[0]=$t,h[1]=ue,h[2]=ye,h[3]=Ie,h[4]=Xe,h[5]=hr,h[6]=pr,h[7]=lr,h[8]=Xr,h[9]=Vr,h[10]=_r,h[11]=ln,h[12]=$t*Et+Xe*Dt+Xr*Zt+T[12],h[13]=ue*Et+hr*Dt+Vr*Zt+T[13],h[14]=ye*Et+pr*Dt+_r*Zt+T[14],h[15]=Ie*Et+lr*Dt+ln*Zt+T[15]),h}function Vn(h,T,dt){var Et=dt[0],Dt=dt[1],Zt=dt[2];return h[0]=T[0]*Et,h[1]=T[1]*Et,h[2]=T[2]*Et,h[3]=T[3]*Et,h[4]=T[4]*Dt,h[5]=T[5]*Dt,h[6]=T[6]*Dt,h[7]=T[7]*Dt,h[8]=T[8]*Zt,h[9]=T[9]*Zt,h[10]=T[10]*Zt,h[11]=T[11]*Zt,h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15],h}function jn(h,T,dt,Et){var Dt=Et[0],Zt=Et[1],$t=Et[2],ue=Math.hypot(Dt,Zt,$t),ye,Ie,Xe,hr,pr,lr,Xr,Vr,_r,ln,ga,pa,aa,Gn,Jn,Di,Ci,_i,Ti,Ii,Bi,Qi,Ga,ii;return ue<E.EPSILON?null:(ue=1/ue,Dt*=ue,Zt*=ue,$t*=ue,ye=Math.sin(dt),Ie=Math.cos(dt),Xe=1-Ie,hr=T[0],pr=T[1],lr=T[2],Xr=T[3],Vr=T[4],_r=T[5],ln=T[6],ga=T[7],pa=T[8],aa=T[9],Gn=T[10],Jn=T[11],Di=Dt*Dt*Xe+Ie,Ci=Zt*Dt*Xe+$t*ye,_i=$t*Dt*Xe-Zt*ye,Ti=Dt*Zt*Xe-$t*ye,Ii=Zt*Zt*Xe+Ie,Bi=$t*Zt*Xe+Dt*ye,Qi=Dt*$t*Xe+Zt*ye,Ga=Zt*$t*Xe-Dt*ye,ii=$t*$t*Xe+Ie,h[0]=hr*Di+Vr*Ci+pa*_i,h[1]=pr*Di+_r*Ci+aa*_i,h[2]=lr*Di+ln*Ci+Gn*_i,h[3]=Xr*Di+ga*Ci+Jn*_i,h[4]=hr*Ti+Vr*Ii+pa*Bi,h[5]=pr*Ti+_r*Ii+aa*Bi,h[6]=lr*Ti+ln*Ii+Gn*Bi,h[7]=Xr*Ti+ga*Ii+Jn*Bi,h[8]=hr*Qi+Vr*Ga+pa*ii,h[9]=pr*Qi+_r*Ga+aa*ii,h[10]=lr*Qi+ln*Ga+Gn*ii,h[11]=Xr*Qi+ga*Ga+Jn*ii,T!==h&&(h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15]),h)}function ba(h,T,dt){var Et=Math.sin(dt),Dt=Math.cos(dt),Zt=T[4],$t=T[5],ue=T[6],ye=T[7],Ie=T[8],Xe=T[9],hr=T[10],pr=T[11];return T!==h&&(h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15]),h[4]=Zt*Dt+Ie*Et,h[5]=$t*Dt+Xe*Et,h[6]=ue*Dt+hr*Et,h[7]=ye*Dt+pr*Et,h[8]=Ie*Dt-Zt*Et,h[9]=Xe*Dt-$t*Et,h[10]=hr*Dt-ue*Et,h[11]=pr*Dt-ye*Et,h}function ma(h,T,dt){var Et=Math.sin(dt),Dt=Math.cos(dt),Zt=T[0],$t=T[1],ue=T[2],ye=T[3],Ie=T[8],Xe=T[9],hr=T[10],pr=T[11];return T!==h&&(h[4]=T[4],h[5]=T[5],h[6]=T[6],h[7]=T[7],h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15]),h[0]=Zt*Dt-Ie*Et,h[1]=$t*Dt-Xe*Et,h[2]=ue*Dt-hr*Et,h[3]=ye*Dt-pr*Et,h[8]=Zt*Et+Ie*Dt,h[9]=$t*Et+Xe*Dt,h[10]=ue*Et+hr*Dt,h[11]=ye*Et+pr*Dt,h}function Pa(h,T,dt){var Et=Math.sin(dt),Dt=Math.cos(dt),Zt=T[0],$t=T[1],ue=T[2],ye=T[3],Ie=T[4],Xe=T[5],hr=T[6],pr=T[7];return T!==h&&(h[8]=T[8],h[9]=T[9],h[10]=T[10],h[11]=T[11],h[12]=T[12],h[13]=T[13],h[14]=T[14],h[15]=T[15]),h[0]=Zt*Dt+Ie*Et,h[1]=$t*Dt+Xe*Et,h[2]=ue*Dt+hr*Et,h[3]=ye*Dt+pr*Et,h[4]=Ie*Dt-Zt*Et,h[5]=Xe*Dt-$t*Et,h[6]=hr*Dt-ue*Et,h[7]=pr*Dt-ye*Et,h}function wn(h,T){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=T[0],h[13]=T[1],h[14]=T[2],h[15]=1,h}function na(h,T){return h[0]=T[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=T[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=T[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Qn(h,T,dt){var Et=dt[0],Dt=dt[1],Zt=dt[2],$t=Math.hypot(Et,Dt,Zt),ue,ye,Ie;return $t<E.EPSILON?null:($t=1/$t,Et*=$t,Dt*=$t,Zt*=$t,ue=Math.sin(T),ye=Math.cos(T),Ie=1-ye,h[0]=Et*Et*Ie+ye,h[1]=Dt*Et*Ie+Zt*ue,h[2]=Zt*Et*Ie-Dt*ue,h[3]=0,h[4]=Et*Dt*Ie-Zt*ue,h[5]=Dt*Dt*Ie+ye,h[6]=Zt*Dt*Ie+Et*ue,h[7]=0,h[8]=Et*Zt*Ie+Dt*ue,h[9]=Dt*Zt*Ie-Et*ue,h[10]=Zt*Zt*Ie+ye,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function In(h,T){var dt=Math.sin(T),Et=Math.cos(T);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Et,h[6]=dt,h[7]=0,h[8]=0,h[9]=-dt,h[10]=Et,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Ca(h,T){var dt=Math.sin(T),Et=Math.cos(T);return h[0]=Et,h[1]=0,h[2]=-dt,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=dt,h[9]=0,h[10]=Et,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function q(h,T){var dt=Math.sin(T),Et=Math.cos(T);return h[0]=Et,h[1]=dt,h[2]=0,h[3]=0,h[4]=-dt,h[5]=Et,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ft(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=Et+Et,ye=Dt+Dt,Ie=Zt+Zt,Xe=Et*ue,hr=Et*ye,pr=Et*Ie,lr=Dt*ye,Xr=Dt*Ie,Vr=Zt*Ie,_r=$t*ue,ln=$t*ye,ga=$t*Ie;return h[0]=1-(lr+Vr),h[1]=hr+ga,h[2]=pr-ln,h[3]=0,h[4]=hr-ga,h[5]=1-(Xe+Vr),h[6]=Xr+_r,h[7]=0,h[8]=pr+ln,h[9]=Xr-_r,h[10]=1-(Xe+lr),h[11]=0,h[12]=dt[0],h[13]=dt[1],h[14]=dt[2],h[15]=1,h}function nt(h,T){var dt=new E.ARRAY_TYPE(3),Et=-T[0],Dt=-T[1],Zt=-T[2],$t=T[3],ue=T[4],ye=T[5],Ie=T[6],Xe=T[7],hr=Et*Et+Dt*Dt+Zt*Zt+$t*$t;return hr>0?(dt[0]=(ue*$t+Xe*Et+ye*Zt-Ie*Dt)*2/hr,dt[1]=(ye*$t+Xe*Dt+Ie*Et-ue*Zt)*2/hr,dt[2]=(Ie*$t+Xe*Zt+ue*Dt-ye*Et)*2/hr):(dt[0]=(ue*$t+Xe*Et+ye*Zt-Ie*Dt)*2,dt[1]=(ye*$t+Xe*Dt+Ie*Et-ue*Zt)*2,dt[2]=(Ie*$t+Xe*Zt+ue*Dt-ye*Et)*2),ft(h,T,dt),h}function L(h,T){return h[0]=T[12],h[1]=T[13],h[2]=T[14],h}function b(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[4],$t=T[5],ue=T[6],ye=T[8],Ie=T[9],Xe=T[10];return h[0]=Math.hypot(dt,Et,Dt),h[1]=Math.hypot(Zt,$t,ue),h[2]=Math.hypot(ye,Ie,Xe),h}function w(h,T){var dt=new E.ARRAY_TYPE(3);b(dt,T);var Et=1/dt[0],Dt=1/dt[1],Zt=1/dt[2],$t=T[0]*Et,ue=T[1]*Dt,ye=T[2]*Zt,Ie=T[4]*Et,Xe=T[5]*Dt,hr=T[6]*Zt,pr=T[8]*Et,lr=T[9]*Dt,Xr=T[10]*Zt,Vr=$t+Xe+Xr,_r=0;return Vr>0?(_r=Math.sqrt(Vr+1)*2,h[3]=.25*_r,h[0]=(hr-lr)/_r,h[1]=(pr-ye)/_r,h[2]=(ue-Ie)/_r):$t>Xe&&$t>Xr?(_r=Math.sqrt(1+$t-Xe-Xr)*2,h[3]=(hr-lr)/_r,h[0]=.25*_r,h[1]=(ue+Ie)/_r,h[2]=(pr+ye)/_r):Xe>Xr?(_r=Math.sqrt(1+Xe-$t-Xr)*2,h[3]=(pr-ye)/_r,h[0]=(ue+Ie)/_r,h[1]=.25*_r,h[2]=(hr+lr)/_r):(_r=Math.sqrt(1+Xr-$t-Xe)*2,h[3]=(ue-Ie)/_r,h[0]=(pr+ye)/_r,h[1]=(hr+lr)/_r,h[2]=.25*_r),h}function V(h,T,dt,Et){var Dt=T[0],Zt=T[1],$t=T[2],ue=T[3],ye=Dt+Dt,Ie=Zt+Zt,Xe=$t+$t,hr=Dt*ye,pr=Dt*Ie,lr=Dt*Xe,Xr=Zt*Ie,Vr=Zt*Xe,_r=$t*Xe,ln=ue*ye,ga=ue*Ie,pa=ue*Xe,aa=Et[0],Gn=Et[1],Jn=Et[2];return h[0]=(1-(Xr+_r))*aa,h[1]=(pr+pa)*aa,h[2]=(lr-ga)*aa,h[3]=0,h[4]=(pr-pa)*Gn,h[5]=(1-(hr+_r))*Gn,h[6]=(Vr+ln)*Gn,h[7]=0,h[8]=(lr+ga)*Jn,h[9]=(Vr-ln)*Jn,h[10]=(1-(hr+Xr))*Jn,h[11]=0,h[12]=dt[0],h[13]=dt[1],h[14]=dt[2],h[15]=1,h}function xt(h,T,dt,Et,Dt){var Zt=T[0],$t=T[1],ue=T[2],ye=T[3],Ie=Zt+Zt,Xe=$t+$t,hr=ue+ue,pr=Zt*Ie,lr=Zt*Xe,Xr=Zt*hr,Vr=$t*Xe,_r=$t*hr,ln=ue*hr,ga=ye*Ie,pa=ye*Xe,aa=ye*hr,Gn=Et[0],Jn=Et[1],Di=Et[2],Ci=Dt[0],_i=Dt[1],Ti=Dt[2],Ii=(1-(Vr+ln))*Gn,Bi=(lr+aa)*Gn,Qi=(Xr-pa)*Gn,Ga=(lr-aa)*Jn,ii=(1-(pr+ln))*Jn,gs=(_r+ga)*Jn,Es=(Xr+pa)*Di,Fo=(_r-ga)*Di,Eu=(1-(pr+Vr))*Di;return h[0]=Ii,h[1]=Bi,h[2]=Qi,h[3]=0,h[4]=Ga,h[5]=ii,h[6]=gs,h[7]=0,h[8]=Es,h[9]=Fo,h[10]=Eu,h[11]=0,h[12]=dt[0]+Ci-(Ii*Ci+Ga*_i+Es*Ti),h[13]=dt[1]+_i-(Bi*Ci+ii*_i+Fo*Ti),h[14]=dt[2]+Ti-(Qi*Ci+gs*_i+Eu*Ti),h[15]=1,h}function Ct(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[3],$t=dt+dt,ue=Et+Et,ye=Dt+Dt,Ie=dt*$t,Xe=Et*$t,hr=Et*ue,pr=Dt*$t,lr=Dt*ue,Xr=Dt*ye,Vr=Zt*$t,_r=Zt*ue,ln=Zt*ye;return h[0]=1-hr-Xr,h[1]=Xe+ln,h[2]=pr-_r,h[3]=0,h[4]=Xe-ln,h[5]=1-Ie-Xr,h[6]=lr+Vr,h[7]=0,h[8]=pr+_r,h[9]=lr-Vr,h[10]=1-Ie-hr,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function wt(h,T,dt,Et,Dt,Zt,$t){var ue=1/(dt-T),ye=1/(Dt-Et),Ie=1/(Zt-$t);return h[0]=Zt*2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Zt*2*ye,h[6]=0,h[7]=0,h[8]=(dt+T)*ue,h[9]=(Dt+Et)*ye,h[10]=($t+Zt)*Ie,h[11]=-1,h[12]=0,h[13]=0,h[14]=$t*Zt*2*Ie,h[15]=0,h}function Rt(h,T,dt,Et,Dt){var Zt=1/Math.tan(T/2),$t;return h[0]=Zt/dt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Zt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Dt!=null&&Dt!==1/0?($t=1/(Et-Dt),h[10]=(Dt+Et)*$t,h[14]=2*Dt*Et*$t):(h[10]=-1,h[14]=-2*Et),h}var Ce=Rt;function me(h,T,dt,Et,Dt){var Zt=1/Math.tan(T/2),$t;return h[0]=Zt/dt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Zt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Dt!=null&&Dt!==1/0?($t=1/(Et-Dt),h[10]=Dt*$t,h[14]=Dt*Et*$t):(h[10]=-1,h[14]=-Et),h}function Ke(h,T,dt,Et){var Dt=Math.tan(T.upDegrees*Math.PI/180),Zt=Math.tan(T.downDegrees*Math.PI/180),$t=Math.tan(T.leftDegrees*Math.PI/180),ue=Math.tan(T.rightDegrees*Math.PI/180),ye=2/($t+ue),Ie=2/(Dt+Zt);return h[0]=ye,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Ie,h[6]=0,h[7]=0,h[8]=-(($t-ue)*ye*.5),h[9]=(Dt-Zt)*Ie*.5,h[10]=Et/(dt-Et),h[11]=-1,h[12]=0,h[13]=0,h[14]=Et*dt/(dt-Et),h[15]=0,h}function yr(h,T,dt,Et,Dt,Zt,$t){var ue=1/(T-dt),ye=1/(Et-Dt),Ie=1/(Zt-$t);return h[0]=-2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*ye,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Ie,h[11]=0,h[12]=(T+dt)*ue,h[13]=(Dt+Et)*ye,h[14]=($t+Zt)*Ie,h[15]=1,h}var er=yr;function gr(h,T,dt,Et,Dt,Zt,$t){var ue=1/(T-dt),ye=1/(Et-Dt),Ie=1/(Zt-$t);return h[0]=-2*ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*ye,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Ie,h[11]=0,h[12]=(T+dt)*ue,h[13]=(Dt+Et)*ye,h[14]=Zt*Ie,h[15]=1,h}function dn(h,T,dt,Et){var Dt,Zt,$t,ue,ye,Ie,Xe,hr,pr,lr,Xr=T[0],Vr=T[1],_r=T[2],ln=Et[0],ga=Et[1],pa=Et[2],aa=dt[0],Gn=dt[1],Jn=dt[2];return Math.abs(Xr-aa)<E.EPSILON&&Math.abs(Vr-Gn)<E.EPSILON&&Math.abs(_r-Jn)<E.EPSILON?La(h):(Xe=Xr-aa,hr=Vr-Gn,pr=_r-Jn,lr=1/Math.hypot(Xe,hr,pr),Xe*=lr,hr*=lr,pr*=lr,Dt=ga*pr-pa*hr,Zt=pa*Xe-ln*pr,$t=ln*hr-ga*Xe,lr=Math.hypot(Dt,Zt,$t),lr?(lr=1/lr,Dt*=lr,Zt*=lr,$t*=lr):(Dt=0,Zt=0,$t=0),ue=hr*$t-pr*Zt,ye=pr*Dt-Xe*$t,Ie=Xe*Zt-hr*Dt,lr=Math.hypot(ue,ye,Ie),lr?(lr=1/lr,ue*=lr,ye*=lr,Ie*=lr):(ue=0,ye=0,Ie=0),h[0]=Dt,h[1]=ue,h[2]=Xe,h[3]=0,h[4]=Zt,h[5]=ye,h[6]=hr,h[7]=0,h[8]=$t,h[9]=Ie,h[10]=pr,h[11]=0,h[12]=-(Dt*Xr+Zt*Vr+$t*_r),h[13]=-(ue*Xr+ye*Vr+Ie*_r),h[14]=-(Xe*Xr+hr*Vr+pr*_r),h[15]=1,h)}function Ue(h,T,dt,Et){var Dt=T[0],Zt=T[1],$t=T[2],ue=Et[0],ye=Et[1],Ie=Et[2],Xe=Dt-dt[0],hr=Zt-dt[1],pr=$t-dt[2],lr=Xe*Xe+hr*hr+pr*pr;lr>0&&(lr=1/Math.sqrt(lr),Xe*=lr,hr*=lr,pr*=lr);var Xr=ye*pr-Ie*hr,Vr=Ie*Xe-ue*pr,_r=ue*hr-ye*Xe;return lr=Xr*Xr+Vr*Vr+_r*_r,lr>0&&(lr=1/Math.sqrt(lr),Xr*=lr,Vr*=lr,_r*=lr),h[0]=Xr,h[1]=Vr,h[2]=_r,h[3]=0,h[4]=hr*_r-pr*Vr,h[5]=pr*Xr-Xe*_r,h[6]=Xe*Vr-hr*Xr,h[7]=0,h[8]=Xe,h[9]=hr,h[10]=pr,h[11]=0,h[12]=Dt,h[13]=Zt,h[14]=$t,h[15]=1,h}function or(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function mr(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function $r(h,T,dt){return h[0]=T[0]+dt[0],h[1]=T[1]+dt[1],h[2]=T[2]+dt[2],h[3]=T[3]+dt[3],h[4]=T[4]+dt[4],h[5]=T[5]+dt[5],h[6]=T[6]+dt[6],h[7]=T[7]+dt[7],h[8]=T[8]+dt[8],h[9]=T[9]+dt[9],h[10]=T[10]+dt[10],h[11]=T[11]+dt[11],h[12]=T[12]+dt[12],h[13]=T[13]+dt[13],h[14]=T[14]+dt[14],h[15]=T[15]+dt[15],h}function Pr(h,T,dt){return h[0]=T[0]-dt[0],h[1]=T[1]-dt[1],h[2]=T[2]-dt[2],h[3]=T[3]-dt[3],h[4]=T[4]-dt[4],h[5]=T[5]-dt[5],h[6]=T[6]-dt[6],h[7]=T[7]-dt[7],h[8]=T[8]-dt[8],h[9]=T[9]-dt[9],h[10]=T[10]-dt[10],h[11]=T[11]-dt[11],h[12]=T[12]-dt[12],h[13]=T[13]-dt[13],h[14]=T[14]-dt[14],h[15]=T[15]-dt[15],h}function va(h,T,dt){return h[0]=T[0]*dt,h[1]=T[1]*dt,h[2]=T[2]*dt,h[3]=T[3]*dt,h[4]=T[4]*dt,h[5]=T[5]*dt,h[6]=T[6]*dt,h[7]=T[7]*dt,h[8]=T[8]*dt,h[9]=T[9]*dt,h[10]=T[10]*dt,h[11]=T[11]*dt,h[12]=T[12]*dt,h[13]=T[13]*dt,h[14]=T[14]*dt,h[15]=T[15]*dt,h}function Sa(h,T,dt,Et){return h[0]=T[0]+dt[0]*Et,h[1]=T[1]+dt[1]*Et,h[2]=T[2]+dt[2]*Et,h[3]=T[3]+dt[3]*Et,h[4]=T[4]+dt[4]*Et,h[5]=T[5]+dt[5]*Et,h[6]=T[6]+dt[6]*Et,h[7]=T[7]+dt[7]*Et,h[8]=T[8]+dt[8]*Et,h[9]=T[9]+dt[9]*Et,h[10]=T[10]+dt[10]*Et,h[11]=T[11]+dt[11]*Et,h[12]=T[12]+dt[12]*Et,h[13]=T[13]+dt[13]*Et,h[14]=T[14]+dt[14]*Et,h[15]=T[15]+dt[15]*Et,h}function Mn(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]&&h[4]===T[4]&&h[5]===T[5]&&h[6]===T[6]&&h[7]===T[7]&&h[8]===T[8]&&h[9]===T[9]&&h[10]===T[10]&&h[11]===T[11]&&h[12]===T[12]&&h[13]===T[13]&&h[14]===T[14]&&h[15]===T[15]}function Un(h,T){var dt=h[0],Et=h[1],Dt=h[2],Zt=h[3],$t=h[4],ue=h[5],ye=h[6],Ie=h[7],Xe=h[8],hr=h[9],pr=h[10],lr=h[11],Xr=h[12],Vr=h[13],_r=h[14],ln=h[15],ga=T[0],pa=T[1],aa=T[2],Gn=T[3],Jn=T[4],Di=T[5],Ci=T[6],_i=T[7],Ti=T[8],Ii=T[9],Bi=T[10],Qi=T[11],Ga=T[12],ii=T[13],gs=T[14],Es=T[15];return Math.abs(dt-ga)<=E.EPSILON*Math.max(1,Math.abs(dt),Math.abs(ga))&&Math.abs(Et-pa)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(pa))&&Math.abs(Dt-aa)<=E.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(aa))&&Math.abs(Zt-Gn)<=E.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(Gn))&&Math.abs($t-Jn)<=E.EPSILON*Math.max(1,Math.abs($t),Math.abs(Jn))&&Math.abs(ue-Di)<=E.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Di))&&Math.abs(ye-Ci)<=E.EPSILON*Math.max(1,Math.abs(ye),Math.abs(Ci))&&Math.abs(Ie-_i)<=E.EPSILON*Math.max(1,Math.abs(Ie),Math.abs(_i))&&Math.abs(Xe-Ti)<=E.EPSILON*Math.max(1,Math.abs(Xe),Math.abs(Ti))&&Math.abs(hr-Ii)<=E.EPSILON*Math.max(1,Math.abs(hr),Math.abs(Ii))&&Math.abs(pr-Bi)<=E.EPSILON*Math.max(1,Math.abs(pr),Math.abs(Bi))&&Math.abs(lr-Qi)<=E.EPSILON*Math.max(1,Math.abs(lr),Math.abs(Qi))&&Math.abs(Xr-Ga)<=E.EPSILON*Math.max(1,Math.abs(Xr),Math.abs(Ga))&&Math.abs(Vr-ii)<=E.EPSILON*Math.max(1,Math.abs(Vr),Math.abs(ii))&&Math.abs(_r-gs)<=E.EPSILON*Math.max(1,Math.abs(_r),Math.abs(gs))&&Math.abs(ln-Es)<=E.EPSILON*Math.max(1,Math.abs(ln),Math.abs(Es))}var Fa=yn,Ea=Pr,Kr=z(277160);function kn(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function _e(h){var T=new E.ARRAY_TYPE(4);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T}function Nt(h,T,dt,Et){var Dt=new E.ARRAY_TYPE(4);return Dt[0]=h,Dt[1]=T,Dt[2]=dt,Dt[3]=Et,Dt}function fe(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h}function Te(h,T,dt,Et,Dt){return h[0]=T,h[1]=dt,h[2]=Et,h[3]=Dt,h}function Me(h,T,dt){return h[0]=T[0]+dt[0],h[1]=T[1]+dt[1],h[2]=T[2]+dt[2],h[3]=T[3]+dt[3],h}function Le(h,T,dt){return h[0]=T[0]-dt[0],h[1]=T[1]-dt[1],h[2]=T[2]-dt[2],h[3]=T[3]-dt[3],h}function nr(h,T,dt){return h[0]=T[0]*dt[0],h[1]=T[1]*dt[1],h[2]=T[2]*dt[2],h[3]=T[3]*dt[3],h}function Dr(h,T,dt){return h[0]=T[0]/dt[0],h[1]=T[1]/dt[1],h[2]=T[2]/dt[2],h[3]=T[3]/dt[3],h}function jr(h,T){return h[0]=Math.ceil(T[0]),h[1]=Math.ceil(T[1]),h[2]=Math.ceil(T[2]),h[3]=Math.ceil(T[3]),h}function Sn(h,T){return h[0]=Math.floor(T[0]),h[1]=Math.floor(T[1]),h[2]=Math.floor(T[2]),h[3]=Math.floor(T[3]),h}function An(h,T,dt){return h[0]=Math.min(T[0],dt[0]),h[1]=Math.min(T[1],dt[1]),h[2]=Math.min(T[2],dt[2]),h[3]=Math.min(T[3],dt[3]),h}function Fn(h,T,dt){return h[0]=Math.max(T[0],dt[0]),h[1]=Math.max(T[1],dt[1]),h[2]=Math.max(T[2],dt[2]),h[3]=Math.max(T[3],dt[3]),h}function da(h,T){return h[0]=Math.round(T[0]),h[1]=Math.round(T[1]),h[2]=Math.round(T[2]),h[3]=Math.round(T[3]),h}function wa(h,T,dt){return h[0]=T[0]*dt,h[1]=T[1]*dt,h[2]=T[2]*dt,h[3]=T[3]*dt,h}function hi(h,T,dt,Et){return h[0]=T[0]+dt[0]*Et,h[1]=T[1]+dt[1]*Et,h[2]=T[2]+dt[2]*Et,h[3]=T[3]+dt[3]*Et,h}function Wn(h,T){var dt=T[0]-h[0],Et=T[1]-h[1],Dt=T[2]-h[2],Zt=T[3]-h[3];return Math.hypot(dt,Et,Dt,Zt)}function fi(h,T){var dt=T[0]-h[0],Et=T[1]-h[1],Dt=T[2]-h[2],Zt=T[3]-h[3];return dt*dt+Et*Et+Dt*Dt+Zt*Zt}function Oo(h){var T=h[0],dt=h[1],Et=h[2],Dt=h[3];return Math.hypot(T,dt,Et,Dt)}function Da(h){var T=h[0],dt=h[1],Et=h[2],Dt=h[3];return T*T+dt*dt+Et*Et+Dt*Dt}function xi(h,T){return h[0]=-T[0],h[1]=-T[1],h[2]=-T[2],h[3]=-T[3],h}function co(h,T){return h[0]=1/T[0],h[1]=1/T[1],h[2]=1/T[2],h[3]=1/T[3],h}function Lo(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[3],$t=dt*dt+Et*Et+Dt*Dt+Zt*Zt;return $t>0&&($t=1/Math.sqrt($t)),h[0]=dt*$t,h[1]=Et*$t,h[2]=Dt*$t,h[3]=Zt*$t,h}function Eo(h,T){return h[0]*T[0]+h[1]*T[1]+h[2]*T[2]+h[3]*T[3]}function lo(h,T,dt,Et){var Dt=dt[0]*Et[1]-dt[1]*Et[0],Zt=dt[0]*Et[2]-dt[2]*Et[0],$t=dt[0]*Et[3]-dt[3]*Et[0],ue=dt[1]*Et[2]-dt[2]*Et[1],ye=dt[1]*Et[3]-dt[3]*Et[1],Ie=dt[2]*Et[3]-dt[3]*Et[2],Xe=T[0],hr=T[1],pr=T[2],lr=T[3];return h[0]=hr*Ie-pr*ye+lr*ue,h[1]=-(Xe*Ie)+pr*$t-lr*Zt,h[2]=Xe*ye-hr*$t+lr*Dt,h[3]=-(Xe*ue)+hr*Zt-pr*Dt,h}function Zi(h,T,dt,Et){var Dt=T[0],Zt=T[1],$t=T[2],ue=T[3];return h[0]=Dt+Et*(dt[0]-Dt),h[1]=Zt+Et*(dt[1]-Zt),h[2]=$t+Et*(dt[2]-$t),h[3]=ue+Et*(dt[3]-ue),h}function ms(h,T){T=T||1;var dt,Et,Dt,Zt,$t,ue;do dt=E.RANDOM()*2-1,Et=E.RANDOM()*2-1,$t=dt*dt+Et*Et;while($t>=1);do Dt=E.RANDOM()*2-1,Zt=E.RANDOM()*2-1,ue=Dt*Dt+Zt*Zt;while(ue>=1);var ye=Math.sqrt((1-$t)/ue);return h[0]=T*dt,h[1]=T*Et,h[2]=T*Dt*ye,h[3]=T*Zt*ye,h}function zi(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3];return h[0]=dt[0]*Et+dt[4]*Dt+dt[8]*Zt+dt[12]*$t,h[1]=dt[1]*Et+dt[5]*Dt+dt[9]*Zt+dt[13]*$t,h[2]=dt[2]*Et+dt[6]*Dt+dt[10]*Zt+dt[14]*$t,h[3]=dt[3]*Et+dt[7]*Dt+dt[11]*Zt+dt[15]*$t,h}function Ui(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=dt[0],ue=dt[1],ye=dt[2],Ie=dt[3],Xe=Ie*Et+ue*Zt-ye*Dt,hr=Ie*Dt+ye*Et-$t*Zt,pr=Ie*Zt+$t*Dt-ue*Et,lr=-$t*Et-ue*Dt-ye*Zt;return h[0]=Xe*Ie+lr*-$t+hr*-ye-pr*-ue,h[1]=hr*Ie+lr*-ue+pr*-$t-Xe*-ye,h[2]=pr*Ie+lr*-ye+Xe*-ue-hr*-$t,h[3]=T[3],h}function xs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function Cs(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function Yo(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]}function Ao(h,T){var dt=h[0],Et=h[1],Dt=h[2],Zt=h[3],$t=T[0],ue=T[1],ye=T[2],Ie=T[3];return Math.abs(dt-$t)<=E.EPSILON*Math.max(1,Math.abs(dt),Math.abs($t))&&Math.abs(Et-ue)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ue))&&Math.abs(Dt-ye)<=E.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(ye))&&Math.abs(Zt-Ie)<=E.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(Ie))}var Do=Le,js=nr,Pn=Dr,Co=Wn,No=fi,Wi=Oo,On=Da,Po=function(){var h=kn();return function(T,dt,Et,Dt,Zt,$t){var ue,ye;for(dt||(dt=4),Et||(Et=0),Dt?ye=Math.min(Dt*dt+Et,T.length):ye=T.length,ue=Et;ue<ye;ue+=dt)h[0]=T[ue],h[1]=T[ue+1],h[2]=T[ue+2],h[3]=T[ue+3],Zt(h,h,$t),T[ue]=h[0],T[ue+1]=h[1],T[ue+2]=h[2],T[ue+3]=h[3];return T}}();function Ai(){var h=new E.ARRAY_TYPE(4);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Vo(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function jo(h,T,dt){dt=dt*.5;var Et=Math.sin(dt);return h[0]=Et*T[0],h[1]=Et*T[1],h[2]=Et*T[2],h[3]=Math.cos(dt),h}function bs(h,T){var dt=Math.acos(T[3])*2,Et=Math.sin(dt/2);return Et>E.EPSILON?(h[0]=T[0]/Et,h[1]=T[1]/Et,h[2]=T[2]/Et):(h[0]=1,h[1]=0,h[2]=0),dt}function ao(h,T){var dt=$i(h,T);return Math.acos(2*dt*dt-1)}function io(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=dt[0],ye=dt[1],Ie=dt[2],Xe=dt[3];return h[0]=Et*Xe+$t*ue+Dt*Ie-Zt*ye,h[1]=Dt*Xe+$t*ye+Zt*ue-Et*Ie,h[2]=Zt*Xe+$t*Ie+Et*ye-Dt*ue,h[3]=$t*Xe-Et*ue-Dt*ye-Zt*Ie,h}function ni(h,T,dt){dt*=.5;var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=Math.sin(dt),ye=Math.cos(dt);return h[0]=Et*ye+$t*ue,h[1]=Dt*ye+Zt*ue,h[2]=Zt*ye-Dt*ue,h[3]=$t*ye-Et*ue,h}function ho(h,T,dt){dt*=.5;var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=Math.sin(dt),ye=Math.cos(dt);return h[0]=Et*ye-Zt*ue,h[1]=Dt*ye+$t*ue,h[2]=Zt*ye+Et*ue,h[3]=$t*ye-Dt*ue,h}function ko(h,T,dt){dt*=.5;var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=Math.sin(dt),ye=Math.cos(dt);return h[0]=Et*ye+Dt*ue,h[1]=Dt*ye-Et*ue,h[2]=Zt*ye+$t*ue,h[3]=$t*ye-Zt*ue,h}function Ho(h,T){var dt=T[0],Et=T[1],Dt=T[2];return h[0]=dt,h[1]=Et,h[2]=Dt,h[3]=Math.sqrt(Math.abs(1-dt*dt-Et*Et-Dt*Dt)),h}function Ro(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[3],$t=Math.sqrt(dt*dt+Et*Et+Dt*Dt),ue=Math.exp(Zt),ye=$t>0?ue*Math.sin($t)/$t:0;return h[0]=dt*ye,h[1]=Et*ye,h[2]=Dt*ye,h[3]=ue*Math.cos($t),h}function fs(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[3],$t=Math.sqrt(dt*dt+Et*Et+Dt*Dt),ue=$t>0?Math.atan2($t,Zt)/$t:0;return h[0]=dt*ue,h[1]=Et*ue,h[2]=Dt*ue,h[3]=.5*Math.log(dt*dt+Et*Et+Dt*Dt+Zt*Zt),h}function Ko(h,T,dt){return fs(h,T),ki(h,h,dt),Ro(h,h),h}function is(h,T,dt,Et){var Dt=T[0],Zt=T[1],$t=T[2],ue=T[3],ye=dt[0],Ie=dt[1],Xe=dt[2],hr=dt[3],pr,lr,Xr,Vr,_r;return lr=Dt*ye+Zt*Ie+$t*Xe+ue*hr,lr<0&&(lr=-lr,ye=-ye,Ie=-Ie,Xe=-Xe,hr=-hr),1-lr>E.EPSILON?(pr=Math.acos(lr),Xr=Math.sin(pr),Vr=Math.sin((1-Et)*pr)/Xr,_r=Math.sin(Et*pr)/Xr):(Vr=1-Et,_r=Et),h[0]=Vr*Dt+_r*ye,h[1]=Vr*Zt+_r*Ie,h[2]=Vr*$t+_r*Xe,h[3]=Vr*ue+_r*hr,h}function Wa(h){var T=E.RANDOM(),dt=E.RANDOM(),Et=E.RANDOM(),Dt=Math.sqrt(1-T),Zt=Math.sqrt(T);return h[0]=Dt*Math.sin(2*Math.PI*dt),h[1]=Dt*Math.cos(2*Math.PI*dt),h[2]=Zt*Math.sin(2*Math.PI*Et),h[3]=Zt*Math.cos(2*Math.PI*Et),h}function Ts(h,T){var dt=T[0],Et=T[1],Dt=T[2],Zt=T[3],$t=dt*dt+Et*Et+Dt*Dt+Zt*Zt,ue=$t?1/$t:0;return h[0]=-dt*ue,h[1]=-Et*ue,h[2]=-Dt*ue,h[3]=Zt*ue,h}function eu(h,T){return h[0]=-T[0],h[1]=-T[1],h[2]=-T[2],h[3]=T[3],h}function Xi(h,T){var dt=T[0]+T[4]+T[8],Et;if(dt>0)Et=Math.sqrt(dt+1),h[3]=.5*Et,Et=.5/Et,h[0]=(T[5]-T[7])*Et,h[1]=(T[6]-T[2])*Et,h[2]=(T[1]-T[3])*Et;else{var Dt=0;T[4]>T[0]&&(Dt=1),T[8]>T[Dt*3+Dt]&&(Dt=2);var Zt=(Dt+1)%3,$t=(Dt+2)%3;Et=Math.sqrt(T[Dt*3+Dt]-T[Zt*3+Zt]-T[$t*3+$t]+1),h[Dt]=.5*Et,Et=.5/Et,h[3]=(T[Zt*3+$t]-T[$t*3+Zt])*Et,h[Zt]=(T[Zt*3+Dt]+T[Dt*3+Zt])*Et,h[$t]=(T[$t*3+Dt]+T[Dt*3+$t])*Et}return h}function cs(h,T,dt,Et){var Dt=.5*Math.PI/180;T*=Dt,dt*=Dt,Et*=Dt;var Zt=Math.sin(T),$t=Math.cos(T),ue=Math.sin(dt),ye=Math.cos(dt),Ie=Math.sin(Et),Xe=Math.cos(Et);return h[0]=Zt*ye*Xe-$t*ue*Ie,h[1]=$t*ue*Xe+Zt*ye*Ie,h[2]=$t*ye*Ie-Zt*ue*Xe,h[3]=$t*ye*Xe+Zt*ue*Ie,h}function wo(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var Yi=_e,vo=Nt,ca=fe,Va=Te,mi=Me,oo=io,ki=wa,$i=Eo,Zo=Zi,So=Oo,os=So,go=Da,Rs=go,ru=Lo,Is=Yo,ci=Ao,Bo=function(){var h=Kr.create(),T=Kr.fromValues(1,0,0),dt=Kr.fromValues(0,1,0);return function(Et,Dt,Zt){var $t=Kr.dot(Dt,Zt);return $t<-.999999?(Kr.cross(h,T,Dt),Kr.len(h)<1e-6&&Kr.cross(h,dt,Dt),Kr.normalize(h,h),jo(Et,h,Math.PI),Et):$t>.999999?(Et[0]=0,Et[1]=0,Et[2]=0,Et[3]=1,Et):(Kr.cross(h,Dt,Zt),Et[0]=h[0],Et[1]=h[1],Et[2]=h[2],Et[3]=1+$t,ru(Et,Et))}}(),Fu=function(){var h=Ai(),T=Ai();return function(dt,Et,Dt,Zt,$t,ue){return is(h,Et,$t,ue),is(T,Dt,Zt,ue),is(dt,h,T,2*ue*(1-ue)),dt}}(),po=function(){var h=pn.create();return function(T,dt,Et,Dt){return h[0]=Et[0],h[3]=Et[1],h[6]=Et[2],h[1]=Dt[0],h[4]=Dt[1],h[7]=Dt[2],h[2]=-dt[0],h[5]=-dt[1],h[8]=-dt[2],ru(T,Xi(T,h))}}();function Bs(){var h=new E.ARRAY_TYPE(8);return E.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function Os(h){var T=new E.ARRAY_TYPE(8);return T[0]=h[0],T[1]=h[1],T[2]=h[2],T[3]=h[3],T[4]=h[4],T[5]=h[5],T[6]=h[6],T[7]=h[7],T}function $o(h,T,dt,Et,Dt,Zt,$t,ue){var ye=new E.ARRAY_TYPE(8);return ye[0]=h,ye[1]=T,ye[2]=dt,ye[3]=Et,ye[4]=Dt,ye[5]=Zt,ye[6]=$t,ye[7]=ue,ye}function Fs(h,T,dt,Et,Dt,Zt,$t){var ue=new E.ARRAY_TYPE(8);ue[0]=h,ue[1]=T,ue[2]=dt,ue[3]=Et;var ye=Dt*.5,Ie=Zt*.5,Xe=$t*.5;return ue[4]=ye*Et+Ie*dt-Xe*T,ue[5]=Ie*Et+Xe*h-ye*dt,ue[6]=Xe*Et+ye*T-Ie*h,ue[7]=-ye*h-Ie*T-Xe*dt,ue}function ls(h,T,dt){var Et=dt[0]*.5,Dt=dt[1]*.5,Zt=dt[2]*.5,$t=T[0],ue=T[1],ye=T[2],Ie=T[3];return h[0]=$t,h[1]=ue,h[2]=ye,h[3]=Ie,h[4]=Et*Ie+Dt*ye-Zt*ue,h[5]=Dt*Ie+Zt*$t-Et*ye,h[6]=Zt*Ie+Et*ue-Dt*$t,h[7]=-Et*$t-Dt*ue-Zt*ye,h}function qo(h,T){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=T[0]*.5,h[5]=T[1]*.5,h[6]=T[2]*.5,h[7]=0,h}function hs(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function nu(h,T){var dt=Ai();w(dt,T);var Et=new E.ARRAY_TYPE(3);return L(Et,T),ls(h,dt,Et),h}function Gs(h,T){return h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3],h[4]=T[4],h[5]=T[5],h[6]=T[6],h[7]=T[7],h}function vs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function Tt(h,T,dt,Et,Dt,Zt,$t,ue,ye){return h[0]=T,h[1]=dt,h[2]=Et,h[3]=Dt,h[4]=Zt,h[5]=$t,h[6]=ue,h[7]=ye,h}var qt=ca;function Fe(h,T){return h[0]=T[4],h[1]=T[5],h[2]=T[6],h[3]=T[7],h}var Ze=ca;function Sr(h,T){return h[4]=T[0],h[5]=T[1],h[6]=T[2],h[7]=T[3],h}function Jr(h,T){var dt=T[4],Et=T[5],Dt=T[6],Zt=T[7],$t=-T[0],ue=-T[1],ye=-T[2],Ie=T[3];return h[0]=(dt*Ie+Zt*$t+Et*ye-Dt*ue)*2,h[1]=(Et*Ie+Zt*ue+Dt*$t-dt*ye)*2,h[2]=(Dt*Ie+Zt*ye+dt*ue-Et*$t)*2,h}function nn(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=dt[0]*.5,ye=dt[1]*.5,Ie=dt[2]*.5,Xe=T[4],hr=T[5],pr=T[6],lr=T[7];return h[0]=Et,h[1]=Dt,h[2]=Zt,h[3]=$t,h[4]=$t*ue+Dt*Ie-Zt*ye+Xe,h[5]=$t*ye+Zt*ue-Et*Ie+hr,h[6]=$t*Ie+Et*ye-Dt*ue+pr,h[7]=-Et*ue-Dt*ye-Zt*Ie+lr,h}function $n(h,T,dt){var Et=-T[0],Dt=-T[1],Zt=-T[2],$t=T[3],ue=T[4],ye=T[5],Ie=T[6],Xe=T[7],hr=ue*$t+Xe*Et+ye*Zt-Ie*Dt,pr=ye*$t+Xe*Dt+Ie*Et-ue*Zt,lr=Ie*$t+Xe*Zt+ue*Dt-ye*Et,Xr=Xe*$t-ue*Et-ye*Dt-Ie*Zt;return ni(h,T,dt),Et=h[0],Dt=h[1],Zt=h[2],$t=h[3],h[4]=hr*$t+Xr*Et+pr*Zt-lr*Dt,h[5]=pr*$t+Xr*Dt+lr*Et-hr*Zt,h[6]=lr*$t+Xr*Zt+hr*Dt-pr*Et,h[7]=Xr*$t-hr*Et-pr*Dt-lr*Zt,h}function ai(h,T,dt){var Et=-T[0],Dt=-T[1],Zt=-T[2],$t=T[3],ue=T[4],ye=T[5],Ie=T[6],Xe=T[7],hr=ue*$t+Xe*Et+ye*Zt-Ie*Dt,pr=ye*$t+Xe*Dt+Ie*Et-ue*Zt,lr=Ie*$t+Xe*Zt+ue*Dt-ye*Et,Xr=Xe*$t-ue*Et-ye*Dt-Ie*Zt;return ho(h,T,dt),Et=h[0],Dt=h[1],Zt=h[2],$t=h[3],h[4]=hr*$t+Xr*Et+pr*Zt-lr*Dt,h[5]=pr*$t+Xr*Dt+lr*Et-hr*Zt,h[6]=lr*$t+Xr*Zt+hr*Dt-pr*Et,h[7]=Xr*$t-hr*Et-pr*Dt-lr*Zt,h}function qi(h,T,dt){var Et=-T[0],Dt=-T[1],Zt=-T[2],$t=T[3],ue=T[4],ye=T[5],Ie=T[6],Xe=T[7],hr=ue*$t+Xe*Et+ye*Zt-Ie*Dt,pr=ye*$t+Xe*Dt+Ie*Et-ue*Zt,lr=Ie*$t+Xe*Zt+ue*Dt-ye*Et,Xr=Xe*$t-ue*Et-ye*Dt-Ie*Zt;return ko(h,T,dt),Et=h[0],Dt=h[1],Zt=h[2],$t=h[3],h[4]=hr*$t+Xr*Et+pr*Zt-lr*Dt,h[5]=pr*$t+Xr*Dt+lr*Et-hr*Zt,h[6]=lr*$t+Xr*Zt+hr*Dt-pr*Et,h[7]=Xr*$t-hr*Et-pr*Dt-lr*Zt,h}function so(h,T,dt){var Et=dt[0],Dt=dt[1],Zt=dt[2],$t=dt[3],ue=T[0],ye=T[1],Ie=T[2],Xe=T[3];return h[0]=ue*$t+Xe*Et+ye*Zt-Ie*Dt,h[1]=ye*$t+Xe*Dt+Ie*Et-ue*Zt,h[2]=Ie*$t+Xe*Zt+ue*Dt-ye*Et,h[3]=Xe*$t-ue*Et-ye*Dt-Ie*Zt,ue=T[4],ye=T[5],Ie=T[6],Xe=T[7],h[4]=ue*$t+Xe*Et+ye*Zt-Ie*Dt,h[5]=ye*$t+Xe*Dt+Ie*Et-ue*Zt,h[6]=Ie*$t+Xe*Zt+ue*Dt-ye*Et,h[7]=Xe*$t-ue*Et-ye*Dt-Ie*Zt,h}function zs(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=dt[0],ye=dt[1],Ie=dt[2],Xe=dt[3];return h[0]=Et*Xe+$t*ue+Dt*Ie-Zt*ye,h[1]=Dt*Xe+$t*ye+Zt*ue-Et*Ie,h[2]=Zt*Xe+$t*Ie+Et*ye-Dt*ue,h[3]=$t*Xe-Et*ue-Dt*ye-Zt*Ie,ue=dt[4],ye=dt[5],Ie=dt[6],Xe=dt[7],h[4]=Et*Xe+$t*ue+Dt*Ie-Zt*ye,h[5]=Dt*Xe+$t*ye+Zt*ue-Et*Ie,h[6]=Zt*Xe+$t*Ie+Et*ye-Dt*ue,h[7]=$t*Xe-Et*ue-Dt*ye-Zt*Ie,h}function xu(h,T,dt,Et){if(Math.abs(Et)<E.EPSILON)return Gs(h,T);var Dt=Math.hypot(dt[0],dt[1],dt[2]);Et=Et*.5;var Zt=Math.sin(Et),$t=Zt*dt[0]/Dt,ue=Zt*dt[1]/Dt,ye=Zt*dt[2]/Dt,Ie=Math.cos(Et),Xe=T[0],hr=T[1],pr=T[2],lr=T[3];h[0]=Xe*Ie+lr*$t+hr*ye-pr*ue,h[1]=hr*Ie+lr*ue+pr*$t-Xe*ye,h[2]=pr*Ie+lr*ye+Xe*ue-hr*$t,h[3]=lr*Ie-Xe*$t-hr*ue-pr*ye;var Xr=T[4],Vr=T[5],_r=T[6],ln=T[7];return h[4]=Xr*Ie+ln*$t+Vr*ye-_r*ue,h[5]=Vr*Ie+ln*ue+_r*$t-Xr*ye,h[6]=_r*Ie+ln*ye+Xr*ue-Vr*$t,h[7]=ln*Ie-Xr*$t-Vr*ue-_r*ye,h}function Ri(h,T,dt){return h[0]=T[0]+dt[0],h[1]=T[1]+dt[1],h[2]=T[2]+dt[2],h[3]=T[3]+dt[3],h[4]=T[4]+dt[4],h[5]=T[5]+dt[5],h[6]=T[6]+dt[6],h[7]=T[7]+dt[7],h}function yo(h,T,dt){var Et=T[0],Dt=T[1],Zt=T[2],$t=T[3],ue=dt[4],ye=dt[5],Ie=dt[6],Xe=dt[7],hr=T[4],pr=T[5],lr=T[6],Xr=T[7],Vr=dt[0],_r=dt[1],ln=dt[2],ga=dt[3];return h[0]=Et*ga+$t*Vr+Dt*ln-Zt*_r,h[1]=Dt*ga+$t*_r+Zt*Vr-Et*ln,h[2]=Zt*ga+$t*ln+Et*_r-Dt*Vr,h[3]=$t*ga-Et*Vr-Dt*_r-Zt*ln,h[4]=Et*Xe+$t*ue+Dt*Ie-Zt*ye+hr*ga+Xr*Vr+pr*ln-lr*_r,h[5]=Dt*Xe+$t*ye+Zt*ue-Et*Ie+pr*ga+Xr*_r+lr*Vr-hr*ln,h[6]=Zt*Xe+$t*Ie+Et*ye-Dt*ue+lr*ga+Xr*ln+hr*_r-pr*Vr,h[7]=$t*Xe-Et*ue-Dt*ye-Zt*Ie+Xr*ga-hr*Vr-pr*_r-lr*ln,h}var Hs=yo;function Gu(h,T,dt){return h[0]=T[0]*dt,h[1]=T[1]*dt,h[2]=T[2]*dt,h[3]=T[3]*dt,h[4]=T[4]*dt,h[5]=T[5]*dt,h[6]=T[6]*dt,h[7]=T[7]*dt,h}var bu=$i;function au(h,T,dt,Et){var Dt=1-Et;return bu(T,dt)<0&&(Et=-Et),h[0]=T[0]*Dt+dt[0]*Et,h[1]=T[1]*Dt+dt[1]*Et,h[2]=T[2]*Dt+dt[2]*Et,h[3]=T[3]*Dt+dt[3]*Et,h[4]=T[4]*Dt+dt[4]*Et,h[5]=T[5]*Dt+dt[5]*Et,h[6]=T[6]*Dt+dt[6]*Et,h[7]=T[7]*Dt+dt[7]*Et,h}function Ks(h,T){var dt=ds(T);return h[0]=-T[0]/dt,h[1]=-T[1]/dt,h[2]=-T[2]/dt,h[3]=T[3]/dt,h[4]=-T[4]/dt,h[5]=-T[5]/dt,h[6]=-T[6]/dt,h[7]=T[7]/dt,h}function iu(h,T){return h[0]=-T[0],h[1]=-T[1],h[2]=-T[2],h[3]=T[3],h[4]=-T[4],h[5]=-T[5],h[6]=-T[6],h[7]=T[7],h}var Ls=So,Zs=Ls,ds=go,To=ds;function sf(h,T){var dt=ds(T);if(dt>0){dt=Math.sqrt(dt);var Et=T[0]/dt,Dt=T[1]/dt,Zt=T[2]/dt,$t=T[3]/dt,ue=T[4],ye=T[5],Ie=T[6],Xe=T[7],hr=Et*ue+Dt*ye+Zt*Ie+$t*Xe;h[0]=Et,h[1]=Dt,h[2]=Zt,h[3]=$t,h[4]=(ue-Et*hr)/dt,h[5]=(ye-Dt*hr)/dt,h[6]=(Ie-Zt*hr)/dt,h[7]=(Xe-$t*hr)/dt}return h}function Df(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function Nf(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]&&h[4]===T[4]&&h[5]===T[5]&&h[6]===T[6]&&h[7]===T[7]}function Ds(h,T){var dt=h[0],Et=h[1],Dt=h[2],Zt=h[3],$t=h[4],ue=h[5],ye=h[6],Ie=h[7],Xe=T[0],hr=T[1],pr=T[2],lr=T[3],Xr=T[4],Vr=T[5],_r=T[6],ln=T[7];return Math.abs(dt-Xe)<=E.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Xe))&&Math.abs(Et-hr)<=E.EPSILON*Math.max(1,Math.abs(Et),Math.abs(hr))&&Math.abs(Dt-pr)<=E.EPSILON*Math.max(1,Math.abs(Dt),Math.abs(pr))&&Math.abs(Zt-lr)<=E.EPSILON*Math.max(1,Math.abs(Zt),Math.abs(lr))&&Math.abs($t-Xr)<=E.EPSILON*Math.max(1,Math.abs($t),Math.abs(Xr))&&Math.abs(ue-Vr)<=E.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Vr))&&Math.abs(ye-_r)<=E.EPSILON*Math.max(1,Math.abs(ye),Math.abs(_r))&&Math.abs(Ie-ln)<=E.EPSILON*Math.max(1,Math.abs(Ie),Math.abs(ln))}var Pf=z(631437)},935600:function(dr,R,z){"use strict";z.r(R),z.d(R,{add:function(){return ot},adjoint:function(){return m},clone:function(){return P},copy:function(){return N},create:function(){return X},determinant:function(){return I},equals:function(){return Jt},exactEquals:function(){return It},frob:function(){return J},fromMat2d:function(){return Y},fromMat4:function(){return k},fromQuat:function(){return W},fromRotation:function(){return d},fromScaling:function(){return it},fromTranslation:function(){return x},fromValues:function(){return D},identity:function(){return y},invert:function(){return _},mul:function(){return zt},multiply:function(){return A},multiplyScalar:function(){return gt},multiplyScalarAndAdd:function(){return Pt},normalFromMat4:function(){return K},projection:function(){return Q},rotate:function(){return U},scale:function(){return j},set:function(){return E},str:function(){return rt},sub:function(){return kt},subtract:function(){return vt},translate:function(){return O},transpose:function(){return M}});var B=z(73633);function X(){var $=new B.ARRAY_TYPE(9);return B.ARRAY_TYPE!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}function k($,lt){return $[0]=lt[0],$[1]=lt[1],$[2]=lt[2],$[3]=lt[4],$[4]=lt[5],$[5]=lt[6],$[6]=lt[8],$[7]=lt[9],$[8]=lt[10],$}function P($){var lt=new B.ARRAY_TYPE(9);return lt[0]=$[0],lt[1]=$[1],lt[2]=$[2],lt[3]=$[3],lt[4]=$[4],lt[5]=$[5],lt[6]=$[6],lt[7]=$[7],lt[8]=$[8],lt}function N($,lt){return $[0]=lt[0],$[1]=lt[1],$[2]=lt[2],$[3]=lt[3],$[4]=lt[4],$[5]=lt[5],$[6]=lt[6],$[7]=lt[7],$[8]=lt[8],$}function D($,lt,St,Ut,Ft,ee,ve,be,Ht){var Yt=new B.ARRAY_TYPE(9);return Yt[0]=$,Yt[1]=lt,Yt[2]=St,Yt[3]=Ut,Yt[4]=Ft,Yt[5]=ee,Yt[6]=ve,Yt[7]=be,Yt[8]=Ht,Yt}function E($,lt,St,Ut,Ft,ee,ve,be,Ht,Yt){return $[0]=lt,$[1]=St,$[2]=Ut,$[3]=Ft,$[4]=ee,$[5]=ve,$[6]=be,$[7]=Ht,$[8]=Yt,$}function y($){return $[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=1,$[5]=0,$[6]=0,$[7]=0,$[8]=1,$}function M($,lt){if($===lt){var St=lt[1],Ut=lt[2],Ft=lt[5];$[1]=lt[3],$[2]=lt[6],$[3]=St,$[5]=lt[7],$[6]=Ut,$[7]=Ft}else $[0]=lt[0],$[1]=lt[3],$[2]=lt[6],$[3]=lt[1],$[4]=lt[4],$[5]=lt[7],$[6]=lt[2],$[7]=lt[5],$[8]=lt[8];return $}function _($,lt){var St=lt[0],Ut=lt[1],Ft=lt[2],ee=lt[3],ve=lt[4],be=lt[5],Ht=lt[6],Yt=lt[7],de=lt[8],Ee=de*ve-be*Yt,ge=-de*ee+be*Ht,Ot=Yt*ee-ve*Ht,Xt=St*Ee+Ut*ge+Ft*Ot;return Xt?(Xt=1/Xt,$[0]=Ee*Xt,$[1]=(-de*Ut+Ft*Yt)*Xt,$[2]=(be*Ut-Ft*ve)*Xt,$[3]=ge*Xt,$[4]=(de*St-Ft*Ht)*Xt,$[5]=(-be*St+Ft*ee)*Xt,$[6]=Ot*Xt,$[7]=(-Yt*St+Ut*Ht)*Xt,$[8]=(ve*St-Ut*ee)*Xt,$):null}function m($,lt){var St=lt[0],Ut=lt[1],Ft=lt[2],ee=lt[3],ve=lt[4],be=lt[5],Ht=lt[6],Yt=lt[7],de=lt[8];return $[0]=ve*de-be*Yt,$[1]=Ft*Yt-Ut*de,$[2]=Ut*be-Ft*ve,$[3]=be*Ht-ee*de,$[4]=St*de-Ft*Ht,$[5]=Ft*ee-St*be,$[6]=ee*Yt-ve*Ht,$[7]=Ut*Ht-St*Yt,$[8]=St*ve-Ut*ee,$}function I($){var lt=$[0],St=$[1],Ut=$[2],Ft=$[3],ee=$[4],ve=$[5],be=$[6],Ht=$[7],Yt=$[8];return lt*(Yt*ee-ve*Ht)+St*(-Yt*Ft+ve*be)+Ut*(Ht*Ft-ee*be)}function A($,lt,St){var Ut=lt[0],Ft=lt[1],ee=lt[2],ve=lt[3],be=lt[4],Ht=lt[5],Yt=lt[6],de=lt[7],Ee=lt[8],ge=St[0],Ot=St[1],Xt=St[2],ce=St[3],Lt=St[4],Kt=St[5],pe=St[6],We=St[7],Je=St[8];return $[0]=ge*Ut+Ot*ve+Xt*Yt,$[1]=ge*Ft+Ot*be+Xt*de,$[2]=ge*ee+Ot*Ht+Xt*Ee,$[3]=ce*Ut+Lt*ve+Kt*Yt,$[4]=ce*Ft+Lt*be+Kt*de,$[5]=ce*ee+Lt*Ht+Kt*Ee,$[6]=pe*Ut+We*ve+Je*Yt,$[7]=pe*Ft+We*be+Je*de,$[8]=pe*ee+We*Ht+Je*Ee,$}function O($,lt,St){var Ut=lt[0],Ft=lt[1],ee=lt[2],ve=lt[3],be=lt[4],Ht=lt[5],Yt=lt[6],de=lt[7],Ee=lt[8],ge=St[0],Ot=St[1];return $[0]=Ut,$[1]=Ft,$[2]=ee,$[3]=ve,$[4]=be,$[5]=Ht,$[6]=ge*Ut+Ot*ve+Yt,$[7]=ge*Ft+Ot*be+de,$[8]=ge*ee+Ot*Ht+Ee,$}function U($,lt,St){var Ut=lt[0],Ft=lt[1],ee=lt[2],ve=lt[3],be=lt[4],Ht=lt[5],Yt=lt[6],de=lt[7],Ee=lt[8],ge=Math.sin(St),Ot=Math.cos(St);return $[0]=Ot*Ut+ge*ve,$[1]=Ot*Ft+ge*be,$[2]=Ot*ee+ge*Ht,$[3]=Ot*ve-ge*Ut,$[4]=Ot*be-ge*Ft,$[5]=Ot*Ht-ge*ee,$[6]=Yt,$[7]=de,$[8]=Ee,$}function j($,lt,St){var Ut=St[0],Ft=St[1];return $[0]=Ut*lt[0],$[1]=Ut*lt[1],$[2]=Ut*lt[2],$[3]=Ft*lt[3],$[4]=Ft*lt[4],$[5]=Ft*lt[5],$[6]=lt[6],$[7]=lt[7],$[8]=lt[8],$}function x($,lt){return $[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=1,$[5]=0,$[6]=lt[0],$[7]=lt[1],$[8]=1,$}function d($,lt){var St=Math.sin(lt),Ut=Math.cos(lt);return $[0]=Ut,$[1]=St,$[2]=0,$[3]=-St,$[4]=Ut,$[5]=0,$[6]=0,$[7]=0,$[8]=1,$}function it($,lt){return $[0]=lt[0],$[1]=0,$[2]=0,$[3]=0,$[4]=lt[1],$[5]=0,$[6]=0,$[7]=0,$[8]=1,$}function Y($,lt){return $[0]=lt[0],$[1]=lt[1],$[2]=0,$[3]=lt[2],$[4]=lt[3],$[5]=0,$[6]=lt[4],$[7]=lt[5],$[8]=1,$}function W($,lt){var St=lt[0],Ut=lt[1],Ft=lt[2],ee=lt[3],ve=St+St,be=Ut+Ut,Ht=Ft+Ft,Yt=St*ve,de=Ut*ve,Ee=Ut*be,ge=Ft*ve,Ot=Ft*be,Xt=Ft*Ht,ce=ee*ve,Lt=ee*be,Kt=ee*Ht;return $[0]=1-Ee-Xt,$[3]=de-Kt,$[6]=ge+Lt,$[1]=de+Kt,$[4]=1-Yt-Xt,$[7]=Ot-ce,$[2]=ge-Lt,$[5]=Ot+ce,$[8]=1-Yt-Ee,$}function K($,lt){var St=lt[0],Ut=lt[1],Ft=lt[2],ee=lt[3],ve=lt[4],be=lt[5],Ht=lt[6],Yt=lt[7],de=lt[8],Ee=lt[9],ge=lt[10],Ot=lt[11],Xt=lt[12],ce=lt[13],Lt=lt[14],Kt=lt[15],pe=St*be-Ut*ve,We=St*Ht-Ft*ve,Je=St*Yt-ee*ve,Mr=Ut*Ht-Ft*be,Vt=Ut*Yt-ee*be,on=Ft*Yt-ee*Ht,sn=de*ce-Ee*Xt,pn=de*Lt-ge*Xt,En=de*Kt-Ot*Xt,Yn=Ee*Lt-ge*ce,ea=Ee*Kt-Ot*ce,Nn=ge*Kt-Ot*Lt,Zn=pe*Nn-We*ea+Je*Yn+Mr*En-Vt*pn+on*sn;return Zn?(Zn=1/Zn,$[0]=(be*Nn-Ht*ea+Yt*Yn)*Zn,$[1]=(Ht*En-ve*Nn-Yt*pn)*Zn,$[2]=(ve*ea-be*En+Yt*sn)*Zn,$[3]=(Ft*ea-Ut*Nn-ee*Yn)*Zn,$[4]=(St*Nn-Ft*En+ee*pn)*Zn,$[5]=(Ut*En-St*ea-ee*sn)*Zn,$[6]=(ce*on-Lt*Vt+Kt*Mr)*Zn,$[7]=(Lt*Je-Xt*on-Kt*We)*Zn,$[8]=(Xt*Vt-ce*Je+Kt*pe)*Zn,$):null}function Q($,lt,St){return $[0]=2/lt,$[1]=0,$[2]=0,$[3]=0,$[4]=-2/St,$[5]=0,$[6]=-1,$[7]=1,$[8]=1,$}function rt($){return"mat3("+$[0]+", "+$[1]+", "+$[2]+", "+$[3]+", "+$[4]+", "+$[5]+", "+$[6]+", "+$[7]+", "+$[8]+")"}function J($){return Math.hypot($[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],$[8])}function ot($,lt,St){return $[0]=lt[0]+St[0],$[1]=lt[1]+St[1],$[2]=lt[2]+St[2],$[3]=lt[3]+St[3],$[4]=lt[4]+St[4],$[5]=lt[5]+St[5],$[6]=lt[6]+St[6],$[7]=lt[7]+St[7],$[8]=lt[8]+St[8],$}function vt($,lt,St){return $[0]=lt[0]-St[0],$[1]=lt[1]-St[1],$[2]=lt[2]-St[2],$[3]=lt[3]-St[3],$[4]=lt[4]-St[4],$[5]=lt[5]-St[5],$[6]=lt[6]-St[6],$[7]=lt[7]-St[7],$[8]=lt[8]-St[8],$}function gt($,lt,St){return $[0]=lt[0]*St,$[1]=lt[1]*St,$[2]=lt[2]*St,$[3]=lt[3]*St,$[4]=lt[4]*St,$[5]=lt[5]*St,$[6]=lt[6]*St,$[7]=lt[7]*St,$[8]=lt[8]*St,$}function Pt($,lt,St,Ut){return $[0]=lt[0]+St[0]*Ut,$[1]=lt[1]+St[1]*Ut,$[2]=lt[2]+St[2]*Ut,$[3]=lt[3]+St[3]*Ut,$[4]=lt[4]+St[4]*Ut,$[5]=lt[5]+St[5]*Ut,$[6]=lt[6]+St[6]*Ut,$[7]=lt[7]+St[7]*Ut,$[8]=lt[8]+St[8]*Ut,$}function It($,lt){return $[0]===lt[0]&&$[1]===lt[1]&&$[2]===lt[2]&&$[3]===lt[3]&&$[4]===lt[4]&&$[5]===lt[5]&&$[6]===lt[6]&&$[7]===lt[7]&&$[8]===lt[8]}function Jt($,lt){var St=$[0],Ut=$[1],Ft=$[2],ee=$[3],ve=$[4],be=$[5],Ht=$[6],Yt=$[7],de=$[8],Ee=lt[0],ge=lt[1],Ot=lt[2],Xt=lt[3],ce=lt[4],Lt=lt[5],Kt=lt[6],pe=lt[7],We=lt[8];return Math.abs(St-Ee)<=B.EPSILON*Math.max(1,Math.abs(St),Math.abs(Ee))&&Math.abs(Ut-ge)<=B.EPSILON*Math.max(1,Math.abs(Ut),Math.abs(ge))&&Math.abs(Ft-Ot)<=B.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(Ot))&&Math.abs(ee-Xt)<=B.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Xt))&&Math.abs(ve-ce)<=B.EPSILON*Math.max(1,Math.abs(ve),Math.abs(ce))&&Math.abs(be-Lt)<=B.EPSILON*Math.max(1,Math.abs(be),Math.abs(Lt))&&Math.abs(Ht-Kt)<=B.EPSILON*Math.max(1,Math.abs(Ht),Math.abs(Kt))&&Math.abs(Yt-pe)<=B.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(pe))&&Math.abs(de-We)<=B.EPSILON*Math.max(1,Math.abs(de),Math.abs(We))}var zt=A,kt=vt},631437:function(dr,R,z){"use strict";z.r(R),z.d(R,{add:function(){return E},angle:function(){return $},ceil:function(){return m},clone:function(){return k},copy:function(){return N},create:function(){return X},cross:function(){return ot},dist:function(){return Yt},distance:function(){return d},div:function(){return Ht},divide:function(){return _},dot:function(){return J},equals:function(){return Ft},exactEquals:function(){return Ut},floor:function(){return I},forEach:function(){return ge},fromValues:function(){return P},inverse:function(){return Q},len:function(){return ee},length:function(){return Y},lerp:function(){return vt},max:function(){return O},min:function(){return A},mul:function(){return be},multiply:function(){return M},negate:function(){return K},normalize:function(){return rt},random:function(){return gt},rotate:function(){return kt},round:function(){return U},scale:function(){return j},scaleAndAdd:function(){return x},set:function(){return D},sqrDist:function(){return de},sqrLen:function(){return Ee},squaredDistance:function(){return it},squaredLength:function(){return W},str:function(){return St},sub:function(){return ve},subtract:function(){return y},transformMat2:function(){return Pt},transformMat2d:function(){return It},transformMat3:function(){return Jt},transformMat4:function(){return zt},zero:function(){return lt}});var B=z(73633);function X(){var Ot=new B.ARRAY_TYPE(2);return B.ARRAY_TYPE!=Float32Array&&(Ot[0]=0,Ot[1]=0),Ot}function k(Ot){var Xt=new B.ARRAY_TYPE(2);return Xt[0]=Ot[0],Xt[1]=Ot[1],Xt}function P(Ot,Xt){var ce=new B.ARRAY_TYPE(2);return ce[0]=Ot,ce[1]=Xt,ce}function N(Ot,Xt){return Ot[0]=Xt[0],Ot[1]=Xt[1],Ot}function D(Ot,Xt,ce){return Ot[0]=Xt,Ot[1]=ce,Ot}function E(Ot,Xt,ce){return Ot[0]=Xt[0]+ce[0],Ot[1]=Xt[1]+ce[1],Ot}function y(Ot,Xt,ce){return Ot[0]=Xt[0]-ce[0],Ot[1]=Xt[1]-ce[1],Ot}function M(Ot,Xt,ce){return Ot[0]=Xt[0]*ce[0],Ot[1]=Xt[1]*ce[1],Ot}function _(Ot,Xt,ce){return Ot[0]=Xt[0]/ce[0],Ot[1]=Xt[1]/ce[1],Ot}function m(Ot,Xt){return Ot[0]=Math.ceil(Xt[0]),Ot[1]=Math.ceil(Xt[1]),Ot}function I(Ot,Xt){return Ot[0]=Math.floor(Xt[0]),Ot[1]=Math.floor(Xt[1]),Ot}function A(Ot,Xt,ce){return Ot[0]=Math.min(Xt[0],ce[0]),Ot[1]=Math.min(Xt[1],ce[1]),Ot}function O(Ot,Xt,ce){return Ot[0]=Math.max(Xt[0],ce[0]),Ot[1]=Math.max(Xt[1],ce[1]),Ot}function U(Ot,Xt){return Ot[0]=Math.round(Xt[0]),Ot[1]=Math.round(Xt[1]),Ot}function j(Ot,Xt,ce){return Ot[0]=Xt[0]*ce,Ot[1]=Xt[1]*ce,Ot}function x(Ot,Xt,ce,Lt){return Ot[0]=Xt[0]+ce[0]*Lt,Ot[1]=Xt[1]+ce[1]*Lt,Ot}function d(Ot,Xt){var ce=Xt[0]-Ot[0],Lt=Xt[1]-Ot[1];return Math.hypot(ce,Lt)}function it(Ot,Xt){var ce=Xt[0]-Ot[0],Lt=Xt[1]-Ot[1];return ce*ce+Lt*Lt}function Y(Ot){var Xt=Ot[0],ce=Ot[1];return Math.hypot(Xt,ce)}function W(Ot){var Xt=Ot[0],ce=Ot[1];return Xt*Xt+ce*ce}function K(Ot,Xt){return Ot[0]=-Xt[0],Ot[1]=-Xt[1],Ot}function Q(Ot,Xt){return Ot[0]=1/Xt[0],Ot[1]=1/Xt[1],Ot}function rt(Ot,Xt){var ce=Xt[0],Lt=Xt[1],Kt=ce*ce+Lt*Lt;return Kt>0&&(Kt=1/Math.sqrt(Kt)),Ot[0]=Xt[0]*Kt,Ot[1]=Xt[1]*Kt,Ot}function J(Ot,Xt){return Ot[0]*Xt[0]+Ot[1]*Xt[1]}function ot(Ot,Xt,ce){var Lt=Xt[0]*ce[1]-Xt[1]*ce[0];return Ot[0]=Ot[1]=0,Ot[2]=Lt,Ot}function vt(Ot,Xt,ce,Lt){var Kt=Xt[0],pe=Xt[1];return Ot[0]=Kt+Lt*(ce[0]-Kt),Ot[1]=pe+Lt*(ce[1]-pe),Ot}function gt(Ot,Xt){Xt=Xt||1;var ce=B.RANDOM()*2*Math.PI;return Ot[0]=Math.cos(ce)*Xt,Ot[1]=Math.sin(ce)*Xt,Ot}function Pt(Ot,Xt,ce){var Lt=Xt[0],Kt=Xt[1];return Ot[0]=ce[0]*Lt+ce[2]*Kt,Ot[1]=ce[1]*Lt+ce[3]*Kt,Ot}function It(Ot,Xt,ce){var Lt=Xt[0],Kt=Xt[1];return Ot[0]=ce[0]*Lt+ce[2]*Kt+ce[4],Ot[1]=ce[1]*Lt+ce[3]*Kt+ce[5],Ot}function Jt(Ot,Xt,ce){var Lt=Xt[0],Kt=Xt[1];return Ot[0]=ce[0]*Lt+ce[3]*Kt+ce[6],Ot[1]=ce[1]*Lt+ce[4]*Kt+ce[7],Ot}function zt(Ot,Xt,ce){var Lt=Xt[0],Kt=Xt[1];return Ot[0]=ce[0]*Lt+ce[4]*Kt+ce[12],Ot[1]=ce[1]*Lt+ce[5]*Kt+ce[13],Ot}function kt(Ot,Xt,ce,Lt){var Kt=Xt[0]-ce[0],pe=Xt[1]-ce[1],We=Math.sin(Lt),Je=Math.cos(Lt);return Ot[0]=Kt*Je-pe*We+ce[0],Ot[1]=Kt*We+pe*Je+ce[1],Ot}function $(Ot,Xt){var ce=Ot[0],Lt=Ot[1],Kt=Xt[0],pe=Xt[1],We=Math.sqrt(ce*ce+Lt*Lt)*Math.sqrt(Kt*Kt+pe*pe),Je=We&&(ce*Kt+Lt*pe)/We;return Math.acos(Math.min(Math.max(Je,-1),1))}function lt(Ot){return Ot[0]=0,Ot[1]=0,Ot}function St(Ot){return"vec2("+Ot[0]+", "+Ot[1]+")"}function Ut(Ot,Xt){return Ot[0]===Xt[0]&&Ot[1]===Xt[1]}function Ft(Ot,Xt){var ce=Ot[0],Lt=Ot[1],Kt=Xt[0],pe=Xt[1];return Math.abs(ce-Kt)<=B.EPSILON*Math.max(1,Math.abs(ce),Math.abs(Kt))&&Math.abs(Lt-pe)<=B.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(pe))}var ee=Y,ve=y,be=M,Ht=_,Yt=d,de=it,Ee=W,ge=function(){var Ot=X();return function(Xt,ce,Lt,Kt,pe,We){var Je,Mr;for(ce||(ce=2),Lt||(Lt=0),Kt?Mr=Math.min(Kt*ce+Lt,Xt.length):Mr=Xt.length,Je=Lt;Je<Mr;Je+=ce)Ot[0]=Xt[Je],Ot[1]=Xt[Je+1],pe(Ot,Ot,We),Xt[Je]=Ot[0],Xt[Je+1]=Ot[1];return Xt}}()},277160:function(dr,R,z){"use strict";z.r(R),z.d(R,{add:function(){return y},angle:function(){return Ut},bezier:function(){return Pt},ceil:function(){return I},clone:function(){return k},copy:function(){return D},create:function(){return X},cross:function(){return ot},dist:function(){return Ee},distance:function(){return it},div:function(){return de},divide:function(){return m},dot:function(){return J},equals:function(){return be},exactEquals:function(){return ve},floor:function(){return A},forEach:function(){return ce},fromValues:function(){return N},hermite:function(){return gt},inverse:function(){return Q},len:function(){return Ot},length:function(){return P},lerp:function(){return vt},max:function(){return U},min:function(){return O},mul:function(){return Yt},multiply:function(){return _},negate:function(){return K},normalize:function(){return rt},random:function(){return It},rotateX:function(){return $},rotateY:function(){return lt},rotateZ:function(){return St},round:function(){return j},scale:function(){return x},scaleAndAdd:function(){return d},set:function(){return E},sqrDist:function(){return ge},sqrLen:function(){return Xt},squaredDistance:function(){return Y},squaredLength:function(){return W},str:function(){return ee},sub:function(){return Ht},subtract:function(){return M},transformMat3:function(){return zt},transformMat4:function(){return Jt},transformQuat:function(){return kt},zero:function(){return Ft}});var B=z(73633);function X(){var Lt=new B.ARRAY_TYPE(3);return B.ARRAY_TYPE!=Float32Array&&(Lt[0]=0,Lt[1]=0,Lt[2]=0),Lt}function k(Lt){var Kt=new B.ARRAY_TYPE(3);return Kt[0]=Lt[0],Kt[1]=Lt[1],Kt[2]=Lt[2],Kt}function P(Lt){var Kt=Lt[0],pe=Lt[1],We=Lt[2];return Math.hypot(Kt,pe,We)}function N(Lt,Kt,pe){var We=new B.ARRAY_TYPE(3);return We[0]=Lt,We[1]=Kt,We[2]=pe,We}function D(Lt,Kt){return Lt[0]=Kt[0],Lt[1]=Kt[1],Lt[2]=Kt[2],Lt}function E(Lt,Kt,pe,We){return Lt[0]=Kt,Lt[1]=pe,Lt[2]=We,Lt}function y(Lt,Kt,pe){return Lt[0]=Kt[0]+pe[0],Lt[1]=Kt[1]+pe[1],Lt[2]=Kt[2]+pe[2],Lt}function M(Lt,Kt,pe){return Lt[0]=Kt[0]-pe[0],Lt[1]=Kt[1]-pe[1],Lt[2]=Kt[2]-pe[2],Lt}function _(Lt,Kt,pe){return Lt[0]=Kt[0]*pe[0],Lt[1]=Kt[1]*pe[1],Lt[2]=Kt[2]*pe[2],Lt}function m(Lt,Kt,pe){return Lt[0]=Kt[0]/pe[0],Lt[1]=Kt[1]/pe[1],Lt[2]=Kt[2]/pe[2],Lt}function I(Lt,Kt){return Lt[0]=Math.ceil(Kt[0]),Lt[1]=Math.ceil(Kt[1]),Lt[2]=Math.ceil(Kt[2]),Lt}function A(Lt,Kt){return Lt[0]=Math.floor(Kt[0]),Lt[1]=Math.floor(Kt[1]),Lt[2]=Math.floor(Kt[2]),Lt}function O(Lt,Kt,pe){return Lt[0]=Math.min(Kt[0],pe[0]),Lt[1]=Math.min(Kt[1],pe[1]),Lt[2]=Math.min(Kt[2],pe[2]),Lt}function U(Lt,Kt,pe){return Lt[0]=Math.max(Kt[0],pe[0]),Lt[1]=Math.max(Kt[1],pe[1]),Lt[2]=Math.max(Kt[2],pe[2]),Lt}function j(Lt,Kt){return Lt[0]=Math.round(Kt[0]),Lt[1]=Math.round(Kt[1]),Lt[2]=Math.round(Kt[2]),Lt}function x(Lt,Kt,pe){return Lt[0]=Kt[0]*pe,Lt[1]=Kt[1]*pe,Lt[2]=Kt[2]*pe,Lt}function d(Lt,Kt,pe,We){return Lt[0]=Kt[0]+pe[0]*We,Lt[1]=Kt[1]+pe[1]*We,Lt[2]=Kt[2]+pe[2]*We,Lt}function it(Lt,Kt){var pe=Kt[0]-Lt[0],We=Kt[1]-Lt[1],Je=Kt[2]-Lt[2];return Math.hypot(pe,We,Je)}function Y(Lt,Kt){var pe=Kt[0]-Lt[0],We=Kt[1]-Lt[1],Je=Kt[2]-Lt[2];return pe*pe+We*We+Je*Je}function W(Lt){var Kt=Lt[0],pe=Lt[1],We=Lt[2];return Kt*Kt+pe*pe+We*We}function K(Lt,Kt){return Lt[0]=-Kt[0],Lt[1]=-Kt[1],Lt[2]=-Kt[2],Lt}function Q(Lt,Kt){return Lt[0]=1/Kt[0],Lt[1]=1/Kt[1],Lt[2]=1/Kt[2],Lt}function rt(Lt,Kt){var pe=Kt[0],We=Kt[1],Je=Kt[2],Mr=pe*pe+We*We+Je*Je;return Mr>0&&(Mr=1/Math.sqrt(Mr)),Lt[0]=Kt[0]*Mr,Lt[1]=Kt[1]*Mr,Lt[2]=Kt[2]*Mr,Lt}function J(Lt,Kt){return Lt[0]*Kt[0]+Lt[1]*Kt[1]+Lt[2]*Kt[2]}function ot(Lt,Kt,pe){var We=Kt[0],Je=Kt[1],Mr=Kt[2],Vt=pe[0],on=pe[1],sn=pe[2];return Lt[0]=Je*sn-Mr*on,Lt[1]=Mr*Vt-We*sn,Lt[2]=We*on-Je*Vt,Lt}function vt(Lt,Kt,pe,We){var Je=Kt[0],Mr=Kt[1],Vt=Kt[2];return Lt[0]=Je+We*(pe[0]-Je),Lt[1]=Mr+We*(pe[1]-Mr),Lt[2]=Vt+We*(pe[2]-Vt),Lt}function gt(Lt,Kt,pe,We,Je,Mr){var Vt=Mr*Mr,on=Vt*(2*Mr-3)+1,sn=Vt*(Mr-2)+Mr,pn=Vt*(Mr-1),En=Vt*(3-2*Mr);return Lt[0]=Kt[0]*on+pe[0]*sn+We[0]*pn+Je[0]*En,Lt[1]=Kt[1]*on+pe[1]*sn+We[1]*pn+Je[1]*En,Lt[2]=Kt[2]*on+pe[2]*sn+We[2]*pn+Je[2]*En,Lt}function Pt(Lt,Kt,pe,We,Je,Mr){var Vt=1-Mr,on=Vt*Vt,sn=Mr*Mr,pn=on*Vt,En=3*Mr*on,Yn=3*sn*Vt,ea=sn*Mr;return Lt[0]=Kt[0]*pn+pe[0]*En+We[0]*Yn+Je[0]*ea,Lt[1]=Kt[1]*pn+pe[1]*En+We[1]*Yn+Je[1]*ea,Lt[2]=Kt[2]*pn+pe[2]*En+We[2]*Yn+Je[2]*ea,Lt}function It(Lt,Kt){Kt=Kt||1;var pe=B.RANDOM()*2*Math.PI,We=B.RANDOM()*2-1,Je=Math.sqrt(1-We*We)*Kt;return Lt[0]=Math.cos(pe)*Je,Lt[1]=Math.sin(pe)*Je,Lt[2]=We*Kt,Lt}function Jt(Lt,Kt,pe){var We=Kt[0],Je=Kt[1],Mr=Kt[2],Vt=pe[3]*We+pe[7]*Je+pe[11]*Mr+pe[15];return Vt=Vt||1,Lt[0]=(pe[0]*We+pe[4]*Je+pe[8]*Mr+pe[12])/Vt,Lt[1]=(pe[1]*We+pe[5]*Je+pe[9]*Mr+pe[13])/Vt,Lt[2]=(pe[2]*We+pe[6]*Je+pe[10]*Mr+pe[14])/Vt,Lt}function zt(Lt,Kt,pe){var We=Kt[0],Je=Kt[1],Mr=Kt[2];return Lt[0]=We*pe[0]+Je*pe[3]+Mr*pe[6],Lt[1]=We*pe[1]+Je*pe[4]+Mr*pe[7],Lt[2]=We*pe[2]+Je*pe[5]+Mr*pe[8],Lt}function kt(Lt,Kt,pe){var We=pe[0],Je=pe[1],Mr=pe[2],Vt=pe[3],on=Kt[0],sn=Kt[1],pn=Kt[2],En=Je*pn-Mr*sn,Yn=Mr*on-We*pn,ea=We*sn-Je*on,Nn=Je*ea-Mr*Yn,Zn=Mr*En-We*ea,La=We*Yn-Je*En,Aa=Vt*2;return En*=Aa,Yn*=Aa,ea*=Aa,Nn*=2,Zn*=2,La*=2,Lt[0]=on+En+Nn,Lt[1]=sn+Yn+Zn,Lt[2]=pn+ea+La,Lt}function $(Lt,Kt,pe,We){var Je=[],Mr=[];return Je[0]=Kt[0]-pe[0],Je[1]=Kt[1]-pe[1],Je[2]=Kt[2]-pe[2],Mr[0]=Je[0],Mr[1]=Je[1]*Math.cos(We)-Je[2]*Math.sin(We),Mr[2]=Je[1]*Math.sin(We)+Je[2]*Math.cos(We),Lt[0]=Mr[0]+pe[0],Lt[1]=Mr[1]+pe[1],Lt[2]=Mr[2]+pe[2],Lt}function lt(Lt,Kt,pe,We){var Je=[],Mr=[];return Je[0]=Kt[0]-pe[0],Je[1]=Kt[1]-pe[1],Je[2]=Kt[2]-pe[2],Mr[0]=Je[2]*Math.sin(We)+Je[0]*Math.cos(We),Mr[1]=Je[1],Mr[2]=Je[2]*Math.cos(We)-Je[0]*Math.sin(We),Lt[0]=Mr[0]+pe[0],Lt[1]=Mr[1]+pe[1],Lt[2]=Mr[2]+pe[2],Lt}function St(Lt,Kt,pe,We){var Je=[],Mr=[];return Je[0]=Kt[0]-pe[0],Je[1]=Kt[1]-pe[1],Je[2]=Kt[2]-pe[2],Mr[0]=Je[0]*Math.cos(We)-Je[1]*Math.sin(We),Mr[1]=Je[0]*Math.sin(We)+Je[1]*Math.cos(We),Mr[2]=Je[2],Lt[0]=Mr[0]+pe[0],Lt[1]=Mr[1]+pe[1],Lt[2]=Mr[2]+pe[2],Lt}function Ut(Lt,Kt){var pe=Lt[0],We=Lt[1],Je=Lt[2],Mr=Kt[0],Vt=Kt[1],on=Kt[2],sn=Math.sqrt(pe*pe+We*We+Je*Je),pn=Math.sqrt(Mr*Mr+Vt*Vt+on*on),En=sn*pn,Yn=En&&J(Lt,Kt)/En;return Math.acos(Math.min(Math.max(Yn,-1),1))}function Ft(Lt){return Lt[0]=0,Lt[1]=0,Lt[2]=0,Lt}function ee(Lt){return"vec3("+Lt[0]+", "+Lt[1]+", "+Lt[2]+")"}function ve(Lt,Kt){return Lt[0]===Kt[0]&&Lt[1]===Kt[1]&&Lt[2]===Kt[2]}function be(Lt,Kt){var pe=Lt[0],We=Lt[1],Je=Lt[2],Mr=Kt[0],Vt=Kt[1],on=Kt[2];return Math.abs(pe-Mr)<=B.EPSILON*Math.max(1,Math.abs(pe),Math.abs(Mr))&&Math.abs(We-Vt)<=B.EPSILON*Math.max(1,Math.abs(We),Math.abs(Vt))&&Math.abs(Je-on)<=B.EPSILON*Math.max(1,Math.abs(Je),Math.abs(on))}var Ht=M,Yt=_,de=m,Ee=it,ge=Y,Ot=P,Xt=W,ce=function(){var Lt=X();return function(Kt,pe,We,Je,Mr,Vt){var on,sn;for(pe||(pe=3),We||(We=0),Je?sn=Math.min(Je*pe+We,Kt.length):sn=Kt.length,on=We;on<sn;on+=pe)Lt[0]=Kt[on],Lt[1]=Kt[on+1],Lt[2]=Kt[on+2],Mr(Lt,Lt,Vt),Kt[on]=Lt[0],Kt[on+1]=Lt[1],Kt[on+2]=Lt[2];return Kt}}()},738186:function(dr){var R=[],z=[],B="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function X(P,N){if(N=N||{},P===void 0)throw new Error(B);var D=N.prepend===!0?"prepend":"append",E=N.container!==void 0?N.container:document.querySelector("head"),y=R.indexOf(E);y===-1&&(y=R.push(E)-1,z[y]={});var M;return z[y]!==void 0&&z[y][D]!==void 0?M=z[y][D]:(M=z[y][D]=k(),D==="prepend"?E.insertBefore(M,E.childNodes[0]):E.appendChild(M)),P.charCodeAt(0)===65279&&(P=P.substr(1,P.length)),M.styleSheet?M.styleSheet.cssText+=P:M.textContent+=P,M}function k(){var P=document.createElement("style");return P.setAttribute("type","text/css"),P}dr.exports=X,dr.exports.insertCss=X},744091:function(dr,R,z){"use strict";z.r(R),z.d(R,{isAnyArray:function(){return X}});const B=Object.prototype.toString;function X(k){const P=B.call(k);return P.endsWith("Array]")&&!P.includes("Big")}},238749:function(dr,R,z){var B=z(644239),X=z(541780),k=z(637005),P="[object Arguments]",N="[object Array]",D="[object Boolean]",E="[object Date]",y="[object Error]",M="[object Function]",_="[object Map]",m="[object Number]",I="[object Object]",A="[object RegExp]",O="[object Set]",U="[object String]",j="[object WeakMap]",x="[object ArrayBuffer]",d="[object DataView]",it="[object Float32Array]",Y="[object Float64Array]",W="[object Int8Array]",K="[object Int16Array]",Q="[object Int32Array]",rt="[object Uint8Array]",J="[object Uint8ClampedArray]",ot="[object Uint16Array]",vt="[object Uint32Array]",gt={};gt[it]=gt[Y]=gt[W]=gt[K]=gt[Q]=gt[rt]=gt[J]=gt[ot]=gt[vt]=!0,gt[P]=gt[N]=gt[x]=gt[D]=gt[d]=gt[E]=gt[y]=gt[M]=gt[_]=gt[m]=gt[I]=gt[A]=gt[O]=gt[U]=gt[j]=!1;function Pt(It){return k(It)&&X(It.length)&&!!gt[B(It)]}dr.exports=Pt},307518:function(dr){function R(z){return function(B){return z(B)}}dr.exports=R},385924:function(dr,R,z){var B=z(205569),X=B(Object.getPrototypeOf,Object);dr.exports=X},531167:function(dr,R,z){dr=z.nmd(dr);var B=z(431957),X=R&&!R.nodeType&&R,k=X&&!0&&dr&&!dr.nodeType&&dr,P=k&&k.exports===X,N=P&&B.process,D=function(){try{var E=k&&k.require&&k.require("util").types;return E||N&&N.binding&&N.binding("util")}catch(y){}}();dr.exports=D},205569:function(dr){function R(z,B){return function(X){return z(B(X))}}dr.exports=R},541780:function(dr){var R=9007199254740991;function z(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=R}dr.exports=z},281763:function(dr,R,z){var B=z(644239),X=z(637005),k="[object Number]";function P(N){return typeof N=="number"||X(N)&&B(N)==k}dr.exports=P},968630:function(dr,R,z){var B=z(644239),X=z(385924),k=z(637005),P="[object Object]",N=Function.prototype,D=Object.prototype,E=N.toString,y=D.hasOwnProperty,M=E.call(Object);function _(m){if(!k(m)||B(m)!=P)return!1;var I=X(m);if(I===null)return!0;var A=y.call(I,"constructor")&&I.constructor;return typeof A=="function"&&A instanceof A&&E.call(A)==M}dr.exports=_},936719:function(dr,R,z){var B=z(238749),X=z(307518),k=z(531167),P=k&&k.isTypedArray,N=P?X(P):B;dr.exports=N},975823:function(dr,R,z){"use strict";z.r(R),z.d(R,{default:function(){return P}});var B=z(744091);function X(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,B.isAnyArray)(N))throw new TypeError("input must be an array");if(N.length===0)throw new TypeError("input must not be empty");var E=D.fromIndex,y=E===void 0?0:E,M=D.toIndex,_=M===void 0?N.length:M;if(y<0||y>=N.length||!Number.isInteger(y))throw new Error("fromIndex must be a positive integer smaller than length");if(_<=y||_>N.length||!Number.isInteger(_))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var m=N[y],I=y+1;I<_;I++)N[I]>m&&(m=N[I]);return m}function k(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,B.isAnyArray)(N))throw new TypeError("input must be an array");if(N.length===0)throw new TypeError("input must not be empty");var E=D.fromIndex,y=E===void 0?0:E,M=D.toIndex,_=M===void 0?N.length:M;if(y<0||y>=N.length||!Number.isInteger(y))throw new Error("fromIndex must be a positive integer smaller than length");if(_<=y||_>N.length||!Number.isInteger(_))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var m=N[y],I=y+1;I<_;I++)N[I]<m&&(m=N[I]);return m}function P(N){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,B.isAnyArray)(N)){if(N.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var E;if(D.output!==void 0){if(!(0,B.isAnyArray)(D.output))throw new TypeError("output option must be an array if specified");E=D.output}else E=new Array(N.length);var y=k(N),M=X(N);if(y===M)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var _=D.min,m=_===void 0?D.autoMinMax?y:0:_,I=D.max,A=I===void 0?D.autoMinMax?M:1:I;if(m>=A)throw new RangeError("min option must be smaller than max option");for(var O=(A-m)/(M-y),U=0;U<N.length;U++)E[U]=(N[U]-y)*O+m;return E}},481550:function(dr){(function(R,z){dr.exports=z()})(this,function(){"use strict";var R=function(mt){return mt instanceof Uint8Array||mt instanceof Uint16Array||mt instanceof Uint32Array||mt instanceof Int8Array||mt instanceof Int16Array||mt instanceof Int32Array||mt instanceof Float32Array||mt instanceof Float64Array||mt instanceof Uint8ClampedArray},z=function(mt,ae){for(var Ae=Object.keys(ae),ur=0;ur<Ae.length;++ur)mt[Ae[ur]]=ae[Ae[ur]];return mt},B=`
`;function X(mt){return typeof atob!="undefined"?atob(mt):"base64:"+mt}function k(mt){var ae=new Error("(regl) "+mt);throw console.error(ae),ae}function P(mt,ae){mt||k(ae)}function N(mt){return mt?": "+mt:""}function D(mt,ae,Ae){mt in ae||k("unknown parameter ("+mt+")"+N(Ae)+". possible values: "+Object.keys(ae).join())}function E(mt,ae){R(mt)||k("invalid parameter type"+N(ae)+". must be a typed array")}function y(mt,ae){switch(ae){case"number":return typeof mt=="number";case"object":return typeof mt=="object";case"string":return typeof mt=="string";case"boolean":return typeof mt=="boolean";case"function":return typeof mt=="function";case"undefined":return typeof mt=="undefined";case"symbol":return typeof mt=="symbol"}}function M(mt,ae,Ae){y(mt,ae)||k("invalid parameter type"+N(Ae)+". expected "+ae+", got "+typeof mt)}function _(mt,ae){mt>=0&&(mt|0)===mt||k("invalid parameter type, ("+mt+")"+N(ae)+". must be a nonnegative integer")}function m(mt,ae,Ae){ae.indexOf(mt)<0&&k("invalid value"+N(Ae)+". must be one of: "+ae)}var I=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function A(mt){Object.keys(mt).forEach(function(ae){I.indexOf(ae)<0&&k('invalid regl constructor argument "'+ae+'". must be one of '+I)})}function O(mt,ae){for(mt=mt+"";mt.length<ae;)mt=" "+mt;return mt}function U(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function j(mt,ae){this.number=mt,this.line=ae,this.errors=[]}function x(mt,ae,Ae){this.file=mt,this.line=ae,this.message=Ae}function d(){var mt=new Error,ae=(mt.stack||mt).toString(),Ae=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ae);if(Ae)return Ae[1];var ur=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ae);return ur?ur[1]:"unknown"}function it(){var mt=new Error,ae=(mt.stack||mt).toString(),Ae=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ae);if(Ae)return Ae[1];var ur=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ae);return ur?ur[1]:"unknown"}function Y(mt,ae){var Ae=mt.split(`
`),ur=1,Cr=0,sr={unknown:new U,0:new U};sr.unknown.name=sr[0].name=ae||d(),sr.unknown.lines.push(new j(0,""));for(var vr=0;vr<Ae.length;++vr){var Rr=Ae[vr],zr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Rr);if(zr)switch(zr[1]){case"line":var Ur=/(\d+)(\s+\d+)?/.exec(zr[2]);Ur&&(ur=Ur[1]|0,Ur[2]&&(Cr=Ur[2]|0,Cr in sr||(sr[Cr]=new U)));break;case"define":var Br=/SHADER_NAME(_B64)?\s+(.*)$/.exec(zr[2]);Br&&(sr[Cr].name=Br[1]?X(Br[2]):Br[2]);break}sr[Cr].lines.push(new j(ur++,Rr))}return Object.keys(sr).forEach(function(Zr){var v=sr[Zr];v.lines.forEach(function(S){v.index[S.number]=S})}),sr}function W(mt){var ae=[];return mt.split(`
`).forEach(function(Ae){if(!(Ae.length<5)){var ur=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ae);ur?ae.push(new x(ur[1]|0,ur[2]|0,ur[3].trim())):Ae.length>0&&ae.push(new x("unknown",0,Ae))}}),ae}function K(mt,ae){ae.forEach(function(Ae){var ur=mt[Ae.file];if(ur){var Cr=ur.index[Ae.line];if(Cr){Cr.errors.push(Ae),ur.hasErrors=!0;return}}mt.unknown.hasErrors=!0,mt.unknown.lines[0].errors.push(Ae)})}function Q(mt,ae,Ae,ur,Cr){if(!mt.getShaderParameter(ae,mt.COMPILE_STATUS)){var sr=mt.getShaderInfoLog(ae),vr=ur===mt.FRAGMENT_SHADER?"fragment":"vertex";It(Ae,"string",vr+" shader source must be a string",Cr);var Rr=Y(Ae,Cr),zr=W(sr);K(Rr,zr),Object.keys(Rr).forEach(function(Ur){var Br=Rr[Ur];if(!Br.hasErrors)return;var Zr=[""],v=[""];function S(G,Z){Zr.push(G),v.push(Z||"")}S("file number "+Ur+": "+Br.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Br.lines.forEach(function(G){if(G.errors.length>0){S(O(G.number,4)+"|  ","background-color:yellow; font-weight:bold"),S(G.line+B,"color:red; background-color:yellow; font-weight:bold");var Z=0;G.errors.forEach(function(st){var ct=st.message,yt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ct);if(yt){var bt=yt[1];switch(ct=yt[2],bt){case"assign":bt="=";break}Z=Math.max(G.line.indexOf(bt,Z),0)}else Z=0;S(O("| ",6)),S(O("^^^",Z+3)+B,"font-weight:bold"),S(O("| ",6)),S(ct+B,"font-weight:bold")}),S(O("| ",6)+B)}else S(O(G.number,4)+"|  "),S(G.line+B,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=Zr.join("%c"),console.log.apply(console,v)):console.log(Zr.join(""))}),P.raise("Error compiling "+vr+" shader, "+Rr[0].name)}}function rt(mt,ae,Ae,ur,Cr){if(!mt.getProgramParameter(ae,mt.LINK_STATUS)){var sr=mt.getProgramInfoLog(ae),vr=Y(Ae,Cr),Rr=Y(ur,Cr),zr='Error linking program with vertex shader, "'+Rr[0].name+'", and fragment shader "'+vr[0].name+'"';typeof document!="undefined"?console.log("%c"+zr+B+"%c"+sr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(zr+B+sr),P.raise(zr)}}function J(mt){mt._commandRef=d()}function ot(mt,ae,Ae,ur){J(mt);function Cr(zr){return zr?ur.id(zr):0}mt._fragId=Cr(mt.static.frag),mt._vertId=Cr(mt.static.vert);function sr(zr,Ur){Object.keys(Ur).forEach(function(Br){zr[ur.id(Br)]=!0})}var vr=mt._uniformSet={};sr(vr,ae.static),sr(vr,ae.dynamic);var Rr=mt._attributeSet={};sr(Rr,Ae.static),sr(Rr,Ae.dynamic),mt._hasCount="count"in mt.static||"count"in mt.dynamic||"elements"in mt.static||"elements"in mt.dynamic}function vt(mt,ae){var Ae=it();k(mt+" in command "+(ae||d())+(Ae==="unknown"?"":" called from "+Ae))}function gt(mt,ae,Ae){mt||vt(ae,Ae||d())}function Pt(mt,ae,Ae,ur){mt in ae||vt("unknown parameter ("+mt+")"+N(Ae)+". possible values: "+Object.keys(ae).join(),ur||d())}function It(mt,ae,Ae,ur){y(mt,ae)||vt("invalid parameter type"+N(Ae)+". expected "+ae+", got "+typeof mt,ur||d())}function Jt(mt){mt()}function zt(mt,ae,Ae){mt.texture?m(mt.texture._texture.internalformat,ae,"unsupported texture format for attachment"):m(mt.renderbuffer._renderbuffer.format,Ae,"unsupported renderbuffer format for attachment")}var kt=33071,$=9728,lt=9984,St=9985,Ut=9986,Ft=9987,ee=5120,ve=5121,be=5122,Ht=5123,Yt=5124,de=5125,Ee=5126,ge=32819,Ot=32820,Xt=33635,ce=34042,Lt=36193,Kt={};Kt[ee]=Kt[ve]=1,Kt[be]=Kt[Ht]=Kt[Lt]=Kt[Xt]=Kt[ge]=Kt[Ot]=2,Kt[Yt]=Kt[de]=Kt[Ee]=Kt[ce]=4;function pe(mt,ae){return mt===Ot||mt===ge||mt===Xt?2:mt===ce?4:Kt[mt]*ae}function We(mt){return!(mt&mt-1)&&!!mt}function Je(mt,ae,Ae){var ur,Cr=ae.width,sr=ae.height,vr=ae.channels;P(Cr>0&&Cr<=Ae.maxTextureSize&&sr>0&&sr<=Ae.maxTextureSize,"invalid texture shape"),(mt.wrapS!==kt||mt.wrapT!==kt)&&P(We(Cr)&&We(sr),"incompatible wrap mode for texture, both width and height must be power of 2"),ae.mipmask===1?Cr!==1&&sr!==1&&P(mt.minFilter!==lt&&mt.minFilter!==Ut&&mt.minFilter!==St&&mt.minFilter!==Ft,"min filter requires mipmap"):(P(We(Cr)&&We(sr),"texture must be a square power of 2 to support mipmapping"),P(ae.mipmask===(Cr<<1)-1,"missing or incomplete mipmap data")),ae.type===Ee&&(Ae.extensions.indexOf("oes_texture_float_linear")<0&&P(mt.minFilter===$&&mt.magFilter===$,"filter not supported, must enable oes_texture_float_linear"),P(!mt.genMipmaps,"mipmap generation not supported with float textures"));var Rr=ae.images;for(ur=0;ur<16;++ur)if(Rr[ur]){var zr=Cr>>ur,Ur=sr>>ur;P(ae.mipmask&1<<ur,"missing mipmap data");var Br=Rr[ur];if(P(Br.width===zr&&Br.height===Ur,"invalid shape for mip images"),P(Br.format===ae.format&&Br.internalformat===ae.internalformat&&Br.type===ae.type,"incompatible type for mip image"),!Br.compressed)if(Br.data){var Zr=Math.ceil(pe(Br.type,vr)*zr/Br.unpackAlignment)*Br.unpackAlignment;P(Br.data.byteLength===Zr*Ur,"invalid data for image, buffer size is inconsistent with image format")}else Br.element||Br.copy}else mt.genMipmaps||P((ae.mipmask&1<<ur)===0,"extra mipmap data");ae.compressed&&P(!mt.genMipmaps,"mipmap generation for compressed images not supported")}function Mr(mt,ae,Ae,ur){var Cr=mt.width,sr=mt.height,vr=mt.channels;P(Cr>0&&Cr<=ur.maxTextureSize&&sr>0&&sr<=ur.maxTextureSize,"invalid texture shape"),P(Cr===sr,"cube map must be square"),P(ae.wrapS===kt&&ae.wrapT===kt,"wrap mode not supported by cube map");for(var Rr=0;Rr<Ae.length;++Rr){var zr=Ae[Rr];P(zr.width===Cr&&zr.height===sr,"inconsistent cube map face shape"),ae.genMipmaps&&(P(!zr.compressed,"can not generate mipmap for compressed textures"),P(zr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ur=zr.images,Br=0;Br<16;++Br){var Zr=Ur[Br];if(Zr){var v=Cr>>Br,S=sr>>Br;P(zr.mipmask&1<<Br,"missing mipmap data"),P(Zr.width===v&&Zr.height===S,"invalid shape for mip images"),P(Zr.format===mt.format&&Zr.internalformat===mt.internalformat&&Zr.type===mt.type,"incompatible type for mip image"),Zr.compressed||(Zr.data?P(Zr.data.byteLength===v*S*Math.max(pe(Zr.type,vr),Zr.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Zr.element||Zr.copy)}}}}var Vt=z(P,{optional:Jt,raise:k,commandRaise:vt,command:gt,parameter:D,commandParameter:Pt,constructor:A,type:M,commandType:It,isTypedArray:E,nni:_,oneOf:m,shaderError:Q,linkError:rt,callSite:it,saveCommandRef:J,saveDrawInfo:ot,framebufferFormat:zt,guessCommand:d,texture2D:Je,textureCube:Mr}),on=0,sn=0,pn=5,En=6;function Yn(mt,ae){this.id=on++,this.type=mt,this.data=ae}function ea(mt){return mt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Nn(mt){if(mt.length===0)return[];var ae=mt.charAt(0),Ae=mt.charAt(mt.length-1);if(mt.length>1&&ae===Ae&&(ae==='"'||ae==="'"))return['"'+ea(mt.substr(1,mt.length-2))+'"'];var ur=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(mt);if(ur)return Nn(mt.substr(0,ur.index)).concat(Nn(ur[1])).concat(Nn(mt.substr(ur.index+ur[0].length)));var Cr=mt.split(".");if(Cr.length===1)return['"'+ea(mt)+'"'];for(var sr=[],vr=0;vr<Cr.length;++vr)sr=sr.concat(Nn(Cr[vr]));return sr}function Zn(mt){return"["+Nn(mt).join("][")+"]"}function La(mt,ae){return new Yn(mt,Zn(ae+""))}function Aa(mt){return typeof mt=="function"&&!mt._reglType||mt instanceof Yn}function fr(mt,ae){if(typeof mt=="function")return new Yn(sn,mt);if(typeof mt=="number"||typeof mt=="boolean")return new Yn(pn,mt);if(Array.isArray(mt))return new Yn(En,mt.map((Ae,ur)=>fr(Ae,ae+"["+ur+"]")));if(mt instanceof Yn)return mt;Vt(!1,"invalid option type in uniform "+ae)}var Or={DynamicVariable:Yn,define:La,isDynamic:Aa,unbox:fr,accessor:Zn},vn={next:typeof requestAnimationFrame=="function"?function(mt){return requestAnimationFrame(mt)}:function(mt){return setTimeout(mt,16)},cancel:typeof cancelAnimationFrame=="function"?function(mt){return cancelAnimationFrame(mt)}:clearTimeout},yn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function qn(){var mt={"":0},ae=[""];return{id:function(Ae){var ur=mt[Ae];return ur||(ur=mt[Ae]=ae.length,ae.push(Ae),ur)},str:function(Ae){return ae[Ae]}}}function Vn(mt,ae,Ae){var ur=document.createElement("canvas");z(ur.style,{border:0,margin:0,padding:0,top:0,left:0}),mt.appendChild(ur),mt===document.body&&(ur.style.position="absolute",z(mt.style,{margin:0,padding:0}));function Cr(){var Rr=window.innerWidth,zr=window.innerHeight;if(mt!==document.body){var Ur=mt.getBoundingClientRect();Rr=Ur.right-Ur.left,zr=Ur.bottom-Ur.top}ur.width=Ae*Rr,ur.height=Ae*zr,z(ur.style,{width:Rr+"px",height:zr+"px"})}var sr;mt!==document.body&&typeof ResizeObserver=="function"?(sr=new ResizeObserver(function(){setTimeout(Cr)}),sr.observe(mt)):window.addEventListener("resize",Cr,!1);function vr(){sr?sr.disconnect():window.removeEventListener("resize",Cr),mt.removeChild(ur)}return Cr(),{canvas:ur,onDestroy:vr}}function jn(mt,ae){function Ae(ur){try{return mt.getContext(ur,ae)}catch(Cr){return null}}return Ae("webgl")||Ae("experimental-webgl")||Ae("webgl-experimental")}function ba(mt){return typeof mt.nodeName=="string"&&typeof mt.appendChild=="function"&&typeof mt.getBoundingClientRect=="function"}function ma(mt){return typeof mt.drawArrays=="function"||typeof mt.drawElements=="function"}function Pa(mt){return typeof mt=="string"?mt.split():(Vt(Array.isArray(mt),"invalid extension array"),mt)}function wn(mt){return typeof mt=="string"?(Vt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(mt)):mt}function na(mt){var ae=mt||{},Ae,ur,Cr,sr,vr={},Rr=[],zr=[],Ur=typeof window=="undefined"?1:window.devicePixelRatio,Br=!1,Zr=function(G){G&&Vt.raise(G)},v=function(){};if(typeof ae=="string"?(Vt(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ae=document.querySelector(ae),Vt(Ae,"invalid query string for element")):typeof ae=="object"?ba(ae)?Ae=ae:ma(ae)?(sr=ae,Cr=sr.canvas):(Vt.constructor(ae),"gl"in ae?sr=ae.gl:"canvas"in ae?Cr=wn(ae.canvas):"container"in ae&&(ur=wn(ae.container)),"attributes"in ae&&(vr=ae.attributes,Vt.type(vr,"object","invalid context attributes")),"extensions"in ae&&(Rr=Pa(ae.extensions)),"optionalExtensions"in ae&&(zr=Pa(ae.optionalExtensions)),"onDone"in ae&&(Vt.type(ae.onDone,"function","invalid or missing onDone callback"),Zr=ae.onDone),"profile"in ae&&(Br=!!ae.profile),"pixelRatio"in ae&&(Ur=+ae.pixelRatio,Vt(Ur>0,"invalid pixel ratio"))):Vt.raise("invalid arguments to regl"),Ae&&(Ae.nodeName.toLowerCase()==="canvas"?Cr=Ae:ur=Ae),!sr){if(!Cr){Vt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var S=Vn(ur||document.body,Zr,Ur);if(!S)return null;Cr=S.canvas,v=S.onDestroy}vr.premultipliedAlpha===void 0&&(vr.premultipliedAlpha=!0),sr=jn(Cr,vr)}return sr?{gl:sr,canvas:Cr,container:ur,extensions:Rr,optionalExtensions:zr,pixelRatio:Ur,profile:Br,onDone:Zr,onDestroy:v}:(v(),Zr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Qn(mt,ae){var Ae={};function ur(vr){Vt.type(vr,"string","extension name must be string");var Rr=vr.toLowerCase(),zr;try{zr=Ae[Rr]=mt.getExtension(Rr)}catch(Ur){}return!!zr}for(var Cr=0;Cr<ae.extensions.length;++Cr){var sr=ae.extensions[Cr];if(!ur(sr))return ae.onDestroy(),ae.onDone('"'+sr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ae.optionalExtensions.forEach(ur),{extensions:Ae,restore:function(){Object.keys(Ae).forEach(function(vr){if(Ae[vr]&&!ur(vr))throw new Error("(regl): error restoring extension "+vr)})}}}function In(mt,ae){for(var Ae=Array(mt),ur=0;ur<mt;++ur)Ae[ur]=ae(ur);return Ae}var Ca=5120,q=5121,ft=5122,nt=5123,L=5124,b=5125,w=5126;function V(mt){for(var ae=16;ae<=1<<28;ae*=16)if(mt<=ae)return ae;return 0}function xt(mt){var ae,Ae;return ae=(mt>65535)<<4,mt>>>=ae,Ae=(mt>255)<<3,mt>>>=Ae,ae|=Ae,Ae=(mt>15)<<2,mt>>>=Ae,ae|=Ae,Ae=(mt>3)<<1,mt>>>=Ae,ae|=Ae,ae|mt>>1}function Ct(){var mt=In(8,function(){return[]});function ae(sr){var vr=V(sr),Rr=mt[xt(vr)>>2];return Rr.length>0?Rr.pop():new ArrayBuffer(vr)}function Ae(sr){mt[xt(sr.byteLength)>>2].push(sr)}function ur(sr,vr){var Rr=null;switch(sr){case Ca:Rr=new Int8Array(ae(vr),0,vr);break;case q:Rr=new Uint8Array(ae(vr),0,vr);break;case ft:Rr=new Int16Array(ae(2*vr),0,vr);break;case nt:Rr=new Uint16Array(ae(2*vr),0,vr);break;case L:Rr=new Int32Array(ae(4*vr),0,vr);break;case b:Rr=new Uint32Array(ae(4*vr),0,vr);break;case w:Rr=new Float32Array(ae(4*vr),0,vr);break;default:return null}return Rr.length!==vr?Rr.subarray(0,vr):Rr}function Cr(sr){Ae(sr.buffer)}return{alloc:ae,free:Ae,allocType:ur,freeType:Cr}}var wt=Ct();wt.zero=Ct();var Rt=3408,Ce=3410,me=3411,Ke=3412,yr=3413,er=3414,gr=3415,dn=33901,Ue=33902,or=3379,mr=3386,$r=34921,Pr=36347,va=36348,Sa=35661,Mn=35660,Un=34930,Fa=36349,Ea=34076,Kr=34024,kn=7936,_e=7937,Nt=7938,fe=35724,Te=34047,Me=36063,Le=34852,nr=3553,Dr=34067,jr=34069,Sn=33984,An=6408,Fn=5126,da=5121,wa=36160,hi=36053,Wn=36064,fi=16384,Oo=function(mt,ae){var Ae=1;ae.ext_texture_filter_anisotropic&&(Ae=mt.getParameter(Te));var ur=1,Cr=1;ae.webgl_draw_buffers&&(ur=mt.getParameter(Le),Cr=mt.getParameter(Me));var sr=!!ae.oes_texture_float;if(sr){var vr=mt.createTexture();mt.bindTexture(nr,vr),mt.texImage2D(nr,0,An,1,1,0,An,Fn,null);var Rr=mt.createFramebuffer();if(mt.bindFramebuffer(wa,Rr),mt.framebufferTexture2D(wa,Wn,nr,vr,0),mt.bindTexture(nr,null),mt.checkFramebufferStatus(wa)!==hi)sr=!1;else{mt.viewport(0,0,1,1),mt.clearColor(1,0,0,1),mt.clear(fi);var zr=wt.allocType(Fn,4);mt.readPixels(0,0,1,1,An,Fn,zr),mt.getError()?sr=!1:(mt.deleteFramebuffer(Rr),mt.deleteTexture(vr),sr=zr[0]===1),wt.freeType(zr)}}var Ur=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Br=!0;if(!Ur){var Zr=mt.createTexture(),v=wt.allocType(da,36);mt.activeTexture(Sn),mt.bindTexture(Dr,Zr),mt.texImage2D(jr,0,An,3,3,0,An,da,v),wt.freeType(v),mt.bindTexture(Dr,null),mt.deleteTexture(Zr),Br=!mt.getError()}return{colorBits:[mt.getParameter(Ce),mt.getParameter(me),mt.getParameter(Ke),mt.getParameter(yr)],depthBits:mt.getParameter(er),stencilBits:mt.getParameter(gr),subpixelBits:mt.getParameter(Rt),extensions:Object.keys(ae).filter(function(S){return!!ae[S]}),maxAnisotropic:Ae,maxDrawbuffers:ur,maxColorAttachments:Cr,pointSizeDims:mt.getParameter(dn),lineWidthDims:mt.getParameter(Ue),maxViewportDims:mt.getParameter(mr),maxCombinedTextureUnits:mt.getParameter(Sa),maxCubeMapSize:mt.getParameter(Ea),maxRenderbufferSize:mt.getParameter(Kr),maxTextureUnits:mt.getParameter(Un),maxTextureSize:mt.getParameter(or),maxAttributes:mt.getParameter($r),maxVertexUniforms:mt.getParameter(Pr),maxVertexTextureUnits:mt.getParameter(Mn),maxVaryingVectors:mt.getParameter(va),maxFragmentUniforms:mt.getParameter(Fa),glsl:mt.getParameter(fe),renderer:mt.getParameter(_e),vendor:mt.getParameter(kn),version:mt.getParameter(Nt),readFloat:sr,npotTextureCube:Br}};function Da(mt){return!!mt&&typeof mt=="object"&&Array.isArray(mt.shape)&&Array.isArray(mt.stride)&&typeof mt.offset=="number"&&mt.shape.length===mt.stride.length&&(Array.isArray(mt.data)||R(mt.data))}var xi=function(mt){return Object.keys(mt).map(function(ae){return mt[ae]})},co={shape:zi,flatten:ms};function Lo(mt,ae,Ae){for(var ur=0;ur<ae;++ur)Ae[ur]=mt[ur]}function Eo(mt,ae,Ae,ur){for(var Cr=0,sr=0;sr<ae;++sr)for(var vr=mt[sr],Rr=0;Rr<Ae;++Rr)ur[Cr++]=vr[Rr]}function lo(mt,ae,Ae,ur,Cr,sr){for(var vr=sr,Rr=0;Rr<ae;++Rr)for(var zr=mt[Rr],Ur=0;Ur<Ae;++Ur)for(var Br=zr[Ur],Zr=0;Zr<ur;++Zr)Cr[vr++]=Br[Zr]}function Zi(mt,ae,Ae,ur,Cr){for(var sr=1,vr=Ae+1;vr<ae.length;++vr)sr*=ae[vr];var Rr=ae[Ae];if(ae.length-Ae===4){var zr=ae[Ae+1],Ur=ae[Ae+2],Br=ae[Ae+3];for(vr=0;vr<Rr;++vr)lo(mt[vr],zr,Ur,Br,ur,Cr),Cr+=sr}else for(vr=0;vr<Rr;++vr)Zi(mt[vr],ae,Ae+1,ur,Cr),Cr+=sr}function ms(mt,ae,Ae,ur){var Cr=1;if(ae.length)for(var sr=0;sr<ae.length;++sr)Cr*=ae[sr];else Cr=0;var vr=ur||wt.allocType(Ae,Cr);switch(ae.length){case 0:break;case 1:Lo(mt,ae[0],vr);break;case 2:Eo(mt,ae[0],ae[1],vr);break;case 3:lo(mt,ae[0],ae[1],ae[2],vr,0);break;default:Zi(mt,ae,0,vr,0)}return vr}function zi(mt){for(var ae=[],Ae=mt;Ae.length;Ae=Ae[0])ae.push(Ae.length);return ae}var Ui={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},xs=5120,Cs=5122,Yo=5124,Ao=5121,Do=5123,js=5125,Pn=5126,Co=5126,No={int8:xs,int16:Cs,int32:Yo,uint8:Ao,uint16:Do,uint32:js,float:Pn,float32:Co},Wi=35048,On=35040,Po={dynamic:Wi,stream:On,static:35044},Ai=co.flatten,Vo=co.shape,jo=35044,bs=35040,ao=5121,io=5126,ni=[];ni[5120]=1,ni[5122]=2,ni[5124]=4,ni[5121]=1,ni[5123]=2,ni[5125]=4,ni[5126]=4;function ho(mt){return Ui[Object.prototype.toString.call(mt)]|0}function ko(mt,ae){for(var Ae=0;Ae<ae.length;++Ae)mt[Ae]=ae[Ae]}function Ho(mt,ae,Ae,ur,Cr,sr,vr){for(var Rr=0,zr=0;zr<Ae;++zr)for(var Ur=0;Ur<ur;++Ur)mt[Rr++]=ae[Cr*zr+sr*Ur+vr]}function Ro(mt,ae,Ae,ur){var Cr=0,sr={};function vr(Z){this.id=Cr++,this.buffer=mt.createBuffer(),this.type=Z,this.usage=jo,this.byteLength=0,this.dimension=1,this.dtype=ao,this.persistentData=null,Ae.profile&&(this.stats={size:0})}vr.prototype.bind=function(){mt.bindBuffer(this.type,this.buffer)},vr.prototype.destroy=function(){v(this)};var Rr=[];function zr(Z,st){var ct=Rr.pop();return ct||(ct=new vr(Z)),ct.bind(),Zr(ct,st,bs,0,1,!1),ct}function Ur(Z){Rr.push(Z)}function Br(Z,st,ct){Z.byteLength=st.byteLength,mt.bufferData(Z.type,st,ct)}function Zr(Z,st,ct,yt,bt,At){var Wt;if(Z.usage=ct,Array.isArray(st)){if(Z.dtype=yt||io,st.length>0){var ne;if(Array.isArray(st[0])){Wt=Vo(st);for(var Qt=1,we=1;we<Wt.length;++we)Qt*=Wt[we];Z.dimension=Qt,ne=Ai(st,Wt,Z.dtype),Br(Z,ne,ct),At?Z.persistentData=ne:wt.freeType(ne)}else if(typeof st[0]=="number"){Z.dimension=bt;var ze=wt.allocType(Z.dtype,st.length);ko(ze,st),Br(Z,ze,ct),At?Z.persistentData=ze:wt.freeType(ze)}else R(st[0])?(Z.dimension=st[0].length,Z.dtype=yt||ho(st[0])||io,ne=Ai(st,[st.length,st[0].length],Z.dtype),Br(Z,ne,ct),At?Z.persistentData=ne:wt.freeType(ne)):Vt.raise("invalid buffer data")}}else if(R(st))Z.dtype=yt||ho(st),Z.dimension=bt,Br(Z,st,ct),At&&(Z.persistentData=new Uint8Array(new Uint8Array(st.buffer)));else if(Da(st)){Wt=st.shape;var xr=st.stride,je=st.offset,Qe=0,qe=0,Fr=0,en=0;Wt.length===1?(Qe=Wt[0],qe=1,Fr=xr[0],en=0):Wt.length===2?(Qe=Wt[0],qe=Wt[1],Fr=xr[0],en=xr[1]):Vt.raise("invalid shape"),Z.dtype=yt||ho(st.data)||io,Z.dimension=qe;var Hr=wt.allocType(Z.dtype,Qe*qe);Ho(Hr,st.data,Qe,qe,Fr,en,je),Br(Z,Hr,ct),At?Z.persistentData=Hr:wt.freeType(Hr)}else st instanceof ArrayBuffer?(Z.dtype=ao,Z.dimension=bt,Br(Z,st,ct),At&&(Z.persistentData=new Uint8Array(new Uint8Array(st)))):Vt.raise("invalid buffer data")}function v(Z){ae.bufferCount--,ur(Z);var st=Z.buffer;Vt(st,"buffer must not be deleted already"),mt.deleteBuffer(st),Z.buffer=null,delete sr[Z.id]}function S(Z,st,ct,yt){ae.bufferCount++;var bt=new vr(st);sr[bt.id]=bt;function At(Qt){var we=jo,ze=null,xr=0,je=0,Qe=1;return Array.isArray(Qt)||R(Qt)||Da(Qt)||Qt instanceof ArrayBuffer?ze=Qt:typeof Qt=="number"?xr=Qt|0:Qt&&(Vt.type(Qt,"object","buffer arguments must be an object, a number or an array"),"data"in Qt&&(Vt(ze===null||Array.isArray(ze)||R(ze)||Da(ze),"invalid data for buffer"),ze=Qt.data),"usage"in Qt&&(Vt.parameter(Qt.usage,Po,"invalid buffer usage"),we=Po[Qt.usage]),"type"in Qt&&(Vt.parameter(Qt.type,No,"invalid buffer type"),je=No[Qt.type]),"dimension"in Qt&&(Vt.type(Qt.dimension,"number","invalid dimension"),Qe=Qt.dimension|0),"length"in Qt&&(Vt.nni(xr,"buffer length must be a nonnegative integer"),xr=Qt.length|0)),bt.bind(),ze?Zr(bt,ze,we,je,Qe,yt):(xr&&mt.bufferData(bt.type,xr,we),bt.dtype=je||ao,bt.usage=we,bt.dimension=Qe,bt.byteLength=xr),Ae.profile&&(bt.stats.size=bt.byteLength*ni[bt.dtype]),At}function Wt(Qt,we){Vt(we+Qt.byteLength<=bt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Qt.byteLength+" starting from offset "+we+" to a buffer of size "+bt.byteLength),mt.bufferSubData(bt.type,we,Qt)}function ne(Qt,we){var ze=(we||0)|0,xr;if(bt.bind(),R(Qt)||Qt instanceof ArrayBuffer)Wt(Qt,ze);else if(Array.isArray(Qt)){if(Qt.length>0)if(typeof Qt[0]=="number"){var je=wt.allocType(bt.dtype,Qt.length);ko(je,Qt),Wt(je,ze),wt.freeType(je)}else if(Array.isArray(Qt[0])||R(Qt[0])){xr=Vo(Qt);var Qe=Ai(Qt,xr,bt.dtype);Wt(Qe,ze),wt.freeType(Qe)}else Vt.raise("invalid buffer data")}else if(Da(Qt)){xr=Qt.shape;var qe=Qt.stride,Fr=0,en=0,Hr=0,_n=0;xr.length===1?(Fr=xr[0],en=1,Hr=qe[0],_n=0):xr.length===2?(Fr=xr[0],en=xr[1],Hr=qe[0],_n=qe[1]):Vt.raise("invalid shape");var xn=Array.isArray(Qt.data)?bt.dtype:ho(Qt.data),Bn=wt.allocType(xn,Fr*en);Ho(Bn,Qt.data,Fr,en,Hr,_n,Qt.offset),Wt(Bn,ze),wt.freeType(Bn)}else Vt.raise("invalid data for buffer subdata");return At}return ct||At(Z),At._reglType="buffer",At._buffer=bt,At.subdata=ne,Ae.profile&&(At.stats=bt.stats),At.destroy=function(){v(bt)},At}function G(){xi(sr).forEach(function(Z){Z.buffer=mt.createBuffer(),mt.bindBuffer(Z.type,Z.buffer),mt.bufferData(Z.type,Z.persistentData||Z.byteLength,Z.usage)})}return Ae.profile&&(ae.getTotalBufferSize=function(){var Z=0;return Object.keys(sr).forEach(function(st){Z+=sr[st].stats.size}),Z}),{create:S,createStream:zr,destroyStream:Ur,clear:function(){xi(sr).forEach(v),Rr.forEach(v)},getBuffer:function(Z){return Z&&Z._buffer instanceof vr?Z._buffer:null},restore:G,_initBuffer:Zr}}var fs=0,Ko=0,is=1,Wa=1,Ts=4,eu=4,Xi={points:fs,point:Ko,lines:is,line:Wa,triangles:Ts,triangle:eu,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},cs=0,wo=1,Yi=4,vo=5120,ca=5121,Va=5122,mi=5123,oo=5124,ki=5125,$i=34963,Zo=35040,So=35044;function os(mt,ae,Ae,ur){var Cr={},sr=0,vr={uint8:ca,uint16:mi};ae.oes_element_index_uint&&(vr.uint32=ki);function Rr(G){this.id=sr++,Cr[this.id]=this,this.buffer=G,this.primType=Yi,this.vertCount=0,this.type=0}Rr.prototype.bind=function(){this.buffer.bind()};var zr=[];function Ur(G){var Z=zr.pop();return Z||(Z=new Rr(Ae.create(null,$i,!0,!1)._buffer)),Zr(Z,G,Zo,-1,-1,0,0),Z}function Br(G){zr.push(G)}function Zr(G,Z,st,ct,yt,bt,At){G.buffer.bind();var Wt;if(Z){var ne=At;!At&&(!R(Z)||Da(Z)&&!R(Z.data))&&(ne=ae.oes_element_index_uint?ki:mi),Ae._initBuffer(G.buffer,Z,st,ne,3)}else mt.bufferData($i,bt,st),G.buffer.dtype=Wt||ca,G.buffer.usage=st,G.buffer.dimension=3,G.buffer.byteLength=bt;if(Wt=At,!At){switch(G.buffer.dtype){case ca:case vo:Wt=ca;break;case mi:case Va:Wt=mi;break;case ki:case oo:Wt=ki;break;default:Vt.raise("unsupported type for element array")}G.buffer.dtype=Wt}G.type=Wt,Vt(Wt!==ki||!!ae.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Qt=yt;Qt<0&&(Qt=G.buffer.byteLength,Wt===mi?Qt>>=1:Wt===ki&&(Qt>>=2)),G.vertCount=Qt;var we=ct;if(ct<0){we=Yi;var ze=G.buffer.dimension;ze===1&&(we=cs),ze===2&&(we=wo),ze===3&&(we=Yi)}G.primType=we}function v(G){ur.elementsCount--,Vt(G.buffer!==null,"must not double destroy elements"),delete Cr[G.id],G.buffer.destroy(),G.buffer=null}function S(G,Z){var st=Ae.create(null,$i,!0),ct=new Rr(st._buffer);ur.elementsCount++;function yt(bt){if(!bt)st(),ct.primType=Yi,ct.vertCount=0,ct.type=ca;else if(typeof bt=="number")st(bt),ct.primType=Yi,ct.vertCount=bt|0,ct.type=ca;else{var At=null,Wt=So,ne=-1,Qt=-1,we=0,ze=0;Array.isArray(bt)||R(bt)||Da(bt)?At=bt:(Vt.type(bt,"object","invalid arguments for elements"),"data"in bt&&(At=bt.data,Vt(Array.isArray(At)||R(At)||Da(At),"invalid data for element buffer")),"usage"in bt&&(Vt.parameter(bt.usage,Po,"invalid element buffer usage"),Wt=Po[bt.usage]),"primitive"in bt&&(Vt.parameter(bt.primitive,Xi,"invalid element buffer primitive"),ne=Xi[bt.primitive]),"count"in bt&&(Vt(typeof bt.count=="number"&&bt.count>=0,"invalid vertex count for elements"),Qt=bt.count|0),"type"in bt&&(Vt.parameter(bt.type,vr,"invalid buffer type"),ze=vr[bt.type]),"length"in bt?we=bt.length|0:(we=Qt,ze===mi||ze===Va?we*=2:(ze===ki||ze===oo)&&(we*=4))),Zr(ct,At,Wt,ne,Qt,we,ze)}return yt}return yt(G),yt._reglType="elements",yt._elements=ct,yt.subdata=function(bt,At){return st.subdata(bt,At),yt},yt.destroy=function(){v(ct)},yt}return{create:S,createStream:Ur,destroyStream:Br,getElements:function(G){return typeof G=="function"&&G._elements instanceof Rr?G._elements:null},clear:function(){xi(Cr).forEach(v)}}}var go=new Float32Array(1),Rs=new Uint32Array(go.buffer),ru=5123;function Is(mt){for(var ae=wt.allocType(ru,mt.length),Ae=0;Ae<mt.length;++Ae)if(isNaN(mt[Ae]))ae[Ae]=65535;else if(mt[Ae]===1/0)ae[Ae]=31744;else if(mt[Ae]===-1/0)ae[Ae]=64512;else{go[0]=mt[Ae];var ur=Rs[0],Cr=ur>>>31<<15,sr=(ur<<1>>>24)-127,vr=ur>>13&1024-1;if(sr<-24)ae[Ae]=Cr;else if(sr<-14){var Rr=-14-sr;ae[Ae]=Cr+(vr+1024>>Rr)}else sr>15?ae[Ae]=Cr+31744:ae[Ae]=Cr+(sr+15<<10)+vr}return ae}function ci(mt){return Array.isArray(mt)||R(mt)}var Bo=function(mt){return!(mt&mt-1)&&!!mt},Fu=34467,po=3553,Bs=34067,Os=34069,$o=6408,Fs=6406,ls=6407,qo=6409,hs=6410,nu=32854,Gs=32855,vs=36194,Tt=32819,qt=32820,Fe=33635,Ze=34042,Sr=6402,Jr=34041,nn=35904,$n=35906,ai=36193,qi=33776,so=33777,zs=33778,xu=33779,Ri=35986,yo=35987,Hs=34798,Gu=35840,bu=35841,au=35842,Ks=35843,iu=36196,Ls=5121,Zs=5123,ds=5125,To=5126,sf=10242,Df=10243,Nf=10497,Ds=33071,Pf=33648,h=10240,T=10241,dt=9728,Et=9729,Dt=9984,Zt=9985,$t=9986,ue=9987,ye=33170,Ie=4352,Xe=4353,hr=4354,pr=34046,lr=3317,Xr=37440,Vr=37441,_r=37443,ln=37444,ga=33984,pa=[Dt,$t,Zt,ue],aa=[0,qo,hs,ls,$o],Gn={};Gn[qo]=Gn[Fs]=Gn[Sr]=1,Gn[Jr]=Gn[hs]=2,Gn[ls]=Gn[nn]=3,Gn[$o]=Gn[$n]=4;function Jn(mt){return"[object "+mt+"]"}var Di=Jn("HTMLCanvasElement"),Ci=Jn("OffscreenCanvas"),_i=Jn("CanvasRenderingContext2D"),Ti=Jn("ImageBitmap"),Ii=Jn("HTMLImageElement"),Bi=Jn("HTMLVideoElement"),Qi=Object.keys(Ui).concat([Di,Ci,_i,Ti,Ii,Bi]),Ga=[];Ga[Ls]=1,Ga[To]=4,Ga[ai]=2,Ga[Zs]=2,Ga[ds]=4;var ii=[];ii[nu]=2,ii[Gs]=2,ii[vs]=2,ii[Jr]=4,ii[qi]=.5,ii[so]=.5,ii[zs]=1,ii[xu]=1,ii[Ri]=.5,ii[yo]=1,ii[Hs]=1,ii[Gu]=.5,ii[bu]=.25,ii[au]=.5,ii[Ks]=.25,ii[iu]=.5;function gs(mt){return Array.isArray(mt)&&(mt.length===0||typeof mt[0]=="number")}function Es(mt){if(!Array.isArray(mt))return!1;var ae=mt.length;return!(ae===0||!ci(mt[0]))}function Fo(mt){return Object.prototype.toString.call(mt)}function Eu(mt){return Fo(mt)===Di}function kf(mt){return Fo(mt)===Ci}function wc(mt){return Fo(mt)===_i}function Sc(mt){return Fo(mt)===Ti}function _c(mt){return Fo(mt)===Ii}function Rf(mt){return Fo(mt)===Bi}function Bf(mt){if(!mt)return!1;var ae=Fo(mt);return Qi.indexOf(ae)>=0?!0:gs(mt)||Es(mt)||Da(mt)}function Mc(mt){return Ui[Object.prototype.toString.call(mt)]|0}function uf(mt,ae){var Ae=ae.length;switch(mt.type){case Ls:case Zs:case ds:case To:var ur=wt.allocType(mt.type,Ae);ur.set(ae),mt.data=ur;break;case ai:mt.data=Is(ae);break;default:Vt.raise("unsupported texture type, must specify a typed array")}}function ff(mt,ae){return wt.allocType(mt.type===ai?To:mt.type,ae)}function Ac(mt,ae){mt.type===ai?(mt.data=Is(ae),wt.freeType(ae)):mt.data=ae}function cf(mt,ae,Ae,ur,Cr,sr){for(var vr=mt.width,Rr=mt.height,zr=mt.channels,Ur=vr*Rr*zr,Br=ff(mt,Ur),Zr=0,v=0;v<Rr;++v)for(var S=0;S<vr;++S)for(var G=0;G<zr;++G)Br[Zr++]=ae[Ae*S+ur*v+Cr*G+sr];Ac(mt,Br)}function ou(mt,ae,Ae,ur,Cr,sr){var vr;if(typeof ii[mt]!="undefined"?vr=ii[mt]:vr=Gn[mt]*Ga[ae],sr&&(vr*=6),Cr){for(var Rr=0,zr=Ae;zr>=1;)Rr+=vr*zr*zr,zr/=2;return Rr}else return vr*Ae*ur}function Cc(mt,ae,Ae,ur,Cr,sr,vr){var Rr={"don't care":Ie,"dont care":Ie,nice:hr,fast:Xe},zr={repeat:Nf,clamp:Ds,mirror:Pf},Ur={nearest:dt,linear:Et},Br=z({mipmap:ue,"nearest mipmap nearest":Dt,"linear mipmap nearest":Zt,"nearest mipmap linear":$t,"linear mipmap linear":ue},Ur),Zr={none:0,browser:ln},v={uint8:Ls,rgba4:Tt,rgb565:Fe,"rgb5 a1":qt},S={alpha:Fs,luminance:qo,"luminance alpha":hs,rgb:ls,rgba:$o,rgba4:nu,"rgb5 a1":Gs,rgb565:vs},G={};ae.ext_srgb&&(S.srgb=nn,S.srgba=$n),ae.oes_texture_float&&(v.float32=v.float=To),ae.oes_texture_half_float&&(v.float16=v["half float"]=ai),ae.webgl_depth_texture&&(z(S,{depth:Sr,"depth stencil":Jr}),z(v,{uint16:Zs,uint32:ds,"depth stencil":Ze})),ae.webgl_compressed_texture_s3tc&&z(G,{"rgb s3tc dxt1":qi,"rgba s3tc dxt1":so,"rgba s3tc dxt3":zs,"rgba s3tc dxt5":xu}),ae.webgl_compressed_texture_atc&&z(G,{"rgb atc":Ri,"rgba atc explicit alpha":yo,"rgba atc interpolated alpha":Hs}),ae.webgl_compressed_texture_pvrtc&&z(G,{"rgb pvrtc 4bppv1":Gu,"rgb pvrtc 2bppv1":bu,"rgba pvrtc 4bppv1":au,"rgba pvrtc 2bppv1":Ks}),ae.webgl_compressed_texture_etc1&&(G["rgb etc1"]=iu);var Z=Array.prototype.slice.call(mt.getParameter(Fu));Object.keys(G).forEach(function(Se){var cr=G[Se];Z.indexOf(cr)>=0&&(S[Se]=cr)});var st=Object.keys(S);Ae.textureFormats=st;var ct=[];Object.keys(S).forEach(function(Se){var cr=S[Se];ct[cr]=Se});var yt=[];Object.keys(v).forEach(function(Se){var cr=v[Se];yt[cr]=Se});var bt=[];Object.keys(Ur).forEach(function(Se){var cr=Ur[Se];bt[cr]=Se});var At=[];Object.keys(Br).forEach(function(Se){var cr=Br[Se];At[cr]=Se});var Wt=[];Object.keys(zr).forEach(function(Se){var cr=zr[Se];Wt[cr]=Se});var ne=st.reduce(function(Se,cr){var ir=S[cr];return ir===qo||ir===Fs||ir===qo||ir===hs||ir===Sr||ir===Jr||ae.ext_srgb&&(ir===nn||ir===$n)?Se[ir]=ir:ir===Gs||cr.indexOf("rgba")>=0?Se[ir]=$o:Se[ir]=ls,Se},{});function Qt(){this.internalformat=$o,this.format=$o,this.type=Ls,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ln,this.width=0,this.height=0,this.channels=0}function we(Se,cr){Se.internalformat=cr.internalformat,Se.format=cr.format,Se.type=cr.type,Se.compressed=cr.compressed,Se.premultiplyAlpha=cr.premultiplyAlpha,Se.flipY=cr.flipY,Se.unpackAlignment=cr.unpackAlignment,Se.colorSpace=cr.colorSpace,Se.width=cr.width,Se.height=cr.height,Se.channels=cr.channels}function ze(Se,cr){if(!(typeof cr!="object"||!cr)){if("premultiplyAlpha"in cr&&(Vt.type(cr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Se.premultiplyAlpha=cr.premultiplyAlpha),"flipY"in cr&&(Vt.type(cr.flipY,"boolean","invalid texture flip"),Se.flipY=cr.flipY),"alignment"in cr&&(Vt.oneOf(cr.alignment,[1,2,4,8],"invalid texture unpack alignment"),Se.unpackAlignment=cr.alignment),"colorSpace"in cr&&(Vt.parameter(cr.colorSpace,Zr,"invalid colorSpace"),Se.colorSpace=Zr[cr.colorSpace]),"type"in cr){var ir=cr.type;Vt(ae.oes_texture_float||!(ir==="float"||ir==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Vt(ae.oes_texture_half_float||!(ir==="half float"||ir==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Vt(ae.webgl_depth_texture||!(ir==="uint16"||ir==="uint32"||ir==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Vt.parameter(ir,v,"invalid texture type"),Se.type=v[ir]}var hn=Se.width,Ia=Se.height,le=Se.channels,te=!1;"shape"in cr?(Vt(Array.isArray(cr.shape)&&cr.shape.length>=2,"shape must be an array"),hn=cr.shape[0],Ia=cr.shape[1],cr.shape.length===3&&(le=cr.shape[2],Vt(le>0&&le<=4,"invalid number of channels"),te=!0),Vt(hn>=0&&hn<=Ae.maxTextureSize,"invalid width"),Vt(Ia>=0&&Ia<=Ae.maxTextureSize,"invalid height")):("radius"in cr&&(hn=Ia=cr.radius,Vt(hn>=0&&hn<=Ae.maxTextureSize,"invalid radius")),"width"in cr&&(hn=cr.width,Vt(hn>=0&&hn<=Ae.maxTextureSize,"invalid width")),"height"in cr&&(Ia=cr.height,Vt(Ia>=0&&Ia<=Ae.maxTextureSize,"invalid height")),"channels"in cr&&(le=cr.channels,Vt(le>0&&le<=4,"invalid number of channels"),te=!0)),Se.width=hn|0,Se.height=Ia|0,Se.channels=le|0;var Pe=!1;if("format"in cr){var $e=cr.format;Vt(ae.webgl_depth_texture||!($e==="depth"||$e==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Vt.parameter($e,S,"invalid texture format");var tr=Se.internalformat=S[$e];Se.format=ne[tr],$e in v&&("type"in cr||(Se.type=v[$e])),$e in G&&(Se.compressed=!0),Pe=!0}!te&&Pe?Se.channels=Gn[Se.format]:te&&!Pe?Se.channels!==aa[Se.format]&&(Se.format=Se.internalformat=aa[Se.channels]):Pe&&te&&Vt(Se.channels===Gn[Se.format],"number of channels inconsistent with specified format")}}function xr(Se){mt.pixelStorei(Xr,Se.flipY),mt.pixelStorei(Vr,Se.premultiplyAlpha),mt.pixelStorei(_r,Se.colorSpace),mt.pixelStorei(lr,Se.unpackAlignment)}function je(){Qt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Qe(Se,cr){var ir=null;if(Bf(cr)?ir=cr:cr&&(Vt.type(cr,"object","invalid pixel data type"),ze(Se,cr),"x"in cr&&(Se.xOffset=cr.x|0),"y"in cr&&(Se.yOffset=cr.y|0),Bf(cr.data)&&(ir=cr.data)),Vt(!Se.compressed||ir instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),cr.copy){Vt(!ir,"can not specify copy and data field for the same texture");var hn=Cr.viewportWidth,Ia=Cr.viewportHeight;Se.width=Se.width||hn-Se.xOffset,Se.height=Se.height||Ia-Se.yOffset,Se.needsCopy=!0,Vt(Se.xOffset>=0&&Se.xOffset<hn&&Se.yOffset>=0&&Se.yOffset<Ia&&Se.width>0&&Se.width<=hn&&Se.height>0&&Se.height<=Ia,"copy texture read out of bounds")}else if(!ir)Se.width=Se.width||1,Se.height=Se.height||1,Se.channels=Se.channels||4;else if(R(ir))Se.channels=Se.channels||4,Se.data=ir,!("type"in cr)&&Se.type===Ls&&(Se.type=Mc(ir));else if(gs(ir))Se.channels=Se.channels||4,uf(Se,ir),Se.alignment=1,Se.needsFree=!0;else if(Da(ir)){var le=ir.data;!Array.isArray(le)&&Se.type===Ls&&(Se.type=Mc(le));var te=ir.shape,Pe=ir.stride,$e,tr,Be,ke,Ye,he;te.length===3?(Be=te[2],he=Pe[2]):(Vt(te.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Be=1,he=1),$e=te[0],tr=te[1],ke=Pe[0],Ye=Pe[1],Se.alignment=1,Se.width=$e,Se.height=tr,Se.channels=Be,Se.format=Se.internalformat=aa[Be],Se.needsFree=!0,cf(Se,le,ke,Ye,he,ir.offset)}else if(Eu(ir)||kf(ir)||wc(ir))Eu(ir)||kf(ir)?Se.element=ir:Se.element=ir.canvas,Se.width=Se.element.width,Se.height=Se.element.height,Se.channels=4;else if(Sc(ir))Se.element=ir,Se.width=ir.width,Se.height=ir.height,Se.channels=4;else if(_c(ir))Se.element=ir,Se.width=ir.naturalWidth,Se.height=ir.naturalHeight,Se.channels=4;else if(Rf(ir))Se.element=ir,Se.width=ir.videoWidth,Se.height=ir.videoHeight,Se.channels=4;else if(Es(ir)){var De=Se.width||ir[0].length,oe=Se.height||ir.length,He=Se.channels;ci(ir[0][0])?He=He||ir[0][0].length:He=He||1;for(var rr=co.shape(ir),Ar=1,Tr=0;Tr<rr.length;++Tr)Ar*=rr[Tr];var br=ff(Se,Ar);co.flatten(ir,rr,"",br),Ac(Se,br),Se.alignment=1,Se.width=De,Se.height=oe,Se.channels=He,Se.format=Se.internalformat=aa[He],Se.needsFree=!0}Se.type===To?Vt(Ae.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Se.type===ai&&Vt(Ae.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function qe(Se,cr,ir){var hn=Se.element,Ia=Se.data,le=Se.internalformat,te=Se.format,Pe=Se.type,$e=Se.width,tr=Se.height;xr(Se),hn?mt.texImage2D(cr,ir,te,te,Pe,hn):Se.compressed?mt.compressedTexImage2D(cr,ir,le,$e,tr,0,Ia):Se.needsCopy?(ur(),mt.copyTexImage2D(cr,ir,te,Se.xOffset,Se.yOffset,$e,tr,0)):mt.texImage2D(cr,ir,te,$e,tr,0,te,Pe,Ia||null)}function Fr(Se,cr,ir,hn,Ia){var le=Se.element,te=Se.data,Pe=Se.internalformat,$e=Se.format,tr=Se.type,Be=Se.width,ke=Se.height;xr(Se),le?mt.texSubImage2D(cr,Ia,ir,hn,$e,tr,le):Se.compressed?mt.compressedTexSubImage2D(cr,Ia,ir,hn,Pe,Be,ke,te):Se.needsCopy?(ur(),mt.copyTexSubImage2D(cr,Ia,ir,hn,Se.xOffset,Se.yOffset,Be,ke)):mt.texSubImage2D(cr,Ia,ir,hn,Be,ke,$e,tr,te)}var en=[];function Hr(){return en.pop()||new je}function _n(Se){Se.needsFree&&wt.freeType(Se.data),je.call(Se),en.push(Se)}function xn(){Qt.call(this),this.genMipmaps=!1,this.mipmapHint=Ie,this.mipmask=0,this.images=Array(16)}function Bn(Se,cr,ir){var hn=Se.images[0]=Hr();Se.mipmask=1,hn.width=Se.width=cr,hn.height=Se.height=ir,hn.channels=Se.channels=4}function ia(Se,cr){var ir=null;if(Bf(cr))ir=Se.images[0]=Hr(),we(ir,Se),Qe(ir,cr),Se.mipmask=1;else if(ze(Se,cr),Array.isArray(cr.mipmap))for(var hn=cr.mipmap,Ia=0;Ia<hn.length;++Ia)ir=Se.images[Ia]=Hr(),we(ir,Se),ir.width>>=Ia,ir.height>>=Ia,Qe(ir,hn[Ia]),Se.mipmask|=1<<Ia;else ir=Se.images[0]=Hr(),we(ir,Se),Qe(ir,cr),Se.mipmask=1;we(Se,Se.images[0]),Se.compressed&&(Se.internalformat===qi||Se.internalformat===so||Se.internalformat===zs||Se.internalformat===xu)&&Vt(Se.width%4===0&&Se.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Kn(Se,cr){for(var ir=Se.images,hn=0;hn<ir.length;++hn){if(!ir[hn])return;qe(ir[hn],cr,hn)}}var Ei=[];function ua(){var Se=Ei.pop()||new xn;Qt.call(Se),Se.mipmask=0;for(var cr=0;cr<16;++cr)Se.images[cr]=null;return Se}function Ni(Se){for(var cr=Se.images,ir=0;ir<cr.length;++ir)cr[ir]&&_n(cr[ir]),cr[ir]=null;Ei.push(Se)}function vi(){this.minFilter=dt,this.magFilter=dt,this.wrapS=Ds,this.wrapT=Ds,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ie}function Ba(Se,cr){if("min"in cr){var ir=cr.min;Vt.parameter(ir,Br),Se.minFilter=Br[ir],pa.indexOf(Se.minFilter)>=0&&!("faces"in cr)&&(Se.genMipmaps=!0)}if("mag"in cr){var hn=cr.mag;Vt.parameter(hn,Ur),Se.magFilter=Ur[hn]}var Ia=Se.wrapS,le=Se.wrapT;if("wrap"in cr){var te=cr.wrap;typeof te=="string"?(Vt.parameter(te,zr),Ia=le=zr[te]):Array.isArray(te)&&(Vt.parameter(te[0],zr),Vt.parameter(te[1],zr),Ia=zr[te[0]],le=zr[te[1]])}else{if("wrapS"in cr){var Pe=cr.wrapS;Vt.parameter(Pe,zr),Ia=zr[Pe]}if("wrapT"in cr){var $e=cr.wrapT;Vt.parameter($e,zr),le=zr[$e]}}if(Se.wrapS=Ia,Se.wrapT=le,"anisotropic"in cr){var tr=cr.anisotropic;Vt(typeof tr=="number"&&tr>=1&&tr<=Ae.maxAnisotropic,"aniso samples must be between 1 and "),Se.anisotropic=cr.anisotropic}if("mipmap"in cr){var Be=!1;switch(typeof cr.mipmap){case"string":Vt.parameter(cr.mipmap,Rr,"invalid mipmap hint"),Se.mipmapHint=Rr[cr.mipmap],Se.genMipmaps=!0,Be=!0;break;case"boolean":Be=Se.genMipmaps=cr.mipmap;break;case"object":Vt(Array.isArray(cr.mipmap),"invalid mipmap type"),Se.genMipmaps=!1,Be=!0;break;default:Vt.raise("invalid mipmap type")}Be&&!("min"in cr)&&(Se.minFilter=Dt)}}function Gi(Se,cr){mt.texParameteri(cr,T,Se.minFilter),mt.texParameteri(cr,h,Se.magFilter),mt.texParameteri(cr,sf,Se.wrapS),mt.texParameteri(cr,Df,Se.wrapT),ae.ext_texture_filter_anisotropic&&mt.texParameteri(cr,pr,Se.anisotropic),Se.genMipmaps&&(mt.hint(ye,Se.mipmapHint),mt.generateMipmap(cr))}var wi=0,mo={},Jo=Ae.maxTextureUnits,ji=Array(Jo).map(function(){return null});function xa(Se){Qt.call(this),this.mipmask=0,this.internalformat=$o,this.id=wi++,this.refCount=1,this.target=Se,this.texture=mt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new vi,vr.profile&&(this.stats={size:0})}function Uo(Se){mt.activeTexture(ga),mt.bindTexture(Se.target,Se.texture)}function Ja(){var Se=ji[0];Se?mt.bindTexture(Se.target,Se.texture):mt.bindTexture(po,null)}function Rn(Se){var cr=Se.texture;Vt(cr,"must not double destroy texture");var ir=Se.unit,hn=Se.target;ir>=0&&(mt.activeTexture(ga+ir),mt.bindTexture(hn,null),ji[ir]=null),mt.deleteTexture(cr),Se.texture=null,Se.params=null,Se.pixels=null,Se.refCount=0,delete mo[Se.id],sr.textureCount--}z(xa.prototype,{bind:function(){var Se=this;Se.bindCount+=1;var cr=Se.unit;if(cr<0){for(var ir=0;ir<Jo;++ir){var hn=ji[ir];if(hn){if(hn.bindCount>0)continue;hn.unit=-1}ji[ir]=Se,cr=ir;break}cr>=Jo&&Vt.raise("insufficient number of texture units"),vr.profile&&sr.maxTextureUnits<cr+1&&(sr.maxTextureUnits=cr+1),Se.unit=cr,mt.activeTexture(ga+cr),mt.bindTexture(Se.target,Se.texture)}return cr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Rn(this)}});function Ta(Se,cr){var ir=new xa(po);mo[ir.id]=ir,sr.textureCount++;function hn(te,Pe){var $e=ir.texInfo;vi.call($e);var tr=ua();return typeof te=="number"?typeof Pe=="number"?Bn(tr,te|0,Pe|0):Bn(tr,te|0,te|0):te?(Vt.type(te,"object","invalid arguments to regl.texture"),Ba($e,te),ia(tr,te)):Bn(tr,1,1),$e.genMipmaps&&(tr.mipmask=(tr.width<<1)-1),ir.mipmask=tr.mipmask,we(ir,tr),Vt.texture2D($e,tr,Ae),ir.internalformat=tr.internalformat,hn.width=tr.width,hn.height=tr.height,Uo(ir),Kn(tr,po),Gi($e,po),Ja(),Ni(tr),vr.profile&&(ir.stats.size=ou(ir.internalformat,ir.type,tr.width,tr.height,$e.genMipmaps,!1)),hn.format=ct[ir.internalformat],hn.type=yt[ir.type],hn.mag=bt[$e.magFilter],hn.min=At[$e.minFilter],hn.wrapS=Wt[$e.wrapS],hn.wrapT=Wt[$e.wrapT],hn}function Ia(te,Pe,$e,tr){Vt(!!te,"must specify image data");var Be=Pe|0,ke=$e|0,Ye=tr|0,he=Hr();return we(he,ir),he.width=0,he.height=0,Qe(he,te),he.width=he.width||(ir.width>>Ye)-Be,he.height=he.height||(ir.height>>Ye)-ke,Vt(ir.type===he.type&&ir.format===he.format&&ir.internalformat===he.internalformat,"incompatible format for texture.subimage"),Vt(Be>=0&&ke>=0&&Be+he.width<=ir.width&&ke+he.height<=ir.height,"texture.subimage write out of bounds"),Vt(ir.mipmask&1<<Ye,"missing mipmap data"),Vt(he.data||he.element||he.needsCopy,"missing image data"),Uo(ir),Fr(he,po,Be,ke,Ye),Ja(),_n(he),hn}function le(te,Pe){var $e=te|0,tr=Pe|0||$e;if($e===ir.width&&tr===ir.height)return hn;hn.width=ir.width=$e,hn.height=ir.height=tr,Uo(ir);for(var Be=0;ir.mipmask>>Be;++Be){var ke=$e>>Be,Ye=tr>>Be;if(!ke||!Ye)break;mt.texImage2D(po,Be,ir.format,ke,Ye,0,ir.format,ir.type,null)}return Ja(),vr.profile&&(ir.stats.size=ou(ir.internalformat,ir.type,$e,tr,!1,!1)),hn}return hn(Se,cr),hn.subimage=Ia,hn.resize=le,hn._reglType="texture2d",hn._texture=ir,vr.profile&&(hn.stats=ir.stats),hn.destroy=function(){ir.decRef()},hn}function ja(Se,cr,ir,hn,Ia,le){var te=new xa(Bs);mo[te.id]=te,sr.cubeCount++;var Pe=new Array(6);function $e(ke,Ye,he,De,oe,He){var rr,Ar=te.texInfo;for(vi.call(Ar),rr=0;rr<6;++rr)Pe[rr]=ua();if(typeof ke=="number"||!ke){var Tr=ke|0||1;for(rr=0;rr<6;++rr)Bn(Pe[rr],Tr,Tr)}else if(typeof ke=="object")if(Ye)ia(Pe[0],ke),ia(Pe[1],Ye),ia(Pe[2],he),ia(Pe[3],De),ia(Pe[4],oe),ia(Pe[5],He);else if(Ba(Ar,ke),ze(te,ke),"faces"in ke){var br=ke.faces;for(Vt(Array.isArray(br)&&br.length===6,"cube faces must be a length 6 array"),rr=0;rr<6;++rr)Vt(typeof br[rr]=="object"&&!!br[rr],"invalid input for cube map face"),we(Pe[rr],te),ia(Pe[rr],br[rr])}else for(rr=0;rr<6;++rr)ia(Pe[rr],ke);else Vt.raise("invalid arguments to cube map");for(we(te,Pe[0]),Ae.npotTextureCube||Vt(Bo(te.width)&&Bo(te.height),"your browser does not support non power or two texture dimensions"),Ar.genMipmaps?te.mipmask=(Pe[0].width<<1)-1:te.mipmask=Pe[0].mipmask,Vt.textureCube(te,Ar,Pe,Ae),te.internalformat=Pe[0].internalformat,$e.width=Pe[0].width,$e.height=Pe[0].height,Uo(te),rr=0;rr<6;++rr)Kn(Pe[rr],Os+rr);for(Gi(Ar,Bs),Ja(),vr.profile&&(te.stats.size=ou(te.internalformat,te.type,$e.width,$e.height,Ar.genMipmaps,!0)),$e.format=ct[te.internalformat],$e.type=yt[te.type],$e.mag=bt[Ar.magFilter],$e.min=At[Ar.minFilter],$e.wrapS=Wt[Ar.wrapS],$e.wrapT=Wt[Ar.wrapT],rr=0;rr<6;++rr)Ni(Pe[rr]);return $e}function tr(ke,Ye,he,De,oe){Vt(!!Ye,"must specify image data"),Vt(typeof ke=="number"&&ke===(ke|0)&&ke>=0&&ke<6,"invalid face");var He=he|0,rr=De|0,Ar=oe|0,Tr=Hr();return we(Tr,te),Tr.width=0,Tr.height=0,Qe(Tr,Ye),Tr.width=Tr.width||(te.width>>Ar)-He,Tr.height=Tr.height||(te.height>>Ar)-rr,Vt(te.type===Tr.type&&te.format===Tr.format&&te.internalformat===Tr.internalformat,"incompatible format for texture.subimage"),Vt(He>=0&&rr>=0&&He+Tr.width<=te.width&&rr+Tr.height<=te.height,"texture.subimage write out of bounds"),Vt(te.mipmask&1<<Ar,"missing mipmap data"),Vt(Tr.data||Tr.element||Tr.needsCopy,"missing image data"),Uo(te),Fr(Tr,Os+ke,He,rr,Ar),Ja(),_n(Tr),$e}function Be(ke){var Ye=ke|0;if(Ye!==te.width){$e.width=te.width=Ye,$e.height=te.height=Ye,Uo(te);for(var he=0;he<6;++he)for(var De=0;te.mipmask>>De;++De)mt.texImage2D(Os+he,De,te.format,Ye>>De,Ye>>De,0,te.format,te.type,null);return Ja(),vr.profile&&(te.stats.size=ou(te.internalformat,te.type,$e.width,$e.height,!1,!0)),$e}}return $e(Se,cr,ir,hn,Ia,le),$e.subimage=tr,$e.resize=Be,$e._reglType="textureCube",$e._texture=te,vr.profile&&($e.stats=te.stats),$e.destroy=function(){te.decRef()},$e}function to(){for(var Se=0;Se<Jo;++Se)mt.activeTexture(ga+Se),mt.bindTexture(po,null),ji[Se]=null;xi(mo).forEach(Rn),sr.cubeCount=0,sr.textureCount=0}vr.profile&&(sr.getTotalTextureSize=function(){var Se=0;return Object.keys(mo).forEach(function(cr){Se+=mo[cr].stats.size}),Se});function Iu(){for(var Se=0;Se<Jo;++Se){var cr=ji[Se];cr&&(cr.bindCount=0,cr.unit=-1,ji[Se]=null)}xi(mo).forEach(function(ir){ir.texture=mt.createTexture(),mt.bindTexture(ir.target,ir.texture);for(var hn=0;hn<32;++hn)if(ir.mipmask&1<<hn)if(ir.target===po)mt.texImage2D(po,hn,ir.internalformat,ir.width>>hn,ir.height>>hn,0,ir.internalformat,ir.type,null);else for(var Ia=0;Ia<6;++Ia)mt.texImage2D(Os+Ia,hn,ir.internalformat,ir.width>>hn,ir.height>>hn,0,ir.internalformat,ir.type,null);Gi(ir.texInfo,ir.target)})}function lc(){for(var Se=0;Se<Jo;++Se){var cr=ji[Se];cr&&(cr.bindCount=0,cr.unit=-1,ji[Se]=null),mt.activeTexture(ga+Se),mt.bindTexture(po,null),mt.bindTexture(Bs,null)}}return{create2D:Ta,createCube:ja,clear:to,getTexture:function(Se){return null},restore:Iu,refresh:lc}}var cn=36161,wu=32854,za=32855,lf=36194,Ff=33189,Us=36168,Gf=34041,su=35907,zf=34836,Uf=34842,Wf=34843,ws=[];ws[wu]=2,ws[za]=2,ws[lf]=2,ws[Ff]=2,ws[Us]=1,ws[Gf]=4,ws[su]=4,ws[zf]=16,ws[Uf]=8,ws[Wf]=6;function Xf(mt,ae,Ae){return ws[mt]*ae*Ae}var Yf=function(mt,ae,Ae,ur,Cr){var sr={rgba4:wu,rgb565:lf,"rgb5 a1":za,depth:Ff,stencil:Us,"depth stencil":Gf};ae.ext_srgb&&(sr.srgba=su),ae.ext_color_buffer_half_float&&(sr.rgba16f=Uf,sr.rgb16f=Wf),ae.webgl_color_buffer_float&&(sr.rgba32f=zf);var vr=[];Object.keys(sr).forEach(function(S){var G=sr[S];vr[G]=S});var Rr=0,zr={};function Ur(S){this.id=Rr++,this.refCount=1,this.renderbuffer=S,this.format=wu,this.width=0,this.height=0,Cr.profile&&(this.stats={size:0})}Ur.prototype.decRef=function(){--this.refCount<=0&&Br(this)};function Br(S){var G=S.renderbuffer;Vt(G,"must not double destroy renderbuffer"),mt.bindRenderbuffer(cn,null),mt.deleteRenderbuffer(G),S.renderbuffer=null,S.refCount=0,delete zr[S.id],ur.renderbufferCount--}function Zr(S,G){var Z=new Ur(mt.createRenderbuffer());zr[Z.id]=Z,ur.renderbufferCount++;function st(yt,bt){var At=0,Wt=0,ne=wu;if(typeof yt=="object"&&yt){var Qt=yt;if("shape"in Qt){var we=Qt.shape;Vt(Array.isArray(we)&&we.length>=2,"invalid renderbuffer shape"),At=we[0]|0,Wt=we[1]|0}else"radius"in Qt&&(At=Wt=Qt.radius|0),"width"in Qt&&(At=Qt.width|0),"height"in Qt&&(Wt=Qt.height|0);"format"in Qt&&(Vt.parameter(Qt.format,sr,"invalid renderbuffer format"),ne=sr[Qt.format])}else typeof yt=="number"?(At=yt|0,typeof bt=="number"?Wt=bt|0:Wt=At):yt?Vt.raise("invalid arguments to renderbuffer constructor"):At=Wt=1;if(Vt(At>0&&Wt>0&&At<=Ae.maxRenderbufferSize&&Wt<=Ae.maxRenderbufferSize,"invalid renderbuffer size"),!(At===Z.width&&Wt===Z.height&&ne===Z.format))return st.width=Z.width=At,st.height=Z.height=Wt,Z.format=ne,mt.bindRenderbuffer(cn,Z.renderbuffer),mt.renderbufferStorage(cn,ne,At,Wt),Vt(mt.getError()===0,"invalid render buffer format"),Cr.profile&&(Z.stats.size=Xf(Z.format,Z.width,Z.height)),st.format=vr[Z.format],st}function ct(yt,bt){var At=yt|0,Wt=bt|0||At;return At===Z.width&&Wt===Z.height||(Vt(At>0&&Wt>0&&At<=Ae.maxRenderbufferSize&&Wt<=Ae.maxRenderbufferSize,"invalid renderbuffer size"),st.width=Z.width=At,st.height=Z.height=Wt,mt.bindRenderbuffer(cn,Z.renderbuffer),mt.renderbufferStorage(cn,Z.format,At,Wt),Vt(mt.getError()===0,"invalid render buffer format"),Cr.profile&&(Z.stats.size=Xf(Z.format,Z.width,Z.height))),st}return st(S,G),st.resize=ct,st._reglType="renderbuffer",st._renderbuffer=Z,Cr.profile&&(st.stats=Z.stats),st.destroy=function(){Z.decRef()},st}Cr.profile&&(ur.getTotalRenderbufferSize=function(){var S=0;return Object.keys(zr).forEach(function(G){S+=zr[G].stats.size}),S});function v(){xi(zr).forEach(function(S){S.renderbuffer=mt.createRenderbuffer(),mt.bindRenderbuffer(cn,S.renderbuffer),mt.renderbufferStorage(cn,S.format,S.width,S.height)}),mt.bindRenderbuffer(cn,null)}return{create:Zr,clear:function(){xi(zr).forEach(Br)},restore:v}},bi=36160,zu=36161,Ss=3553,et=34069,pt=36064,Mt=36096,jt=36128,ie=33306,Re=36053,Ge=36054,ar=36055,Lr=36057,Gr=36061,an=36193,mn=5121,tn=5126,ra=6407,oa=6408,la=6402,Hn=[ra,oa],Na=[];Na[oa]=4,Na[ra]=3;var Cn=[];Cn[mn]=1,Cn[tn]=4,Cn[an]=2;var _a=32854,sa=32855,Dn=36194,Ma=33189,$a=36168,Qa=34041,ka=35907,Ra=34836,li=34842,Mi=34843,oi=[_a,sa,Dn,ka,li,Mi,Ra],Ns={};Ns[Re]="complete",Ns[Ge]="incomplete attachment",Ns[Lr]="incomplete dimensions",Ns[ar]="incomplete, missing attachment",Ns[Gr]="unsupported";function Vf(mt,ae,Ae,ur,Cr,sr){var vr={cur:null,next:null,dirty:!1,setFBO:null},Rr=["rgba"],zr=["rgba4","rgb565","rgb5 a1"];ae.ext_srgb&&zr.push("srgba"),ae.ext_color_buffer_half_float&&zr.push("rgba16f","rgb16f"),ae.webgl_color_buffer_float&&zr.push("rgba32f");var Ur=["uint8"];ae.oes_texture_half_float&&Ur.push("half float","float16"),ae.oes_texture_float&&Ur.push("float","float32");function Br(je,Qe,qe){this.target=je,this.texture=Qe,this.renderbuffer=qe;var Fr=0,en=0;Qe?(Fr=Qe.width,en=Qe.height):qe&&(Fr=qe.width,en=qe.height),this.width=Fr,this.height=en}function Zr(je){je&&(je.texture&&je.texture._texture.decRef(),je.renderbuffer&&je.renderbuffer._renderbuffer.decRef())}function v(je,Qe,qe){if(je)if(je.texture){var Fr=je.texture._texture,en=Math.max(1,Fr.width),Hr=Math.max(1,Fr.height);Vt(en===Qe&&Hr===qe,"inconsistent width/height for supplied texture"),Fr.refCount+=1}else{var _n=je.renderbuffer._renderbuffer;Vt(_n.width===Qe&&_n.height===qe,"inconsistent width/height for renderbuffer"),_n.refCount+=1}}function S(je,Qe){Qe&&(Qe.texture?mt.framebufferTexture2D(bi,je,Qe.target,Qe.texture._texture.texture,0):mt.framebufferRenderbuffer(bi,je,zu,Qe.renderbuffer._renderbuffer.renderbuffer))}function G(je){var Qe=Ss,qe=null,Fr=null,en=je;typeof je=="object"&&(en=je.data,"target"in je&&(Qe=je.target|0)),Vt.type(en,"function","invalid attachment data");var Hr=en._reglType;return Hr==="texture2d"?(qe=en,Vt(Qe===Ss)):Hr==="textureCube"?(qe=en,Vt(Qe>=et&&Qe<et+6,"invalid cube map target")):Hr==="renderbuffer"?(Fr=en,Qe=zu):Vt.raise("invalid regl object for attachment"),new Br(Qe,qe,Fr)}function Z(je,Qe,qe,Fr,en){if(qe){var Hr=ur.create2D({width:je,height:Qe,format:Fr,type:en});return Hr._texture.refCount=0,new Br(Ss,Hr,null)}else{var _n=Cr.create({width:je,height:Qe,format:Fr});return _n._renderbuffer.refCount=0,new Br(zu,null,_n)}}function st(je){return je&&(je.texture||je.renderbuffer)}function ct(je,Qe,qe){je&&(je.texture?je.texture.resize(Qe,qe):je.renderbuffer&&je.renderbuffer.resize(Qe,qe),je.width=Qe,je.height=qe)}var yt=0,bt={};function At(){this.id=yt++,bt[this.id]=this,this.framebuffer=mt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Wt(je){je.colorAttachments.forEach(Zr),Zr(je.depthAttachment),Zr(je.stencilAttachment),Zr(je.depthStencilAttachment)}function ne(je){var Qe=je.framebuffer;Vt(Qe,"must not double destroy framebuffer"),mt.deleteFramebuffer(Qe),je.framebuffer=null,sr.framebufferCount--,delete bt[je.id]}function Qt(je){var Qe;mt.bindFramebuffer(bi,je.framebuffer);var qe=je.colorAttachments;for(Qe=0;Qe<qe.length;++Qe)S(pt+Qe,qe[Qe]);for(Qe=qe.length;Qe<Ae.maxColorAttachments;++Qe)mt.framebufferTexture2D(bi,pt+Qe,Ss,null,0);mt.framebufferTexture2D(bi,ie,Ss,null,0),mt.framebufferTexture2D(bi,Mt,Ss,null,0),mt.framebufferTexture2D(bi,jt,Ss,null,0),S(Mt,je.depthAttachment),S(jt,je.stencilAttachment),S(ie,je.depthStencilAttachment);var Fr=mt.checkFramebufferStatus(bi);!mt.isContextLost()&&Fr!==Re&&Vt.raise("framebuffer configuration not supported, status = "+Ns[Fr]),mt.bindFramebuffer(bi,vr.next?vr.next.framebuffer:null),vr.cur=vr.next,mt.getError()}function we(je,Qe){var qe=new At;sr.framebufferCount++;function Fr(Hr,_n){var xn;Vt(vr.next!==qe,"can not update framebuffer which is currently in use");var Bn=0,ia=0,Kn=!0,Ei=!0,ua=null,Ni=!0,vi="rgba",Ba="uint8",Gi=1,wi=null,mo=null,Jo=null,ji=!1;if(typeof Hr=="number")Bn=Hr|0,ia=_n|0||Bn;else if(!Hr)Bn=ia=1;else{Vt.type(Hr,"object","invalid arguments for framebuffer");var xa=Hr;if("shape"in xa){var Uo=xa.shape;Vt(Array.isArray(Uo)&&Uo.length>=2,"invalid shape for framebuffer"),Bn=Uo[0],ia=Uo[1]}else"radius"in xa&&(Bn=ia=xa.radius),"width"in xa&&(Bn=xa.width),"height"in xa&&(ia=xa.height);("color"in xa||"colors"in xa)&&(ua=xa.color||xa.colors,Array.isArray(ua)&&Vt(ua.length===1||ae.webgl_draw_buffers,"multiple render targets not supported")),ua||("colorCount"in xa&&(Gi=xa.colorCount|0,Vt(Gi>0,"invalid color buffer count")),"colorTexture"in xa&&(Ni=!!xa.colorTexture,vi="rgba4"),"colorType"in xa&&(Ba=xa.colorType,Ni?(Vt(ae.oes_texture_float||!(Ba==="float"||Ba==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Vt(ae.oes_texture_half_float||!(Ba==="half float"||Ba==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ba==="half float"||Ba==="float16"?(Vt(ae.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),vi="rgba16f"):(Ba==="float"||Ba==="float32")&&(Vt(ae.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),vi="rgba32f"),Vt.oneOf(Ba,Ur,"invalid color type")),"colorFormat"in xa&&(vi=xa.colorFormat,Rr.indexOf(vi)>=0?Ni=!0:zr.indexOf(vi)>=0?Ni=!1:Ni?Vt.oneOf(xa.colorFormat,Rr,"invalid color format for texture"):Vt.oneOf(xa.colorFormat,zr,"invalid color format for renderbuffer"))),("depthTexture"in xa||"depthStencilTexture"in xa)&&(ji=!!(xa.depthTexture||xa.depthStencilTexture),Vt(!ji||ae.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in xa&&(typeof xa.depth=="boolean"?Kn=xa.depth:(wi=xa.depth,Ei=!1)),"stencil"in xa&&(typeof xa.stencil=="boolean"?Ei=xa.stencil:(mo=xa.stencil,Kn=!1)),"depthStencil"in xa&&(typeof xa.depthStencil=="boolean"?Kn=Ei=xa.depthStencil:(Jo=xa.depthStencil,Kn=!1,Ei=!1))}var Ja=null,Rn=null,Ta=null,ja=null;if(Array.isArray(ua))Ja=ua.map(G);else if(ua)Ja=[G(ua)];else for(Ja=new Array(Gi),xn=0;xn<Gi;++xn)Ja[xn]=Z(Bn,ia,Ni,vi,Ba);Vt(ae.webgl_draw_buffers||Ja.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Vt(Ja.length<=Ae.maxColorAttachments,"too many color attachments, not supported"),Bn=Bn||Ja[0].width,ia=ia||Ja[0].height,wi?Rn=G(wi):Kn&&!Ei&&(Rn=Z(Bn,ia,ji,"depth","uint32")),mo?Ta=G(mo):Ei&&!Kn&&(Ta=Z(Bn,ia,!1,"stencil","uint8")),Jo?ja=G(Jo):!wi&&!mo&&Ei&&Kn&&(ja=Z(Bn,ia,ji,"depth stencil","depth stencil")),Vt(!!wi+!!mo+!!Jo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var to=null;for(xn=0;xn<Ja.length;++xn)if(v(Ja[xn],Bn,ia),Vt(!Ja[xn]||Ja[xn].texture&&Hn.indexOf(Ja[xn].texture._texture.format)>=0||Ja[xn].renderbuffer&&oi.indexOf(Ja[xn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+xn+" is invalid"),Ja[xn]&&Ja[xn].texture){var Iu=Na[Ja[xn].texture._texture.format]*Cn[Ja[xn].texture._texture.type];to===null?to=Iu:Vt(to===Iu,"all color attachments much have the same number of bits per pixel.")}return v(Rn,Bn,ia),Vt(!Rn||Rn.texture&&Rn.texture._texture.format===la||Rn.renderbuffer&&Rn.renderbuffer._renderbuffer.format===Ma,"invalid depth attachment for framebuffer object"),v(Ta,Bn,ia),Vt(!Ta||Ta.renderbuffer&&Ta.renderbuffer._renderbuffer.format===$a,"invalid stencil attachment for framebuffer object"),v(ja,Bn,ia),Vt(!ja||ja.texture&&ja.texture._texture.format===Qa||ja.renderbuffer&&ja.renderbuffer._renderbuffer.format===Qa,"invalid depth-stencil attachment for framebuffer object"),Wt(qe),qe.width=Bn,qe.height=ia,qe.colorAttachments=Ja,qe.depthAttachment=Rn,qe.stencilAttachment=Ta,qe.depthStencilAttachment=ja,Fr.color=Ja.map(st),Fr.depth=st(Rn),Fr.stencil=st(Ta),Fr.depthStencil=st(ja),Fr.width=qe.width,Fr.height=qe.height,Qt(qe),Fr}function en(Hr,_n){Vt(vr.next!==qe,"can not resize a framebuffer which is currently in use");var xn=Math.max(Hr|0,1),Bn=Math.max(_n|0||xn,1);if(xn===qe.width&&Bn===qe.height)return Fr;for(var ia=qe.colorAttachments,Kn=0;Kn<ia.length;++Kn)ct(ia[Kn],xn,Bn);return ct(qe.depthAttachment,xn,Bn),ct(qe.stencilAttachment,xn,Bn),ct(qe.depthStencilAttachment,xn,Bn),qe.width=Fr.width=xn,qe.height=Fr.height=Bn,Qt(qe),Fr}return Fr(je,Qe),z(Fr,{resize:en,_reglType:"framebuffer",_framebuffer:qe,destroy:function(){ne(qe),Wt(qe)},use:function(Hr){vr.setFBO({framebuffer:Fr},Hr)}})}function ze(je){var Qe=Array(6);function qe(en){var Hr;Vt(Qe.indexOf(vr.next)<0,"can not update framebuffer which is currently in use");var _n={color:null},xn=0,Bn=null,ia="rgba",Kn="uint8",Ei=1;if(typeof en=="number")xn=en|0;else if(!en)xn=1;else{Vt.type(en,"object","invalid arguments for framebuffer");var ua=en;if("shape"in ua){var Ni=ua.shape;Vt(Array.isArray(Ni)&&Ni.length>=2,"invalid shape for framebuffer"),Vt(Ni[0]===Ni[1],"cube framebuffer must be square"),xn=Ni[0]}else"radius"in ua&&(xn=ua.radius|0),"width"in ua?(xn=ua.width|0,"height"in ua&&Vt(ua.height===xn,"must be square")):"height"in ua&&(xn=ua.height|0);("color"in ua||"colors"in ua)&&(Bn=ua.color||ua.colors,Array.isArray(Bn)&&Vt(Bn.length===1||ae.webgl_draw_buffers,"multiple render targets not supported")),Bn||("colorCount"in ua&&(Ei=ua.colorCount|0,Vt(Ei>0,"invalid color buffer count")),"colorType"in ua&&(Vt.oneOf(ua.colorType,Ur,"invalid color type"),Kn=ua.colorType),"colorFormat"in ua&&(ia=ua.colorFormat,Vt.oneOf(ua.colorFormat,Rr,"invalid color format for texture"))),"depth"in ua&&(_n.depth=ua.depth),"stencil"in ua&&(_n.stencil=ua.stencil),"depthStencil"in ua&&(_n.depthStencil=ua.depthStencil)}var vi;if(Bn)if(Array.isArray(Bn))for(vi=[],Hr=0;Hr<Bn.length;++Hr)vi[Hr]=Bn[Hr];else vi=[Bn];else{vi=Array(Ei);var Ba={radius:xn,format:ia,type:Kn};for(Hr=0;Hr<Ei;++Hr)vi[Hr]=ur.createCube(Ba)}for(_n.color=Array(vi.length),Hr=0;Hr<vi.length;++Hr){var Gi=vi[Hr];Vt(typeof Gi=="function"&&Gi._reglType==="textureCube","invalid cube map"),xn=xn||Gi.width,Vt(Gi.width===xn&&Gi.height===xn,"invalid cube map shape"),_n.color[Hr]={target:et,data:vi[Hr]}}for(Hr=0;Hr<6;++Hr){for(var wi=0;wi<vi.length;++wi)_n.color[wi].target=et+Hr;Hr>0&&(_n.depth=Qe[0].depth,_n.stencil=Qe[0].stencil,_n.depthStencil=Qe[0].depthStencil),Qe[Hr]?Qe[Hr](_n):Qe[Hr]=we(_n)}return z(qe,{width:xn,height:xn,color:vi})}function Fr(en){var Hr,_n=en|0;if(Vt(_n>0&&_n<=Ae.maxCubeMapSize,"invalid radius for cube fbo"),_n===qe.width)return qe;var xn=qe.color;for(Hr=0;Hr<xn.length;++Hr)xn[Hr].resize(_n);for(Hr=0;Hr<6;++Hr)Qe[Hr].resize(_n);return qe.width=qe.height=_n,qe}return qe(je),z(qe,{faces:Qe,resize:Fr,_reglType:"framebufferCube",destroy:function(){Qe.forEach(function(en){en.destroy()})}})}function xr(){vr.cur=null,vr.next=null,vr.dirty=!0,xi(bt).forEach(function(je){je.framebuffer=mt.createFramebuffer(),Qt(je)})}return z(vr,{getFramebuffer:function(je){if(typeof je=="function"&&je._reglType==="framebuffer"){var Qe=je._framebuffer;if(Qe instanceof At)return Qe}return null},create:we,createCube:ze,clear:function(){xi(bt).forEach(ne)},restore:xr})}var $s=5126,uu=34962;function Su(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=$s,this.offset=0,this.stride=0,this.divisor=0}function hf(mt,ae,Ae,ur,Cr){for(var sr=Ae.maxAttributes,vr=new Array(sr),Rr=0;Rr<sr;++Rr)vr[Rr]=new Su;var zr=0,Ur={},Br={Record:Su,scope:{},state:vr,currentVAO:null,targetVAO:null,restore:v()?bt:function(){},createVAO:At,getVAO:G,destroyBuffer:Zr,setVAO:v()?Z:st,clear:v()?ct:function(){}};function Zr(Wt){for(var ne=0;ne<vr.length;++ne){var Qt=vr[ne];Qt.buffer===Wt&&(mt.disableVertexAttribArray(ne),Qt.buffer=null)}}function v(){return ae.oes_vertex_array_object}function S(){return ae.angle_instanced_arrays}function G(Wt){return typeof Wt=="function"&&Wt._vao?Wt._vao:null}function Z(Wt){if(Wt!==Br.currentVAO){var ne=v();Wt?ne.bindVertexArrayOES(Wt.vao):ne.bindVertexArrayOES(null),Br.currentVAO=Wt}}function st(Wt){if(Wt!==Br.currentVAO){if(Wt)Wt.bindAttrs();else for(var ne=S(),Qt=0;Qt<vr.length;++Qt){var we=vr[Qt];we.buffer?(mt.enableVertexAttribArray(Qt),mt.vertexAttribPointer(Qt,we.size,we.type,we.normalized,we.stride,we.offfset),ne&&we.divisor&&ne.vertexAttribDivisorANGLE(Qt,we.divisor)):(mt.disableVertexAttribArray(Qt),mt.vertexAttrib4f(Qt,we.x,we.y,we.z,we.w))}Br.currentVAO=Wt}}function ct(){xi(Ur).forEach(function(Wt){Wt.destroy()})}function yt(){this.id=++zr,this.attributes=[];var Wt=v();Wt?this.vao=Wt.createVertexArrayOES():this.vao=null,Ur[this.id]=this,this.buffers=[]}yt.prototype.bindAttrs=function(){for(var Wt=S(),ne=this.attributes,Qt=0;Qt<ne.length;++Qt){var we=ne[Qt];we.buffer?(mt.enableVertexAttribArray(Qt),mt.bindBuffer(uu,we.buffer.buffer),mt.vertexAttribPointer(Qt,we.size,we.type,we.normalized,we.stride,we.offset),Wt&&we.divisor&&Wt.vertexAttribDivisorANGLE(Qt,we.divisor)):(mt.disableVertexAttribArray(Qt),mt.vertexAttrib4f(Qt,we.x,we.y,we.z,we.w))}for(var ze=ne.length;ze<sr;++ze)mt.disableVertexAttribArray(ze)},yt.prototype.refresh=function(){var Wt=v();Wt&&(Wt.bindVertexArrayOES(this.vao),this.bindAttrs(),Br.currentVAO=this)},yt.prototype.destroy=function(){if(this.vao){var Wt=v();this===Br.currentVAO&&(Br.currentVAO=null,Wt.bindVertexArrayOES(null)),Wt.deleteVertexArrayOES(this.vao),this.vao=null}Ur[this.id]&&(delete Ur[this.id],ur.vaoCount-=1)};function bt(){var Wt=v();Wt&&xi(Ur).forEach(function(ne){ne.refresh()})}function At(Wt){var ne=new yt;ur.vaoCount+=1;function Qt(we){Vt(Array.isArray(we),"arguments to vertex array constructor must be an array"),Vt(we.length<sr,"too many attributes"),Vt(we.length>0,"must specify at least one attribute");var ze={},xr=ne.attributes;xr.length=we.length;for(var je=0;je<we.length;++je){var Qe=we[je],qe=xr[je]=new Su,Fr=Qe.data||Qe;if(Array.isArray(Fr)||R(Fr)||Da(Fr)){var en;ne.buffers[je]&&(en=ne.buffers[je],R(Fr)&&en._buffer.byteLength>=Fr.byteLength?en.subdata(Fr):(en.destroy(),ne.buffers[je]=null)),ne.buffers[je]||(en=ne.buffers[je]=Cr.create(Qe,uu,!1,!0)),qe.buffer=Cr.getBuffer(en),qe.size=qe.buffer.dimension|0,qe.normalized=!1,qe.type=qe.buffer.dtype,qe.offset=0,qe.stride=0,qe.divisor=0,qe.state=1,ze[je]=1}else Cr.getBuffer(Qe)?(qe.buffer=Cr.getBuffer(Qe),qe.size=qe.buffer.dimension|0,qe.normalized=!1,qe.type=qe.buffer.dtype,qe.offset=0,qe.stride=0,qe.divisor=0,qe.state=1):Cr.getBuffer(Qe.buffer)?(qe.buffer=Cr.getBuffer(Qe.buffer),qe.size=(+Qe.size||qe.buffer.dimension)|0,qe.normalized=!!Qe.normalized||!1,"type"in Qe?(Vt.parameter(Qe.type,No,"invalid buffer type"),qe.type=No[Qe.type]):qe.type=qe.buffer.dtype,qe.offset=(Qe.offset||0)|0,qe.stride=(Qe.stride||0)|0,qe.divisor=(Qe.divisor||0)|0,qe.state=1,Vt(qe.size>=1&&qe.size<=4,"size must be between 1 and 4"),Vt(qe.offset>=0,"invalid offset"),Vt(qe.stride>=0&&qe.stride<=255,"stride must be between 0 and 255"),Vt(qe.divisor>=0,"divisor must be positive"),Vt(!qe.divisor||!!ae.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Qe?(Vt(je>0,"first attribute must not be a constant"),qe.x=+Qe.x||0,qe.y=+Qe.y||0,qe.z=+Qe.z||0,qe.w=+Qe.w||0,qe.state=2):Vt(!1,"invalid attribute spec for location "+je)}for(var Hr=0;Hr<ne.buffers.length;++Hr)!ze[Hr]&&ne.buffers[Hr]&&(ne.buffers[Hr].destroy(),ne.buffers[Hr]=null);return ne.refresh(),Qt}return Qt.destroy=function(){for(var we=0;we<ne.buffers.length;++we)ne.buffers[we]&&ne.buffers[we].destroy();ne.buffers.length=0,ne.destroy()},Qt._vao=ne,Qt._reglType="vao",Qt(Wt)}return Br}var _u=35632,Tc=35633,jf=35718,Hf=35721;function Ic(mt,ae,Ae,ur){var Cr={},sr={};function vr(Z,st,ct,yt){this.name=Z,this.id=st,this.location=ct,this.info=yt}function Rr(Z,st){for(var ct=0;ct<Z.length;++ct)if(Z[ct].id===st.id){Z[ct].location=st.location;return}Z.push(st)}function zr(Z,st,ct){var yt=Z===_u?Cr:sr,bt=yt[st];if(!bt){var At=ae.str(st);bt=mt.createShader(Z),mt.shaderSource(bt,At),mt.compileShader(bt),Vt.shaderError(mt,bt,At,Z,ct),yt[st]=bt}return bt}var Ur={},Br=[],Zr=0;function v(Z,st){this.id=Zr++,this.fragId=Z,this.vertId=st,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ur.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function S(Z,st,ct){var yt,bt,At=zr(_u,Z.fragId),Wt=zr(Tc,Z.vertId),ne=Z.program=mt.createProgram();if(mt.attachShader(ne,At),mt.attachShader(ne,Wt),ct)for(yt=0;yt<ct.length;++yt){var Qt=ct[yt];mt.bindAttribLocation(ne,Qt[0],Qt[1])}mt.linkProgram(ne),Vt.linkError(mt,ne,ae.str(Z.fragId),ae.str(Z.vertId),st);var we=mt.getProgramParameter(ne,jf);ur.profile&&(Z.stats.uniformsCount=we);var ze=Z.uniforms;for(yt=0;yt<we;++yt)if(bt=mt.getActiveUniform(ne,yt),bt)if(bt.size>1)for(var xr=0;xr<bt.size;++xr){var je=bt.name.replace("[0]","["+xr+"]");Rr(ze,new vr(je,ae.id(je),mt.getUniformLocation(ne,je),bt))}else Rr(ze,new vr(bt.name,ae.id(bt.name),mt.getUniformLocation(ne,bt.name),bt));var Qe=mt.getProgramParameter(ne,Hf);ur.profile&&(Z.stats.attributesCount=Qe);var qe=Z.attributes;for(yt=0;yt<Qe;++yt)bt=mt.getActiveAttrib(ne,yt),bt&&Rr(qe,new vr(bt.name,ae.id(bt.name),mt.getAttribLocation(ne,bt.name),bt))}ur.profile&&(Ae.getMaxUniformsCount=function(){var Z=0;return Br.forEach(function(st){st.stats.uniformsCount>Z&&(Z=st.stats.uniformsCount)}),Z},Ae.getMaxAttributesCount=function(){var Z=0;return Br.forEach(function(st){st.stats.attributesCount>Z&&(Z=st.stats.attributesCount)}),Z});function G(){Cr={},sr={};for(var Z=0;Z<Br.length;++Z)S(Br[Z],null,Br[Z].attributes.map(function(st){return[st.location,st.name]}))}return{clear:function(){var Z=mt.deleteShader.bind(mt);xi(Cr).forEach(Z),Cr={},xi(sr).forEach(Z),sr={},Br.forEach(function(st){mt.deleteProgram(st.program)}),Br.length=0,Ur={},Ae.shaderCount=0},program:function(Z,st,ct,yt){Vt.command(Z>=0,"missing vertex shader",ct),Vt.command(st>=0,"missing fragment shader",ct);var bt=Ur[st];bt||(bt=Ur[st]={});var At=bt[Z];if(At&&(At.refCount++,!yt))return At;var Wt=new v(st,Z);return Ae.shaderCount++,S(Wt,ct,yt),At||(bt[Z]=Wt),Br.push(Wt),z(Wt,{destroy:function(){if(Wt.refCount--,Wt.refCount<=0){mt.deleteProgram(Wt.program);var ne=Br.indexOf(Wt);Br.splice(ne,1),Ae.shaderCount--}bt[Wt.vertId].refCount<=0&&(mt.deleteShader(sr[Wt.vertId]),delete sr[Wt.vertId],delete Ur[Wt.fragId][Wt.vertId]),Object.keys(Ur[Wt.fragId]).length||(mt.deleteShader(Cr[Wt.fragId]),delete Cr[Wt.fragId],delete Ur[Wt.fragId])}})},restore:G,shader:zr,frag:-1,vert:-1}}var Kf=6408,Qo=5121,Uu=3333,qs=5126;function Oc(mt,ae,Ae,ur,Cr,sr,vr){function Rr(Br){var Zr;ae.next===null?(Vt(Cr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Zr=Qo):(Vt(ae.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Zr=ae.next.colorAttachments[0].texture._texture.type,sr.oes_texture_float?(Vt(Zr===Qo||Zr===qs,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Zr===qs&&Vt(vr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Vt(Zr===Qo,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,S=0,G=ur.framebufferWidth,Z=ur.framebufferHeight,st=null;R(Br)?st=Br:Br&&(Vt.type(Br,"object","invalid arguments to regl.read()"),v=Br.x|0,S=Br.y|0,Vt(v>=0&&v<ur.framebufferWidth,"invalid x offset for regl.read"),Vt(S>=0&&S<ur.framebufferHeight,"invalid y offset for regl.read"),G=(Br.width||ur.framebufferWidth-v)|0,Z=(Br.height||ur.framebufferHeight-S)|0,st=Br.data||null),st&&(Zr===Qo?Vt(st instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Zr===qs&&Vt(st instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Vt(G>0&&G+v<=ur.framebufferWidth,"invalid width for read pixels"),Vt(Z>0&&Z+S<=ur.framebufferHeight,"invalid height for read pixels"),Ae();var ct=G*Z*4;return st||(Zr===Qo?st=new Uint8Array(ct):Zr===qs&&(st=st||new Float32Array(ct))),Vt.isTypedArray(st,"data buffer for regl.read() must be a typedarray"),Vt(st.byteLength>=ct,"data buffer for regl.read() too small"),mt.pixelStorei(Uu,4),mt.readPixels(v,S,G,Z,Kf,Zr,st),st}function zr(Br){var Zr;return ae.setFBO({framebuffer:Br.framebuffer},function(){Zr=Rr(Br)}),Zr}function Ur(Br){return!Br||!("framebuffer"in Br)?Rr(Br):zr(Br)}return Ur}function Io(mt){return Array.prototype.slice.call(mt)}function uo(mt){return Io(mt).join("")}function al(){var mt=0,ae=[],Ae=[];function ur(Zr){for(var v=0;v<Ae.length;++v)if(Ae[v]===Zr)return ae[v];var S="g"+mt++;return ae.push(S),Ae.push(Zr),S}function Cr(){var Zr=[];function v(){Zr.push.apply(Zr,Io(arguments))}var S=[];function G(){var Z="v"+mt++;return S.push(Z),arguments.length>0&&(Zr.push(Z,"="),Zr.push.apply(Zr,Io(arguments)),Zr.push(";")),Z}return z(v,{def:G,toString:function(){return uo([S.length>0?"var "+S.join(",")+";":"",uo(Zr)])}})}function sr(){var Zr=Cr(),v=Cr(),S=Zr.toString,G=v.toString;function Z(st,ct){v(st,ct,"=",Zr.def(st,ct),";")}return z(function(){Zr.apply(Zr,Io(arguments))},{def:Zr.def,entry:Zr,exit:v,save:Z,set:function(st,ct,yt){Z(st,ct),Zr(st,ct,"=",yt,";")},toString:function(){return S()+G()}})}function vr(){var Zr=uo(arguments),v=sr(),S=sr(),G=v.toString,Z=S.toString;return z(v,{then:function(){return v.apply(v,Io(arguments)),this},else:function(){return S.apply(S,Io(arguments)),this},toString:function(){var st=Z();return st&&(st="else{"+st+"}"),uo(["if(",Zr,"){",G(),"}",st])}})}var Rr=Cr(),zr={};function Ur(Zr,v){var S=[];function G(){var bt="a"+S.length;return S.push(bt),bt}v=v||0;for(var Z=0;Z<v;++Z)G();var st=sr(),ct=st.toString,yt=zr[Zr]=z(st,{arg:G,toString:function(){return uo(["function(",S.join(),"){",ct(),"}"])}});return yt}function Br(){var Zr=['"use strict";',Rr,"return {"];Object.keys(zr).forEach(function(G){Zr.push('"',G,'":',zr[G].toString(),",")}),Zr.push("}");var v=uo(Zr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),S=Function.apply(null,ae.concat(v));return S.apply(null,Ae)}return{global:Rr,link:ur,block:Cr,proc:Ur,scope:sr,cond:vr,compile:Br}}var vf="xyzw".split(""),il=5121,fu=1,cu=2,lu=0,Lc=1,Dc=2,ol=3,ps=4,sl=5,Zf=6,Nc="dither",ul="blend.enable",Wl="blend.color",fl="blend.equation",$f="blend.func",cl="depth.enable",Xl="depth.func",gh="depth.range",qf="depth.mask",Pc="colorMask",Ne="cull.enable",ll="cull.face",Qf="frontFace",hl="lineWidth",vl="polygonOffset.enable",kc="polygonOffset.offset",Yl="sample.alpha",dl="sample.enable",Jf="sample.coverage",df="stencil.enable",gl="stencil.mask",gf="stencil.func",Ji="stencil.opFront",pf="stencil.opBack",pl="scissor.enable",tc="scissor.box",_s="viewport",yf="profile",Wu="framebuffer",Mu="vert",Xu="frag",Yu="elements",Vu="primitive",Au="count",mf="offset",Rc="instances",ec="vao",Bc="Width",Fc="Height",ju=Wu+Bc,Ps=Wu+Fc,yl=_s+Bc,ml=_s+Fc,Ws="drawingBuffer",xl=Ws+Bc,bl=Ws+Fc,El=[$f,fl,gf,Ji,pf,Jf,_s,tc,kc],Hu=34962,Vl=34963,wl=35632,Sl=35633,jl=3553,Hl=34067,ph=2884,Kl=3042,Zl=3024,yh=2960,$l=2929,ql=3089,rc=32823,Ql=32926,Ku=32928,nc=5126,xf=35664,Gc=35665,zc=35666,Uc=5124,hu=35667,bf=35668,Zu=35669,_l=35670,ac=35671,Wc=35672,ic=35673,oc=35674,Xc=35675,Ef=35676,sc=35678,$u=35680,Jl=4,uc=1028,qu=1029,th=2304,Yc=2305,eh=32775,mh=32776,rh=519,Qu=7680,Ml=0,nh=1,ah=32774,xh=513,Al=36160,ih=36064,Go={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},oh=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ju={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Cu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Cl={frag:wl,vert:Sl},Tl={cw:th,ccw:Yc};function fc(mt){return Array.isArray(mt)||R(mt)||Da(mt)}function Il(mt){return mt.sort(function(ae,Ae){return ae===_s?-1:Ae===_s?1:ae<Ae?-1:1})}function Fi(mt,ae,Ae,ur){this.thisDep=mt,this.contextDep=ae,this.propDep=Ae,this.append=ur}function vu(mt){return mt&&!(mt.thisDep||mt.contextDep||mt.propDep)}function Vi(mt){return new Fi(!1,!1,!1,mt)}function zo(mt,ae){var Ae=mt.type;if(Ae===lu){var ur=mt.data.length;return new Fi(!0,ur>=1,ur>=2,ae)}else if(Ae===ps){var Cr=mt.data;return new Fi(Cr.thisDep,Cr.contextDep,Cr.propDep,ae)}else{if(Ae===sl)return new Fi(!1,!1,!1,ae);if(Ae===Zf){for(var sr=!1,vr=!1,Rr=!1,zr=0;zr<mt.data.length;++zr){var Ur=mt.data[zr];if(Ur.type===Lc)Rr=!0;else if(Ur.type===Dc)vr=!0;else if(Ur.type===ol)sr=!0;else if(Ur.type===lu){sr=!0;var Br=Ur.data;Br>=1&&(vr=!0),Br>=2&&(Rr=!0)}else Ur.type===ps&&(sr=sr||Ur.data.thisDep,vr=vr||Ur.data.contextDep,Rr=Rr||Ur.data.propDep)}return new Fi(sr,vr,Rr,ae)}else return new Fi(Ae===ol,Ae===Dc,Ae===Lc,ae)}}var _o=new Fi(!1,!1,!1,function(){});function Vc(mt,ae,Ae,ur,Cr,sr,vr,Rr,zr,Ur,Br,Zr,v,S,G){var Z=Ur.Record,st={add:32774,subtract:32778,"reverse subtract":32779};Ae.ext_blend_minmax&&(st.min=eh,st.max=mh);var ct=Ae.angle_instanced_arrays,yt=Ae.webgl_draw_buffers,bt={dirty:!0,profile:G.profile},At={},Wt=[],ne={},Qt={};function we(le){return le.replace(".","_")}function ze(le,te,Pe){var $e=we(le);Wt.push(le),At[$e]=bt[$e]=!!Pe,ne[$e]=te}function xr(le,te,Pe){var $e=we(le);Wt.push(le),Array.isArray(Pe)?(bt[$e]=Pe.slice(),At[$e]=Pe.slice()):bt[$e]=At[$e]=Pe,Qt[$e]=te}ze(Nc,Zl),ze(ul,Kl),xr(Wl,"blendColor",[0,0,0,0]),xr(fl,"blendEquationSeparate",[ah,ah]),xr($f,"blendFuncSeparate",[nh,Ml,nh,Ml]),ze(cl,$l,!0),xr(Xl,"depthFunc",xh),xr(gh,"depthRange",[0,1]),xr(qf,"depthMask",!0),xr(Pc,Pc,[!0,!0,!0,!0]),ze(Ne,ph),xr(ll,"cullFace",qu),xr(Qf,Qf,Yc),xr(hl,hl,1),ze(vl,rc),xr(kc,"polygonOffset",[0,0]),ze(Yl,Ql),ze(dl,Ku),xr(Jf,"sampleCoverage",[1,!1]),ze(df,yh),xr(gl,"stencilMask",-1),xr(gf,"stencilFunc",[rh,0,-1]),xr(Ji,"stencilOpSeparate",[uc,Qu,Qu,Qu]),xr(pf,"stencilOpSeparate",[qu,Qu,Qu,Qu]),ze(pl,ql),xr(tc,"scissor",[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]),xr(_s,_s,[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]);var je={gl:mt,context:v,strings:ae,next:At,current:bt,draw:Zr,elements:sr,buffer:Cr,shader:Br,attributes:Ur.state,vao:Ur,uniforms:zr,framebuffer:Rr,extensions:Ae,timer:S,isBufferArgs:fc},Qe={primTypes:Xi,compareFuncs:Ju,blendFuncs:Go,blendEquations:st,stencilOps:Cu,glTypes:No,orientationType:Tl};Vt.optional(function(){je.isArrayLike=ci}),yt&&(Qe.backBuffer=[qu],Qe.drawBuffer=In(ur.maxDrawbuffers,function(le){return le===0?[0]:In(le,function(te){return ih+te})}));var qe=0;function Fr(){var le=al(),te=le.link,Pe=le.global;le.id=qe++,le.batchId="0";var $e=te(je),tr=le.shared={props:"a0"};Object.keys(je).forEach(function(De){tr[De]=Pe.def($e,".",De)}),Vt.optional(function(){le.CHECK=te(Vt),le.commandStr=Vt.guessCommand(),le.command=te(le.commandStr),le.assert=function(De,oe,He){De("if(!(",oe,"))",this.CHECK,".commandRaise(",te(He),",",this.command,");")},Qe.invalidBlendCombinations=oh});var Be=le.next={},ke=le.current={};Object.keys(Qt).forEach(function(De){Array.isArray(bt[De])&&(Be[De]=Pe.def(tr.next,".",De),ke[De]=Pe.def(tr.current,".",De))});var Ye=le.constants={};Object.keys(Qe).forEach(function(De){Ye[De]=Pe.def(JSON.stringify(Qe[De]))}),le.invoke=function(De,oe){switch(oe.type){case lu:var He=["this",tr.context,tr.props,le.batchId];return De.def(te(oe.data),".call(",He.slice(0,Math.max(oe.data.length+1,4)),")");case Lc:return De.def(tr.props,oe.data);case Dc:return De.def(tr.context,oe.data);case ol:return De.def("this",oe.data);case ps:return oe.data.append(le,De),oe.data.ref;case sl:return oe.data.toString();case Zf:return oe.data.map(function(rr){return le.invoke(De,rr)})}},le.attribCache={};var he={};return le.scopeAttrib=function(De){var oe=ae.id(De);if(oe in he)return he[oe];var He=Ur.scope[oe];He||(He=Ur.scope[oe]=new Z);var rr=he[oe]=te(He);return rr},le}function en(le){var te=le.static,Pe=le.dynamic,$e;if(yf in te){var tr=!!te[yf];$e=Vi(function(ke,Ye){return tr}),$e.enable=tr}else if(yf in Pe){var Be=Pe[yf];$e=zo(Be,function(ke,Ye){return ke.invoke(Ye,Be)})}return $e}function Hr(le,te){var Pe=le.static,$e=le.dynamic;if(Wu in Pe){var tr=Pe[Wu];return tr?(tr=Rr.getFramebuffer(tr),Vt.command(tr,"invalid framebuffer object"),Vi(function(ke,Ye){var he=ke.link(tr),De=ke.shared;Ye.set(De.framebuffer,".next",he);var oe=De.context;return Ye.set(oe,"."+ju,he+".width"),Ye.set(oe,"."+Ps,he+".height"),he})):Vi(function(ke,Ye){var he=ke.shared;Ye.set(he.framebuffer,".next","null");var De=he.context;return Ye.set(De,"."+ju,De+"."+xl),Ye.set(De,"."+Ps,De+"."+bl),"null"})}else if(Wu in $e){var Be=$e[Wu];return zo(Be,function(ke,Ye){var he=ke.invoke(Ye,Be),De=ke.shared,oe=De.framebuffer,He=Ye.def(oe,".getFramebuffer(",he,")");Vt.optional(function(){ke.assert(Ye,"!"+he+"||"+He,"invalid framebuffer object")}),Ye.set(oe,".next",He);var rr=De.context;return Ye.set(rr,"."+ju,He+"?"+He+".width:"+rr+"."+xl),Ye.set(rr,"."+Ps,He+"?"+He+".height:"+rr+"."+bl),He})}else return null}function _n(le,te,Pe){var $e=le.static,tr=le.dynamic;function Be(he){if(he in $e){var De=$e[he];Vt.commandType(De,"object","invalid "+he,Pe.commandStr);var oe=!0,He=De.x|0,rr=De.y|0,Ar,Tr;return"width"in De?(Ar=De.width|0,Vt.command(Ar>=0,"invalid "+he,Pe.commandStr)):oe=!1,"height"in De?(Tr=De.height|0,Vt.command(Tr>=0,"invalid "+he,Pe.commandStr)):oe=!1,new Fi(!oe&&te&&te.thisDep,!oe&&te&&te.contextDep,!oe&&te&&te.propDep,function(Ln,ya){var bn=Ln.shared.context,zn=Ar;"width"in De||(zn=ya.def(bn,".",ju,"-",He));var ha=Tr;return"height"in De||(ha=ya.def(bn,".",Ps,"-",rr)),[He,rr,zn,ha]})}else if(he in tr){var br=tr[he],Yr=zo(br,function(Ln,ya){var bn=Ln.invoke(ya,br);Vt.optional(function(){Ln.assert(ya,bn+"&&typeof "+bn+'==="object"',"invalid "+he)});var zn=Ln.shared.context,ha=ya.def(bn,".x|0"),ti=ya.def(bn,".y|0"),eo=ya.def('"width" in ',bn,"?",bn,".width|0:","(",zn,".",ju,"-",ha,")"),ts=ya.def('"height" in ',bn,"?",bn,".height|0:","(",zn,".",Ps,"-",ti,")");return Vt.optional(function(){Ln.assert(ya,eo+">=0&&"+ts+">=0","invalid "+he)}),[ha,ti,eo,ts]});return te&&(Yr.thisDep=Yr.thisDep||te.thisDep,Yr.contextDep=Yr.contextDep||te.contextDep,Yr.propDep=Yr.propDep||te.propDep),Yr}else return te?new Fi(te.thisDep,te.contextDep,te.propDep,function(Ln,ya){var bn=Ln.shared.context;return[0,0,ya.def(bn,".",ju),ya.def(bn,".",Ps)]}):null}var ke=Be(_s);if(ke){var Ye=ke;ke=new Fi(ke.thisDep,ke.contextDep,ke.propDep,function(he,De){var oe=Ye.append(he,De),He=he.shared.context;return De.set(He,"."+yl,oe[2]),De.set(He,"."+ml,oe[3]),oe})}return{viewport:ke,scissor_box:Be(tc)}}function xn(le,te){var Pe=le.static,$e=typeof Pe[Xu]=="string"&&typeof Pe[Mu]=="string";if($e){if(Object.keys(te.dynamic).length>0)return null;var tr=te.static,Be=Object.keys(tr);if(Be.length>0&&typeof tr[Be[0]]=="number"){for(var ke=[],Ye=0;Ye<Be.length;++Ye)Vt(typeof tr[Be[Ye]]=="number","must specify all vertex attribute locations when using vaos"),ke.push([tr[Be[Ye]]|0,Be[Ye]]);return ke}}return null}function Bn(le,te,Pe){var $e=le.static,tr=le.dynamic;function Be(oe){if(oe in $e){var He=ae.id($e[oe]);Vt.optional(function(){Br.shader(Cl[oe],He,Vt.guessCommand())});var rr=Vi(function(){return He});return rr.id=He,rr}else if(oe in tr){var Ar=tr[oe];return zo(Ar,function(Tr,br){var Yr=Tr.invoke(br,Ar),Ln=br.def(Tr.shared.strings,".id(",Yr,")");return Vt.optional(function(){br(Tr.shared.shader,".shader(",Cl[oe],",",Ln,",",Tr.command,");")}),Ln})}return null}var ke=Be(Xu),Ye=Be(Mu),he=null,De;return vu(ke)&&vu(Ye)?(he=Br.program(Ye.id,ke.id,null,Pe),De=Vi(function(oe,He){return oe.link(he)})):De=new Fi(ke&&ke.thisDep||Ye&&Ye.thisDep,ke&&ke.contextDep||Ye&&Ye.contextDep,ke&&ke.propDep||Ye&&Ye.propDep,function(oe,He){var rr=oe.shared.shader,Ar;ke?Ar=ke.append(oe,He):Ar=He.def(rr,".",Xu);var Tr;Ye?Tr=Ye.append(oe,He):Tr=He.def(rr,".",Mu);var br=rr+".program("+Tr+","+Ar;return Vt.optional(function(){br+=","+oe.command}),He.def(br+")")}),{frag:ke,vert:Ye,progVar:De,program:he}}function ia(le,te){var Pe=le.static,$e=le.dynamic;function tr(){if(Yu in Pe){var oe=Pe[Yu];fc(oe)?oe=sr.getElements(sr.create(oe,!0)):oe&&(oe=sr.getElements(oe),Vt.command(oe,"invalid elements",te.commandStr));var He=Vi(function(Ar,Tr){if(oe){var br=Ar.link(oe);return Ar.ELEMENTS=br,br}return Ar.ELEMENTS=null,null});return He.value=oe,He}else if(Yu in $e){var rr=$e[Yu];return zo(rr,function(Ar,Tr){var br=Ar.shared,Yr=br.isBufferArgs,Ln=br.elements,ya=Ar.invoke(Tr,rr),bn=Tr.def("null"),zn=Tr.def(Yr,"(",ya,")"),ha=Ar.cond(zn).then(bn,"=",Ln,".createStream(",ya,");").else(bn,"=",Ln,".getElements(",ya,");");return Vt.optional(function(){Ar.assert(ha.else,"!"+ya+"||"+bn,"invalid elements")}),Tr.entry(ha),Tr.exit(Ar.cond(zn).then(Ln,".destroyStream(",bn,");")),Ar.ELEMENTS=bn,bn})}return null}var Be=tr();function ke(){if(Vu in Pe){var oe=Pe[Vu];return Vt.commandParameter(oe,Xi,"invalid primitve",te.commandStr),Vi(function(rr,Ar){return Xi[oe]})}else if(Vu in $e){var He=$e[Vu];return zo(He,function(rr,Ar){var Tr=rr.constants.primTypes,br=rr.invoke(Ar,He);return Vt.optional(function(){rr.assert(Ar,br+" in "+Tr,"invalid primitive, must be one of "+Object.keys(Xi))}),Ar.def(Tr,"[",br,"]")})}else if(Be)return vu(Be)?Be.value?Vi(function(rr,Ar){return Ar.def(rr.ELEMENTS,".primType")}):Vi(function(){return Jl}):new Fi(Be.thisDep,Be.contextDep,Be.propDep,function(rr,Ar){var Tr=rr.ELEMENTS;return Ar.def(Tr,"?",Tr,".primType:",Jl)});return null}function Ye(oe,He){if(oe in Pe){var rr=Pe[oe]|0;return Vt.command(!He||rr>=0,"invalid "+oe,te.commandStr),Vi(function(Tr,br){return He&&(Tr.OFFSET=rr),rr})}else if(oe in $e){var Ar=$e[oe];return zo(Ar,function(Tr,br){var Yr=Tr.invoke(br,Ar);return He&&(Tr.OFFSET=Yr,Vt.optional(function(){Tr.assert(br,Yr+">=0","invalid "+oe)})),Yr})}else if(He&&Be)return Vi(function(Tr,br){return Tr.OFFSET="0",0});return null}var he=Ye(mf,!0);function De(){if(Au in Pe){var oe=Pe[Au]|0;return Vt.command(typeof oe=="number"&&oe>=0,"invalid vertex count",te.commandStr),Vi(function(){return oe})}else if(Au in $e){var He=$e[Au];return zo(He,function(Tr,br){var Yr=Tr.invoke(br,He);return Vt.optional(function(){Tr.assert(br,"typeof "+Yr+'==="number"&&'+Yr+">=0&&"+Yr+"===("+Yr+"|0)","invalid vertex count")}),Yr})}else if(Be)if(vu(Be)){if(Be)return he?new Fi(he.thisDep,he.contextDep,he.propDep,function(Tr,br){var Yr=br.def(Tr.ELEMENTS,".vertCount-",Tr.OFFSET);return Vt.optional(function(){Tr.assert(br,Yr+">=0","invalid vertex offset/element buffer too small")}),Yr}):Vi(function(Tr,br){return br.def(Tr.ELEMENTS,".vertCount")});var rr=Vi(function(){return-1});return Vt.optional(function(){rr.MISSING=!0}),rr}else{var Ar=new Fi(Be.thisDep||he.thisDep,Be.contextDep||he.contextDep,Be.propDep||he.propDep,function(Tr,br){var Yr=Tr.ELEMENTS;return Tr.OFFSET?br.def(Yr,"?",Yr,".vertCount-",Tr.OFFSET,":-1"):br.def(Yr,"?",Yr,".vertCount:-1")});return Vt.optional(function(){Ar.DYNAMIC=!0}),Ar}return null}return{elements:Be,primitive:ke(),count:De(),instances:Ye(Rc,!1),offset:he}}function Kn(le,te){var Pe=le.static,$e=le.dynamic,tr={};return Wt.forEach(function(Be){var ke=we(Be);function Ye(he,De){if(Be in Pe){var oe=he(Pe[Be]);tr[ke]=Vi(function(){return oe})}else if(Be in $e){var He=$e[Be];tr[ke]=zo(He,function(rr,Ar){return De(rr,Ar,rr.invoke(Ar,He))})}}switch(Be){case Ne:case ul:case Nc:case df:case cl:case pl:case vl:case Yl:case dl:case qf:return Ye(function(he){return Vt.commandType(he,"boolean",Be,te.commandStr),he},function(he,De,oe){return Vt.optional(function(){he.assert(De,"typeof "+oe+'==="boolean"',"invalid flag "+Be,he.commandStr)}),oe});case Xl:return Ye(function(he){return Vt.commandParameter(he,Ju,"invalid "+Be,te.commandStr),Ju[he]},function(he,De,oe){var He=he.constants.compareFuncs;return Vt.optional(function(){he.assert(De,oe+" in "+He,"invalid "+Be+", must be one of "+Object.keys(Ju))}),De.def(He,"[",oe,"]")});case gh:return Ye(function(he){return Vt.command(ci(he)&&he.length===2&&typeof he[0]=="number"&&typeof he[1]=="number"&&he[0]<=he[1],"depth range is 2d array",te.commandStr),he},function(he,De,oe){Vt.optional(function(){he.assert(De,he.shared.isArrayLike+"("+oe+")&&"+oe+".length===2&&typeof "+oe+'[0]==="number"&&typeof '+oe+'[1]==="number"&&'+oe+"[0]<="+oe+"[1]","depth range must be a 2d array")});var He=De.def("+",oe,"[0]"),rr=De.def("+",oe,"[1]");return[He,rr]});case $f:return Ye(function(he){Vt.commandType(he,"object","blend.func",te.commandStr);var De="srcRGB"in he?he.srcRGB:he.src,oe="srcAlpha"in he?he.srcAlpha:he.src,He="dstRGB"in he?he.dstRGB:he.dst,rr="dstAlpha"in he?he.dstAlpha:he.dst;return Vt.commandParameter(De,Go,ke+".srcRGB",te.commandStr),Vt.commandParameter(oe,Go,ke+".srcAlpha",te.commandStr),Vt.commandParameter(He,Go,ke+".dstRGB",te.commandStr),Vt.commandParameter(rr,Go,ke+".dstAlpha",te.commandStr),Vt.command(oh.indexOf(De+", "+He)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+De+", "+He+")",te.commandStr),[Go[De],Go[He],Go[oe],Go[rr]]},function(he,De,oe){var He=he.constants.blendFuncs;Vt.optional(function(){he.assert(De,oe+"&&typeof "+oe+'==="object"',"invalid blend func, must be an object")});function rr(bn,zn){var ha=De.def('"',bn,zn,'" in ',oe,"?",oe,".",bn,zn,":",oe,".",bn);return Vt.optional(function(){he.assert(De,ha+" in "+He,"invalid "+Be+"."+bn+zn+", must be one of "+Object.keys(Go))}),ha}var Ar=rr("src","RGB"),Tr=rr("dst","RGB");Vt.optional(function(){var bn=he.constants.invalidBlendCombinations;he.assert(De,bn+".indexOf("+Ar+'+", "+'+Tr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var br=De.def(He,"[",Ar,"]"),Yr=De.def(He,"[",rr("src","Alpha"),"]"),Ln=De.def(He,"[",Tr,"]"),ya=De.def(He,"[",rr("dst","Alpha"),"]");return[br,Ln,Yr,ya]});case fl:return Ye(function(he){if(typeof he=="string")return Vt.commandParameter(he,st,"invalid "+Be,te.commandStr),[st[he],st[he]];if(typeof he=="object")return Vt.commandParameter(he.rgb,st,Be+".rgb",te.commandStr),Vt.commandParameter(he.alpha,st,Be+".alpha",te.commandStr),[st[he.rgb],st[he.alpha]];Vt.commandRaise("invalid blend.equation",te.commandStr)},function(he,De,oe){var He=he.constants.blendEquations,rr=De.def(),Ar=De.def(),Tr=he.cond("typeof ",oe,'==="string"');return Vt.optional(function(){function br(Yr,Ln,ya){he.assert(Yr,ya+" in "+He,"invalid "+Ln+", must be one of "+Object.keys(st))}br(Tr.then,Be,oe),he.assert(Tr.else,oe+"&&typeof "+oe+'==="object"',"invalid "+Be),br(Tr.else,Be+".rgb",oe+".rgb"),br(Tr.else,Be+".alpha",oe+".alpha")}),Tr.then(rr,"=",Ar,"=",He,"[",oe,"];"),Tr.else(rr,"=",He,"[",oe,".rgb];",Ar,"=",He,"[",oe,".alpha];"),De(Tr),[rr,Ar]});case Wl:return Ye(function(he){return Vt.command(ci(he)&&he.length===4,"blend.color must be a 4d array",te.commandStr),In(4,function(De){return+he[De]})},function(he,De,oe){return Vt.optional(function(){he.assert(De,he.shared.isArrayLike+"("+oe+")&&"+oe+".length===4","blend.color must be a 4d array")}),In(4,function(He){return De.def("+",oe,"[",He,"]")})});case gl:return Ye(function(he){return Vt.commandType(he,"number",ke,te.commandStr),he|0},function(he,De,oe){return Vt.optional(function(){he.assert(De,"typeof "+oe+'==="number"',"invalid stencil.mask")}),De.def(oe,"|0")});case gf:return Ye(function(he){Vt.commandType(he,"object",ke,te.commandStr);var De=he.cmp||"keep",oe=he.ref||0,He="mask"in he?he.mask:-1;return Vt.commandParameter(De,Ju,Be+".cmp",te.commandStr),Vt.commandType(oe,"number",Be+".ref",te.commandStr),Vt.commandType(He,"number",Be+".mask",te.commandStr),[Ju[De],oe,He]},function(he,De,oe){var He=he.constants.compareFuncs;Vt.optional(function(){function br(){he.assert(De,Array.prototype.join.call(arguments,""),"invalid stencil.func")}br(oe+"&&typeof ",oe,'==="object"'),br('!("cmp" in ',oe,")||(",oe,".cmp in ",He,")")});var rr=De.def('"cmp" in ',oe,"?",He,"[",oe,".cmp]",":",Qu),Ar=De.def(oe,".ref|0"),Tr=De.def('"mask" in ',oe,"?",oe,".mask|0:-1");return[rr,Ar,Tr]});case Ji:case pf:return Ye(function(he){Vt.commandType(he,"object",ke,te.commandStr);var De=he.fail||"keep",oe=he.zfail||"keep",He=he.zpass||"keep";return Vt.commandParameter(De,Cu,Be+".fail",te.commandStr),Vt.commandParameter(oe,Cu,Be+".zfail",te.commandStr),Vt.commandParameter(He,Cu,Be+".zpass",te.commandStr),[Be===pf?qu:uc,Cu[De],Cu[oe],Cu[He]]},function(he,De,oe){var He=he.constants.stencilOps;Vt.optional(function(){he.assert(De,oe+"&&typeof "+oe+'==="object"',"invalid "+Be)});function rr(Ar){return Vt.optional(function(){he.assert(De,'!("'+Ar+'" in '+oe+")||("+oe+"."+Ar+" in "+He+")","invalid "+Be+"."+Ar+", must be one of "+Object.keys(Cu))}),De.def('"',Ar,'" in ',oe,"?",He,"[",oe,".",Ar,"]:",Qu)}return[Be===pf?qu:uc,rr("fail"),rr("zfail"),rr("zpass")]});case kc:return Ye(function(he){Vt.commandType(he,"object",ke,te.commandStr);var De=he.factor|0,oe=he.units|0;return Vt.commandType(De,"number",ke+".factor",te.commandStr),Vt.commandType(oe,"number",ke+".units",te.commandStr),[De,oe]},function(he,De,oe){Vt.optional(function(){he.assert(De,oe+"&&typeof "+oe+'==="object"',"invalid "+Be)});var He=De.def(oe,".factor|0"),rr=De.def(oe,".units|0");return[He,rr]});case ll:return Ye(function(he){var De=0;return he==="front"?De=uc:he==="back"&&(De=qu),Vt.command(!!De,ke,te.commandStr),De},function(he,De,oe){return Vt.optional(function(){he.assert(De,oe+'==="front"||'+oe+'==="back"',"invalid cull.face")}),De.def(oe,'==="front"?',uc,":",qu)});case hl:return Ye(function(he){return Vt.command(typeof he=="number"&&he>=ur.lineWidthDims[0]&&he<=ur.lineWidthDims[1],"invalid line width, must be a positive number between "+ur.lineWidthDims[0]+" and "+ur.lineWidthDims[1],te.commandStr),he},function(he,De,oe){return Vt.optional(function(){he.assert(De,"typeof "+oe+'==="number"&&'+oe+">="+ur.lineWidthDims[0]+"&&"+oe+"<="+ur.lineWidthDims[1],"invalid line width")}),oe});case Qf:return Ye(function(he){return Vt.commandParameter(he,Tl,ke,te.commandStr),Tl[he]},function(he,De,oe){return Vt.optional(function(){he.assert(De,oe+'==="cw"||'+oe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),De.def(oe+'==="cw"?'+th+":"+Yc)});case Pc:return Ye(function(he){return Vt.command(ci(he)&&he.length===4,"color.mask must be length 4 array",te.commandStr),he.map(function(De){return!!De})},function(he,De,oe){return Vt.optional(function(){he.assert(De,he.shared.isArrayLike+"("+oe+")&&"+oe+".length===4","invalid color.mask")}),In(4,function(He){return"!!"+oe+"["+He+"]"})});case Jf:return Ye(function(he){Vt.command(typeof he=="object"&&he,ke,te.commandStr);var De="value"in he?he.value:1,oe=!!he.invert;return Vt.command(typeof De=="number"&&De>=0&&De<=1,"sample.coverage.value must be a number between 0 and 1",te.commandStr),[De,oe]},function(he,De,oe){Vt.optional(function(){he.assert(De,oe+"&&typeof "+oe+'==="object"',"invalid sample.coverage")});var He=De.def('"value" in ',oe,"?+",oe,".value:1"),rr=De.def("!!",oe,".invert");return[He,rr]})}}),tr}function Ei(le,te){var Pe=le.static,$e=le.dynamic,tr={};return Object.keys(Pe).forEach(function(Be){var ke=Pe[Be],Ye;if(typeof ke=="number"||typeof ke=="boolean")Ye=Vi(function(){return ke});else if(typeof ke=="function"){var he=ke._reglType;he==="texture2d"||he==="textureCube"?Ye=Vi(function(De){return De.link(ke)}):he==="framebuffer"||he==="framebufferCube"?(Vt.command(ke.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Be+'"',te.commandStr),Ye=Vi(function(De){return De.link(ke.color[0])})):Vt.commandRaise('invalid data for uniform "'+Be+'"',te.commandStr)}else ci(ke)?Ye=Vi(function(De){var oe=De.global.def("[",In(ke.length,function(He){return Vt.command(typeof ke[He]=="number"||typeof ke[He]=="boolean","invalid uniform "+Be,De.commandStr),ke[He]}),"]");return oe}):Vt.commandRaise('invalid or missing data for uniform "'+Be+'"',te.commandStr);Ye.value=ke,tr[Be]=Ye}),Object.keys($e).forEach(function(Be){var ke=$e[Be];tr[Be]=zo(ke,function(Ye,he){return Ye.invoke(he,ke)})}),tr}function ua(le,te){var Pe=le.static,$e=le.dynamic,tr={};return Object.keys(Pe).forEach(function(Be){var ke=Pe[Be],Ye=ae.id(Be),he=new Z;if(fc(ke))he.state=fu,he.buffer=Cr.getBuffer(Cr.create(ke,Hu,!1,!0)),he.type=0;else{var De=Cr.getBuffer(ke);if(De)he.state=fu,he.buffer=De,he.type=0;else if(Vt.command(typeof ke=="object"&&ke,"invalid data for attribute "+Be,te.commandStr),"constant"in ke){var oe=ke.constant;he.buffer="null",he.state=cu,typeof oe=="number"?he.x=oe:(Vt.command(ci(oe)&&oe.length>0&&oe.length<=4,"invalid constant for attribute "+Be,te.commandStr),vf.forEach(function(Ln,ya){ya<oe.length&&(he[Ln]=oe[ya])}))}else{fc(ke.buffer)?De=Cr.getBuffer(Cr.create(ke.buffer,Hu,!1,!0)):De=Cr.getBuffer(ke.buffer),Vt.command(!!De,'missing buffer for attribute "'+Be+'"',te.commandStr);var He=ke.offset|0;Vt.command(He>=0,'invalid offset for attribute "'+Be+'"',te.commandStr);var rr=ke.stride|0;Vt.command(rr>=0&&rr<256,'invalid stride for attribute "'+Be+'", must be integer betweeen [0, 255]',te.commandStr);var Ar=ke.size|0;Vt.command(!("size"in ke)||Ar>0&&Ar<=4,'invalid size for attribute "'+Be+'", must be 1,2,3,4',te.commandStr);var Tr=!!ke.normalized,br=0;"type"in ke&&(Vt.commandParameter(ke.type,No,"invalid type for attribute "+Be,te.commandStr),br=No[ke.type]);var Yr=ke.divisor|0;"divisor"in ke&&(Vt.command(Yr===0||ct,'cannot specify divisor for attribute "'+Be+'", instancing not supported',te.commandStr),Vt.command(Yr>=0,'invalid divisor for attribute "'+Be+'"',te.commandStr)),Vt.optional(function(){var Ln=te.commandStr,ya=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ke).forEach(function(bn){Vt.command(ya.indexOf(bn)>=0,'unknown parameter "'+bn+'" for attribute pointer "'+Be+'" (valid parameters are '+ya+")",Ln)})}),he.buffer=De,he.state=fu,he.size=Ar,he.normalized=Tr,he.type=br||De.dtype,he.offset=He,he.stride=rr,he.divisor=Yr}}tr[Be]=Vi(function(Ln,ya){var bn=Ln.attribCache;if(Ye in bn)return bn[Ye];var zn={isStream:!1};return Object.keys(he).forEach(function(ha){zn[ha]=he[ha]}),he.buffer&&(zn.buffer=Ln.link(he.buffer),zn.type=zn.type||zn.buffer+".dtype"),bn[Ye]=zn,zn})}),Object.keys($e).forEach(function(Be){var ke=$e[Be];function Ye(he,De){var oe=he.invoke(De,ke),He=he.shared,rr=he.constants,Ar=He.isBufferArgs,Tr=He.buffer;Vt.optional(function(){he.assert(De,oe+"&&(typeof "+oe+'==="object"||typeof '+oe+'==="function")&&('+Ar+"("+oe+")||"+Tr+".getBuffer("+oe+")||"+Tr+".getBuffer("+oe+".buffer)||"+Ar+"("+oe+'.buffer)||("constant" in '+oe+"&&(typeof "+oe+'.constant==="number"||'+He.isArrayLike+"("+oe+".constant))))",'invalid dynamic attribute "'+Be+'"')});var br={isStream:De.def(!1)},Yr=new Z;Yr.state=fu,Object.keys(Yr).forEach(function(zn){br[zn]=De.def(""+Yr[zn])});var Ln=br.buffer,ya=br.type;De("if(",Ar,"(",oe,")){",br.isStream,"=true;",Ln,"=",Tr,".createStream(",Hu,",",oe,");",ya,"=",Ln,".dtype;","}else{",Ln,"=",Tr,".getBuffer(",oe,");","if(",Ln,"){",ya,"=",Ln,".dtype;",'}else if("constant" in ',oe,"){",br.state,"=",cu,";","if(typeof "+oe+'.constant === "number"){',br[vf[0]],"=",oe,".constant;",vf.slice(1).map(function(zn){return br[zn]}).join("="),"=0;","}else{",vf.map(function(zn,ha){return br[zn]+"="+oe+".constant.length>"+ha+"?"+oe+".constant["+ha+"]:0;"}).join(""),"}}else{","if(",Ar,"(",oe,".buffer)){",Ln,"=",Tr,".createStream(",Hu,",",oe,".buffer);","}else{",Ln,"=",Tr,".getBuffer(",oe,".buffer);","}",ya,'="type" in ',oe,"?",rr.glTypes,"[",oe,".type]:",Ln,".dtype;",br.normalized,"=!!",oe,".normalized;");function bn(zn){De(br[zn],"=",oe,".",zn,"|0;")}return bn("size"),bn("offset"),bn("stride"),bn("divisor"),De("}}"),De.exit("if(",br.isStream,"){",Tr,".destroyStream(",Ln,");","}"),br}tr[Be]=zo(ke,Ye)}),tr}function Ni(le,te){var Pe=le.static,$e=le.dynamic;if(ec in Pe){var tr=Pe[ec];return tr!==null&&Ur.getVAO(tr)===null&&(tr=Ur.createVAO(tr)),Vi(function(ke){return ke.link(Ur.getVAO(tr))})}else if(ec in $e){var Be=$e[ec];return zo(Be,function(ke,Ye){var he=ke.invoke(Ye,Be);return Ye.def(ke.shared.vao+".getVAO("+he+")")})}return null}function vi(le){var te=le.static,Pe=le.dynamic,$e={};return Object.keys(te).forEach(function(tr){var Be=te[tr];$e[tr]=Vi(function(ke,Ye){return typeof Be=="number"||typeof Be=="boolean"?""+Be:ke.link(Be)})}),Object.keys(Pe).forEach(function(tr){var Be=Pe[tr];$e[tr]=zo(Be,function(ke,Ye){return ke.invoke(Ye,Be)})}),$e}function Ba(le,te,Pe,$e,tr){var Be=le.static,ke=le.dynamic;Vt.optional(function(){var bn=[Wu,Mu,Xu,Yu,Vu,mf,Au,Rc,yf,ec].concat(Wt);function zn(ha){Object.keys(ha).forEach(function(ti){Vt.command(bn.indexOf(ti)>=0,'unknown parameter "'+ti+'"',tr.commandStr)})}zn(Be),zn(ke)});var Ye=xn(le,te),he=Hr(le,tr),De=_n(le,he,tr),oe=ia(le,tr),He=Kn(le,tr),rr=Bn(le,tr,Ye);function Ar(bn){var zn=De[bn];zn&&(He[bn]=zn)}Ar(_s),Ar(we(tc));var Tr=Object.keys(He).length>0,br={framebuffer:he,draw:oe,shader:rr,state:He,dirty:Tr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(br.profile=en(le,tr),br.uniforms=Ei(Pe,tr),br.drawVAO=br.scopeVAO=Ni(le,tr),!br.drawVAO&&rr.program&&!Ye&&Ae.angle_instanced_arrays){var Yr=!0,Ln=rr.program.attributes.map(function(bn){var zn=te.static[bn];return Yr=Yr&&!!zn,zn});if(Yr&&Ln.length>0){var ya=Ur.getVAO(Ur.createVAO(Ln));br.drawVAO=new Fi(null,null,null,function(bn,zn){return bn.link(ya)}),br.useVAO=!0}}return Ye?br.useVAO=!0:br.attributes=ua(te,tr),br.context=vi($e,tr),br}function Gi(le,te,Pe){var $e=le.shared,tr=$e.context,Be=le.scope();Object.keys(Pe).forEach(function(ke){te.save(tr,"."+ke);var Ye=Pe[ke],he=Ye.append(le,te);Array.isArray(he)?Be(tr,".",ke,"=[",he.join(),"];"):Be(tr,".",ke,"=",he,";")}),te(Be)}function wi(le,te,Pe,$e){var tr=le.shared,Be=tr.gl,ke=tr.framebuffer,Ye;yt&&(Ye=te.def(tr.extensions,".webgl_draw_buffers"));var he=le.constants,De=he.drawBuffer,oe=he.backBuffer,He;Pe?He=Pe.append(le,te):He=te.def(ke,".next"),$e||te("if(",He,"!==",ke,".cur){"),te("if(",He,"){",Be,".bindFramebuffer(",Al,",",He,".framebuffer);"),yt&&te(Ye,".drawBuffersWEBGL(",De,"[",He,".colorAttachments.length]);"),te("}else{",Be,".bindFramebuffer(",Al,",null);"),yt&&te(Ye,".drawBuffersWEBGL(",oe,");"),te("}",ke,".cur=",He,";"),$e||te("}")}function mo(le,te,Pe){var $e=le.shared,tr=$e.gl,Be=le.current,ke=le.next,Ye=$e.current,he=$e.next,De=le.cond(Ye,".dirty");Wt.forEach(function(oe){var He=we(oe);if(!(He in Pe.state)){var rr,Ar;if(He in ke){rr=ke[He],Ar=Be[He];var Tr=In(bt[He].length,function(Yr){return De.def(rr,"[",Yr,"]")});De(le.cond(Tr.map(function(Yr,Ln){return Yr+"!=="+Ar+"["+Ln+"]"}).join("||")).then(tr,".",Qt[He],"(",Tr,");",Tr.map(function(Yr,Ln){return Ar+"["+Ln+"]="+Yr}).join(";"),";"))}else{rr=De.def(he,".",He);var br=le.cond(rr,"!==",Ye,".",He);De(br),He in ne?br(le.cond(rr).then(tr,".enable(",ne[He],");").else(tr,".disable(",ne[He],");"),Ye,".",He,"=",rr,";"):br(tr,".",Qt[He],"(",rr,");",Ye,".",He,"=",rr,";")}}}),Object.keys(Pe.state).length===0&&De(Ye,".dirty=false;"),te(De)}function Jo(le,te,Pe,$e){var tr=le.shared,Be=le.current,ke=tr.current,Ye=tr.gl;Il(Object.keys(Pe)).forEach(function(he){var De=Pe[he];if(!($e&&!$e(De))){var oe=De.append(le,te);if(ne[he]){var He=ne[he];vu(De)?oe?te(Ye,".enable(",He,");"):te(Ye,".disable(",He,");"):te(le.cond(oe).then(Ye,".enable(",He,");").else(Ye,".disable(",He,");")),te(ke,".",he,"=",oe,";")}else if(ci(oe)){var rr=Be[he];te(Ye,".",Qt[he],"(",oe,");",oe.map(function(Ar,Tr){return rr+"["+Tr+"]="+Ar}).join(";"),";")}else te(Ye,".",Qt[he],"(",oe,");",ke,".",he,"=",oe,";")}})}function ji(le,te){ct&&(le.instancing=te.def(le.shared.extensions,".angle_instanced_arrays"))}function xa(le,te,Pe,$e,tr){var Be=le.shared,ke=le.stats,Ye=Be.current,he=Be.timer,De=Pe.profile;function oe(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var He,rr;function Ar(bn){He=te.def(),bn(He,"=",oe(),";"),typeof tr=="string"?bn(ke,".count+=",tr,";"):bn(ke,".count++;"),S&&($e?(rr=te.def(),bn(rr,"=",he,".getNumPendingQueries();")):bn(he,".beginQuery(",ke,");"))}function Tr(bn){bn(ke,".cpuTime+=",oe(),"-",He,";"),S&&($e?bn(he,".pushScopeStats(",rr,",",he,".getNumPendingQueries(),",ke,");"):bn(he,".endQuery();"))}function br(bn){var zn=te.def(Ye,".profile");te(Ye,".profile=",bn,";"),te.exit(Ye,".profile=",zn,";")}var Yr;if(De){if(vu(De)){De.enable?(Ar(te),Tr(te.exit),br("true")):br("false");return}Yr=De.append(le,te),br(Yr)}else Yr=te.def(Ye,".profile");var Ln=le.block();Ar(Ln),te("if(",Yr,"){",Ln,"}");var ya=le.block();Tr(ya),te.exit("if(",Yr,"){",ya,"}")}function Uo(le,te,Pe,$e,tr){var Be=le.shared;function ke(he){switch(he){case xf:case hu:case ac:return 2;case Gc:case bf:case Wc:return 3;case zc:case Zu:case ic:return 4;default:return 1}}function Ye(he,De,oe){var He=Be.gl,rr=te.def(he,".location"),Ar=te.def(Be.attributes,"[",rr,"]"),Tr=oe.state,br=oe.buffer,Yr=[oe.x,oe.y,oe.z,oe.w],Ln=["buffer","normalized","offset","stride"];function ya(){te("if(!",Ar,".buffer){",He,".enableVertexAttribArray(",rr,");}");var zn=oe.type,ha;if(oe.size?ha=te.def(oe.size,"||",De):ha=De,te("if(",Ar,".type!==",zn,"||",Ar,".size!==",ha,"||",Ln.map(function(eo){return Ar+"."+eo+"!=="+oe[eo]}).join("||"),"){",He,".bindBuffer(",Hu,",",br,".buffer);",He,".vertexAttribPointer(",[rr,ha,zn,oe.normalized,oe.stride,oe.offset],");",Ar,".type=",zn,";",Ar,".size=",ha,";",Ln.map(function(eo){return Ar+"."+eo+"="+oe[eo]+";"}).join(""),"}"),ct){var ti=oe.divisor;te("if(",Ar,".divisor!==",ti,"){",le.instancing,".vertexAttribDivisorANGLE(",[rr,ti],");",Ar,".divisor=",ti,";}")}}function bn(){te("if(",Ar,".buffer){",He,".disableVertexAttribArray(",rr,");",Ar,".buffer=null;","}if(",vf.map(function(zn,ha){return Ar+"."+zn+"!=="+Yr[ha]}).join("||"),"){",He,".vertexAttrib4f(",rr,",",Yr,");",vf.map(function(zn,ha){return Ar+"."+zn+"="+Yr[ha]+";"}).join(""),"}")}Tr===fu?ya():Tr===cu?bn():(te("if(",Tr,"===",fu,"){"),ya(),te("}else{"),bn(),te("}"))}$e.forEach(function(he){var De=he.name,oe=Pe.attributes[De],He;if(oe){if(!tr(oe))return;He=oe.append(le,te)}else{if(!tr(_o))return;var rr=le.scopeAttrib(De);Vt.optional(function(){le.assert(te,rr+".state","missing attribute "+De)}),He={},Object.keys(new Z).forEach(function(Ar){He[Ar]=te.def(rr,".",Ar)})}Ye(le.link(he),ke(he.info.type),He)})}function Ja(le,te,Pe,$e,tr){for(var Be=le.shared,ke=Be.gl,Ye,he=0;he<$e.length;++he){var De=$e[he],oe=De.name,He=De.info.type,rr=Pe.uniforms[oe],Ar=le.link(De),Tr=Ar+".location",br;if(rr){if(!tr(rr))continue;if(vu(rr)){var Yr=rr.value;if(Vt.command(Yr!==null&&typeof Yr!="undefined",'missing uniform "'+oe+'"',le.commandStr),He===sc||He===$u){Vt.command(typeof Yr=="function"&&(He===sc&&(Yr._reglType==="texture2d"||Yr._reglType==="framebuffer")||He===$u&&(Yr._reglType==="textureCube"||Yr._reglType==="framebufferCube")),"invalid texture for uniform "+oe,le.commandStr);var Ln=le.link(Yr._texture||Yr.color[0]._texture);te(ke,".uniform1i(",Tr,",",Ln+".bind());"),te.exit(Ln,".unbind();")}else if(He===oc||He===Xc||He===Ef){Vt.optional(function(){Vt.command(ci(Yr),"invalid matrix for uniform "+oe,le.commandStr),Vt.command(He===oc&&Yr.length===4||He===Xc&&Yr.length===9||He===Ef&&Yr.length===16,"invalid length for matrix uniform "+oe,le.commandStr)});var ya=le.global.def("new Float32Array(["+Array.prototype.slice.call(Yr)+"])"),bn=2;He===Xc?bn=3:He===Ef&&(bn=4),te(ke,".uniformMatrix",bn,"fv(",Tr,",false,",ya,");")}else{switch(He){case nc:Vt.commandType(Yr,"number","uniform "+oe,le.commandStr),Ye="1f";break;case xf:Vt.command(ci(Yr)&&Yr.length===2,"uniform "+oe,le.commandStr),Ye="2f";break;case Gc:Vt.command(ci(Yr)&&Yr.length===3,"uniform "+oe,le.commandStr),Ye="3f";break;case zc:Vt.command(ci(Yr)&&Yr.length===4,"uniform "+oe,le.commandStr),Ye="4f";break;case _l:Vt.commandType(Yr,"boolean","uniform "+oe,le.commandStr),Ye="1i";break;case Uc:Vt.commandType(Yr,"number","uniform "+oe,le.commandStr),Ye="1i";break;case ac:Vt.command(ci(Yr)&&Yr.length===2,"uniform "+oe,le.commandStr),Ye="2i";break;case hu:Vt.command(ci(Yr)&&Yr.length===2,"uniform "+oe,le.commandStr),Ye="2i";break;case Wc:Vt.command(ci(Yr)&&Yr.length===3,"uniform "+oe,le.commandStr),Ye="3i";break;case bf:Vt.command(ci(Yr)&&Yr.length===3,"uniform "+oe,le.commandStr),Ye="3i";break;case ic:Vt.command(ci(Yr)&&Yr.length===4,"uniform "+oe,le.commandStr),Ye="4i";break;case Zu:Vt.command(ci(Yr)&&Yr.length===4,"uniform "+oe,le.commandStr),Ye="4i";break}te(ke,".uniform",Ye,"(",Tr,",",ci(Yr)?Array.prototype.slice.call(Yr):Yr,");")}continue}else br=rr.append(le,te)}else{if(!tr(_o))continue;br=te.def(Be.uniforms,"[",ae.id(oe),"]")}He===sc?(Vt(!Array.isArray(br),"must specify a scalar prop for textures"),te("if(",br,"&&",br,'._reglType==="framebuffer"){',br,"=",br,".color[0];","}")):He===$u&&(Vt(!Array.isArray(br),"must specify a scalar prop for cube maps"),te("if(",br,"&&",br,'._reglType==="framebufferCube"){',br,"=",br,".color[0];","}")),Vt.optional(function(){function ts(Ou,Hh){le.assert(te,Ou,'bad data or missing for uniform "'+oe+'".  '+Hh)}function wh(Ou){Vt(!Array.isArray(br),"must not specify an array type for uniform"),ts("typeof "+br+'==="'+Ou+'"',"invalid type, expected "+Ou)}function Qs(Ou,Hh){Array.isArray(br)?Vt(br.length===Ou,"must have length "+Ou):ts(Be.isArrayLike+"("+br+")&&"+br+".length==="+Ou,"invalid vector, should have length "+Ou,le.commandStr)}function jh(Ou){Vt(!Array.isArray(br),"must not specify a value type"),ts("typeof "+br+'==="function"&&'+br+'._reglType==="texture'+(Ou===jl?"2d":"Cube")+'"',"invalid texture type",le.commandStr)}switch(He){case Uc:wh("number");break;case hu:Qs(2,"number");break;case bf:Qs(3,"number");break;case Zu:Qs(4,"number");break;case nc:wh("number");break;case xf:Qs(2,"number");break;case Gc:Qs(3,"number");break;case zc:Qs(4,"number");break;case _l:wh("boolean");break;case ac:Qs(2,"boolean");break;case Wc:Qs(3,"boolean");break;case ic:Qs(4,"boolean");break;case oc:Qs(4,"number");break;case Xc:Qs(9,"number");break;case Ef:Qs(16,"number");break;case sc:jh(jl);break;case $u:jh(Hl);break}});var zn=1;switch(He){case sc:case $u:var ha=te.def(br,"._texture");te(ke,".uniform1i(",Tr,",",ha,".bind());"),te.exit(ha,".unbind();");continue;case Uc:case _l:Ye="1i";break;case hu:case ac:Ye="2i",zn=2;break;case bf:case Wc:Ye="3i",zn=3;break;case Zu:case ic:Ye="4i",zn=4;break;case nc:Ye="1f";break;case xf:Ye="2f",zn=2;break;case Gc:Ye="3f",zn=3;break;case zc:Ye="4f",zn=4;break;case oc:Ye="Matrix2fv";break;case Xc:Ye="Matrix3fv";break;case Ef:Ye="Matrix4fv";break}if(te(ke,".uniform",Ye,"(",Tr,","),Ye.charAt(0)==="M"){var ti=Math.pow(He-oc+2,2),eo=le.global.def("new Float32Array(",ti,")");Array.isArray(br)?te("false,(",In(ti,function(ts){return eo+"["+ts+"]="+br[ts]}),",",eo,")"):te("false,(Array.isArray(",br,")||",br," instanceof Float32Array)?",br,":(",In(ti,function(ts){return eo+"["+ts+"]="+br+"["+ts+"]"}),",",eo,")")}else zn>1?te(In(zn,function(ts){return Array.isArray(br)?br[ts]:br+"["+ts+"]"})):(Vt(!Array.isArray(br),"uniform value must not be an array"),te(br));te(");")}}function Rn(le,te,Pe,$e){var tr=le.shared,Be=tr.gl,ke=tr.draw,Ye=$e.draw;function he(){var ha=Ye.elements,ti,eo=te;return ha?((ha.contextDep&&$e.contextDynamic||ha.propDep)&&(eo=Pe),ti=ha.append(le,eo)):ti=eo.def(ke,".",Yu),ti&&eo("if("+ti+")"+Be+".bindBuffer("+Vl+","+ti+".buffer.buffer);"),ti}function De(){var ha=Ye.count,ti,eo=te;return ha?((ha.contextDep&&$e.contextDynamic||ha.propDep)&&(eo=Pe),ti=ha.append(le,eo),Vt.optional(function(){ha.MISSING&&le.assert(te,"false","missing vertex count"),ha.DYNAMIC&&le.assert(eo,ti+">=0","missing vertex count")})):(ti=eo.def(ke,".",Au),Vt.optional(function(){le.assert(eo,ti+">=0","missing vertex count")})),ti}var oe=he();function He(ha){var ti=Ye[ha];return ti?ti.contextDep&&$e.contextDynamic||ti.propDep?ti.append(le,Pe):ti.append(le,te):te.def(ke,".",ha)}var rr=He(Vu),Ar=He(mf),Tr=De();if(typeof Tr=="number"){if(Tr===0)return}else Pe("if(",Tr,"){"),Pe.exit("}");var br,Yr;ct&&(br=He(Rc),Yr=le.instancing);var Ln=oe+".type",ya=Ye.elements&&vu(Ye.elements);function bn(){function ha(){Pe(Yr,".drawElementsInstancedANGLE(",[rr,Tr,Ln,Ar+"<<(("+Ln+"-"+il+")>>1)",br],");")}function ti(){Pe(Yr,".drawArraysInstancedANGLE(",[rr,Ar,Tr,br],");")}oe?ya?ha():(Pe("if(",oe,"){"),ha(),Pe("}else{"),ti(),Pe("}")):ti()}function zn(){function ha(){Pe(Be+".drawElements("+[rr,Tr,Ln,Ar+"<<(("+Ln+"-"+il+")>>1)"]+");")}function ti(){Pe(Be+".drawArrays("+[rr,Ar,Tr]+");")}oe?ya?ha():(Pe("if(",oe,"){"),ha(),Pe("}else{"),ti(),Pe("}")):ti()}ct&&(typeof br!="number"||br>=0)?typeof br=="string"?(Pe("if(",br,">0){"),bn(),Pe("}else if(",br,"<0){"),zn(),Pe("}")):bn():zn()}function Ta(le,te,Pe,$e,tr){var Be=Fr(),ke=Be.proc("body",tr);return Vt.optional(function(){Be.commandStr=te.commandStr,Be.command=Be.link(te.commandStr)}),ct&&(Be.instancing=ke.def(Be.shared.extensions,".angle_instanced_arrays")),le(Be,ke,Pe,$e),Be.compile().body}function ja(le,te,Pe,$e){ji(le,te),Pe.useVAO?Pe.drawVAO?te(le.shared.vao,".setVAO(",Pe.drawVAO.append(le,te),");"):te(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(te(le.shared.vao,".setVAO(null);"),Uo(le,te,Pe,$e.attributes,function(){return!0})),Ja(le,te,Pe,$e.uniforms,function(){return!0}),Rn(le,te,te,Pe)}function to(le,te){var Pe=le.proc("draw",1);ji(le,Pe),Gi(le,Pe,te.context),wi(le,Pe,te.framebuffer),mo(le,Pe,te),Jo(le,Pe,te.state),xa(le,Pe,te,!1,!0);var $e=te.shader.progVar.append(le,Pe);if(Pe(le.shared.gl,".useProgram(",$e,".program);"),te.shader.program)ja(le,Pe,te,te.shader.program);else{Pe(le.shared.vao,".setVAO(null);");var tr=le.global.def("{}"),Be=Pe.def($e,".id"),ke=Pe.def(tr,"[",Be,"]");Pe(le.cond(ke).then(ke,".call(this,a0);").else(ke,"=",tr,"[",Be,"]=",le.link(function(Ye){return Ta(ja,le,te,Ye,1)}),"(",$e,");",ke,".call(this,a0);"))}Object.keys(te.state).length>0&&Pe(le.shared.current,".dirty=true;")}function Iu(le,te,Pe,$e){le.batchId="a1",ji(le,te);function tr(){return!0}Uo(le,te,Pe,$e.attributes,tr),Ja(le,te,Pe,$e.uniforms,tr),Rn(le,te,te,Pe)}function lc(le,te,Pe,$e){ji(le,te);var tr=Pe.contextDep,Be=te.def(),ke="a0",Ye="a1",he=te.def();le.shared.props=he,le.batchId=Be;var De=le.scope(),oe=le.scope();te(De.entry,"for(",Be,"=0;",Be,"<",Ye,";++",Be,"){",he,"=",ke,"[",Be,"];",oe,"}",De.exit);function He(Ln){return Ln.contextDep&&tr||Ln.propDep}function rr(Ln){return!He(Ln)}if(Pe.needsContext&&Gi(le,oe,Pe.context),Pe.needsFramebuffer&&wi(le,oe,Pe.framebuffer),Jo(le,oe,Pe.state,He),Pe.profile&&He(Pe.profile)&&xa(le,oe,Pe,!1,!0),$e)Pe.useVAO?Pe.drawVAO?He(Pe.drawVAO)?oe(le.shared.vao,".setVAO(",Pe.drawVAO.append(le,oe),");"):De(le.shared.vao,".setVAO(",Pe.drawVAO.append(le,De),");"):De(le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"):(De(le.shared.vao,".setVAO(null);"),Uo(le,De,Pe,$e.attributes,rr),Uo(le,oe,Pe,$e.attributes,He)),Ja(le,De,Pe,$e.uniforms,rr),Ja(le,oe,Pe,$e.uniforms,He),Rn(le,De,oe,Pe);else{var Ar=le.global.def("{}"),Tr=Pe.shader.progVar.append(le,oe),br=oe.def(Tr,".id"),Yr=oe.def(Ar,"[",br,"]");oe(le.shared.gl,".useProgram(",Tr,".program);","if(!",Yr,"){",Yr,"=",Ar,"[",br,"]=",le.link(function(Ln){return Ta(Iu,le,Pe,Ln,2)}),"(",Tr,");}",Yr,".call(this,a0[",Be,"],",Be,");")}}function Se(le,te){var Pe=le.proc("batch",2);le.batchId="0",ji(le,Pe);var $e=!1,tr=!0;Object.keys(te.context).forEach(function(Ar){$e=$e||te.context[Ar].propDep}),$e||(Gi(le,Pe,te.context),tr=!1);var Be=te.framebuffer,ke=!1;Be?(Be.propDep?$e=ke=!0:Be.contextDep&&$e&&(ke=!0),ke||wi(le,Pe,Be)):wi(le,Pe,null),te.state.viewport&&te.state.viewport.propDep&&($e=!0);function Ye(Ar){return Ar.contextDep&&$e||Ar.propDep}mo(le,Pe,te),Jo(le,Pe,te.state,function(Ar){return!Ye(Ar)}),(!te.profile||!Ye(te.profile))&&xa(le,Pe,te,!1,"a1"),te.contextDep=$e,te.needsContext=tr,te.needsFramebuffer=ke;var he=te.shader.progVar;if(he.contextDep&&$e||he.propDep)lc(le,Pe,te,null);else{var De=he.append(le,Pe);if(Pe(le.shared.gl,".useProgram(",De,".program);"),te.shader.program)lc(le,Pe,te,te.shader.program);else{Pe(le.shared.vao,".setVAO(null);");var oe=le.global.def("{}"),He=Pe.def(De,".id"),rr=Pe.def(oe,"[",He,"]");Pe(le.cond(rr).then(rr,".call(this,a0,a1);").else(rr,"=",oe,"[",He,"]=",le.link(function(Ar){return Ta(lc,le,te,Ar,2)}),"(",De,");",rr,".call(this,a0,a1);"))}}Object.keys(te.state).length>0&&Pe(le.shared.current,".dirty=true;")}function cr(le,te){var Pe=le.proc("scope",3);le.batchId="a2";var $e=le.shared,tr=$e.current;Gi(le,Pe,te.context),te.framebuffer&&te.framebuffer.append(le,Pe),Il(Object.keys(te.state)).forEach(function(ke){var Ye=te.state[ke],he=Ye.append(le,Pe);ci(he)?he.forEach(function(De,oe){Pe.set(le.next[ke],"["+oe+"]",De)}):Pe.set($e.next,"."+ke,he)}),xa(le,Pe,te,!0,!0),[Yu,mf,Au,Rc,Vu].forEach(function(ke){var Ye=te.draw[ke];Ye&&Pe.set($e.draw,"."+ke,""+Ye.append(le,Pe))}),Object.keys(te.uniforms).forEach(function(ke){var Ye=te.uniforms[ke].append(le,Pe);Array.isArray(Ye)&&(Ye="["+Ye.join()+"]"),Pe.set($e.uniforms,"["+ae.id(ke)+"]",Ye)}),Object.keys(te.attributes).forEach(function(ke){var Ye=te.attributes[ke].append(le,Pe),he=le.scopeAttrib(ke);Object.keys(new Z).forEach(function(De){Pe.set(he,"."+De,Ye[De])})}),te.scopeVAO&&Pe.set($e.vao,".targetVAO",te.scopeVAO.append(le,Pe));function Be(ke){var Ye=te.shader[ke];Ye&&Pe.set($e.shader,"."+ke,Ye.append(le,Pe))}Be(Mu),Be(Xu),Object.keys(te.state).length>0&&(Pe(tr,".dirty=true;"),Pe.exit(tr,".dirty=true;")),Pe("a1(",le.shared.context,",a0,",le.batchId,");")}function ir(le){if(!(typeof le!="object"||ci(le))){for(var te=Object.keys(le),Pe=0;Pe<te.length;++Pe)if(Or.isDynamic(le[te[Pe]]))return!0;return!1}}function hn(le,te,Pe){var $e=te.static[Pe];if(!$e||!ir($e))return;var tr=le.global,Be=Object.keys($e),ke=!1,Ye=!1,he=!1,De=le.global.def("{}");Be.forEach(function(He){var rr=$e[He];if(Or.isDynamic(rr)){typeof rr=="function"&&(rr=$e[He]=Or.unbox(rr));var Ar=zo(rr,null);ke=ke||Ar.thisDep,he=he||Ar.propDep,Ye=Ye||Ar.contextDep}else{switch(tr(De,".",He,"="),typeof rr){case"number":tr(rr);break;case"string":tr('"',rr,'"');break;case"object":Array.isArray(rr)&&tr("[",rr.join(),"]");break;default:tr(le.link(rr));break}tr(";")}});function oe(He,rr){Be.forEach(function(Ar){var Tr=$e[Ar];if(Or.isDynamic(Tr)){var br=He.invoke(rr,Tr);rr(De,".",Ar,"=",br,";")}})}te.dynamic[Pe]=new Or.DynamicVariable(ps,{thisDep:ke,contextDep:Ye,propDep:he,ref:De,append:oe}),delete te.static[Pe]}function Ia(le,te,Pe,$e,tr){var Be=Fr();Be.stats=Be.link(tr),Object.keys(te.static).forEach(function(Ye){hn(Be,te,Ye)}),El.forEach(function(Ye){hn(Be,le,Ye)});var ke=Ba(le,te,Pe,$e,Be);return to(Be,ke),cr(Be,ke),Se(Be,ke),z(Be.compile(),{destroy:function(){ke.shader.program.destroy()}})}return{next:At,current:bt,procs:function(){var le=Fr(),te=le.proc("poll"),Pe=le.proc("refresh"),$e=le.block();te($e),Pe($e);var tr=le.shared,Be=tr.gl,ke=tr.next,Ye=tr.current;$e(Ye,".dirty=false;"),wi(le,te),wi(le,Pe,null,!0);var he;ct&&(he=le.link(ct)),Ae.oes_vertex_array_object&&Pe(le.link(Ae.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var De=0;De<ur.maxAttributes;++De){var oe=Pe.def(tr.attributes,"[",De,"]"),He=le.cond(oe,".buffer");He.then(Be,".enableVertexAttribArray(",De,");",Be,".bindBuffer(",Hu,",",oe,".buffer.buffer);",Be,".vertexAttribPointer(",De,",",oe,".size,",oe,".type,",oe,".normalized,",oe,".stride,",oe,".offset);").else(Be,".disableVertexAttribArray(",De,");",Be,".vertexAttrib4f(",De,",",oe,".x,",oe,".y,",oe,".z,",oe,".w);",oe,".buffer=null;"),Pe(He),ct&&Pe(he,".vertexAttribDivisorANGLE(",De,",",oe,".divisor);")}return Pe(le.shared.vao,".currentVAO=null;",le.shared.vao,".setVAO(",le.shared.vao,".targetVAO);"),Object.keys(ne).forEach(function(rr){var Ar=ne[rr],Tr=$e.def(ke,".",rr),br=le.block();br("if(",Tr,"){",Be,".enable(",Ar,")}else{",Be,".disable(",Ar,")}",Ye,".",rr,"=",Tr,";"),Pe(br),te("if(",Tr,"!==",Ye,".",rr,"){",br,"}")}),Object.keys(Qt).forEach(function(rr){var Ar=Qt[rr],Tr=bt[rr],br,Yr,Ln=le.block();if(Ln(Be,".",Ar,"("),ci(Tr)){var ya=Tr.length;br=le.global.def(ke,".",rr),Yr=le.global.def(Ye,".",rr),Ln(In(ya,function(bn){return br+"["+bn+"]"}),");",In(ya,function(bn){return Yr+"["+bn+"]="+br+"["+bn+"];"}).join("")),te("if(",In(ya,function(bn){return br+"["+bn+"]!=="+Yr+"["+bn+"]"}).join("||"),"){",Ln,"}")}else br=$e.def(ke,".",rr),Yr=$e.def(Ye,".",rr),Ln(br,");",Ye,".",rr,"=",br,";"),te("if(",br,"!==",Yr,"){",Ln,"}");Pe(Ln)}),le.compile()}(),compile:Ia}}function tf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Vh=34918,jc=34919,Mo=35007,bh=function(mt,ae){if(!ae.ext_disjoint_timer_query)return null;var Ae=[];function ur(){return Ae.pop()||ae.ext_disjoint_timer_query.createQueryEXT()}function Cr(ct){Ae.push(ct)}var sr=[];function vr(ct){var yt=ur();ae.ext_disjoint_timer_query.beginQueryEXT(Mo,yt),sr.push(yt),S(sr.length-1,sr.length,ct)}function Rr(){ae.ext_disjoint_timer_query.endQueryEXT(Mo)}function zr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ur=[];function Br(){return Ur.pop()||new zr}function Zr(ct){Ur.push(ct)}var v=[];function S(ct,yt,bt){var At=Br();At.startQueryIndex=ct,At.endQueryIndex=yt,At.sum=0,At.stats=bt,v.push(At)}var G=[],Z=[];function st(){var ct,yt,bt=sr.length;if(bt!==0){Z.length=Math.max(Z.length,bt+1),G.length=Math.max(G.length,bt+1),G[0]=0,Z[0]=0;var At=0;for(ct=0,yt=0;yt<sr.length;++yt){var Wt=sr[yt];ae.ext_disjoint_timer_query.getQueryObjectEXT(Wt,jc)?(At+=ae.ext_disjoint_timer_query.getQueryObjectEXT(Wt,Vh),Cr(Wt)):sr[ct++]=Wt,G[yt+1]=At,Z[yt+1]=ct}for(sr.length=ct,ct=0,yt=0;yt<v.length;++yt){var ne=v[yt],Qt=ne.startQueryIndex,we=ne.endQueryIndex;ne.sum+=G[we]-G[Qt];var ze=Z[Qt],xr=Z[we];xr===ze?(ne.stats.gpuTime+=ne.sum/1e6,Zr(ne)):(ne.startQueryIndex=ze,ne.endQueryIndex=xr,v[ct++]=ne)}v.length=ct}}return{beginQuery:vr,endQuery:Rr,pushScopeStats:S,update:st,getNumPendingQueries:function(){return sr.length},clear:function(){Ae.push.apply(Ae,sr);for(var ct=0;ct<Ae.length;ct++)ae.ext_disjoint_timer_query.deleteQueryEXT(Ae[ct]);sr.length=0,Ae.length=0},restore:function(){sr.length=0,Ae.length=0}}},sh=16384,Eh=256,Tu=1024,Ol=34962,Hc="webglcontextlost",cc="webglcontextrestored",Kc=1,uh=2,du=3;function Ll(mt,ae){for(var Ae=0;Ae<mt.length;++Ae)if(mt[Ae]===ae)return Ae;return-1}function wf(mt){var ae=na(mt);if(!ae)return null;var Ae=ae.gl,ur=Ae.getContextAttributes(),Cr=Ae.isContextLost(),sr=Qn(Ae,ae);if(!sr)return null;var vr=qn(),Rr=tf(),zr=sr.extensions,Ur=bh(Ae,zr),Br=yn(),Zr=Ae.drawingBufferWidth,v=Ae.drawingBufferHeight,S={tick:0,time:0,viewportWidth:Zr,viewportHeight:v,framebufferWidth:Zr,framebufferHeight:v,drawingBufferWidth:Zr,drawingBufferHeight:v,pixelRatio:ae.pixelRatio},G={},Z={elements:null,primitive:4,count:-1,offset:0,instances:-1},st=Oo(Ae,zr),ct=Ro(Ae,Rr,ae,bt),yt=hf(Ae,zr,st,Rr,ct);function bt(Rn){return yt.destroyBuffer(Rn)}var At=os(Ae,zr,ct,Rr),Wt=Ic(Ae,vr,Rr,ae),ne=Cc(Ae,zr,st,function(){ze.procs.poll()},S,Rr,ae),Qt=Yf(Ae,zr,st,Rr,ae),we=Vf(Ae,zr,st,ne,Qt,Rr),ze=Vc(Ae,vr,zr,st,ct,At,ne,we,G,yt,Wt,Z,S,Ur,ae),xr=Oc(Ae,we,ze.procs.poll,S,ur,zr,st),je=ze.next,Qe=Ae.canvas,qe=[],Fr=[],en=[],Hr=[ae.onDestroy],_n=null;function xn(){if(qe.length===0){Ur&&Ur.update(),_n=null;return}_n=vn.next(xn),Jo();for(var Rn=qe.length-1;Rn>=0;--Rn){var Ta=qe[Rn];Ta&&Ta(S,null,0)}Ae.flush(),Ur&&Ur.update()}function Bn(){!_n&&qe.length>0&&(_n=vn.next(xn))}function ia(){_n&&(vn.cancel(xn),_n=null)}function Kn(Rn){Rn.preventDefault(),Cr=!0,ia(),Fr.forEach(function(Ta){Ta()})}function Ei(Rn){Ae.getError(),Cr=!1,sr.restore(),Wt.restore(),ct.restore(),ne.restore(),Qt.restore(),we.restore(),yt.restore(),Ur&&Ur.restore(),ze.procs.refresh(),Bn(),en.forEach(function(Ta){Ta()})}Qe&&(Qe.addEventListener(Hc,Kn,!1),Qe.addEventListener(cc,Ei,!1));function ua(){qe.length=0,ia(),Qe&&(Qe.removeEventListener(Hc,Kn),Qe.removeEventListener(cc,Ei)),Wt.clear(),we.clear(),Qt.clear(),ne.clear(),At.clear(),ct.clear(),yt.clear(),Ur&&Ur.clear(),Hr.forEach(function(Rn){Rn()})}function Ni(Rn){Vt(!!Rn,"invalid args to regl({...})"),Vt.type(Rn,"object","invalid args to regl({...})");function Ta(tr){var Be=z({},tr);delete Be.uniforms,delete Be.attributes,delete Be.context,delete Be.vao,"stencil"in Be&&Be.stencil.op&&(Be.stencil.opBack=Be.stencil.opFront=Be.stencil.op,delete Be.stencil.op);function ke(Ye){if(Ye in Be){var he=Be[Ye];delete Be[Ye],Object.keys(he).forEach(function(De){Be[Ye+"."+De]=he[De]})}}return ke("blend"),ke("depth"),ke("cull"),ke("stencil"),ke("polygonOffset"),ke("scissor"),ke("sample"),"vao"in tr&&(Be.vao=tr.vao),Be}function ja(tr,Be){var ke={},Ye={};return Object.keys(tr).forEach(function(he){var De=tr[he];if(Or.isDynamic(De)){Ye[he]=Or.unbox(De,he);return}else if(Be&&Array.isArray(De)){for(var oe=0;oe<De.length;++oe)if(Or.isDynamic(De[oe])){Ye[he]=Or.unbox(De,he);return}}ke[he]=De}),{dynamic:Ye,static:ke}}var to=ja(Rn.context||{},!0),Iu=ja(Rn.uniforms||{},!0),lc=ja(Rn.attributes||{},!1),Se=ja(Ta(Rn),!1),cr={gpuTime:0,cpuTime:0,count:0},ir=ze.compile(Se,lc,Iu,to,cr),hn=ir.draw,Ia=ir.batch,le=ir.scope,te=[];function Pe(tr){for(;te.length<tr;)te.push(null);return te}function $e(tr,Be){var ke;if(Cr&&Vt.raise("context lost"),typeof tr=="function")return le.call(this,null,tr,0);if(typeof Be=="function")if(typeof tr=="number")for(ke=0;ke<tr;++ke)le.call(this,null,Be,ke);else if(Array.isArray(tr))for(ke=0;ke<tr.length;++ke)le.call(this,tr[ke],Be,ke);else return le.call(this,tr,Be,0);else if(typeof tr=="number"){if(tr>0)return Ia.call(this,Pe(tr|0),tr|0)}else if(Array.isArray(tr)){if(tr.length)return Ia.call(this,tr,tr.length)}else return hn.call(this,tr)}return z($e,{stats:cr,destroy:function(){ir.destroy()}})}var vi=we.setFBO=Ni({framebuffer:Or.define.call(null,Kc,"framebuffer")});function Ba(Rn,Ta){var ja=0;ze.procs.poll();var to=Ta.color;to&&(Ae.clearColor(+to[0]||0,+to[1]||0,+to[2]||0,+to[3]||0),ja|=sh),"depth"in Ta&&(Ae.clearDepth(+Ta.depth),ja|=Eh),"stencil"in Ta&&(Ae.clearStencil(Ta.stencil|0),ja|=Tu),Vt(!!ja,"called regl.clear with no buffer specified"),Ae.clear(ja)}function Gi(Rn){if(Vt(typeof Rn=="object"&&Rn,"regl.clear() takes an object as input"),"framebuffer"in Rn)if(Rn.framebuffer&&Rn.framebuffer_reglType==="framebufferCube")for(var Ta=0;Ta<6;++Ta)vi(z({framebuffer:Rn.framebuffer.faces[Ta]},Rn),Ba);else vi(Rn,Ba);else Ba(null,Rn)}function wi(Rn){Vt.type(Rn,"function","regl.frame() callback must be a function"),qe.push(Rn);function Ta(){var ja=Ll(qe,Rn);Vt(ja>=0,"cannot cancel a frame twice");function to(){var Iu=Ll(qe,to);qe[Iu]=qe[qe.length-1],qe.length-=1,qe.length<=0&&ia()}qe[ja]=to}return Bn(),{cancel:Ta}}function mo(){var Rn=je.viewport,Ta=je.scissor_box;Rn[0]=Rn[1]=Ta[0]=Ta[1]=0,S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=Rn[2]=Ta[2]=Ae.drawingBufferWidth,S.viewportHeight=S.framebufferHeight=S.drawingBufferHeight=Rn[3]=Ta[3]=Ae.drawingBufferHeight}function Jo(){S.tick+=1,S.time=xa(),mo(),ze.procs.poll()}function ji(){ne.refresh(),mo(),ze.procs.refresh(),Ur&&Ur.update()}function xa(){return(yn()-Br)/1e3}ji();function Uo(Rn,Ta){Vt.type(Ta,"function","listener callback must be a function");var ja;switch(Rn){case"frame":return wi(Ta);case"lost":ja=Fr;break;case"restore":ja=en;break;case"destroy":ja=Hr;break;default:Vt.raise("invalid event, must be one of frame,lost,restore,destroy")}return ja.push(Ta),{cancel:function(){for(var to=0;to<ja.length;++to)if(ja[to]===Ta){ja[to]=ja[ja.length-1],ja.pop();return}}}}var Ja=z(Ni,{clear:Gi,prop:Or.define.bind(null,Kc),context:Or.define.bind(null,uh),this:Or.define.bind(null,du),draw:Ni({}),buffer:function(Rn){return ct.create(Rn,Ol,!1,!1)},elements:function(Rn){return At.create(Rn,!1)},texture:ne.create2D,cube:ne.createCube,renderbuffer:Qt.create,framebuffer:we.create,framebufferCube:we.createCube,vao:yt.createVAO,attributes:ur,frame:wi,on:Uo,limits:st,hasExtension:function(Rn){return st.extensions.indexOf(Rn.toLowerCase())>=0},read:xr,destroy:ua,_gl:Ae,_refresh:ji,poll:function(){Jo(),Ur&&Ur.update()},now:xa,stats:Rr});return ae.onDone(null,Ja),Ja}return wf})},364687:function(dr,R,z){var B=z(817061)();dr.exports=B;try{regeneratorRuntime=B}catch(X){typeof globalThis=="object"?globalThis.regeneratorRuntime=B:Function("r","regeneratorRuntime = r")(B)}}}]);
